var eT=Object.defineProperty;var tT=(e,t,r)=>t in e?eT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Os=(e,t,r)=>(tT(e,typeof t!="symbol"?t+"":t,r),r);function T2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var I2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var A2={exports:{}},Ud={},R2={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fc=Symbol.for("react.element"),rT=Symbol.for("react.portal"),nT=Symbol.for("react.fragment"),iT=Symbol.for("react.strict_mode"),sT=Symbol.for("react.profiler"),oT=Symbol.for("react.provider"),aT=Symbol.for("react.context"),lT=Symbol.for("react.forward_ref"),cT=Symbol.for("react.suspense"),uT=Symbol.for("react.memo"),dT=Symbol.for("react.lazy"),L0=Symbol.iterator;function hT(e){return e===null||typeof e!="object"?null:(e=L0&&e[L0]||e["@@iterator"],typeof e=="function"?e:null)}var k2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_2=Object.assign,x2={};function Oa(e,t,r){this.props=e,this.context=t,this.refs=x2,this.updater=r||k2}Oa.prototype.isReactComponent={};Oa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Oa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function N2(){}N2.prototype=Oa.prototype;function Pg(e,t,r){this.props=e,this.context=t,this.refs=x2,this.updater=r||k2}var Bg=Pg.prototype=new N2;Bg.constructor=Pg;_2(Bg,Oa.prototype);Bg.isPureReactComponent=!0;var O0=Array.isArray,D2=Object.prototype.hasOwnProperty,$g={current:null},P2={key:!0,ref:!0,__self:!0,__source:!0};function B2(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)D2.call(t,n)&&!P2.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:fc,type:e,key:s,ref:o,props:i,_owner:$g.current}}function fT(e,t){return{$$typeof:fc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Lg(e){return typeof e=="object"&&e!==null&&e.$$typeof===fc}function pT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var M0=/\/+/g;function Oh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?pT(""+e.key):t.toString(36)}function Ru(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case fc:case rT:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Oh(o,0):n,O0(i)?(r="",e!=null&&(r=e.replace(M0,"$&/")+"/"),Ru(i,t,r,"",function(c){return c})):i!=null&&(Lg(i)&&(i=fT(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(M0,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",O0(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+Oh(s,a);o+=Ru(s,t,r,l,i)}else if(l=hT(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+Oh(s,a++),o+=Ru(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Oc(e,t,r){if(e==null)return e;var n=[],i=0;return Ru(e,n,"","",function(s){return t.call(r,s,i++)}),n}function gT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var xr={current:null},ku={transition:null},mT={ReactCurrentDispatcher:xr,ReactCurrentBatchConfig:ku,ReactCurrentOwner:$g};Ye.Children={map:Oc,forEach:function(e,t,r){Oc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Oc(e,function(){t++}),t},toArray:function(e){return Oc(e,function(t){return t})||[]},only:function(e){if(!Lg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ye.Component=Oa;Ye.Fragment=nT;Ye.Profiler=sT;Ye.PureComponent=Pg;Ye.StrictMode=iT;Ye.Suspense=cT;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mT;Ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=_2({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=$g.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)D2.call(t,l)&&!P2.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:fc,type:e.type,key:i,ref:s,props:n,_owner:o}};Ye.createContext=function(e){return e={$$typeof:aT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oT,_context:e},e.Consumer=e};Ye.createElement=B2;Ye.createFactory=function(e){var t=B2.bind(null,e);return t.type=e,t};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(e){return{$$typeof:lT,render:e}};Ye.isValidElement=Lg;Ye.lazy=function(e){return{$$typeof:dT,_payload:{_status:-1,_result:e},_init:gT}};Ye.memo=function(e,t){return{$$typeof:uT,type:e,compare:t===void 0?null:t}};Ye.startTransition=function(e){var t=ku.transition;ku.transition={};try{e()}finally{ku.transition=t}};Ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ye.useCallback=function(e,t){return xr.current.useCallback(e,t)};Ye.useContext=function(e){return xr.current.useContext(e)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(e){return xr.current.useDeferredValue(e)};Ye.useEffect=function(e,t){return xr.current.useEffect(e,t)};Ye.useId=function(){return xr.current.useId()};Ye.useImperativeHandle=function(e,t,r){return xr.current.useImperativeHandle(e,t,r)};Ye.useInsertionEffect=function(e,t){return xr.current.useInsertionEffect(e,t)};Ye.useLayoutEffect=function(e,t){return xr.current.useLayoutEffect(e,t)};Ye.useMemo=function(e,t){return xr.current.useMemo(e,t)};Ye.useReducer=function(e,t,r){return xr.current.useReducer(e,t,r)};Ye.useRef=function(e){return xr.current.useRef(e)};Ye.useState=function(e){return xr.current.useState(e)};Ye.useSyncExternalStore=function(e,t,r){return xr.current.useSyncExternalStore(e,t,r)};Ye.useTransition=function(){return xr.current.useTransition()};Ye.version="18.2.0";R2.exports=Ye;var S=R2.exports;const x=hc(S),Og=T2({__proto__:null,default:x},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yT=S,vT=Symbol.for("react.element"),ET=Symbol.for("react.fragment"),CT=Object.prototype.hasOwnProperty,ST=yT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wT={key:!0,ref:!0,__self:!0,__source:!0};function $2(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)CT.call(t,n)&&!wT.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:vT,type:e,key:s,ref:o,props:i,_owner:ST.current}}Ud.Fragment=ET;Ud.jsx=$2;Ud.jsxs=$2;A2.exports=Ud;var te=A2.exports,tp={},L2={exports:{}},rn={},O2={exports:{}},M2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,q){var W=$.length;$.push(q);e:for(;0<W;){var ie=W-1>>>1,ae=$[ie];if(0<i(ae,q))$[ie]=q,$[W]=ae,W=ie;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var q=$[0],W=$.pop();if(W!==q){$[0]=W;e:for(var ie=0,ae=$.length,ve=ae>>>1;ie<ve;){var Ee=2*(ie+1)-1,Ie=$[Ee],Re=Ee+1,Ae=$[Re];if(0>i(Ie,W))Re<ae&&0>i(Ae,Ie)?($[ie]=Ae,$[Re]=W,ie=Re):($[ie]=Ie,$[Ee]=W,ie=Ee);else if(Re<ae&&0>i(Ae,W))$[ie]=Ae,$[Re]=W,ie=Re;else break e}}return q}function i($,q){var W=$.sortIndex-q.sortIndex;return W!==0?W:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,g=!1,y=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var q=r(c);q!==null;){if(q.callback===null)n(c);else if(q.startTime<=$)n(c),q.sortIndex=q.expirationTime,t(l,q);else break;q=r(c)}}function b($){if(y=!1,C($),!g)if(r(l)!==null)g=!0,F(k);else{var q=r(c);q!==null&&M(b,q.startTime-$)}}function k($,q){g=!1,y&&(y=!1,p(_),_=-1),f=!0;var W=h;try{for(C(q),d=r(l);d!==null&&(!(d.expirationTime>q)||$&&!P());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var ae=ie(d.expirationTime<=q);q=e.unstable_now(),typeof ae=="function"?d.callback=ae:d===r(l)&&n(l),C(q)}else n(l);d=r(l)}if(d!==null)var ve=!0;else{var Ee=r(c);Ee!==null&&M(b,Ee.startTime-q),ve=!1}return ve}finally{d=null,h=W,f=!1}}var m=!1,R=null,_=-1,H=5,A=-1;function P(){return!(e.unstable_now()-A<H)}function B(){if(R!==null){var $=e.unstable_now();A=$;var q=!0;try{q=R(!0,$)}finally{q?N():(m=!1,R=null)}}else m=!1}var N;if(typeof v=="function")N=function(){v(B)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,O=z.port2;z.port1.onmessage=B,N=function(){O.postMessage(null)}}else N=function(){E(B,0)};function F($){R=$,m||(m=!0,N())}function M($,q){_=E(function(){$(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,F(k))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var q=3;break;default:q=h}var W=h;h=q;try{return $()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=h;h=$;try{return q()}finally{h=W}},e.unstable_scheduleCallback=function($,q,W){var ie=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ie+W:ie):W=ie,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=W+ae,$={id:u++,callback:q,priorityLevel:$,startTime:W,expirationTime:ae,sortIndex:-1},W>ie?($.sortIndex=W,t(c,$),r(l)===null&&$===r(c)&&(y?(p(_),_=-1):y=!0,M(b,W-ie))):($.sortIndex=ae,t(l,$),g||f||(g=!0,F(k))),$},e.unstable_shouldYield=P,e.unstable_wrapCallback=function($){var q=h;return function(){var W=h;h=q;try{return $.apply(this,arguments)}finally{h=W}}}})(M2);O2.exports=M2;var bT=O2.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U2=S,en=bT;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H2=new Set,Fl={};function yo(e,t){Sa(e,t),Sa(e+"Capture",t)}function Sa(e,t){for(Fl[e]=t,e=0;e<t.length;e++)H2.add(t[e])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rp=Object.prototype.hasOwnProperty,TT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U0={},H0={};function IT(e){return rp.call(H0,e)?!0:rp.call(U0,e)?!1:TT.test(e)?H0[e]=!0:(U0[e]=!0,!1)}function AT(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function RT(e,t,r,n){if(t===null||typeof t>"u"||AT(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Nr(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fr[e]=new Nr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fr[t]=new Nr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fr[e]=new Nr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fr[e]=new Nr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fr[e]=new Nr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fr[e]=new Nr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fr[e]=new Nr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fr[e]=new Nr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fr[e]=new Nr(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mg=/[\-:]([a-z])/g;function Ug(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mg,Ug);fr[t]=new Nr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mg,Ug);fr[t]=new Nr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mg,Ug);fr[t]=new Nr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fr[e]=new Nr(e,1,!1,e.toLowerCase(),null,!1,!1)});fr.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fr[e]=new Nr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Hg(e,t,r,n){var i=fr.hasOwnProperty(t)?fr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(RT(t,r,i,n)&&(r=null),n||i===null?IT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Oi=U2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Mc=Symbol.for("react.element"),qo=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),np=Symbol.for("react.profiler"),F2=Symbol.for("react.provider"),j2=Symbol.for("react.context"),jg=Symbol.for("react.forward_ref"),ip=Symbol.for("react.suspense"),sp=Symbol.for("react.suspense_list"),Vg=Symbol.for("react.memo"),is=Symbol.for("react.lazy"),V2=Symbol.for("react.offscreen"),F0=Symbol.iterator;function Ga(e){return e===null||typeof e!="object"?null:(e=F0&&e[F0]||e["@@iterator"],typeof e=="function"?e:null)}var xt=Object.assign,Mh;function ml(e){if(Mh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mh=t&&t[1]||""}return`
`+Mh+e}var Uh=!1;function Hh(e,t){if(!e||Uh)return"";Uh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?ml(e):""}function kT(e){switch(e.tag){case 5:return ml(e.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return e=Hh(e.type,!1),e;case 11:return e=Hh(e.type.render,!1),e;case 1:return e=Hh(e.type,!0),e;default:return""}}function op(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zo:return"Fragment";case qo:return"Portal";case np:return"Profiler";case Fg:return"StrictMode";case ip:return"Suspense";case sp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case j2:return(e.displayName||"Context")+".Consumer";case F2:return(e._context.displayName||"Context")+".Provider";case jg:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vg:return t=e.displayName||null,t!==null?t:op(e.type)||"Memo";case is:t=e._payload,e=e._init;try{return op(e(t))}catch{}}return null}function _T(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return op(t);case 8:return t===Fg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function q2(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xT(e){var t=q2(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Uc(e){e._valueTracker||(e._valueTracker=xT(e))}function z2(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=q2(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Yu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ap(e,t){var r=t.checked;return xt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function j0(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Rs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function K2(e,t){t=t.checked,t!=null&&Hg(e,"checked",t,!1)}function lp(e,t){K2(e,t);var r=Rs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?cp(e,t.type,r):t.hasOwnProperty("defaultValue")&&cp(e,t.type,Rs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function V0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function cp(e,t,r){(t!=="number"||Yu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var yl=Array.isArray;function aa(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Rs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function up(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return xt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function q0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(oe(92));if(yl(r)){if(1<r.length)throw Error(oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Rs(r)}}function G2(e,t){var r=Rs(t.value),n=Rs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function z0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W2(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dp(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W2(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Hc,Y2=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Hc=Hc||document.createElement("div"),Hc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Hc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function jl(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Il={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NT=["Webkit","ms","Moz","O"];Object.keys(Il).forEach(function(e){NT.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Il[t]=Il[e]})});function Q2(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Il.hasOwnProperty(e)&&Il[e]?(""+t).trim():t+"px"}function X2(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Q2(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var DT=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hp(e,t){if(t){if(DT[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function fp(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pp=null;function qg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var gp=null,la=null,ca=null;function K0(e){if(e=mc(e)){if(typeof gp!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=qd(t),gp(e.stateNode,e.type,t))}}function Z2(e){la?ca?ca.push(e):ca=[e]:la=e}function J2(){if(la){var e=la,t=ca;if(ca=la=null,K0(e),t)for(e=0;e<t.length;e++)K0(t[e])}}function eE(e,t){return e(t)}function tE(){}var Fh=!1;function rE(e,t,r){if(Fh)return e(t,r);Fh=!0;try{return eE(e,t,r)}finally{Fh=!1,(la!==null||ca!==null)&&(tE(),J2())}}function Vl(e,t){var r=e.stateNode;if(r===null)return null;var n=qd(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(oe(231,t,typeof r));return r}var mp=!1;if(xi)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){mp=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{mp=!1}function PT(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Al=!1,Qu=null,Xu=!1,yp=null,BT={onError:function(e){Al=!0,Qu=e}};function $T(e,t,r,n,i,s,o,a,l){Al=!1,Qu=null,PT.apply(BT,arguments)}function LT(e,t,r,n,i,s,o,a,l){if($T.apply(this,arguments),Al){if(Al){var c=Qu;Al=!1,Qu=null}else throw Error(oe(198));Xu||(Xu=!0,yp=c)}}function vo(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G0(e){if(vo(e)!==e)throw Error(oe(188))}function OT(e){var t=e.alternate;if(!t){if(t=vo(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return G0(i),e;if(s===n)return G0(i),t;s=s.sibling}throw Error(oe(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(r.alternate!==n)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?e:t}function iE(e){return e=OT(e),e!==null?sE(e):null}function sE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sE(e);if(t!==null)return t;e=e.sibling}return null}var oE=en.unstable_scheduleCallback,W0=en.unstable_cancelCallback,MT=en.unstable_shouldYield,UT=en.unstable_requestPaint,Ot=en.unstable_now,HT=en.unstable_getCurrentPriorityLevel,zg=en.unstable_ImmediatePriority,aE=en.unstable_UserBlockingPriority,Zu=en.unstable_NormalPriority,FT=en.unstable_LowPriority,lE=en.unstable_IdlePriority,Hd=null,ci=null;function jT(e){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(Hd,e,void 0,(e.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:zT,VT=Math.log,qT=Math.LN2;function zT(e){return e>>>=0,e===0?32:31-(VT(e)/qT|0)|0}var Fc=64,jc=4194304;function vl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ju(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=vl(a):(s&=o,s!==0&&(n=vl(s)))}else o=r&~i,o!==0?n=vl(o):s!==0&&(n=vl(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-On(t),i=1<<r,n|=e[r],t&=~i;return n}function KT(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GT(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-On(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=KT(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function vp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cE(){var e=Fc;return Fc<<=1,!(Fc&4194240)&&(Fc=64),e}function jh(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function pc(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-On(t),e[t]=r}function WT(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-On(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Kg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-On(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var ut=0;function uE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dE,Gg,hE,fE,pE,Ep=!1,Vc=[],ys=null,vs=null,Es=null,ql=new Map,zl=new Map,as=[],YT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Y0(e,t){switch(e){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":ql.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(t.pointerId)}}function Ya(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=mc(t),t!==null&&Gg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function QT(e,t,r,n,i){switch(t){case"focusin":return ys=Ya(ys,e,t,r,n,i),!0;case"dragenter":return vs=Ya(vs,e,t,r,n,i),!0;case"mouseover":return Es=Ya(Es,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return ql.set(s,Ya(ql.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,zl.set(s,Ya(zl.get(s)||null,e,t,r,n,i)),!0}return!1}function gE(e){var t=Ys(e.target);if(t!==null){var r=vo(t);if(r!==null){if(t=r.tag,t===13){if(t=nE(r),t!==null){e.blockedOn=t,pE(e.priority,function(){hE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _u(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Cp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);pp=n,r.target.dispatchEvent(n),pp=null}else return t=mc(r),t!==null&&Gg(t),e.blockedOn=r,!1;t.shift()}return!0}function Q0(e,t,r){_u(e)&&r.delete(t)}function XT(){Ep=!1,ys!==null&&_u(ys)&&(ys=null),vs!==null&&_u(vs)&&(vs=null),Es!==null&&_u(Es)&&(Es=null),ql.forEach(Q0),zl.forEach(Q0)}function Qa(e,t){e.blockedOn===t&&(e.blockedOn=null,Ep||(Ep=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,XT)))}function Kl(e){function t(i){return Qa(i,e)}if(0<Vc.length){Qa(Vc[0],e);for(var r=1;r<Vc.length;r++){var n=Vc[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ys!==null&&Qa(ys,e),vs!==null&&Qa(vs,e),Es!==null&&Qa(Es,e),ql.forEach(t),zl.forEach(t),r=0;r<as.length;r++)n=as[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<as.length&&(r=as[0],r.blockedOn===null);)gE(r),r.blockedOn===null&&as.shift()}var ua=Oi.ReactCurrentBatchConfig,ed=!0;function ZT(e,t,r,n){var i=ut,s=ua.transition;ua.transition=null;try{ut=1,Wg(e,t,r,n)}finally{ut=i,ua.transition=s}}function JT(e,t,r,n){var i=ut,s=ua.transition;ua.transition=null;try{ut=4,Wg(e,t,r,n)}finally{ut=i,ua.transition=s}}function Wg(e,t,r,n){if(ed){var i=Cp(e,t,r,n);if(i===null)Zh(e,t,n,td,r),Y0(e,n);else if(QT(i,e,t,r,n))n.stopPropagation();else if(Y0(e,n),t&4&&-1<YT.indexOf(e)){for(;i!==null;){var s=mc(i);if(s!==null&&dE(s),s=Cp(e,t,r,n),s===null&&Zh(e,t,n,td,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Zh(e,t,n,null,r)}}var td=null;function Cp(e,t,r,n){if(td=null,e=qg(n),e=Ys(e),e!==null)if(t=vo(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return td=e,null}function mE(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HT()){case zg:return 1;case aE:return 4;case Zu:case FT:return 16;case lE:return 536870912;default:return 16}default:return 16}}var ds=null,Yg=null,xu=null;function yE(){if(xu)return xu;var e,t=Yg,r=t.length,n,i="value"in ds?ds.value:ds.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return xu=i.slice(e,1<n?1-n:void 0)}function Nu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qc(){return!0}function X0(){return!1}function nn(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qc:X0,this.isPropagationStopped=X0,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),t}var Ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qg=nn(Ma),gc=xt({},Ma,{view:0,detail:0}),e6=nn(gc),Vh,qh,Xa,Fd=xt({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xa&&(Xa&&e.type==="mousemove"?(Vh=e.screenX-Xa.screenX,qh=e.screenY-Xa.screenY):qh=Vh=0,Xa=e),Vh)},movementY:function(e){return"movementY"in e?e.movementY:qh}}),Z0=nn(Fd),t6=xt({},Fd,{dataTransfer:0}),r6=nn(t6),n6=xt({},gc,{relatedTarget:0}),zh=nn(n6),i6=xt({},Ma,{animationName:0,elapsedTime:0,pseudoElement:0}),s6=nn(i6),o6=xt({},Ma,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),a6=nn(o6),l6=xt({},Ma,{data:0}),J0=nn(l6),c6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=d6[e])?!!t[e]:!1}function Xg(){return h6}var f6=xt({},gc,{key:function(e){if(e.key){var t=c6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?u6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(e){return e.type==="keypress"?Nu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),p6=nn(f6),g6=xt({},Fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ey=nn(g6),m6=xt({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),y6=nn(m6),v6=xt({},Ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),E6=nn(v6),C6=xt({},Fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),S6=nn(C6),w6=[9,13,27,32],Zg=xi&&"CompositionEvent"in window,Rl=null;xi&&"documentMode"in document&&(Rl=document.documentMode);var b6=xi&&"TextEvent"in window&&!Rl,vE=xi&&(!Zg||Rl&&8<Rl&&11>=Rl),ty=" ",ry=!1;function EE(e,t){switch(e){case"keyup":return w6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ko=!1;function T6(e,t){switch(e){case"compositionend":return CE(t);case"keypress":return t.which!==32?null:(ry=!0,ty);case"textInput":return e=t.data,e===ty&&ry?null:e;default:return null}}function I6(e,t){if(Ko)return e==="compositionend"||!Zg&&EE(e,t)?(e=yE(),xu=Yg=ds=null,Ko=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vE&&t.locale!=="ko"?null:t.data;default:return null}}var A6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ny(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!A6[e.type]:t==="textarea"}function SE(e,t,r,n){Z2(n),t=rd(t,"onChange"),0<t.length&&(r=new Qg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var kl=null,Gl=null;function R6(e){DE(e,0)}function jd(e){var t=Yo(e);if(z2(t))return e}function k6(e,t){if(e==="change")return t}var wE=!1;if(xi){var Kh;if(xi){var Gh="oninput"in document;if(!Gh){var iy=document.createElement("div");iy.setAttribute("oninput","return;"),Gh=typeof iy.oninput=="function"}Kh=Gh}else Kh=!1;wE=Kh&&(!document.documentMode||9<document.documentMode)}function sy(){kl&&(kl.detachEvent("onpropertychange",bE),Gl=kl=null)}function bE(e){if(e.propertyName==="value"&&jd(Gl)){var t=[];SE(t,Gl,e,qg(e)),rE(R6,t)}}function _6(e,t,r){e==="focusin"?(sy(),kl=t,Gl=r,kl.attachEvent("onpropertychange",bE)):e==="focusout"&&sy()}function x6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jd(Gl)}function N6(e,t){if(e==="click")return jd(t)}function D6(e,t){if(e==="input"||e==="change")return jd(t)}function P6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Hn=typeof Object.is=="function"?Object.is:P6;function Wl(e,t){if(Hn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!rp.call(t,i)||!Hn(e[i],t[i]))return!1}return!0}function oy(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ay(e,t){var r=oy(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=oy(r)}}function TE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?TE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function IE(){for(var e=window,t=Yu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Yu(e.document)}return t}function Jg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function B6(e){var t=IE(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&TE(r.ownerDocument.documentElement,r)){if(n!==null&&Jg(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=ay(r,s);var o=ay(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $6=xi&&"documentMode"in document&&11>=document.documentMode,Go=null,Sp=null,_l=null,wp=!1;function ly(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;wp||Go==null||Go!==Yu(n)||(n=Go,"selectionStart"in n&&Jg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),_l&&Wl(_l,n)||(_l=n,n=rd(Sp,"onSelect"),0<n.length&&(t=new Qg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Go)))}function zc(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Wo={animationend:zc("Animation","AnimationEnd"),animationiteration:zc("Animation","AnimationIteration"),animationstart:zc("Animation","AnimationStart"),transitionend:zc("Transition","TransitionEnd")},Wh={},AE={};xi&&(AE=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Vd(e){if(Wh[e])return Wh[e];if(!Wo[e])return e;var t=Wo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in AE)return Wh[e]=t[r];return e}var RE=Vd("animationend"),kE=Vd("animationiteration"),_E=Vd("animationstart"),xE=Vd("transitionend"),NE=new Map,cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(e,t){NE.set(e,t),yo(t,[e])}for(var Yh=0;Yh<cy.length;Yh++){var Qh=cy[Yh],L6=Qh.toLowerCase(),O6=Qh[0].toUpperCase()+Qh.slice(1);Ds(L6,"on"+O6)}Ds(RE,"onAnimationEnd");Ds(kE,"onAnimationIteration");Ds(_E,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(xE,"onTransitionEnd");Sa("onMouseEnter",["mouseout","mouseover"]);Sa("onMouseLeave",["mouseout","mouseover"]);Sa("onPointerEnter",["pointerout","pointerover"]);Sa("onPointerLeave",["pointerout","pointerover"]);yo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));yo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));yo("onBeforeInput",["compositionend","keypress","textInput","paste"]);yo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));yo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M6=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function uy(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,LT(n,t,void 0,e),e.currentTarget=null}function DE(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;uy(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;uy(i,a,c),s=l}}}if(Xu)throw e=yp,Xu=!1,yp=null,e}function St(e,t){var r=t[Rp];r===void 0&&(r=t[Rp]=new Set);var n=e+"__bubble";r.has(n)||(PE(t,e,2,!1),r.add(n))}function Xh(e,t,r){var n=0;t&&(n|=4),PE(r,e,n,t)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function Yl(e){if(!e[Kc]){e[Kc]=!0,H2.forEach(function(r){r!=="selectionchange"&&(M6.has(r)||Xh(r,!1,e),Xh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kc]||(t[Kc]=!0,Xh("selectionchange",!1,t))}}function PE(e,t,r,n){switch(mE(t)){case 1:var i=ZT;break;case 4:i=JT;break;default:i=Wg}r=i.bind(null,t,r,e),i=void 0,!mp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Zh(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ys(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}rE(function(){var c=s,u=qg(r),d=[];e:{var h=NE.get(e);if(h!==void 0){var f=Qg,g=e;switch(e){case"keypress":if(Nu(r)===0)break e;case"keydown":case"keyup":f=p6;break;case"focusin":g="focus",f=zh;break;case"focusout":g="blur",f=zh;break;case"beforeblur":case"afterblur":f=zh;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Z0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=r6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=y6;break;case RE:case kE:case _E:f=s6;break;case xE:f=E6;break;case"scroll":f=e6;break;case"wheel":f=S6;break;case"copy":case"cut":case"paste":f=a6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=ey}var y=(t&4)!==0,E=!y&&e==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var v=c,C;v!==null;){C=v;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,p!==null&&(b=Vl(v,p),b!=null&&y.push(Ql(v,b,C)))),E)break;v=v.return}0<y.length&&(h=new f(h,g,null,r,u),d.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==pp&&(g=r.relatedTarget||r.fromElement)&&(Ys(g)||g[Ni]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=c,g=g?Ys(g):null,g!==null&&(E=vo(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(y=Z0,b="onMouseLeave",p="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(y=ey,b="onPointerLeave",p="onPointerEnter",v="pointer"),E=f==null?h:Yo(f),C=g==null?h:Yo(g),h=new y(b,v+"leave",f,r,u),h.target=E,h.relatedTarget=C,b=null,Ys(u)===c&&(y=new y(p,v+"enter",g,r,u),y.target=C,y.relatedTarget=E,b=y),E=b,f&&g)t:{for(y=f,p=g,v=0,C=y;C;C=_o(C))v++;for(C=0,b=p;b;b=_o(b))C++;for(;0<v-C;)y=_o(y),v--;for(;0<C-v;)p=_o(p),C--;for(;v--;){if(y===p||p!==null&&y===p.alternate)break t;y=_o(y),p=_o(p)}y=null}else y=null;f!==null&&dy(d,h,f,y,!1),g!==null&&E!==null&&dy(d,E,g,y,!0)}}e:{if(h=c?Yo(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=k6;else if(ny(h))if(wE)k=D6;else{k=x6;var m=_6}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=N6);if(k&&(k=k(e,c))){SE(d,k,r,u);break e}m&&m(e,h,c),e==="focusout"&&(m=h._wrapperState)&&m.controlled&&h.type==="number"&&cp(h,"number",h.value)}switch(m=c?Yo(c):window,e){case"focusin":(ny(m)||m.contentEditable==="true")&&(Go=m,Sp=c,_l=null);break;case"focusout":_l=Sp=Go=null;break;case"mousedown":wp=!0;break;case"contextmenu":case"mouseup":case"dragend":wp=!1,ly(d,r,u);break;case"selectionchange":if($6)break;case"keydown":case"keyup":ly(d,r,u)}var R;if(Zg)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ko?EE(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(vE&&r.locale!=="ko"&&(Ko||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ko&&(R=yE()):(ds=u,Yg="value"in ds?ds.value:ds.textContent,Ko=!0)),m=rd(c,_),0<m.length&&(_=new J0(_,e,null,r,u),d.push({event:_,listeners:m}),R?_.data=R:(R=CE(r),R!==null&&(_.data=R)))),(R=b6?T6(e,r):I6(e,r))&&(c=rd(c,"onBeforeInput"),0<c.length&&(u=new J0("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=R))}DE(d,t)})}function Ql(e,t,r){return{instance:e,listener:t,currentTarget:r}}function rd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vl(e,r),s!=null&&n.unshift(Ql(e,s,i)),s=Vl(e,t),s!=null&&n.push(Ql(e,s,i))),e=e.return}return n}function _o(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dy(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=Vl(r,s),l!=null&&o.unshift(Ql(r,l,a))):i||(l=Vl(r,s),l!=null&&o.push(Ql(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var U6=/\r\n?/g,H6=/\u0000|\uFFFD/g;function hy(e){return(typeof e=="string"?e:""+e).replace(U6,`
`).replace(H6,"")}function Gc(e,t,r){if(t=hy(t),hy(e)!==t&&r)throw Error(oe(425))}function nd(){}var bp=null,Tp=null;function Ip(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ap=typeof setTimeout=="function"?setTimeout:void 0,F6=typeof clearTimeout=="function"?clearTimeout:void 0,fy=typeof Promise=="function"?Promise:void 0,j6=typeof queueMicrotask=="function"?queueMicrotask:typeof fy<"u"?function(e){return fy.resolve(null).then(e).catch(V6)}:Ap;function V6(e){setTimeout(function(){throw e})}function Jh(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Kl(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Kl(t)}function Cs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function py(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ua=Math.random().toString(36).slice(2),ii="__reactFiber$"+Ua,Xl="__reactProps$"+Ua,Ni="__reactContainer$"+Ua,Rp="__reactEvents$"+Ua,q6="__reactListeners$"+Ua,z6="__reactHandles$"+Ua;function Ys(e){var t=e[ii];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ni]||r[ii]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=py(e);e!==null;){if(r=e[ii])return r;e=py(e)}return t}e=r,r=e.parentNode}return null}function mc(e){return e=e[ii]||e[Ni],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function qd(e){return e[Xl]||null}var kp=[],Qo=-1;function Ps(e){return{current:e}}function Tt(e){0>Qo||(e.current=kp[Qo],kp[Qo]=null,Qo--)}function Et(e,t){Qo++,kp[Qo]=e.current,e.current=t}var ks={},Cr=Ps(ks),Hr=Ps(!1),lo=ks;function wa(e,t){var r=e.type.contextTypes;if(!r)return ks;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fr(e){return e=e.childContextTypes,e!=null}function id(){Tt(Hr),Tt(Cr)}function gy(e,t,r){if(Cr.current!==ks)throw Error(oe(168));Et(Cr,t),Et(Hr,r)}function BE(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(oe(108,_T(e)||"Unknown",i));return xt({},r,n)}function sd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ks,lo=Cr.current,Et(Cr,e),Et(Hr,Hr.current),!0}function my(e,t,r){var n=e.stateNode;if(!n)throw Error(oe(169));r?(e=BE(e,t,lo),n.__reactInternalMemoizedMergedChildContext=e,Tt(Hr),Tt(Cr),Et(Cr,e)):Tt(Hr),Et(Hr,r)}var bi=null,zd=!1,ef=!1;function $E(e){bi===null?bi=[e]:bi.push(e)}function K6(e){zd=!0,$E(e)}function Bs(){if(!ef&&bi!==null){ef=!0;var e=0,t=ut;try{var r=bi;for(ut=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}bi=null,zd=!1}catch(i){throw bi!==null&&(bi=bi.slice(e+1)),oE(zg,Bs),i}finally{ut=t,ef=!1}}return null}var Xo=[],Zo=0,od=null,ad=0,fn=[],pn=0,co=null,Ii=1,Ai="";function Vs(e,t){Xo[Zo++]=ad,Xo[Zo++]=od,od=e,ad=t}function LE(e,t,r){fn[pn++]=Ii,fn[pn++]=Ai,fn[pn++]=co,co=e;var n=Ii;e=Ai;var i=32-On(n)-1;n&=~(1<<i),r+=1;var s=32-On(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ii=1<<32-On(t)+i|r<<i|n,Ai=s+e}else Ii=1<<s|r<<i|n,Ai=e}function em(e){e.return!==null&&(Vs(e,1),LE(e,1,0))}function tm(e){for(;e===od;)od=Xo[--Zo],Xo[Zo]=null,ad=Xo[--Zo],Xo[Zo]=null;for(;e===co;)co=fn[--pn],fn[pn]=null,Ai=fn[--pn],fn[pn]=null,Ii=fn[--pn],fn[pn]=null}var Xr=null,Yr=null,Rt=!1,Bn=null;function OE(e,t){var r=yn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function yy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=Cs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=co!==null?{id:Ii,overflow:Ai}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=yn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xr=e,Yr=null,!0):!1;default:return!1}}function _p(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xp(e){if(Rt){var t=Yr;if(t){var r=t;if(!yy(e,t)){if(_p(e))throw Error(oe(418));t=Cs(r.nextSibling);var n=Xr;t&&yy(e,t)?OE(n,r):(e.flags=e.flags&-4097|2,Rt=!1,Xr=e)}}else{if(_p(e))throw Error(oe(418));e.flags=e.flags&-4097|2,Rt=!1,Xr=e}}}function vy(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xr=e}function Wc(e){if(e!==Xr)return!1;if(!Rt)return vy(e),Rt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ip(e.type,e.memoizedProps)),t&&(t=Yr)){if(_p(e))throw ME(),Error(oe(418));for(;t;)OE(e,t),t=Cs(t.nextSibling)}if(vy(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yr=Cs(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yr=null}}else Yr=Xr?Cs(e.stateNode.nextSibling):null;return!0}function ME(){for(var e=Yr;e;)e=Cs(e.nextSibling)}function ba(){Yr=Xr=null,Rt=!1}function rm(e){Bn===null?Bn=[e]:Bn.push(e)}var G6=Oi.ReactCurrentBatchConfig;function Nn(e,t){if(e&&e.defaultProps){t=xt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var ld=Ps(null),cd=null,Jo=null,nm=null;function im(){nm=Jo=cd=null}function sm(e){var t=ld.current;Tt(ld),e._currentValue=t}function Np(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function da(e,t){cd=e,nm=Jo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ur=!0),e.firstContext=null)}function Sn(e){var t=e._currentValue;if(nm!==e)if(e={context:e,memoizedValue:t,next:null},Jo===null){if(cd===null)throw Error(oe(308));Jo=e,cd.dependencies={lanes:0,firstContext:e}}else Jo=Jo.next=e;return t}var Qs=null;function om(e){Qs===null?Qs=[e]:Qs.push(e)}function UE(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,om(t)):(r.next=i.next,i.next=r),t.interleaved=r,Di(e,n)}function Di(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ss=!1;function am(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function HE(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _i(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ss(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,rt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Di(e,r)}return i=n.interleaved,i===null?(t.next=t,om(n)):(t.next=i.next,i.next=t),n.interleaved=t,Di(e,r)}function Du(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kg(e,r)}}function Ey(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ud(e,t,r,n){var i=e.updateQueue;ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,y=a;switch(h=t,f=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=xt({},d,h);break e;case 2:ss=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);ho|=o,e.lanes=o,e.memoizedState=d}}function Cy(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(oe(191,i));i.call(n)}}}var FE=new U2.Component().refs;function Dp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:xt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Kd={isMounted:function(e){return(e=e._reactInternals)?vo(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=_r(),i=bs(e),s=_i(n,i);s.payload=t,r!=null&&(s.callback=r),t=Ss(e,s,i),t!==null&&(Mn(t,e,i,n),Du(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=_r(),i=bs(e),s=_i(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=Ss(e,s,i),t!==null&&(Mn(t,e,i,n),Du(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_r(),n=bs(e),i=_i(r,n);i.tag=2,t!=null&&(i.callback=t),t=Ss(e,i,n),t!==null&&(Mn(t,e,n,r),Du(t,e,n))}};function Sy(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Wl(r,n)||!Wl(i,s):!0}function jE(e,t,r){var n=!1,i=ks,s=t.contextType;return typeof s=="object"&&s!==null?s=Sn(s):(i=Fr(t)?lo:Cr.current,n=t.contextTypes,s=(n=n!=null)?wa(e,i):ks),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kd,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function wy(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Kd.enqueueReplaceState(t,t.state,null)}function Pp(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=FE,am(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Sn(s):(s=Fr(t)?lo:Cr.current,i.context=wa(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Dp(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Kd.enqueueReplaceState(i,i.state,null),ud(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Za(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var n=r.stateNode}if(!n)throw Error(oe(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===FE&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,e))}return e}function Yc(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function by(e){var t=e._init;return t(e._payload)}function VE(e){function t(p,v){if(e){var C=p.deletions;C===null?(p.deletions=[v],p.flags|=16):C.push(v)}}function r(p,v){if(!e)return null;for(;v!==null;)t(p,v),v=v.sibling;return null}function n(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=Ts(p,v),p.index=0,p.sibling=null,p}function s(p,v,C){return p.index=C,e?(C=p.alternate,C!==null?(C=C.index,C<v?(p.flags|=2,v):C):(p.flags|=2,v)):(p.flags|=1048576,v)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,v,C,b){return v===null||v.tag!==6?(v=lf(C,p.mode,b),v.return=p,v):(v=i(v,C),v.return=p,v)}function l(p,v,C,b){var k=C.type;return k===zo?u(p,v,C.props.children,b,C.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===is&&by(k)===v.type)?(b=i(v,C.props),b.ref=Za(p,v,C),b.return=p,b):(b=Mu(C.type,C.key,C.props,null,p.mode,b),b.ref=Za(p,v,C),b.return=p,b)}function c(p,v,C,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==C.containerInfo||v.stateNode.implementation!==C.implementation?(v=cf(C,p.mode,b),v.return=p,v):(v=i(v,C.children||[]),v.return=p,v)}function u(p,v,C,b,k){return v===null||v.tag!==7?(v=io(C,p.mode,b,k),v.return=p,v):(v=i(v,C),v.return=p,v)}function d(p,v,C){if(typeof v=="string"&&v!==""||typeof v=="number")return v=lf(""+v,p.mode,C),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Mc:return C=Mu(v.type,v.key,v.props,null,p.mode,C),C.ref=Za(p,null,v),C.return=p,C;case qo:return v=cf(v,p.mode,C),v.return=p,v;case is:var b=v._init;return d(p,b(v._payload),C)}if(yl(v)||Ga(v))return v=io(v,p.mode,C,null),v.return=p,v;Yc(p,v)}return null}function h(p,v,C,b){var k=v!==null?v.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return k!==null?null:a(p,v,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Mc:return C.key===k?l(p,v,C,b):null;case qo:return C.key===k?c(p,v,C,b):null;case is:return k=C._init,h(p,v,k(C._payload),b)}if(yl(C)||Ga(C))return k!==null?null:u(p,v,C,b,null);Yc(p,C)}return null}function f(p,v,C,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(C)||null,a(v,p,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Mc:return p=p.get(b.key===null?C:b.key)||null,l(v,p,b,k);case qo:return p=p.get(b.key===null?C:b.key)||null,c(v,p,b,k);case is:var m=b._init;return f(p,v,C,m(b._payload),k)}if(yl(b)||Ga(b))return p=p.get(C)||null,u(v,p,b,k,null);Yc(v,b)}return null}function g(p,v,C,b){for(var k=null,m=null,R=v,_=v=0,H=null;R!==null&&_<C.length;_++){R.index>_?(H=R,R=null):H=R.sibling;var A=h(p,R,C[_],b);if(A===null){R===null&&(R=H);break}e&&R&&A.alternate===null&&t(p,R),v=s(A,v,_),m===null?k=A:m.sibling=A,m=A,R=H}if(_===C.length)return r(p,R),Rt&&Vs(p,_),k;if(R===null){for(;_<C.length;_++)R=d(p,C[_],b),R!==null&&(v=s(R,v,_),m===null?k=R:m.sibling=R,m=R);return Rt&&Vs(p,_),k}for(R=n(p,R);_<C.length;_++)H=f(R,p,_,C[_],b),H!==null&&(e&&H.alternate!==null&&R.delete(H.key===null?_:H.key),v=s(H,v,_),m===null?k=H:m.sibling=H,m=H);return e&&R.forEach(function(P){return t(p,P)}),Rt&&Vs(p,_),k}function y(p,v,C,b){var k=Ga(C);if(typeof k!="function")throw Error(oe(150));if(C=k.call(C),C==null)throw Error(oe(151));for(var m=k=null,R=v,_=v=0,H=null,A=C.next();R!==null&&!A.done;_++,A=C.next()){R.index>_?(H=R,R=null):H=R.sibling;var P=h(p,R,A.value,b);if(P===null){R===null&&(R=H);break}e&&R&&P.alternate===null&&t(p,R),v=s(P,v,_),m===null?k=P:m.sibling=P,m=P,R=H}if(A.done)return r(p,R),Rt&&Vs(p,_),k;if(R===null){for(;!A.done;_++,A=C.next())A=d(p,A.value,b),A!==null&&(v=s(A,v,_),m===null?k=A:m.sibling=A,m=A);return Rt&&Vs(p,_),k}for(R=n(p,R);!A.done;_++,A=C.next())A=f(R,p,_,A.value,b),A!==null&&(e&&A.alternate!==null&&R.delete(A.key===null?_:A.key),v=s(A,v,_),m===null?k=A:m.sibling=A,m=A);return e&&R.forEach(function(B){return t(p,B)}),Rt&&Vs(p,_),k}function E(p,v,C,b){if(typeof C=="object"&&C!==null&&C.type===zo&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Mc:e:{for(var k=C.key,m=v;m!==null;){if(m.key===k){if(k=C.type,k===zo){if(m.tag===7){r(p,m.sibling),v=i(m,C.props.children),v.return=p,p=v;break e}}else if(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===is&&by(k)===m.type){r(p,m.sibling),v=i(m,C.props),v.ref=Za(p,m,C),v.return=p,p=v;break e}r(p,m);break}else t(p,m);m=m.sibling}C.type===zo?(v=io(C.props.children,p.mode,b,C.key),v.return=p,p=v):(b=Mu(C.type,C.key,C.props,null,p.mode,b),b.ref=Za(p,v,C),b.return=p,p=b)}return o(p);case qo:e:{for(m=C.key;v!==null;){if(v.key===m)if(v.tag===4&&v.stateNode.containerInfo===C.containerInfo&&v.stateNode.implementation===C.implementation){r(p,v.sibling),v=i(v,C.children||[]),v.return=p,p=v;break e}else{r(p,v);break}else t(p,v);v=v.sibling}v=cf(C,p.mode,b),v.return=p,p=v}return o(p);case is:return m=C._init,E(p,v,m(C._payload),b)}if(yl(C))return g(p,v,C,b);if(Ga(C))return y(p,v,C,b);Yc(p,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,v!==null&&v.tag===6?(r(p,v.sibling),v=i(v,C),v.return=p,p=v):(r(p,v),v=lf(C,p.mode,b),v.return=p,p=v),o(p)):r(p,v)}return E}var Ta=VE(!0),qE=VE(!1),yc={},ui=Ps(yc),Zl=Ps(yc),Jl=Ps(yc);function Xs(e){if(e===yc)throw Error(oe(174));return e}function lm(e,t){switch(Et(Jl,t),Et(Zl,e),Et(ui,yc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:dp(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=dp(t,e)}Tt(ui),Et(ui,t)}function Ia(){Tt(ui),Tt(Zl),Tt(Jl)}function zE(e){Xs(Jl.current);var t=Xs(ui.current),r=dp(t,e.type);t!==r&&(Et(Zl,e),Et(ui,r))}function cm(e){Zl.current===e&&(Tt(ui),Tt(Zl))}var kt=Ps(0);function dd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var tf=[];function um(){for(var e=0;e<tf.length;e++)tf[e]._workInProgressVersionPrimary=null;tf.length=0}var Pu=Oi.ReactCurrentDispatcher,rf=Oi.ReactCurrentBatchConfig,uo=0,_t=null,Vt=null,Jt=null,hd=!1,xl=!1,ec=0,W6=0;function gr(){throw Error(oe(321))}function dm(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Hn(e[r],t[r]))return!1;return!0}function hm(e,t,r,n,i,s){if(uo=s,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Pu.current=e===null||e.memoizedState===null?Z6:J6,e=r(n,i),xl){s=0;do{if(xl=!1,ec=0,25<=s)throw Error(oe(301));s+=1,Jt=Vt=null,t.updateQueue=null,Pu.current=e3,e=r(n,i)}while(xl)}if(Pu.current=fd,t=Vt!==null&&Vt.next!==null,uo=0,Jt=Vt=_t=null,hd=!1,t)throw Error(oe(300));return e}function fm(){var e=ec!==0;return ec=0,e}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?_t.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function wn(){if(Vt===null){var e=_t.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Jt===null?_t.memoizedState:Jt.next;if(t!==null)Jt=t,Vt=e;else{if(e===null)throw Error(oe(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Jt===null?_t.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function tc(e,t){return typeof t=="function"?t(e):t}function nf(e){var t=wn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=Vt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((uo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,_t.lanes|=u,ho|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Hn(n,t.memoizedState)||(Ur=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,_t.lanes|=s,ho|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function sf(e){var t=wn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Hn(s,t.memoizedState)||(Ur=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function KE(){}function GE(e,t){var r=_t,n=wn(),i=t(),s=!Hn(n.memoizedState,i);if(s&&(n.memoizedState=i,Ur=!0),n=n.queue,pm(QE.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Jt!==null&&Jt.memoizedState.tag&1){if(r.flags|=2048,rc(9,YE.bind(null,r,n,i,t),void 0,null),rr===null)throw Error(oe(349));uo&30||WE(r,t,i)}return i}function WE(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function YE(e,t,r,n){t.value=r,t.getSnapshot=n,XE(t)&&ZE(e)}function QE(e,t,r){return r(function(){XE(t)&&ZE(e)})}function XE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Hn(e,r)}catch{return!0}}function ZE(e){var t=Di(e,1);t!==null&&Mn(t,e,1,-1)}function Ty(e){var t=Yn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:e},t.queue=e,e=e.dispatch=X6.bind(null,_t,e),[t.memoizedState,e]}function rc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function JE(){return wn().memoizedState}function Bu(e,t,r,n){var i=Yn();_t.flags|=e,i.memoizedState=rc(1|t,r,void 0,n===void 0?null:n)}function Gd(e,t,r,n){var i=wn();n=n===void 0?null:n;var s=void 0;if(Vt!==null){var o=Vt.memoizedState;if(s=o.destroy,n!==null&&dm(n,o.deps)){i.memoizedState=rc(t,r,s,n);return}}_t.flags|=e,i.memoizedState=rc(1|t,r,s,n)}function Iy(e,t){return Bu(8390656,8,e,t)}function pm(e,t){return Gd(2048,8,e,t)}function eC(e,t){return Gd(4,2,e,t)}function tC(e,t){return Gd(4,4,e,t)}function rC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nC(e,t,r){return r=r!=null?r.concat([e]):null,Gd(4,4,rC.bind(null,t,e),r)}function gm(){}function iC(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dm(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function sC(e,t){var r=wn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dm(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function oC(e,t,r){return uo&21?(Hn(r,t)||(r=cE(),_t.lanes|=r,ho|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ur=!0),e.memoizedState=r)}function Y6(e,t){var r=ut;ut=r!==0&&4>r?r:4,e(!0);var n=rf.transition;rf.transition={};try{e(!1),t()}finally{ut=r,rf.transition=n}}function aC(){return wn().memoizedState}function Q6(e,t,r){var n=bs(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},lC(e))cC(t,r);else if(r=UE(e,t,r,n),r!==null){var i=_r();Mn(r,e,n,i),uC(r,t,n)}}function X6(e,t,r){var n=bs(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(lC(e))cC(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Hn(a,o)){var l=t.interleaved;l===null?(i.next=i,om(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=UE(e,t,i,n),r!==null&&(i=_r(),Mn(r,e,n,i),uC(r,t,n))}}function lC(e){var t=e.alternate;return e===_t||t!==null&&t===_t}function cC(e,t){xl=hd=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function uC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Kg(e,r)}}var fd={readContext:Sn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},Z6={readContext:Sn,useCallback:function(e,t){return Yn().memoizedState=[e,t===void 0?null:t],e},useContext:Sn,useEffect:Iy,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Bu(4194308,4,rC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Bu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bu(4,2,e,t)},useMemo:function(e,t){var r=Yn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Yn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Q6.bind(null,_t,e),[n.memoizedState,e]},useRef:function(e){var t=Yn();return e={current:e},t.memoizedState=e},useState:Ty,useDebugValue:gm,useDeferredValue:function(e){return Yn().memoizedState=e},useTransition:function(){var e=Ty(!1),t=e[0];return e=Y6.bind(null,e[1]),Yn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=_t,i=Yn();if(Rt){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=t(),rr===null)throw Error(oe(349));uo&30||WE(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Iy(QE.bind(null,n,s,e),[e]),n.flags|=2048,rc(9,YE.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Yn(),t=rr.identifierPrefix;if(Rt){var r=Ai,n=Ii;r=(n&~(1<<32-On(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ec++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=W6++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},J6={readContext:Sn,useCallback:iC,useContext:Sn,useEffect:pm,useImperativeHandle:nC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:sC,useReducer:nf,useRef:JE,useState:function(){return nf(tc)},useDebugValue:gm,useDeferredValue:function(e){var t=wn();return oC(t,Vt.memoizedState,e)},useTransition:function(){var e=nf(tc)[0],t=wn().memoizedState;return[e,t]},useMutableSource:KE,useSyncExternalStore:GE,useId:aC,unstable_isNewReconciler:!1},e3={readContext:Sn,useCallback:iC,useContext:Sn,useEffect:pm,useImperativeHandle:nC,useInsertionEffect:eC,useLayoutEffect:tC,useMemo:sC,useReducer:sf,useRef:JE,useState:function(){return sf(tc)},useDebugValue:gm,useDeferredValue:function(e){var t=wn();return Vt===null?t.memoizedState=e:oC(t,Vt.memoizedState,e)},useTransition:function(){var e=sf(tc)[0],t=wn().memoizedState;return[e,t]},useMutableSource:KE,useSyncExternalStore:GE,useId:aC,unstable_isNewReconciler:!1};function Aa(e,t){try{var r="",n=t;do r+=kT(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function of(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Bp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var t3=typeof WeakMap=="function"?WeakMap:Map;function dC(e,t,r){r=_i(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){gd||(gd=!0,qp=n),Bp(e,t)},r}function hC(e,t,r){r=_i(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Bp(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Bp(e,t),typeof n!="function"&&(ws===null?ws=new Set([this]):ws.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ay(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new t3;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=g3.bind(null,e,t,r),t.then(e,e))}function Ry(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ky(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=_i(-1,1),t.tag=2,Ss(r,t,1))),r.lanes|=1),e)}var r3=Oi.ReactCurrentOwner,Ur=!1;function Rr(e,t,r,n){t.child=e===null?qE(t,null,r,n):Ta(t,e.child,r,n)}function _y(e,t,r,n,i){r=r.render;var s=t.ref;return da(t,i),n=hm(e,t,r,n,s,i),r=fm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(Rt&&r&&em(t),t.flags|=1,Rr(e,t,n,i),t.child)}function xy(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!bm(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,fC(e,t,s,n,i)):(e=Mu(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Wl,r(o,n)&&e.ref===t.ref)return Pi(e,t,i)}return t.flags|=1,e=Ts(s,n),e.ref=t.ref,e.return=t,t.child=e}function fC(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(Wl(s,n)&&e.ref===t.ref)if(Ur=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Ur=!0);else return t.lanes=e.lanes,Pi(e,t,i)}return $p(e,t,r,n,i)}function pC(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ta,Kr),Kr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(ta,Kr),Kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Et(ta,Kr),Kr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Et(ta,Kr),Kr|=n;return Rr(e,t,i,r),t.child}function gC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function $p(e,t,r,n,i){var s=Fr(r)?lo:Cr.current;return s=wa(t,s),da(t,i),r=hm(e,t,r,n,s,i),n=fm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(Rt&&n&&em(t),t.flags|=1,Rr(e,t,r,i),t.child)}function Ny(e,t,r,n,i){if(Fr(r)){var s=!0;sd(t)}else s=!1;if(da(t,i),t.stateNode===null)$u(e,t),jE(t,r,n),Pp(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Sn(c):(c=Fr(r)?lo:Cr.current,c=wa(t,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&wy(t,o,n,c),ss=!1;var h=t.memoizedState;o.state=h,ud(t,n,o,i),l=t.memoizedState,a!==n||h!==l||Hr.current||ss?(typeof u=="function"&&(Dp(t,r,u,n),l=t.memoizedState),(a=ss||Sy(t,r,a,n,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,HE(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Nn(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Sn(l):(l=Fr(r)?lo:Cr.current,l=wa(t,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&wy(t,o,n,l),ss=!1,h=t.memoizedState,o.state=h,ud(t,n,o,i);var g=t.memoizedState;a!==d||h!==g||Hr.current||ss?(typeof f=="function"&&(Dp(t,r,f,n),g=t.memoizedState),(c=ss||Sy(t,r,c,n,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Lp(e,t,r,n,s,i)}function Lp(e,t,r,n,i,s){gC(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&my(t,r,!1),Pi(e,t,s);n=t.stateNode,r3.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ta(t,e.child,null,s),t.child=Ta(t,null,a,s)):Rr(e,t,a,s),t.memoizedState=n.state,i&&my(t,r,!0),t.child}function mC(e){var t=e.stateNode;t.pendingContext?gy(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gy(e,t.context,!1),lm(e,t.containerInfo)}function Dy(e,t,r,n,i){return ba(),rm(i),t.flags|=256,Rr(e,t,r,n),t.child}var Op={dehydrated:null,treeContext:null,retryLane:0};function Mp(e){return{baseLanes:e,cachePool:null,transitions:null}}function yC(e,t,r){var n=t.pendingProps,i=kt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Et(kt,i&1),e===null)return xp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Qd(o,n,0,null),e=io(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Mp(r),t.memoizedState=Op,e):mm(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return n3(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Ts(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ts(a,s):(s=io(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Mp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Op,n}return s=e.child,e=s.sibling,n=Ts(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function mm(e,t){return t=Qd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qc(e,t,r,n){return n!==null&&rm(n),Ta(t,e.child,null,r),e=mm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function n3(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=of(Error(oe(422))),Qc(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Qd({mode:"visible",children:n.children},i,0,null),s=io(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Ta(t,e.child,null,o),t.child.memoizedState=Mp(o),t.memoizedState=Op,s);if(!(t.mode&1))return Qc(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(oe(419)),n=of(s,n,void 0),Qc(e,t,o,n)}if(a=(o&e.childLanes)!==0,Ur||a){if(n=rr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Di(e,i),Mn(n,e,i,-1))}return wm(),n=of(Error(oe(421))),Qc(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=m3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Yr=Cs(i.nextSibling),Xr=t,Rt=!0,Bn=null,e!==null&&(fn[pn++]=Ii,fn[pn++]=Ai,fn[pn++]=co,Ii=e.id,Ai=e.overflow,co=t),t=mm(t,n.children),t.flags|=4096,t)}function Py(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Np(e.return,t,r)}function af(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function vC(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Rr(e,t,n.children,r),n=kt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Py(e,r,t);else if(e.tag===19)Py(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Et(kt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&dd(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),af(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dd(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}af(t,!0,r,null,s);break;case"together":af(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $u(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),ho|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,r=Ts(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ts(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function i3(e,t,r){switch(t.tag){case 3:mC(t),ba();break;case 5:zE(t);break;case 1:Fr(t.type)&&sd(t);break;case 4:lm(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Et(ld,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Et(kt,kt.current&1),t.flags|=128,null):r&t.child.childLanes?yC(e,t,r):(Et(kt,kt.current&1),e=Pi(e,t,r),e!==null?e.sibling:null);Et(kt,kt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return vC(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(kt,kt.current),n)break;return null;case 22:case 23:return t.lanes=0,pC(e,t,r)}return Pi(e,t,r)}var EC,Up,CC,SC;EC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Up=function(){};CC=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Xs(ui.current);var s=null;switch(r){case"input":i=ap(e,i),n=ap(e,n),s=[];break;case"select":i=xt({},i,{value:void 0}),n=xt({},n,{value:void 0}),s=[];break;case"textarea":i=up(e,i),n=up(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=nd)}hp(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Fl.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Fl.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&St("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};SC=function(e,t,r,n){r!==n&&(t.flags|=4)};function Ja(e,t){if(!Rt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function mr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function s3(e,t,r){var n=t.pendingProps;switch(tm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(t),null;case 1:return Fr(t.type)&&id(),mr(t),null;case 3:return n=t.stateNode,Ia(),Tt(Hr),Tt(Cr),um(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(Gp(Bn),Bn=null))),Up(e,t),mr(t),null;case 5:cm(t);var i=Xs(Jl.current);if(r=t.type,e!==null&&t.stateNode!=null)CC(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(oe(166));return mr(t),null}if(e=Xs(ui.current),Wc(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[ii]=t,n[Xl]=s,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(i=0;i<El.length;i++)St(El[i],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":j0(n,s),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},St("invalid",n);break;case"textarea":q0(n,s),St("invalid",n)}hp(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Gc(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Gc(n.textContent,a,e),i=["children",""+a]):Fl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",n)}switch(r){case"input":Uc(n),V0(n,s,!0);break;case"textarea":Uc(n),z0(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=nd)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W2(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ii]=t,e[Xl]=n,EC(e,t,!1,!1),t.stateNode=e;e:{switch(o=fp(r,n),r){case"dialog":St("cancel",e),St("close",e),i=n;break;case"iframe":case"object":case"embed":St("load",e),i=n;break;case"video":case"audio":for(i=0;i<El.length;i++)St(El[i],e);i=n;break;case"source":St("error",e),i=n;break;case"img":case"image":case"link":St("error",e),St("load",e),i=n;break;case"details":St("toggle",e),i=n;break;case"input":j0(e,n),i=ap(e,n),St("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=xt({},n,{value:void 0}),St("invalid",e);break;case"textarea":q0(e,n),i=up(e,n),St("invalid",e);break;default:i=n}hp(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?X2(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y2(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&jl(e,l):typeof l=="number"&&jl(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Fl.hasOwnProperty(s)?l!=null&&s==="onScroll"&&St("scroll",e):l!=null&&Hg(e,s,l,o))}switch(r){case"input":Uc(e),V0(e,n,!1);break;case"textarea":Uc(e),z0(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Rs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?aa(e,!!n.multiple,s,!1):n.defaultValue!=null&&aa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=nd)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mr(t),null;case 6:if(e&&t.stateNode!=null)SC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(oe(166));if(r=Xs(Jl.current),Xs(ui.current),Wc(t)){if(n=t.stateNode,r=t.memoizedProps,n[ii]=t,(s=n.nodeValue!==r)&&(e=Xr,e!==null))switch(e.tag){case 3:Gc(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gc(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ii]=t,t.stateNode=n}return mr(t),null;case 13:if(Tt(kt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Rt&&Yr!==null&&t.mode&1&&!(t.flags&128))ME(),ba(),t.flags|=98560,s=!1;else if(s=Wc(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(oe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[ii]=t}else ba(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mr(t),s=!1}else Bn!==null&&(Gp(Bn),Bn=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?qt===0&&(qt=3):wm())),t.updateQueue!==null&&(t.flags|=4),mr(t),null);case 4:return Ia(),Up(e,t),e===null&&Yl(t.stateNode.containerInfo),mr(t),null;case 10:return sm(t.type._context),mr(t),null;case 17:return Fr(t.type)&&id(),mr(t),null;case 19:if(Tt(kt),s=t.memoizedState,s===null)return mr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)Ja(s,!1);else{if(qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dd(e),o!==null){for(t.flags|=128,Ja(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Et(kt,kt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ot()>Ra&&(t.flags|=128,n=!0,Ja(s,!1),t.lanes=4194304)}else{if(!n)if(e=dd(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ja(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Rt)return mr(t),null}else 2*Ot()-s.renderingStartTime>Ra&&r!==1073741824&&(t.flags|=128,n=!0,Ja(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ot(),t.sibling=null,r=kt.current,Et(kt,n?r&1|2:r&1),t):(mr(t),null);case 22:case 23:return Sm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kr&1073741824&&(mr(t),t.subtreeFlags&6&&(t.flags|=8192)):mr(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function o3(e,t){switch(tm(t),t.tag){case 1:return Fr(t.type)&&id(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ia(),Tt(Hr),Tt(Cr),um(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cm(t),null;case 13:if(Tt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));ba()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(kt),null;case 4:return Ia(),null;case 10:return sm(t.type._context),null;case 22:case 23:return Sm(),null;case 24:return null;default:return null}}var Xc=!1,yr=!1,a3=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function ea(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Bt(e,t,n)}else r.current=null}function Hp(e,t,r){try{r()}catch(n){Bt(e,t,n)}}var By=!1;function l3(e,t){if(bp=ed,e=IE(),Jg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++c===i&&(a=o),h===s&&++u===n&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Tp={focusedElem:e,selectionRange:r},ed=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,E=g.memoizedState,p=t.stateNode,v=p.getSnapshotBeforeUpdate(t.elementType===t.type?y:Nn(t.type,y),E);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(b){Bt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return g=By,By=!1,g}function Nl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Hp(t,r,s)}i=i.next}while(i!==n)}}function Wd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Fp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wC(e){var t=e.alternate;t!==null&&(e.alternate=null,wC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ii],delete t[Xl],delete t[Rp],delete t[q6],delete t[z6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function bC(e){return e.tag===5||e.tag===3||e.tag===4}function $y(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=nd));else if(n!==4&&(e=e.child,e!==null))for(jp(e,t,r),e=e.sibling;e!==null;)jp(e,t,r),e=e.sibling}function Vp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Vp(e,t,r),e=e.sibling;e!==null;)Vp(e,t,r),e=e.sibling}var ur=null,Dn=!1;function Gi(e,t,r){for(r=r.child;r!==null;)TC(e,t,r),r=r.sibling}function TC(e,t,r){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(Hd,r)}catch{}switch(r.tag){case 5:yr||ea(r,t);case 6:var n=ur,i=Dn;ur=null,Gi(e,t,r),ur=n,Dn=i,ur!==null&&(Dn?(e=ur,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ur.removeChild(r.stateNode));break;case 18:ur!==null&&(Dn?(e=ur,r=r.stateNode,e.nodeType===8?Jh(e.parentNode,r):e.nodeType===1&&Jh(e,r),Kl(e)):Jh(ur,r.stateNode));break;case 4:n=ur,i=Dn,ur=r.stateNode.containerInfo,Dn=!0,Gi(e,t,r),ur=n,Dn=i;break;case 0:case 11:case 14:case 15:if(!yr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Hp(r,t,o),i=i.next}while(i!==n)}Gi(e,t,r);break;case 1:if(!yr&&(ea(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Bt(r,t,a)}Gi(e,t,r);break;case 21:Gi(e,t,r);break;case 22:r.mode&1?(yr=(n=yr)||r.memoizedState!==null,Gi(e,t,r),yr=n):Gi(e,t,r);break;default:Gi(e,t,r)}}function Ly(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new a3),t.forEach(function(n){var i=y3.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function _n(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ur=a.stateNode,Dn=!1;break e;case 3:ur=a.stateNode.containerInfo,Dn=!0;break e;case 4:ur=a.stateNode.containerInfo,Dn=!0;break e}a=a.return}if(ur===null)throw Error(oe(160));TC(s,o,i),ur=null,Dn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Bt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)IC(t,e),t=t.sibling}function IC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),qn(e),n&4){try{Nl(3,e,e.return),Wd(3,e)}catch(y){Bt(e,e.return,y)}try{Nl(5,e,e.return)}catch(y){Bt(e,e.return,y)}}break;case 1:_n(t,e),qn(e),n&512&&r!==null&&ea(r,r.return);break;case 5:if(_n(t,e),qn(e),n&512&&r!==null&&ea(r,r.return),e.flags&32){var i=e.stateNode;try{jl(i,"")}catch(y){Bt(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&K2(i,s),fp(a,o);var c=fp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?X2(i,d):u==="dangerouslySetInnerHTML"?Y2(i,d):u==="children"?jl(i,d):Hg(i,u,d,c)}switch(a){case"input":lp(i,s);break;case"textarea":G2(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?aa(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?aa(i,!!s.multiple,s.defaultValue,!0):aa(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xl]=s}catch(y){Bt(e,e.return,y)}}break;case 6:if(_n(t,e),qn(e),n&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){Bt(e,e.return,y)}}break;case 3:if(_n(t,e),qn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Kl(t.containerInfo)}catch(y){Bt(e,e.return,y)}break;case 4:_n(t,e),qn(e);break;case 13:_n(t,e),qn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Em=Ot())),n&4&&Ly(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(yr=(c=yr)||u,_n(t,e),yr=c):_n(t,e),qn(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(Ce=e,u=e.child;u!==null;){for(d=Ce=u;Ce!==null;){switch(h=Ce,f=h.child,h.tag){case 0:case 11:case 14:case 15:Nl(4,h,h.return);break;case 1:ea(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){Bt(n,r,y)}}break;case 5:ea(h,h.return);break;case 22:if(h.memoizedState!==null){My(d);continue}}f!==null?(f.return=h,Ce=f):My(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Q2("display",o))}catch(y){Bt(e,e.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Bt(e,e.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(t,e),qn(e),n&4&&Ly(e);break;case 21:break;default:_n(t,e),qn(e)}}function qn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(bC(r)){var n=r;break e}r=r.return}throw Error(oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(jl(i,""),n.flags&=-33);var s=$y(e);Vp(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=$y(e);jp(e,a,o);break;default:throw Error(oe(161))}}catch(l){Bt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function c3(e,t,r){Ce=e,AC(e)}function AC(e,t,r){for(var n=(e.mode&1)!==0;Ce!==null;){var i=Ce,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||Xc;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||yr;a=Xc;var c=yr;if(Xc=o,(yr=l)&&!c)for(Ce=i;Ce!==null;)o=Ce,l=o.child,o.tag===22&&o.memoizedState!==null?Uy(i):l!==null?(l.return=o,Ce=l):Uy(i);for(;s!==null;)Ce=s,AC(s),s=s.sibling;Ce=i,Xc=a,yr=c}Oy(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ce=s):Oy(e)}}function Oy(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:yr||Wd(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!yr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Nn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Cy(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Cy(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Kl(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}yr||t.flags&512&&Fp(t)}catch(h){Bt(t,t.return,h)}}if(t===e){Ce=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function My(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ce=r;break}Ce=t.return}}function Uy(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Wd(4,t)}catch(l){Bt(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Bt(t,i,l)}}var s=t.return;try{Fp(t)}catch(l){Bt(t,s,l)}break;case 5:var o=t.return;try{Fp(t)}catch(l){Bt(t,o,l)}}}catch(l){Bt(t,t.return,l)}if(t===e){Ce=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Ce=a;break}Ce=t.return}}var u3=Math.ceil,pd=Oi.ReactCurrentDispatcher,ym=Oi.ReactCurrentOwner,Cn=Oi.ReactCurrentBatchConfig,rt=0,rr=null,jt=null,hr=0,Kr=0,ta=Ps(0),qt=0,nc=null,ho=0,Yd=0,vm=0,Dl=null,$r=null,Em=0,Ra=1/0,Ci=null,gd=!1,qp=null,ws=null,Zc=!1,hs=null,md=0,Pl=0,zp=null,Lu=-1,Ou=0;function _r(){return rt&6?Ot():Lu!==-1?Lu:Lu=Ot()}function bs(e){return e.mode&1?rt&2&&hr!==0?hr&-hr:G6.transition!==null?(Ou===0&&(Ou=cE()),Ou):(e=ut,e!==0||(e=window.event,e=e===void 0?16:mE(e.type)),e):1}function Mn(e,t,r,n){if(50<Pl)throw Pl=0,zp=null,Error(oe(185));pc(e,r,n),(!(rt&2)||e!==rr)&&(e===rr&&(!(rt&2)&&(Yd|=r),qt===4&&ls(e,hr)),jr(e,n),r===1&&rt===0&&!(t.mode&1)&&(Ra=Ot()+500,zd&&Bs()))}function jr(e,t){var r=e.callbackNode;GT(e,t);var n=Ju(e,e===rr?hr:0);if(n===0)r!==null&&W0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&W0(r),t===1)e.tag===0?K6(Hy.bind(null,e)):$E(Hy.bind(null,e)),j6(function(){!(rt&6)&&Bs()}),r=null;else{switch(uE(n)){case 1:r=zg;break;case 4:r=aE;break;case 16:r=Zu;break;case 536870912:r=lE;break;default:r=Zu}r=BC(r,RC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function RC(e,t){if(Lu=-1,Ou=0,rt&6)throw Error(oe(327));var r=e.callbackNode;if(ha()&&e.callbackNode!==r)return null;var n=Ju(e,e===rr?hr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=yd(e,n);else{t=n;var i=rt;rt|=2;var s=_C();(rr!==e||hr!==t)&&(Ci=null,Ra=Ot()+500,no(e,t));do try{f3();break}catch(a){kC(e,a)}while(!0);im(),pd.current=s,rt=i,jt!==null?t=0:(rr=null,hr=0,t=qt)}if(t!==0){if(t===2&&(i=vp(e),i!==0&&(n=i,t=Kp(e,i))),t===1)throw r=nc,no(e,0),ls(e,n),jr(e,Ot()),r;if(t===6)ls(e,n);else{if(i=e.current.alternate,!(n&30)&&!d3(i)&&(t=yd(e,n),t===2&&(s=vp(e),s!==0&&(n=s,t=Kp(e,s))),t===1))throw r=nc,no(e,0),ls(e,n),jr(e,Ot()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(oe(345));case 2:qs(e,$r,Ci);break;case 3:if(ls(e,n),(n&130023424)===n&&(t=Em+500-Ot(),10<t)){if(Ju(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){_r(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ap(qs.bind(null,e,$r,Ci),t);break}qs(e,$r,Ci);break;case 4:if(ls(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-On(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*u3(n/1960))-n,10<n){e.timeoutHandle=Ap(qs.bind(null,e,$r,Ci),n);break}qs(e,$r,Ci);break;case 5:qs(e,$r,Ci);break;default:throw Error(oe(329))}}}return jr(e,Ot()),e.callbackNode===r?RC.bind(null,e):null}function Kp(e,t){var r=Dl;return e.current.memoizedState.isDehydrated&&(no(e,t).flags|=256),e=yd(e,t),e!==2&&(t=$r,$r=r,t!==null&&Gp(t)),e}function Gp(e){$r===null?$r=e:$r.push.apply($r,e)}function d3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Hn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ls(e,t){for(t&=~vm,t&=~Yd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-On(t),n=1<<r;e[r]=-1,t&=~n}}function Hy(e){if(rt&6)throw Error(oe(327));ha();var t=Ju(e,0);if(!(t&1))return jr(e,Ot()),null;var r=yd(e,t);if(e.tag!==0&&r===2){var n=vp(e);n!==0&&(t=n,r=Kp(e,n))}if(r===1)throw r=nc,no(e,0),ls(e,t),jr(e,Ot()),r;if(r===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,qs(e,$r,Ci),jr(e,Ot()),null}function Cm(e,t){var r=rt;rt|=1;try{return e(t)}finally{rt=r,rt===0&&(Ra=Ot()+500,zd&&Bs())}}function fo(e){hs!==null&&hs.tag===0&&!(rt&6)&&ha();var t=rt;rt|=1;var r=Cn.transition,n=ut;try{if(Cn.transition=null,ut=1,e)return e()}finally{ut=n,Cn.transition=r,rt=t,!(rt&6)&&Bs()}}function Sm(){Kr=ta.current,Tt(ta)}function no(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,F6(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(tm(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&id();break;case 3:Ia(),Tt(Hr),Tt(Cr),um();break;case 5:cm(n);break;case 4:Ia();break;case 13:Tt(kt);break;case 19:Tt(kt);break;case 10:sm(n.type._context);break;case 22:case 23:Sm()}r=r.return}if(rr=e,jt=e=Ts(e.current,null),hr=Kr=t,qt=0,nc=null,vm=Yd=ho=0,$r=Dl=null,Qs!==null){for(t=0;t<Qs.length;t++)if(r=Qs[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}Qs=null}return e}function kC(e,t){do{var r=jt;try{if(im(),Pu.current=fd,hd){for(var n=_t.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}hd=!1}if(uo=0,Jt=Vt=_t=null,xl=!1,ec=0,ym.current=null,r===null||r.return===null){qt=1,nc=t,jt=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Ry(o);if(f!==null){f.flags&=-257,ky(f,o,a,s,t),f.mode&1&&Ay(s,c,t),t=f,l=c;var g=t.updateQueue;if(g===null){var y=new Set;y.add(l),t.updateQueue=y}else g.add(l);break e}else{if(!(t&1)){Ay(s,c,t),wm();break e}l=Error(oe(426))}}else if(Rt&&a.mode&1){var E=Ry(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),ky(E,o,a,s,t),rm(Aa(l,a));break e}}s=l=Aa(l,a),qt!==4&&(qt=2),Dl===null?Dl=[s]:Dl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=dC(s,l,t);Ey(s,p);break e;case 1:a=l;var v=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(ws===null||!ws.has(C)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=hC(s,a,t);Ey(s,b);break e}}s=s.return}while(s!==null)}NC(r)}catch(k){t=k,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function _C(){var e=pd.current;return pd.current=fd,e===null?fd:e}function wm(){(qt===0||qt===3||qt===2)&&(qt=4),rr===null||!(ho&268435455)&&!(Yd&268435455)||ls(rr,hr)}function yd(e,t){var r=rt;rt|=2;var n=_C();(rr!==e||hr!==t)&&(Ci=null,no(e,t));do try{h3();break}catch(i){kC(e,i)}while(!0);if(im(),rt=r,pd.current=n,jt!==null)throw Error(oe(261));return rr=null,hr=0,qt}function h3(){for(;jt!==null;)xC(jt)}function f3(){for(;jt!==null&&!MT();)xC(jt)}function xC(e){var t=PC(e.alternate,e,Kr);e.memoizedProps=e.pendingProps,t===null?NC(e):jt=t,ym.current=null}function NC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=o3(r,t),r!==null){r.flags&=32767,jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qt=6,jt=null;return}}else if(r=s3(r,t,Kr),r!==null){jt=r;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);qt===0&&(qt=5)}function qs(e,t,r){var n=ut,i=Cn.transition;try{Cn.transition=null,ut=1,p3(e,t,r,n)}finally{Cn.transition=i,ut=n}return null}function p3(e,t,r,n){do ha();while(hs!==null);if(rt&6)throw Error(oe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(WT(e,s),e===rr&&(jt=rr=null,hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zc||(Zc=!0,BC(Zu,function(){return ha(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Cn.transition,Cn.transition=null;var o=ut;ut=1;var a=rt;rt|=4,ym.current=null,l3(e,r),IC(r,e),B6(Tp),ed=!!bp,Tp=bp=null,e.current=r,c3(r),UT(),rt=a,ut=o,Cn.transition=s}else e.current=r;if(Zc&&(Zc=!1,hs=e,md=i),s=e.pendingLanes,s===0&&(ws=null),jT(r.stateNode),jr(e,Ot()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(gd)throw gd=!1,e=qp,qp=null,e;return md&1&&e.tag!==0&&ha(),s=e.pendingLanes,s&1?e===zp?Pl++:(Pl=0,zp=e):Pl=0,Bs(),null}function ha(){if(hs!==null){var e=uE(md),t=Cn.transition,r=ut;try{if(Cn.transition=null,ut=16>e?16:e,hs===null)var n=!1;else{if(e=hs,hs=null,md=0,rt&6)throw Error(oe(331));var i=rt;for(rt|=4,Ce=e.current;Ce!==null;){var s=Ce,o=s.child;if(Ce.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ce=c;Ce!==null;){var u=Ce;switch(u.tag){case 0:case 11:case 15:Nl(8,u,s)}var d=u.child;if(d!==null)d.return=u,Ce=d;else for(;Ce!==null;){u=Ce;var h=u.sibling,f=u.return;if(wC(u),u===c){Ce=null;break}if(h!==null){h.return=f,Ce=h;break}Ce=f}}}var g=s.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var E=y.sibling;y.sibling=null,y=E}while(y!==null)}}Ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ce=o;else e:for(;Ce!==null;){if(s=Ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,Ce=p;break e}Ce=s.return}}var v=e.current;for(Ce=v;Ce!==null;){o=Ce;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Ce=C;else e:for(o=v;Ce!==null;){if(a=Ce,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wd(9,a)}}catch(k){Bt(a,a.return,k)}if(a===o){Ce=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,Ce=b;break e}Ce=a.return}}if(rt=i,Bs(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(Hd,e)}catch{}n=!0}return n}finally{ut=r,Cn.transition=t}}return!1}function Fy(e,t,r){t=Aa(r,t),t=dC(e,t,1),e=Ss(e,t,1),t=_r(),e!==null&&(pc(e,1,t),jr(e,t))}function Bt(e,t,r){if(e.tag===3)Fy(e,e,r);else for(;t!==null;){if(t.tag===3){Fy(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ws===null||!ws.has(n))){e=Aa(r,e),e=hC(t,e,1),t=Ss(t,e,1),e=_r(),t!==null&&(pc(t,1,e),jr(t,e));break}}t=t.return}}function g3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=_r(),e.pingedLanes|=e.suspendedLanes&r,rr===e&&(hr&r)===r&&(qt===4||qt===3&&(hr&130023424)===hr&&500>Ot()-Em?no(e,0):vm|=r),jr(e,t)}function DC(e,t){t===0&&(e.mode&1?(t=jc,jc<<=1,!(jc&130023424)&&(jc=4194304)):t=1);var r=_r();e=Di(e,t),e!==null&&(pc(e,t,r),jr(e,r))}function m3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),DC(e,r)}function y3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(oe(314))}n!==null&&n.delete(t),DC(e,r)}var PC;PC=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)Ur=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ur=!1,i3(e,t,r);Ur=!!(e.flags&131072)}else Ur=!1,Rt&&t.flags&1048576&&LE(t,ad,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;$u(e,t),e=t.pendingProps;var i=wa(t,Cr.current);da(t,r),i=hm(null,t,n,e,i,r);var s=fm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fr(n)?(s=!0,sd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,am(t),i.updater=Kd,t.stateNode=i,i._reactInternals=t,Pp(t,n,e,r),t=Lp(null,t,n,!0,s,r)):(t.tag=0,Rt&&s&&em(t),Rr(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch($u(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=E3(n),e=Nn(n,e),i){case 0:t=$p(null,t,n,e,r);break e;case 1:t=Ny(null,t,n,e,r);break e;case 11:t=_y(null,t,n,e,r);break e;case 14:t=xy(null,t,n,Nn(n.type,e),r);break e}throw Error(oe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),$p(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),Ny(e,t,n,i,r);case 3:e:{if(mC(t),e===null)throw Error(oe(387));n=t.pendingProps,s=t.memoizedState,i=s.element,HE(e,t),ud(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Aa(Error(oe(423)),t),t=Dy(e,t,n,r,i);break e}else if(n!==i){i=Aa(Error(oe(424)),t),t=Dy(e,t,n,r,i);break e}else for(Yr=Cs(t.stateNode.containerInfo.firstChild),Xr=t,Rt=!0,Bn=null,r=qE(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ba(),n===i){t=Pi(e,t,r);break e}Rr(e,t,n,r)}t=t.child}return t;case 5:return zE(t),e===null&&xp(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ip(n,i)?o=null:s!==null&&Ip(n,s)&&(t.flags|=32),gC(e,t),Rr(e,t,o,r),t.child;case 6:return e===null&&xp(t),null;case 13:return yC(e,t,r);case 4:return lm(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ta(t,null,n,r):Rr(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),_y(e,t,n,i,r);case 7:return Rr(e,t,t.pendingProps,r),t.child;case 8:return Rr(e,t,t.pendingProps.children,r),t.child;case 12:return Rr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Et(ld,n._currentValue),n._currentValue=o,s!==null)if(Hn(s.value,o)){if(s.children===i.children&&!Hr.current){t=Pi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=_i(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),Np(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),Np(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rr(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,da(t,r),i=Sn(i),n=n(i),t.flags|=1,Rr(e,t,n,r),t.child;case 14:return n=t.type,i=Nn(n,t.pendingProps),i=Nn(n.type,i),xy(e,t,n,i,r);case 15:return fC(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Nn(n,i),$u(e,t),t.tag=1,Fr(n)?(e=!0,sd(t)):e=!1,da(t,r),jE(t,n,i),Pp(t,n,i,r),Lp(null,t,n,!0,e,r);case 19:return vC(e,t,r);case 22:return pC(e,t,r)}throw Error(oe(156,t.tag))};function BC(e,t){return oE(e,t)}function v3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(e,t,r,n){return new v3(e,t,r,n)}function bm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function E3(e){if(typeof e=="function")return bm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jg)return 11;if(e===Vg)return 14}return 2}function Ts(e,t){var r=e.alternate;return r===null?(r=yn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Mu(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")bm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case zo:return io(r.children,i,s,t);case Fg:o=8,i|=8;break;case np:return e=yn(12,r,t,i|2),e.elementType=np,e.lanes=s,e;case ip:return e=yn(13,r,t,i),e.elementType=ip,e.lanes=s,e;case sp:return e=yn(19,r,t,i),e.elementType=sp,e.lanes=s,e;case V2:return Qd(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case F2:o=10;break e;case j2:o=9;break e;case jg:o=11;break e;case Vg:o=14;break e;case is:o=16,n=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=yn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function io(e,t,r,n){return e=yn(7,e,n,t),e.lanes=r,e}function Qd(e,t,r,n){return e=yn(22,e,n,t),e.elementType=V2,e.lanes=r,e.stateNode={isHidden:!1},e}function lf(e,t,r){return e=yn(6,e,null,t),e.lanes=r,e}function cf(e,t,r){return t=yn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function C3(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tm(e,t,r,n,i,s,o,a,l){return e=new C3(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=yn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},am(s),e}function S3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function $C(e){if(!e)return ks;e=e._reactInternals;e:{if(vo(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var r=e.type;if(Fr(r))return BE(e,r,t)}return t}function LC(e,t,r,n,i,s,o,a,l){return e=Tm(r,n,!0,e,i,s,o,a,l),e.context=$C(null),r=e.current,n=_r(),i=bs(r),s=_i(n,i),s.callback=t??null,Ss(r,s,i),e.current.lanes=i,pc(e,i,n),jr(e,n),e}function Xd(e,t,r,n){var i=t.current,s=_r(),o=bs(i);return r=$C(r),t.context===null?t.context=r:t.pendingContext=r,t=_i(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ss(i,t,o),e!==null&&(Mn(e,i,o,s),Du(e,i,o)),o}function vd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Im(e,t){jy(e,t),(e=e.alternate)&&jy(e,t)}function w3(){return null}var OC=typeof reportError=="function"?reportError:function(e){console.error(e)};function Am(e){this._internalRoot=e}Zd.prototype.render=Am.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));Xd(e,t,null,null)};Zd.prototype.unmount=Am.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fo(function(){Xd(null,e,null,null)}),t[Ni]=null}};function Zd(e){this._internalRoot=e}Zd.prototype.unstable_scheduleHydration=function(e){if(e){var t=fE();e={blockedOn:null,target:e,priority:t};for(var r=0;r<as.length&&t!==0&&t<as[r].priority;r++);as.splice(r,0,e),r===0&&gE(e)}};function Rm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Jd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function b3(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=vd(o);s.call(c)}}var o=LC(t,n,e,0,null,!1,!1,"",Vy);return e._reactRootContainer=o,e[Ni]=o.current,Yl(e.nodeType===8?e.parentNode:e),fo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=vd(l);a.call(c)}}var l=Tm(e,0,!1,null,null,!1,!1,"",Vy);return e._reactRootContainer=l,e[Ni]=l.current,Yl(e.nodeType===8?e.parentNode:e),fo(function(){Xd(t,l,r,n)}),l}function eh(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vd(o);a.call(l)}}Xd(t,o,e,i)}else o=b3(r,t,e,i,n);return vd(o)}dE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=vl(t.pendingLanes);r!==0&&(Kg(t,r|1),jr(t,Ot()),!(rt&6)&&(Ra=Ot()+500,Bs()))}break;case 13:fo(function(){var n=Di(e,1);if(n!==null){var i=_r();Mn(n,e,1,i)}}),Im(e,1)}};Gg=function(e){if(e.tag===13){var t=Di(e,134217728);if(t!==null){var r=_r();Mn(t,e,134217728,r)}Im(e,134217728)}};hE=function(e){if(e.tag===13){var t=bs(e),r=Di(e,t);if(r!==null){var n=_r();Mn(r,e,t,n)}Im(e,t)}};fE=function(){return ut};pE=function(e,t){var r=ut;try{return ut=e,t()}finally{ut=r}};gp=function(e,t,r){switch(t){case"input":if(lp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=qd(n);if(!i)throw Error(oe(90));z2(n),lp(n,i)}}}break;case"textarea":G2(e,r);break;case"select":t=r.value,t!=null&&aa(e,!!r.multiple,t,!1)}};eE=Cm;tE=fo;var T3={usingClientEntryPoint:!1,Events:[mc,Yo,qd,Z2,J2,Cm]},el={findFiberByHostInstance:Ys,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},I3={bundleType:el.bundleType,version:el.version,rendererPackageName:el.rendererPackageName,rendererConfig:el.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iE(e),e===null?null:e.stateNode},findFiberByHostInstance:el.findFiberByHostInstance||w3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Hd=Jc.inject(I3),ci=Jc}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T3;rn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rm(t))throw Error(oe(200));return S3(e,t,null,r)};rn.createRoot=function(e,t){if(!Rm(e))throw Error(oe(299));var r=!1,n="",i=OC;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Tm(e,1,!1,null,null,r,!1,n,i),e[Ni]=t.current,Yl(e.nodeType===8?e.parentNode:e),new Am(t)};rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=iE(t),e=e===null?null:e.stateNode,e};rn.flushSync=function(e){return fo(e)};rn.hydrate=function(e,t,r){if(!Jd(t))throw Error(oe(200));return eh(null,e,t,!0,r)};rn.hydrateRoot=function(e,t,r){if(!Rm(e))throw Error(oe(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=OC;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=LC(t,null,e,1,r??null,i,!1,s,o),e[Ni]=t.current,Yl(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Zd(t)};rn.render=function(e,t,r){if(!Jd(t))throw Error(oe(200));return eh(null,e,t,!1,r)};rn.unmountComponentAtNode=function(e){if(!Jd(e))throw Error(oe(40));return e._reactRootContainer?(fo(function(){eh(null,null,e,!1,function(){e._reactRootContainer=null,e[Ni]=null})}),!0):!1};rn.unstable_batchedUpdates=Cm;rn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Jd(r))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return eh(e,t,r,!1,n)};rn.version="18.2.0-next-9e3b772b8-20220608";function MC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MC)}catch(e){console.error(e)}}MC(),L2.exports=rn;var vc=L2.exports;const UC=hc(vc),A3=T2({__proto__:null,default:UC},[vc]);var qy=vc;tp.createRoot=qy.createRoot,tp.hydrateRoot=qy.hydrateRoot;var si=function(){return si=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},si.apply(this,arguments)};function HC(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function R3(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var Uu="right-scroll-bar-position",Hu="width-before-scroll-bar",k3="with-scroll-bars-hidden",_3="--removed-body-scroll-bar-size";function uf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function x3(e,t){var r=S.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var N3=typeof window<"u"?S.useLayoutEffect:S.useEffect,zy=new WeakMap;function D3(e,t){var r=x3(t||null,function(n){return e.forEach(function(i){return uf(i,n)})});return N3(function(){var n=zy.get(r);if(n){var i=new Set(n),s=new Set(e),o=r.current;i.forEach(function(a){s.has(a)||uf(a,null)}),s.forEach(function(a){i.has(a)||uf(a,o)})}zy.set(r,e)},[e]),r}function P3(e){return e}function B3(e,t){t===void 0&&(t=P3);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(s),o=r}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return i}function $3(e){e===void 0&&(e={});var t=B3(null);return t.options=si({async:!0,ssr:!1},e),t}var FC=function(e){var t=e.sideCar,r=HC(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,si({},r))};FC.isSideCarExport=!0;function L3(e,t){return e.useMedium(t),FC}var jC=$3(),df=function(){},th=S.forwardRef(function(e,t){var r=S.useRef(null),n=S.useState({onScrollCapture:df,onWheelCapture:df,onTouchMoveCapture:df}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noIsolation,g=e.inert,y=e.allowPinchZoom,E=e.as,p=E===void 0?"div":E,v=e.gapMode,C=HC(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,k=D3([r,t]),m=si(si({},C),i);return S.createElement(S.Fragment,null,u&&S.createElement(b,{sideCar:jC,removeScrollBar:c,shards:d,noIsolation:f,inert:g,setCallbacks:s,allowPinchZoom:!!y,lockRef:r,gapMode:v}),o?S.cloneElement(S.Children.only(a),si(si({},m),{ref:k})):S.createElement(p,si({},m,{className:l,ref:k}),a))});th.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};th.classNames={fullWidth:Hu,zeroRight:Uu};var O3=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function M3(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=O3();return t&&e.setAttribute("nonce",t),e}function U3(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function H3(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var F3=function(){var e=0,t=null;return{add:function(r){e==0&&(t=M3())&&(U3(t,r),H3(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},j3=function(){var e=F3();return function(t,r){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},VC=function(){var e=j3(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},V3={left:0,top:0,right:0,gap:0},hf=function(e){return parseInt(e||"",10)||0},q3=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[hf(r),hf(n),hf(i)]},z3=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return V3;var t=q3(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},K3=VC(),fa="data-scroll-locked",G3=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(k3,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(fa,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uu,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Hu,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Uu," .").concat(Uu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Hu," .").concat(Hu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(fa,`] {
    `).concat(_3,": ").concat(a,`px;
  }
`)},Ky=function(){var e=parseInt(document.body.getAttribute(fa)||"0",10);return isFinite(e)?e:0},W3=function(){S.useEffect(function(){return document.body.setAttribute(fa,(Ky()+1).toString()),function(){var e=Ky()-1;e<=0?document.body.removeAttribute(fa):document.body.setAttribute(fa,e.toString())}},[])},Y3=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;W3();var s=S.useMemo(function(){return z3(i)},[i]);return S.createElement(K3,{styles:G3(s,!t,i,r?"":"!important")})},Wp=!1;if(typeof window<"u")try{var eu=Object.defineProperty({},"passive",{get:function(){return Wp=!0,!0}});window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Wp=!1}var xo=Wp?{passive:!1}:!1,Q3=function(e){return e.tagName==="TEXTAREA"},qC=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!Q3(e)&&r[t]==="visible")},X3=function(e){return qC(e,"overflowY")},Z3=function(e){return qC(e,"overflowX")},Gy=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=zC(e,n);if(i){var s=KC(e,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},J3=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},eI=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},zC=function(e,t){return e==="v"?X3(t):Z3(t)},KC=function(e,t){return e==="v"?J3(t):eI(t)},tI=function(e,t){return e==="h"&&t==="rtl"?-1:1},rI=function(e,t,r,n,i){var s=tI(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,l=t.contains(a),c=!1,u=o>0,d=0,h=0;do{var f=KC(e,a),g=f[0],y=f[1],E=f[2],p=y-E-s*g;(g||p)&&zC(e,a)&&(d+=p,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(i&&Math.abs(d)<1||!i&&o>d)||!u&&(i&&Math.abs(h)<1||!i&&-o>h))&&(c=!0),c},tu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Wy=function(e){return[e.deltaX,e.deltaY]},Yy=function(e){return e&&"current"in e?e.current:e},nI=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iI=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sI=0,No=[];function oI(e){var t=S.useRef([]),r=S.useRef([0,0]),n=S.useRef(),i=S.useState(sI++)[0],s=S.useState(VC)[0],o=S.useRef(e);S.useEffect(function(){o.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var y=R3([e.lockRef.current],(e.shards||[]).map(Yy),!0).filter(Boolean);return y.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),y.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=S.useCallback(function(y,E){if("touches"in y&&y.touches.length===2)return!o.current.allowPinchZoom;var p=tu(y),v=r.current,C="deltaX"in y?y.deltaX:v[0]-p[0],b="deltaY"in y?y.deltaY:v[1]-p[1],k,m=y.target,R=Math.abs(C)>Math.abs(b)?"h":"v";if("touches"in y&&R==="h"&&m.type==="range")return!1;var _=Gy(R,m);if(!_)return!0;if(_?k=R:(k=R==="v"?"h":"v",_=Gy(R,m)),!_)return!1;if(!n.current&&"changedTouches"in y&&(C||b)&&(n.current=k),!k)return!0;var H=n.current||k;return rI(H,E,y,H==="h"?C:b,!0)},[]),l=S.useCallback(function(y){var E=y;if(!(!No.length||No[No.length-1]!==s)){var p="deltaY"in E?Wy(E):tu(E),v=t.current.filter(function(k){return k.name===E.type&&(k.target===E.target||E.target===k.shadowParent)&&nI(k.delta,p)})[0];if(v&&v.should){E.cancelable&&E.preventDefault();return}if(!v){var C=(o.current.shards||[]).map(Yy).filter(Boolean).filter(function(k){return k.contains(E.target)}),b=C.length>0?a(E,C[0]):!o.current.noIsolation;b&&E.cancelable&&E.preventDefault()}}},[]),c=S.useCallback(function(y,E,p,v){var C={name:y,delta:E,target:p,should:v,shadowParent:aI(p)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(b){return b!==C})},1)},[]),u=S.useCallback(function(y){r.current=tu(y),n.current=void 0},[]),d=S.useCallback(function(y){c(y.type,Wy(y),y.target,a(y,e.lockRef.current))},[]),h=S.useCallback(function(y){c(y.type,tu(y),y.target,a(y,e.lockRef.current))},[]);S.useEffect(function(){return No.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,xo),document.addEventListener("touchmove",l,xo),document.addEventListener("touchstart",u,xo),function(){No=No.filter(function(y){return y!==s}),document.removeEventListener("wheel",l,xo),document.removeEventListener("touchmove",l,xo),document.removeEventListener("touchstart",u,xo)}},[]);var f=e.removeScrollBar,g=e.inert;return S.createElement(S.Fragment,null,g?S.createElement(s,{styles:iI(i)}):null,f?S.createElement(Y3,{gapMode:e.gapMode}):null)}function aI(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lI=L3(jC,oI);var GC=S.forwardRef(function(e,t){return S.createElement(th,si({},e,{ref:t,sideCar:lI}))});GC.classNames=th.classNames;const cI=GC;function Er(e){return Object.keys(e)}function ff(e){return e&&typeof e=="object"&&!Array.isArray(e)}function km(e,t){const r={...e},n=t;return ff(e)&&ff(t)&&Object.keys(t).forEach(i=>{ff(n[i])&&i in e?r[i]=km(r[i],n[i]):r[i]=n[i]}),r}function uI(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function dI(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function Yp(e){const t=dI(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function pf(e){return`calc(${e} * var(--mantine-scale))`}function WC(e,{shouldScale:t=!1}={}){function r(n){if(n===0||n==="0")return`0${e}`;if(typeof n=="number"){const i=`${n/16}${e}`;return t?pf(i):i}if(typeof n=="string"){if(n.startsWith("calc(")||n.startsWith("var(")||n.startsWith("clamp("))return n;if(n.includes(" "))return n.split(" ").map(s=>r(s)).join(" ");if(n.includes(e))return t?pf(n):n;const i=n.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?pf(s):s}}return n}return r}const J=WC("rem",{shouldScale:!0}),Qy=WC("em");function Ec(e){return Object.keys(e).reduce((t,r)=>(e[r]!==void 0&&(t[r]=e[r]),t),{})}function YC(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Cc(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==x.Fragment:!1}function Mi(e){const t=S.createContext(null);return[({children:i,value:s})=>x.createElement(t.Provider,{value:s},i),()=>{const i=S.useContext(t);if(i===null)throw new Error(e);return i}]}function hI(e=null){const t=S.createContext(e);return[({children:i,value:s})=>x.createElement(t.Provider,{value:s},i),()=>S.useContext(t)]}const fI={app:100,modal:200,popover:300,overlay:400,max:9999};function Ha(e){return fI[e]}const pI=()=>{};function gI(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||pI:r=>{var n;r.key==="Escape"&&(e(r),(n=t.onTrigger)==null||n.call(t))}}function It(e,t="size",r=!0){if(e!==void 0)return YC(e)?r?J(e):e:`var(--${t}-${e})`}function po(e){return It(e,"mantine-spacing")}function Vn(e){return e===void 0?"var(--mantine-radius-default)":It(e,"mantine-radius")}function Zr(e){return It(e,"mantine-font-size")}function mI(e){return It(e,"mantine-line-height",!1)}function _m(e){if(e)return It(e,"mantine-shadow",!1)}function yI(e,t){return e in t.breakpoints?Yp(t.breakpoints[e]):Yp(e)}function QC(e,t){const r=e.map(n=>({value:n,px:yI(n,t)}));return r.sort((n,i)=>n.px-i.px),r}function Cl(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Bl(e,t,r){return t===void 0&&r===void 0?e:t!==void 0&&r===void 0?Math.max(e,t):Math.min(t===void 0&&r!==void 0?e:Math.max(e,t),r)}function $l(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Ws(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function rh(e,t){const r=Ws(e),n=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),S.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}const Xy=["mousedown","touchstart"];function vI(e,t,r){const n=S.useRef();return S.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(r)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";r.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&e()}else n.current&&!n.current.contains(o)&&e()};return(t||Xy).forEach(s=>document.addEventListener(s,i)),()=>{(t||Xy).forEach(s=>document.removeEventListener(s,i))}},[n,e,r]),n}function EI(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function CI(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function SI(e,t,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,i]=S.useState(r?t:CI(e)),s=S.useRef();return S.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),EI(s.current,o=>i(o.matches))},[e]),n}const Fa=typeof document<"u"?S.useLayoutEffect:S.useEffect;function ka(e,t){const r=S.useRef(!1);S.useEffect(()=>()=>{r.current=!1},[]),S.useEffect(()=>{if(r.current)return e();r.current=!0},t)}function XC({opened:e,shouldReturnFocus:t=!0}){const r=S.useRef(),n=()=>{var i;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((i=r.current)==null||i.focus({preventScroll:!0}))};return ka(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?r.current=document.activeElement:t&&(i=window.setTimeout(n,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),n}function wI(e,t="body > :not(script)"){const r=$l(),n=Array.from(document.querySelectorAll(t)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",r),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{n.forEach(i=>{!i||r!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const bI=/input|select|textarea|button|object/,ZC="a, input, select, textarea, button, object, [tabindex]";function TI(e){return e.style.display==="none"}function II(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let r=e;for(;r&&!(r===document.body||r.nodeType===11);){if(TI(r))return!1;r=r.parentNode}return!0}function JC(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Qp(e){const t=e.nodeName.toLowerCase(),r=!Number.isNaN(JC(e));return(bI.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||r)&&II(e)}function eS(e){const t=JC(e);return(Number.isNaN(t)||t>=0)&&Qp(e)}function AI(e){return Array.from(e.querySelectorAll(ZC)).filter(eS)}function RI(e,t){const r=AI(e);if(!r.length){t.preventDefault();return}const n=r[t.shiftKey?0:r.length-1],i=e.getRootNode();let s=n===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=r.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===o.getAttribute("name")).includes(n)),!s)return;t.preventDefault();const l=r[t.shiftKey?r.length-1:0];l&&l.focus()}function kI(e=!0){const t=S.useRef(),r=S.useRef(null),n=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(ZC));o=a.find(eS)||a.find(Qp)||null,!o&&Qp(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=S.useCallback(s=>{if(e){if(s===null){r.current&&(r.current(),r.current=null);return}r.current=wI(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)}},[e]);return S.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=o=>{o.key==="Tab"&&t.current&&RI(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),r.current&&r.current()}},[e]),i}const _I=x.useId||(()=>{});function xI(){const e=_I();return e?`mantine-${e.replace(/:/g,"")}`:""}function Eo(e){const t=xI(),[r,n]=S.useState(t);return Fa(()=>{n($l())},[]),typeof e=="string"?e:typeof window>"u"?t:r}function NI(e,t,r){S.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function tS(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function DI(...e){return t=>{e.forEach(r=>tS(r,t))}}function sn(...e){return S.useCallback(DI(...e),e)}function PI(e,t,r="ltr"){const n=S.useRef(null),i=S.useRef(!1),s=S.useRef(!1),o=S.useRef(0),[a,l]=S.useState(!1);return S.useEffect(()=>{i.current=!0},[]),S.useEffect(()=>{var v,C;const c=({x:b,y:k})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&n.current){n.current.style.userSelect="none";const m=n.current.getBoundingClientRect();if(m.width&&m.height){const R=Bl((b-m.left)/m.width,0,1);e({x:r==="ltr"?R:1-R,y:Bl((k-m.top)/m.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",y),document.addEventListener("mouseup",f),document.addEventListener("touchmove",p),document.addEventListener("touchend",f)},d=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",f)},h=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),u())},f=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},g=b=>{h(),b.preventDefault(),y(b)},y=b=>c({x:b.clientX,y:b.clientY}),E=b=>{b.cancelable&&b.preventDefault(),h(),p(b)},p=b=>{b.cancelable&&b.preventDefault(),c({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return(v=n.current)==null||v.addEventListener("mousedown",g),(C=n.current)==null||C.addEventListener("touchstart",E,{passive:!1}),()=>{n.current&&(n.current.removeEventListener("mousedown",g),n.current.removeEventListener("touchstart",E))}},[r,e]),{ref:n,active:a}}function go({value:e,defaultValue:t,finalValue:r,onChange:n=()=>{}}){const[i,s]=S.useState(t!==void 0?t:r),o=(a,...l)=>{s(a),n==null||n(a,...l)};return e!==void 0?[e,n,!0]:[i,o,!1]}function rS(e,t){return SI("(prefers-reduced-motion: reduce)",e,t)}function BI(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function $I(e){function t(n){const i=Object.keys(n).reduce((s,o)=>(s[`${e}:${o}`]=a=>n[o](a.detail),s),{});Fa(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function r(n){return(...i)=>BI(`${e}:${String(n)}`,i[0])}return[t,r]}function nS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=nS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=nS(e))&&(n&&(n+=" "),n+=t);return n}const LI={};function OI(e){const t={};return e.forEach(r=>{Object.entries(r).forEach(([n,i])=>{t[n]?t[n]=pr(t[n],i):t[n]=i})}),t}function nh({theme:e,classNames:t,props:r,stylesCtx:n}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,r,n):o||LI);return OI(s)}function Ed({theme:e,styles:t,props:r,stylesCtx:n}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,r,n)}:{...s,...o},{})}const iS=S.createContext(null);function Sc(){const e=S.useContext(iS);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function MI(){return Sc().cssVariablesResolver}function UI(){return Sc().classNamesPrefix}function xm(){return Sc().getStyleNonce}function HI(){return Sc().withStaticClasses}function FI(){return Sc().headless}function jI(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function VI(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const r=parseInt(t,16),n=r>>16&255,i=r>>8&255,s=r&255;return{r:n,g:i,b:s,a:1}}function qI(e){const[t,r,n,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:r,b:n,a:i||1}}function zI(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=e.match(t);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),i=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,o=r[5]?parseFloat(r[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=n/60,c=a*(1-Math.abs(l%2-1)),u=s-a/2;let d,h,f;return l>=0&&l<1?(d=a,h=c,f=0):l>=1&&l<2?(d=c,h=a,f=0):l>=2&&l<3?(d=0,h=a,f=c):l>=3&&l<4?(d=0,h=c,f=a):l>=4&&l<5?(d=c,h=0,f=a):(d=a,h=0,f=c),{r:Math.round((d+u)*255),g:Math.round((h+u)*255),b:Math.round((f+u)*255),a:o||1}}function Nm(e){return jI(e)?VI(e):e.startsWith("rgb")?qI(e):e.startsWith("hsl")?zI(e):{r:0,g:0,b:0,a:1}}function ru(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r,g:n,b:i,a:s}=Nm(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(r)}, ${a(n)}, ${a(i)}, ${s})`}function Cd(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function gf(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function KI(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function GI(e){if(e.startsWith("oklch("))return(KI(e)||0)/100;const{r:t,g:r,b:n}=Nm(e),i=t/255,s=r/255,o=n/255,a=gf(i),l=gf(s),c=gf(o);return .2126*a+.7152*l+.0722*c}function tl(e,t=.179){return e.startsWith("var(")?!1:GI(e)>t}function ja({color:e,theme:t,colorScheme:r}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:r==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:tl(r==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:r==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:tl(r==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:tl(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[n,i]=e.split("."),s=i?Number(i):void 0,o=n in t.colors;if(o){const a=s!==void 0?t.colors[n][s]:t.colors[n][Cd(t,r||"light")];return{color:n,value:a,shade:s,isThemeColor:o,isLight:tl(a,t.luminanceThreshold),variable:i?`--mantine-color-${n}-${s}`:`--mantine-color-${n}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:tl(e,t.luminanceThreshold),shade:s,variable:void 0}}function Un(e,t){const r=ja({color:e||t.primaryColor,theme:t});return r.variable?`var(${r.variable})`:e}function Xp(e,t){const r={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},n=Un(r.from,t),i=Un(r.to,t);return`linear-gradient(${r.deg}deg, ${n} 0%, ${i} 100%)`}function kr(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r,g:n,b:i}=Nm(e);return`rgba(${r}, ${n}, ${i}, ${t})`}const WI=({color:e,theme:t,variant:r,gradient:n,autoContrast:i})=>{const s=ja({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(r==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${J(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${J(1)} solid transparent`}:{background:e,hover:ru(e,.1),color:a,border:`${J(1)} solid transparent`}}if(r==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${J(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:kr(a,.1),hover:kr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${J(1)} solid transparent`}}return{background:kr(e,.1),hover:kr(e,.12),color:e,border:`${J(1)} solid transparent`}}if(r==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${J(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:kr(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${J(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:kr(e,.05),color:e,border:`${J(1)} solid ${e}`};if(r==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${J(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:kr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${J(1)} solid transparent`}}return{background:"transparent",hover:kr(e,.12),color:e,border:`${J(1)} solid transparent`}}return r==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${J(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${J(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${J(1)} solid transparent`}:r==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:ru(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${J(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:ru(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${J(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:ru(t.white,.01),color:e,border:`${J(1)} solid transparent`}:r==="gradient"?{background:Xp(n,t),hover:Xp(n,t),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${J(1)} solid var(--mantine-color-default-border)`}:{}},YI={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Zy="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Dm={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:YI,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:WI,autoContrast:!1,luminanceThreshold:.3,fontFamily:Zy,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Zy,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:J(34),lineHeight:"1.3"},h2:{fontSize:J(26),lineHeight:"1.35"},h3:{fontSize:J(22),lineHeight:"1.4"},h4:{fontSize:J(18),lineHeight:"1.45"},h5:{fontSize:J(16),lineHeight:"1.5"},h6:{fontSize:J(14),lineHeight:"1.5"}}},fontSizes:{xs:J(12),sm:J(14),md:J(16),lg:J(18),xl:J(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:J(2),sm:J(4),md:J(8),lg:J(16),xl:J(32)},spacing:{xs:J(10),sm:J(12),md:J(16),lg:J(20),xl:J(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${J(1)} ${J(3)} rgba(0, 0, 0, 0.05), 0 ${J(1)} ${J(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${J(1)} ${J(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${J(10)} ${J(15)} ${J(-5)}, rgba(0, 0, 0, 0.04) 0 ${J(7)} ${J(7)} ${J(-5)}`,md:`0 ${J(1)} ${J(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${J(20)} ${J(25)} ${J(-5)}, rgba(0, 0, 0, 0.04) 0 ${J(10)} ${J(10)} ${J(-5)}`,lg:`0 ${J(1)} ${J(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${J(28)} ${J(23)} ${J(-7)}, rgba(0, 0, 0, 0.04) 0 ${J(12)} ${J(12)} ${J(-7)}`,xl:`0 ${J(1)} ${J(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${J(36)} ${J(28)} ${J(-7)}, rgba(0, 0, 0, 0.04) 0 ${J(17)} ${J(17)} ${J(-7)}`},other:{},components:{}};function Jy(e){return e==="auto"||e==="dark"||e==="light"}function QI({key:e="mantine-color-scheme-value"}={}){let t;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(e);return Jy(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(e,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{t=n=>{n.storageArea===window.localStorage&&n.key===e&&Jy(n.newValue)&&r(n.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const XI="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",ev="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function mf(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function tv(e){if(!(e.primaryColor in e.colors))throw new Error(XI);if(typeof e.primaryShade=="object"&&(!mf(e.primaryShade.dark)||!mf(e.primaryShade.light)))throw new Error(ev);if(typeof e.primaryShade=="number"&&!mf(e.primaryShade))throw new Error(ev)}function ZI(e,t){var n;if(!t)return tv(e),e;const r=km(e,t);return t.fontFamily&&!((n=t.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=t.fontFamily),tv(r),r}const Pm=S.createContext(null),JI=()=>S.useContext(Pm)||Dm;function fi(){const e=S.useContext(Pm);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function sS({theme:e,children:t,inherit:r=!0}){const n=JI(),i=S.useMemo(()=>ZI(r?n:Dm,e),[e,n,r]);return x.createElement(Pm.Provider,{value:i},t)}sS.displayName="@mantine/core/MantineThemeProvider";function e5(){const e=fi(),t=xm(),r=Er(e.breakpoints).reduce((n,i)=>{const s=e.breakpoints[i].includes("px"),o=Yp(e.breakpoints[i]),a=s?`${o-.1}px`:Qy(o-.1),l=s?`${o}px`:Qy(o);return`${n}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return x.createElement("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:r}})}function yf(e){return Object.entries(e).map(([t,r])=>`${t}: ${r};`).join("")}function vf(e,t){return(Array.isArray(e)?e:[e]).reduce((n,i)=>`${i}{${n}}`,t)}function t5(e,t){const r=yf(e.variables),n=r?vf(t,r):"",i=yf(e.dark),s=i?vf(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=yf(e.light),a=o?vf(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${n}${s}${a}`}function oS({color:e,theme:t,autoContrast:r}){return(typeof r=="boolean"?r:t.autoContrast)&&ja({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function rv(e,t){return oS({color:e.colors[e.primaryColor][Cd(e,t)],theme:e,autoContrast:null})}function Do(e,t,r){Er(t).forEach(n=>Object.assign(e,{[`--mantine-${r}-${n}`]:t[n]}))}const aS=e=>{const t=Cd(e,"dark"),r=Cd(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:J(e.defaultRadius),i={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-color-scheme":"light dark","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":rv(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${r})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)"},dark:{"--mantine-primary-color-contrast":rv(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)"}};Do(i.variables,e.breakpoints,"breakpoint"),Do(i.variables,e.spacing,"spacing"),Do(i.variables,e.fontSizes,"font-size"),Do(i.variables,e.lineHeights,"line-height"),Do(i.variables,e.shadows,"shadow"),Do(i.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,a)=>{i.variables[`--mantine-primary-color-${a}`]=`var(--mantine-color-${e.primaryColor}-${a})`}),Er(e.colors).forEach(o=>{e.colors[o].forEach((c,u)=>{i.variables[`--mantine-color-${o}-${u}`]=c});const a=`var(--mantine-color-${o}-${r===9?8:r+1})`,l=`var(--mantine-color-${o}-${t===9?8:t+1})`;i.light["--mantine-color-dimmed"]="var(--mantine-color-gray-6)",i.light[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-filled)`,i.light[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-filled-hover`]=a,i.light[`--mantine-color-${o}-light`]=kr(e.colors[o][r],.1),i.light[`--mantine-color-${o}-light-hover`]=kr(e.colors[o][r],.12),i.light[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline-hover`]=kr(e.colors[o][r],.05),i.dark["--mantine-color-dimmed"]="var(--mantine-color-dark-2)",i.dark[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-4)`,i.dark[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${t})`,i.dark[`--mantine-color-${o}-filled-hover`]=l,i.dark[`--mantine-color-${o}-light`]=kr(e.colors[o][Math.max(0,t-2)],.15),i.dark[`--mantine-color-${o}-light-hover`]=kr(e.colors[o][Math.max(0,t-2)],.2),i.dark[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${Math.max(t-5,0)})`,i.dark[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${Math.max(t-4,0)})`,i.dark[`--mantine-color-${o}-outline-hover`]=kr(e.colors[o][Math.max(t-4,0)],.05)});const s=e.headings.sizes;return Er(s).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=s[o].fontSize,i.variables[`--mantine-${o}-line-height`]=s[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=s[o].fontWeight||e.headings.fontWeight}),i};function r5({theme:e,generator:t}){const r=aS(e),n=t==null?void 0:t(e);return n?km(r,n):r}const Ef=aS(Dm);function n5(e){const t={variables:{},light:{},dark:{}};return Er(e.variables).forEach(r=>{Ef.variables[r]!==e.variables[r]&&(t.variables[r]=e.variables[r])}),Er(e.light).forEach(r=>{Ef.light[r]!==e.light[r]&&(t.light[r]=e.light[r])}),Er(e.dark).forEach(r=>{Ef.dark[r]!==e.dark[r]&&(t.dark[r]=e.dark[r])}),t}function i5(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function lS({cssVariablesSelector:e,deduplicateCssVariables:t}){const r=fi(),n=xm(),i=MI(),s=r5({theme:r,generator:i}),o=e===":root"&&t,a=o?n5(s):s,l=t5(a,e);return l?x.createElement("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${l}${o?"":i5(e)}`}}):null}lS.displayName="@mantine/CssVariables";function s5(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Po(e,t){var n;const r=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=t())==null||n.setAttribute("data-mantine-color-scheme",r)}function o5({manager:e,defaultColorScheme:t,getRootElement:r,forceColorScheme:n}){const i=S.useRef(),[s,o]=S.useState(()=>e.get(t)),a=n||s,l=S.useCallback(u=>{n||(Po(u,r),o(u),e.set(u))},[e.set,a,n]),c=S.useCallback(()=>{o(t),Po(t,r),e.clear()},[e.clear,t]);return S.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Fa(()=>{Po(e.get(t),r)},[]),S.useEffect(()=>{var d;if(n)return Po(n,r),()=>{};n===void 0&&Po(s,r),i.current=window.matchMedia("(prefers-color-scheme: dark)");const u=h=>{s==="auto"&&Po(h.matches?"dark":"light",r)};return(d=i.current)==null||d.addEventListener("change",u),()=>{var h;return(h=i.current)==null?void 0:h.removeEventListener("change",u)}},[s,n]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function a5({respectReducedMotion:e,getRootElement:t}){Fa(()=>{var r;e&&((r=t())==null||r.setAttribute("data-respect-reduced-motion","true"))},[e])}s5();function cS({theme:e,children:t,getStyleNonce:r,withStaticClasses:n=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=QI(),defaultColorScheme:u="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f}){const{colorScheme:g,setColorScheme:y,clearColorScheme:E}=o5({defaultColorScheme:u,forceColorScheme:f,manager:c,getRootElement:d});return a5({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),x.createElement(iS.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:E,getRootElement:d,classNamesPrefix:l,getStyleNonce:r,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:n}},x.createElement(sS,{theme:e},o&&x.createElement(lS,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&x.createElement(e5,null),t))}cS.displayName="@mantine/core/MantineProvider";function uS({classNames:e,styles:t,props:r,stylesCtx:n}){const i=fi();return{resolvedClassNames:nh({theme:i,classNames:e,props:r,stylesCtx:n||void 0}),resolvedStyles:Ed({theme:i,styles:t,props:r,stylesCtx:n||void 0})}}const l5={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function c5({theme:e,options:t,unstyled:r}){return pr((t==null?void 0:t.focusable)&&!r&&(e.focusClassName||l5[e.focusRing]),(t==null?void 0:t.active)&&!r&&e.activeClassName)}function u5({selector:e,stylesCtx:t,options:r,props:n,theme:i}){return nh({theme:i,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:t})[e]}function d5({selector:e,stylesCtx:t,theme:r,classNames:n,props:i}){return nh({theme:r,classNames:n,props:i,stylesCtx:t})[e]}function h5({rootSelector:e,selector:t,className:r}){return e===t?r:void 0}function f5({selector:e,classes:t,unstyled:r}){return r?void 0:t[e]}function p5({themeName:e,classNamesPrefix:t,selector:r,withStaticClass:n}){return n===!1?[]:e.map(i=>`${t}-${i}-${r}`)}function g5({themeName:e,theme:t,selector:r,props:n,stylesCtx:i}){return e.map(s=>{var o,a;return(a=nh({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:n,stylesCtx:i}))==null?void 0:a[r]})}function m5({options:e,classes:t,selector:r,unstyled:n}){return e!=null&&e.variant&&!n?t[`${r}--${e.variant}`]:void 0}function y5({theme:e,options:t,themeName:r,selector:n,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:d,withStaticClasses:h,headless:f}){return pr(c5({theme:e,options:t,unstyled:a||f}),g5({theme:e,themeName:r,selector:n,props:u,stylesCtx:d}),m5({options:t,classes:o,selector:n,unstyled:a}),d5({selector:n,stylesCtx:d,theme:e,classNames:s,props:u}),u5({selector:n,stylesCtx:d,options:t,props:u,theme:e}),h5({rootSelector:c,selector:n,className:l}),f5({selector:n,classes:o,unstyled:a||f}),h&&!f&&p5({themeName:r,classNamesPrefix:i,selector:n,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function v5({theme:e,themeName:t,props:r,stylesCtx:n,selector:i}){return t.map(s=>{var o;return Ed({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:r,stylesCtx:n})[i]}).reduce((s,o)=>({...s,...o}),{})}function Zp({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...Zp({style:n,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function E5(e){return e.reduce((t,r)=>(r&&Object.keys(r).forEach(n=>{t[n]={...t[n],...Ec(r[n])}}),t),{})}function C5({vars:e,varsResolver:t,theme:r,props:n,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=E5([a?{}:t==null?void 0:t(r,n,i),...o.map(c=>{var u,d,h;return(h=(d=(u=r.components)==null?void 0:u[c])==null?void 0:d.vars)==null?void 0:h.call(d,r,n,i)}),e==null?void 0:e(r,n,i)]))==null?void 0:l[s]}function S5({theme:e,themeName:t,selector:r,options:n,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:c,varsResolver:u,headless:d}){return{...v5({theme:e,themeName:t,props:i,stylesCtx:s,selector:r}),...Ed({theme:e,styles:a,props:i,stylesCtx:s})[r],...Ed({theme:e,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||i,stylesCtx:s})[r],...C5({theme:e,props:i,stylesCtx:s,vars:c,varsResolver:u,selector:r,themeName:t,headless:d}),...o===r?Zp({style:l,theme:e}):null,...Zp({style:n==null?void 0:n.style,theme:e})}}function nt({name:e,classes:t,props:r,stylesCtx:n,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:d}){const h=fi(),f=UI(),g=HI(),y=FI(),E=(Array.isArray(e)?e:[e]).filter(p=>p);return(p,v)=>({className:y5({theme:h,options:v,themeName:E,selector:p,classNamesPrefix:f,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:r,stylesCtx:n,withStaticClasses:g,headless:y}),style:S5({theme:h,themeName:E,selector:p,options:v,props:r,stylesCtx:n,rootSelector:o,styles:c,style:s,vars:u,varsResolver:d,headless:y})})}function w5(e,t){return typeof e=="boolean"?e:t.autoContrast}function be(e,t,r){var o;const n=fi(),i=(o=n.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(n):i;return{...t,...s,...Ec(r)}}function nv(e){return Er(e).reduce((t,r)=>e[r]!==void 0?`${t}${uI(r)}:${e[r]};`:t,"").trim()}function b5({selector:e,styles:t,media:r}){const n=t?nv(t):"",i=Array.isArray(r)?r.map(s=>`@media${s.query}{${e}{${nv(s.styles)}}}`):[];return`${n?`${e}{${n}}`:""}${i.join("")}`.trim()}function Bm({selector:e,styles:t,media:r}){const n=xm();return x.createElement("style",{"data-mantine-styles":"inline",nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:b5({selector:e,styles:t,media:r})}})}function wc(e){const{m:t,mx:r,my:n,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:d,py:h,pt:f,pb:g,pl:y,pr:E,pe:p,ps:v,bg:C,c:b,opacity:k,ff:m,fz:R,fw:_,lts:H,ta:A,lh:P,fs:B,tt:N,td:z,w:O,miw:F,maw:M,h:$,mih:q,mah:W,bgsz:ie,bgp:ae,bgr:ve,bga:Ee,pos:Ie,top:Re,left:Ae,bottom:Fe,right:Ue,inset:$e,display:ke,flex:Y,hiddenFrom:de,visibleFrom:le,lightHidden:ye,darkHidden:Je,...ir}=e;return{styleProps:Ec({m:t,mx:r,my:n,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:d,py:h,pt:f,pb:g,pl:y,pr:E,pe:p,ps:v,bg:C,c:b,opacity:k,ff:m,fz:R,fw:_,lts:H,ta:A,lh:P,fs:B,tt:N,td:z,w:O,miw:F,maw:M,h:$,mih:q,mah:W,bgsz:ie,bgp:ae,bgr:ve,bga:Ee,pos:Ie,top:Re,left:Ae,bottom:Fe,right:Ue,inset:$e,display:ke,flex:Y,hiddenFrom:de,visibleFrom:le,lightHidden:ye,darkHidden:Je}),rest:ir}}const T5={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function dS(e,t){const r=ja({color:e,theme:t});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function I5(e,t){const r=ja({color:e,theme:t});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:dS(e,t)}const iv={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)"};function A5(e){return typeof e=="string"&&e in iv?iv[e]:e}function R5(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="number"||typeof e=="string"?J(e):e}function k5(e){return e}function _5(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:e}function x5(e){return typeof e=="number"?J(e):e}function N5(e,t){if(typeof e=="number")return J(e);if(typeof e=="string"){const r=e.replace("-","");if(!(r in t.spacing))return J(e);const n=`--mantine-spacing-${r}`;return e.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return e}const Cf={color:dS,textColor:I5,fontSize:R5,spacing:N5,identity:k5,size:x5,lineHeight:_5,fontFamily:A5};function sv(e){return e.replace("(min-width: ","").replace("em)","")}function D5({media:e,...t}){const n=Object.keys(e).sort((i,s)=>Number(sv(i))-Number(sv(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:n}}function P5(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function B5(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function $5(e){return typeof e=="object"&&e!==null?Er(e).filter(t=>t!=="base"):[]}function L5(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function O5({styleProps:e,data:t,theme:r}){return D5(Er(e).reduce((n,i)=>{if(i==="hiddenFrom"||i==="visibleFrom")return n;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=B5(e[i]);if(!P5(e[i]))return o.forEach(c=>{n.inlineStyles[c]=Cf[s.type](a,r)}),n;n.hasResponsiveStyles=!0;const l=$5(e[i]);return o.forEach(c=>{a&&(n.styles[c]=Cf[s.type](a,r)),l.forEach(u=>{const d=`(min-width: ${r.breakpoints[u]})`;n.media[d]={...n.media[d],[c]:Cf[s.type](L5(e[i],u),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function $m(){return`__m__-${S.useId().replace(/:/g,"")}`}function hS(e){return e.startsWith("data-")?e:`data-${e}`}function M5(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return n===void 0||n===""||n===!1||n===null||(t[hS(r)]=e[r]),t},{})}function fS(e){return e?typeof e=="string"?{[hS(e)]:!0}:Array.isArray(e)?[...e].reduce((t,r)=>({...t,...fS(r)}),{}):M5(e):null}function Jp(e,t){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...Jp(n,t)}),{}):typeof e=="function"?e(t):e??{}}function U5({theme:e,style:t,vars:r,styleProps:n}){const i=Jp(t,e),s=Jp(r,e);return{...i,...s,...n}}const pS=S.forwardRef(({component:e,style:t,__vars:r,className:n,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:d,...h},f)=>{const g=fi(),y=e||"div",{styleProps:E,rest:p}=wc(h),v=$m(),C=O5({styleProps:E,theme:g,data:T5}),b={ref:f,style:U5({theme:g,style:t,vars:r,styleProps:C.inlineStyles}),className:pr(n,{[v]:C.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":YC(o)?void 0:o||void 0,...fS(s),...p};return x.createElement(x.Fragment,null,C.hasResponsiveStyles&&x.createElement(Bm,{selector:`.${v}`,styles:C.styles,media:C.media}),typeof d=="function"?d(b):x.createElement(y,{...b}))});pS.displayName="@mantine/core/Box";const we=pS;function gS(e){return e}function Le(e){const t=S.forwardRef(e);return t.extend=gS,t}function pi(e){const t=S.forwardRef(e);return t.extend=gS,t}const H5=S.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function ih(){return S.useContext(H5)}const[F5,Tn]=Mi("ScrollArea.Root component was not found in tree");function _a(e,t){const r=Ws(t);Fa(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}const j5=x.forwardRef((e,t)=>{const{style:r,...n}=e,i=Tn(),[s,o]=x.useState(0),[a,l]=x.useState(0),c=!!(s&&a);return _a(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),_a(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),c?x.createElement("div",{...n,ref:t,style:{...r,width:s,height:a}}):null}),V5=x.forwardRef((e,t)=>{const r=Tn(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?x.createElement(j5,{...e,ref:t}):null}),q5={scrollHideDelay:1e3,type:"hover"},mS=S.forwardRef((e,t)=>{const r=be("ScrollAreaRoot",q5,e),{type:n,scrollHideDelay:i,scrollbars:s,...o}=r,[a,l]=S.useState(null),[c,u]=S.useState(null),[d,h]=S.useState(null),[f,g]=S.useState(null),[y,E]=S.useState(null),[p,v]=S.useState(0),[C,b]=S.useState(0),[k,m]=S.useState(!1),[R,_]=S.useState(!1),H=sn(t,A=>l(A));return x.createElement(F5,{value:{type:n,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:k,onScrollbarXEnabledChange:m,scrollbarY:y,onScrollbarYChange:E,scrollbarYEnabled:R,onScrollbarYEnabledChange:_,onCornerWidthChange:v,onCornerHeightChange:b}},x.createElement(we,{...o,ref:H,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${p}px`,"--sa-corner-height":s!=="xy"?"0px":`${C}px`}}))});mS.displayName="@mantine/core/ScrollAreaRoot";function yS(e,t){const r=e/t;return Number.isNaN(r)?0:r}function sh(e){const t=yS(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function vS(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function z5(e,[t,r]){return Math.min(r,Math.max(t,e))}function ov(e,t,r="ltr"){const n=sh(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-n,l=r==="ltr"?[0,o]:[o*-1,0],c=z5(e,l);return vS([0,o],[0,a])(c)}function K5(e,t,r,n="ltr"){const i=sh(r),s=i/2,o=t||s,a=i-o,l=r.scrollbar.paddingStart+o,c=r.scrollbar.size-r.scrollbar.paddingEnd-a,u=r.content-r.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return vS([l,c],d)(e)}function ES(e,t){return e>0&&e<t}function Sd(e){return e?parseInt(e,10):0}function so(e,t,{checkForDefaultPrevented:r=!0}={}){return n=>{e==null||e(n),(r===!1||!n.defaultPrevented)&&(t==null||t(n))}}const[G5,CS]=Mi("ScrollAreaScrollbar was not found in tree"),SS=S.forwardRef((e,t)=>{const{sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:c,onResize:u,...d}=e,h=Tn(),[f,g]=x.useState(null),y=sn(t,_=>g(_)),E=x.useRef(null),p=x.useRef(""),{viewport:v}=h,C=r.content-r.viewport,b=Ws(c),k=Ws(a),m=rh(u,10),R=_=>{if(E.current){const H=_.clientX-E.current.left,A=_.clientY-E.current.top;l({x:H,y:A})}};return S.useEffect(()=>{const _=H=>{const A=H.target;(f==null?void 0:f.contains(A))&&b(H,C)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[v,f,C,b]),S.useEffect(k,[r,k]),_a(f,m),_a(h.content,m),x.createElement(G5,{value:{scrollbar:f,hasThumb:n,onThumbChange:Ws(i),onThumbPointerUp:Ws(s),onThumbPositionChange:k,onThumbPointerDown:Ws(o)}},x.createElement("div",{...d,ref:y,style:{position:"absolute",...d.style},onPointerDown:so(e.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),E.current=f.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",R(_))}),onPointerMove:so(e.onPointerMove,R),onPointerUp:so(e.onPointerUp,_=>{const H=_.target;H.hasPointerCapture(_.pointerId)&&H.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=p.current,E.current=null})}))}),W5=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:i,...s}=e,o=Tn(),[a,l]=S.useState(),c=S.useRef(null),u=sn(t,c,o.onScrollbarXChange);return S.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),x.createElement(SS,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{...i,"--sa-thumb-width":`${sh(r)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const f=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),ES(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Sd(a.paddingLeft),paddingEnd:Sd(a.paddingRight)}})}})}),Y5=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:i,...s}=e,o=Tn(),[a,l]=x.useState(),c=S.useRef(null),u=sn(t,c,o.onScrollbarYChange);return S.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),x.createElement(SS,{...s,"data-orientation":"vertical",ref:u,sizes:r,style:{"--sa-thumb-height":`${sh(r)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const f=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),ES(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Sd(a.paddingTop),paddingEnd:Sd(a.paddingBottom)}})}})}),Lm=S.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,{dir:i}=ih(),s=Tn(),o=S.useRef(null),a=S.useRef(0),[l,c]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=yS(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>{o.current=f},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:f=>{a.current=f}},h=(f,g)=>K5(f,a.current,l,g);return r==="horizontal"?x.createElement(W5,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollLeft,g=ov(f,l,i);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,i))}}):r==="vertical"?x.createElement(Y5,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollTop,g=ov(f,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),wS=S.forwardRef((e,t)=>{const r=Tn(),{forceMount:n,...i}=e,[s,o]=S.useState(!1),a=e.orientation==="horizontal",l=rh(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(a?c:u)}},10);return _a(r.viewport,l),_a(r.content,l),n||s?x.createElement(Lm,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Q5=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Tn(),[s,o]=S.useState(!1);return S.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),r||s?x.createElement(wS,{"data-state":s?"visible":"hidden",...n,ref:t}):null}),X5=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Tn(),s=e.orientation==="horizontal",[o,a]=S.useState("hidden"),l=rh(()=>a("idle"),100);return S.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay]),S.useEffect(()=>{const{viewport:c}=i,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(a("scrolling"),l()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l]),r||o!=="hidden"?x.createElement(Lm,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:so(e.onPointerEnter,()=>a("interacting")),onPointerLeave:so(e.onPointerLeave,()=>a("idle"))}):null}),av=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Tn(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return x.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?x.createElement(Q5,{...n,ref:t,forceMount:r}):i.type==="scroll"?x.createElement(X5,{...n,ref:t,forceMount:r}):i.type==="auto"?x.createElement(wS,{...n,ref:t,forceMount:r}):i.type==="always"?x.createElement(Lm,{...n,ref:t}):null});function Z5(e,t=()=>{}){let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,a=r.top!==s.top;(o||a)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)}const J5=S.forwardRef((e,t)=>{const{style:r,...n}=e,i=Tn(),s=CS(),{onThumbPositionChange:o}=s,a=sn(t,u=>s.onThumbChange(u)),l=S.useRef(),c=rh(()=>{l.current&&(l.current(),l.current=void 0)},100);return S.useEffect(()=>{const{viewport:u}=i;if(u){const d=()=>{if(c(),!l.current){const h=Z5(u,o);l.current=h,o()}};return o(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[i.viewport,c,o]),x.createElement("div",{"data-state":s.hasThumb?"visible":"hidden",...n,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:so(e.onPointerDownCapture,u=>{const h=u.target.getBoundingClientRect(),f=u.clientX-h.left,g=u.clientY-h.top;s.onThumbPointerDown({x:f,y:g})}),onPointerUp:so(e.onPointerUp,s.onThumbPointerUp)})}),lv=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=CS();return r||i.hasThumb?x.createElement(J5,{ref:t,...n}):null}),bS=S.forwardRef(({children:e,style:t,...r},n)=>{const i=Tn(),s=sn(n,i.onViewportChange);return x.createElement(we,{...r,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t}},x.createElement("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange},e))});bS.displayName="@mantine/core/ScrollAreaViewport";var Om={root:"m-d57069b5",viewport:"m-c0783ff9",viewportInner:"m-f8f631dd",scrollbar:"m-c44ba933",thumb:"m-d8b5e363",corner:"m-21657268"};const TS={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},e4=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":J(t)}}),Va=Le((e,t)=>{const r=be("ScrollArea",TS,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:c,type:u,scrollHideDelay:d,viewportProps:h,viewportRef:f,onScrollPositionChange:g,children:y,offsetScrollbars:E,scrollbars:p,...v}=r,[C,b]=S.useState(!1),k=nt({name:"ScrollArea",props:r,classes:Om,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:e4});return x.createElement(mS,{type:u==="never"?"always":u,scrollHideDelay:d,ref:t,scrollbars:p,...k("root"),...v},x.createElement(bS,{...h,...k("viewport",{style:h==null?void 0:h.style}),ref:f,"data-offset-scrollbars":E===!0?"xy":E||void 0,"data-scrollbars":p||void 0,onScroll:typeof g=="function"?({currentTarget:m})=>g({x:m.scrollLeft,y:m.scrollTop}):void 0},y),(p==="xy"||p==="x")&&x.createElement(av,{...k("scrollbar"),orientation:"horizontal","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},x.createElement(lv,{...k("thumb")})),(p==="xy"||p==="y")&&x.createElement(av,{...k("scrollbar"),orientation:"vertical","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},x.createElement(lv,{...k("thumb")})),x.createElement(V5,{...k("corner"),"data-hovered":C||void 0,"data-hidden":u==="never"||void 0}))});Va.displayName="@mantine/core/ScrollArea";const Mm=Le((e,t)=>{const{children:r,classNames:n,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:d,unstyled:h,variant:f,viewportProps:g,scrollbars:y,style:E,vars:p,...v}=be("ScrollAreaAutosize",TS,e);return x.createElement(we,{...v,ref:t,style:[{display:"flex",overflow:"auto"},E]},x.createElement(we,{style:{display:"flex",flexDirection:"column",flex:1}},x.createElement(Va,{classNames:n,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:d,unstyled:h,variant:f,viewportProps:g,vars:p,scrollbars:y},r)))});Va.classes=Om;Mm.displayName="@mantine/core/ScrollAreaAutosize";Mm.classes=Om;Va.Autosize=Mm;var IS={root:"m-87cf2631"};const t4={__staticSelector:"UnstyledButton"},bc=pi((e,t)=>{const r=be("UnstyledButton",t4,e),{className:n,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:c,...u}=r,d=nt({name:s,props:r,classes:IS,className:n,style:c,classNames:a,styles:l,unstyled:o});return x.createElement(we,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...u})});bc.classes=IS;bc.displayName="@mantine/core/UnstyledButton";var AS={root:"m-515a97f8"};const r4={},Um=Le((e,t)=>{const r=be("VisuallyHidden",r4,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,...c}=r,u=nt({name:"VisuallyHidden",classes:AS,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a});return x.createElement(we,{component:"span",ref:t,...u("root"),...c})});Um.classes=AS;Um.displayName="@mantine/core/VisuallyHidden";var RS={root:"m-1b7284a3"};const n4={},i4=(e,{radius:t,shadow:r})=>({root:{"--paper-radius":t===void 0?void 0:Vn(t),"--paper-shadow":_m(r)}}),Hm=pi((e,t)=>{const r=be("Paper",n4,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:c,radius:u,shadow:d,variant:h,mod:f,...g}=r,y=nt({name:"Paper",props:r,classes:RS,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:i4});return x.createElement(we,{ref:t,mod:[{"data-with-border":l},f],...y("root"),variant:h,...g})});Hm.classes=RS;Hm.displayName="@mantine/core/Paper";function _s(e){return kS(e)?(e.nodeName||"").toLowerCase():"#document"}function Jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ui(e){var t;return(t=(kS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function kS(e){return e instanceof Node||e instanceof Jr(e).Node}function Qr(e){return e instanceof Element||e instanceof Jr(e).Element}function hi(e){return e instanceof HTMLElement||e instanceof Jr(e).HTMLElement}function cv(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jr(e).ShadowRoot}function Tc(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=bn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function s4(e){return["table","td","th"].includes(_s(e))}function Fm(e){const t=jm(),r=bn(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function o4(e){let t=xa(e);for(;hi(t)&&!oh(t);){if(Fm(t))return t;t=xa(t)}return null}function jm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function oh(e){return["html","body","#document"].includes(_s(e))}function bn(e){return Jr(e).getComputedStyle(e)}function ah(e){return Qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function xa(e){if(_s(e)==="html")return e;const t=e.assignedSlot||e.parentNode||cv(e)&&e.host||Ui(e);return cv(t)?t.host:t}function _S(e){const t=xa(e);return oh(t)?e.ownerDocument?e.ownerDocument.body:e.body:hi(t)&&Tc(t)?t:_S(t)}function ic(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=_S(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=Jr(i);return s?t.concat(o,o.visualViewport||[],Tc(i)?i:[],o.frameElement&&r?ic(o.frameElement):[]):t.concat(i,ic(i,[],r))}const Fn=Math.min,vr=Math.max,wd=Math.round,nu=Math.floor,xs=e=>({x:e,y:e}),a4={left:"right",right:"left",bottom:"top",top:"bottom"},l4={start:"end",end:"start"};function eg(e,t,r){return vr(e,Fn(t,r))}function Bi(e,t){return typeof e=="function"?e(t):e}function jn(e){return e.split("-")[0]}function qa(e){return e.split("-")[1]}function Vm(e){return e==="x"?"y":"x"}function qm(e){return e==="y"?"height":"width"}function Co(e){return["top","bottom"].includes(jn(e))?"y":"x"}function zm(e){return Vm(Co(e))}function c4(e,t,r){r===void 0&&(r=!1);const n=qa(e),i=zm(e),s=qm(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=bd(o)),[o,bd(o)]}function u4(e){const t=bd(e);return[tg(e),t,tg(t)]}function tg(e){return e.replace(/start|end/g,t=>l4[t])}function d4(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:o;default:return[]}}function h4(e,t,r,n){const i=qa(e);let s=d4(jn(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(tg)))),s}function bd(e){return e.replace(/left|right|bottom|top/g,t=>a4[t])}function f4(e){return{top:0,right:0,bottom:0,left:0,...e}}function Km(e){return typeof e!="number"?f4(e):{top:e,right:e,bottom:e,left:e}}function Na(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function uv(e,t,r){let{reference:n,floating:i}=e;const s=Co(t),o=zm(t),a=qm(o),l=jn(t),c=s==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(qa(t)){case"start":f[o]-=h*(r&&c?-1:1);break;case"end":f[o]+=h*(r&&c?-1:1);break}return f}const p4=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=uv(c,n,l),h=n,f={},g=0;for(let y=0;y<a.length;y++){const{name:E,fn:p}=a[y],{x:v,y:C,data:b,reset:k}=await p({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=v??u,d=C??d,f={...f,[E]:{...f[E],...b}},k&&g<=50&&(g++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(c=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:u,y:d}=uv(c,h,l)),y=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function Gm(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Bi(t,e),g=Km(f),E=a[h?d==="floating"?"reference":"floating":d],p=Na(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(E)))==null||r?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{...o.floating,x:n,y:i}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},k=Na(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:C,strategy:l}):v);return{top:(p.top-k.top+g.top)/b.y,bottom:(k.bottom-p.bottom+g.bottom)/b.y,left:(p.left-k.left+g.left)/b.x,right:(k.right-p.right+g.right)/b.x}}const g4=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Bi(e,t)||{};if(c==null)return{};const d=Km(u),h={x:r,y:n},f=zm(i),g=qm(f),y=await o.getDimensions(c),E=f==="y",p=E?"top":"left",v=E?"bottom":"right",C=E?"clientHeight":"clientWidth",b=s.reference[g]+s.reference[f]-h[f]-s.floating[g],k=h[f]-s.reference[f],m=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let R=m?m[C]:0;(!R||!await(o.isElement==null?void 0:o.isElement(m)))&&(R=a.floating[C]||s.floating[g]);const _=b/2-k/2,H=R/2-y[g]/2-1,A=Fn(d[p],H),P=Fn(d[v],H),B=A,N=R-y[g]-P,z=R/2-y[g]/2+_,O=eg(B,z,N),F=!l.arrow&&qa(i)!=null&&z!==O&&s.reference[g]/2-(z<B?A:P)-y[g]/2<0,M=F?z<B?z-B:z-N:0;return{[f]:h[f]+M,data:{[f]:O,centerOffset:z-O-M,...F&&{alignmentOffset:M}},reset:F}}}),m4=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...E}=Bi(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const p=jn(i),v=jn(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=h||(v||!y?[bd(a)]:u4(a));!h&&g!=="none"&&b.push(...h4(a,y,g,C));const k=[a,...b],m=await Gm(t,E),R=[];let _=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&R.push(m[p]),d){const B=c4(i,o,C);R.push(m[B[0]],m[B[1]])}if(_=[..._,{placement:i,overflows:R}],!R.every(B=>B<=0)){var H,A;const B=(((H=s.flip)==null?void 0:H.index)||0)+1,N=k[B];if(N)return{data:{index:B,overflows:_},reset:{placement:N}};let z=(A=_.filter(O=>O.overflows[0]<=0).sort((O,F)=>O.overflows[1]-F.overflows[1])[0])==null?void 0:A.placement;if(!z)switch(f){case"bestFit":{var P;const O=(P=_.map(F=>[F.placement,F.overflows.filter(M=>M>0).reduce((M,$)=>M+$,0)]).sort((F,M)=>F[1]-M[1])[0])==null?void 0:P[0];O&&(z=O);break}case"initialPlacement":z=a;break}if(i!==z)return{reset:{placement:z}}}return{}}}};function xS(e){const t=Fn(...e.map(s=>s.left)),r=Fn(...e.map(s=>s.top)),n=vr(...e.map(s=>s.right)),i=vr(...e.map(s=>s.bottom));return{x:t,y:r,width:n-t,height:i-r}}function y4(e){const t=e.slice().sort((i,s)=>i.y-s.y),r=[];let n=null;for(let i=0;i<t.length;i++){const s=t[i];!n||s.y-n.y>n.height/2?r.push([s]):r[r.length-1].push(s),n=s}return r.map(i=>Na(xS(i)))}const v4=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:r,elements:n,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:c}=Bi(e,t),u=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(n.reference))||[]),d=y4(u),h=Na(xS(u)),f=Km(a);function g(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(E=>l>E.left-f.left&&l<E.right+f.right&&c>E.top-f.top&&c<E.bottom+f.bottom)||h;if(d.length>=2){if(Co(r)==="y"){const A=d[0],P=d[d.length-1],B=jn(r)==="top",N=A.top,z=P.bottom,O=B?A.left:P.left,F=B?A.right:P.right,M=F-O,$=z-N;return{top:N,bottom:z,left:O,right:F,width:M,height:$,x:O,y:N}}const E=jn(r)==="left",p=vr(...d.map(A=>A.right)),v=Fn(...d.map(A=>A.left)),C=d.filter(A=>E?A.left===v:A.right===p),b=C[0].top,k=C[C.length-1].bottom,m=v,R=p,_=R-m,H=k-b;return{top:b,bottom:k,left:m,right:R,width:_,height:H,x:m,y:b}}return h}const y=await s.getElementRects({reference:{getBoundingClientRect:g},floating:n.floating,strategy:o});return i.reference.x!==y.reference.x||i.reference.y!==y.reference.y||i.reference.width!==y.reference.width||i.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}};async function E4(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=jn(r),a=qa(r),l=Co(r)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Bi(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const C4=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await E4(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},S4=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:p,y:v}=E;return{x:p,y:v}}},...l}=Bi(e,t),c={x:r,y:n},u=await Gm(t,l),d=Co(jn(i)),h=Vm(d);let f=c[h],g=c[d];if(s){const E=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=f+u[E],C=f-u[p];f=eg(v,f,C)}if(o){const E=d==="y"?"top":"left",p=d==="y"?"bottom":"right",v=g+u[E],C=g-u[p];g=eg(v,g,C)}const y=a.fn({...t,[h]:f,[d]:g});return{...y,data:{x:y.x-r,y:y.y-n}}}}},w4=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Bi(e,t),u={x:r,y:n},d=Co(i),h=Vm(d);let f=u[h],g=u[d];const y=Bi(a,t),E=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(l){const C=h==="y"?"height":"width",b=s.reference[h]-s.floating[C]+E.mainAxis,k=s.reference[h]+s.reference[C]-E.mainAxis;f<b?f=b:f>k&&(f=k)}if(c){var p,v;const C=h==="y"?"width":"height",b=["top","left"].includes(jn(i)),k=s.reference[d]-s.floating[C]+(b&&((p=o.offset)==null?void 0:p[d])||0)+(b?0:E.crossAxis),m=s.reference[d]+s.reference[C]+(b?0:((v=o.offset)==null?void 0:v[d])||0)-(b?E.crossAxis:0);g<k?g=k:g>m&&(g=m)}return{[h]:f,[d]:g}}}},b4=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:n,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Bi(e,t),l=await Gm(t,a),c=jn(r),u=qa(r),d=Co(r)==="y",{width:h,height:f}=n.floating;let g,y;c==="top"||c==="bottom"?(g=c,y=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(y=c,g=u==="end"?"top":"bottom");const E=f-l[g],p=h-l[y],v=!t.middlewareData.shift;let C=E,b=p;if(d){const m=h-l.left-l.right;b=u||v?Fn(p,m):m}else{const m=f-l.top-l.bottom;C=u||v?Fn(E,m):m}if(v&&!u){const m=vr(l.left,0),R=vr(l.right,0),_=vr(l.top,0),H=vr(l.bottom,0);d?b=h-2*(m!==0||R!==0?m+R:vr(l.left,l.right)):C=f-2*(_!==0||H!==0?_+H:vr(l.top,l.bottom))}await o({...t,availableWidth:b,availableHeight:C});const k=await i.getDimensions(s.floating);return h!==k.width||f!==k.height?{reset:{rects:!0}}:{}}}};function NS(e){const t=bn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=hi(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=wd(r)!==s||wd(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function Wm(e){return Qr(e)?e:e.contextElement}function pa(e){const t=Wm(e);if(!hi(t))return xs(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=NS(t);let o=(s?wd(r.width):r.width)/n,a=(s?wd(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const T4=xs(0);function DS(e){const t=Jr(e);return!jm()||!t.visualViewport?T4:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function I4(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Jr(e)?!1:t}function mo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=Wm(e);let o=xs(1);t&&(n?Qr(n)&&(o=pa(n)):o=pa(e));const a=I4(s,r,n)?DS(s):xs(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=Jr(s),f=n&&Qr(n)?Jr(n):n;let g=h,y=g.frameElement;for(;y&&n&&f!==g;){const E=pa(y),p=y.getBoundingClientRect(),v=bn(y),C=p.left+(y.clientLeft+parseFloat(v.paddingLeft))*E.x,b=p.top+(y.clientTop+parseFloat(v.paddingTop))*E.y;l*=E.x,c*=E.y,u*=E.x,d*=E.y,l+=C,c+=b,g=Jr(y),y=g.frameElement}}return Na({width:u,height:d,x:l,y:c})}const A4=[":popover-open",":modal"];function PS(e){return A4.some(t=>{try{return e.matches(t)}catch{return!1}})}function R4(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",o=Ui(n),a=t?PS(t.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=xs(1);const u=xs(0),d=hi(n);if((d||!d&&!s)&&((_s(n)!=="body"||Tc(o))&&(l=ah(n)),hi(n))){const h=mo(n);c=pa(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x,y:r.y*c.y-l.scrollTop*c.y+u.y}}function k4(e){return Array.from(e.getClientRects())}function BS(e){return mo(Ui(e)).left+ah(e).scrollLeft}function _4(e){const t=Ui(e),r=ah(e),n=e.ownerDocument.body,i=vr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=vr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+BS(e);const a=-r.scrollTop;return bn(n).direction==="rtl"&&(o+=vr(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function x4(e,t){const r=Jr(e),n=Ui(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=jm();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function N4(e,t){const r=mo(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=hi(e)?pa(e):xs(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function dv(e,t,r){let n;if(t==="viewport")n=x4(e,r);else if(t==="document")n=_4(Ui(e));else if(Qr(t))n=N4(t,r);else{const i=DS(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return Na(n)}function $S(e,t){const r=xa(e);return r===t||!Qr(r)||oh(r)?!1:bn(r).position==="fixed"||$S(r,t)}function D4(e,t){const r=t.get(e);if(r)return r;let n=ic(e,[],!1).filter(a=>Qr(a)&&_s(a)!=="body"),i=null;const s=bn(e).position==="fixed";let o=s?xa(e):e;for(;Qr(o)&&!oh(o);){const a=bn(o),l=Fm(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Tc(o)&&!l&&$S(e,o))?n=n.filter(u=>u!==o):i=a,o=xa(o)}return t.set(e,n),n}function P4(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?D4(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,u)=>{const d=dv(t,u,i);return c.top=vr(d.top,c.top),c.right=Fn(d.right,c.right),c.bottom=Fn(d.bottom,c.bottom),c.left=vr(d.left,c.left),c},dv(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function B4(e){const{width:t,height:r}=NS(e);return{width:t,height:r}}function $4(e,t,r){const n=hi(t),i=Ui(t),s=r==="fixed",o=mo(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=xs(0);if(n||!n&&!s)if((_s(t)!=="body"||Tc(i))&&(a=ah(t)),n){const d=mo(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=BS(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function hv(e,t){return!hi(e)||bn(e).position==="fixed"?null:t?t(e):e.offsetParent}function LS(e,t){const r=Jr(e);if(!hi(e)||PS(e))return r;let n=hv(e,t);for(;n&&s4(n)&&bn(n).position==="static";)n=hv(n,t);return n&&(_s(n)==="html"||_s(n)==="body"&&bn(n).position==="static"&&!Fm(n))?r:n||o4(e)||r}const L4=async function(e){const t=this.getOffsetParent||LS,r=this.getDimensions;return{reference:$4(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await r(e.floating)}}};function O4(e){return bn(e).direction==="rtl"}const M4={convertOffsetParentRelativeRectToViewportRelativeRect:R4,getDocumentElement:Ui,getClippingRect:P4,getOffsetParent:LS,getElementRects:L4,getClientRects:k4,getDimensions:B4,getScale:pa,isElement:Qr,isRTL:O4};function U4(e,t){let r=null,n;const i=Ui(e);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const f=nu(u),g=nu(i.clientWidth-(c+d)),y=nu(i.clientHeight-(u+h)),E=nu(c),v={rootMargin:-f+"px "+-g+"px "+-y+"px "+-E+"px",threshold:vr(0,Fn(1,l))||1};let C=!0;function b(k){const m=k[0].intersectionRatio;if(m!==l){if(!C)return o();m?o(!1,m):n=setTimeout(()=>{o(!1,1e-7)},100)}C=!1}try{r=new IntersectionObserver(b,{...v,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,v)}r.observe(e)}return o(!0),s}function H4(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=Wm(e),u=i||s?[...c?ic(c):[],...ic(t)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",r,{passive:!0}),s&&p.addEventListener("resize",r)});const d=c&&a?U4(c,r):null;let h=-1,f=null;o&&(f=new ResizeObserver(p=>{let[v]=p;v&&v.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=f)==null||C.observe(t)})),r()}),c&&!l&&f.observe(c),f.observe(t));let g,y=l?mo(e):null;l&&E();function E(){const p=mo(e);y&&(p.x!==y.x||p.y!==y.y||p.width!==y.width||p.height!==y.height)&&r(),y=p,g=requestAnimationFrame(E)}return r(),()=>{var p;u.forEach(v=>{i&&v.removeEventListener("scroll",r),s&&v.removeEventListener("resize",r)}),d==null||d(),(p=f)==null||p.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const F4=S4,j4=m4,V4=b4,fv=g4,q4=v4,z4=w4,K4=(e,t,r)=>{const n=new Map,i={platform:M4,...r},s={...i.platform,_c:n};return p4(e,t,{...i,platform:s})},G4=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?fv({element:n.current,padding:i}).fn(r):{}:n?fv({element:n,padding:i}).fn(r):{}}}};var Fu=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Td(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Td(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Td(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function OS(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function pv(e,t){const r=OS(e);return Math.round(t*r)/r}function gv(e){const t=S.useRef(e);return Fu(()=>{t.current=e}),t}function W4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=S.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=S.useState(n);Td(h,n)||f(n);const[g,y]=S.useState(null),[E,p]=S.useState(null),v=S.useCallback(M=>{M!==m.current&&(m.current=M,y(M))},[]),C=S.useCallback(M=>{M!==R.current&&(R.current=M,p(M))},[]),b=s||g,k=o||E,m=S.useRef(null),R=S.useRef(null),_=S.useRef(u),H=l!=null,A=gv(l),P=gv(i),B=S.useCallback(()=>{if(!m.current||!R.current)return;const M={placement:t,strategy:r,middleware:h};P.current&&(M.platform=P.current),K4(m.current,R.current,M).then($=>{const q={...$,isPositioned:!0};N.current&&!Td(_.current,q)&&(_.current=q,vc.flushSync(()=>{d(q)}))})},[h,t,r,P]);Fu(()=>{c===!1&&_.current.isPositioned&&(_.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[c]);const N=S.useRef(!1);Fu(()=>(N.current=!0,()=>{N.current=!1}),[]),Fu(()=>{if(b&&(m.current=b),k&&(R.current=k),b&&k){if(A.current)return A.current(b,k,B);B()}},[b,k,B,A,H]);const z=S.useMemo(()=>({reference:m,floating:R,setReference:v,setFloating:C}),[v,C]),O=S.useMemo(()=>({reference:b,floating:k}),[b,k]),F=S.useMemo(()=>{const M={position:r,left:0,top:0};if(!O.floating)return M;const $=pv(O.floating,u.x),q=pv(O.floating,u.y);return a?{...M,transform:"translate("+$+"px, "+q+"px)",...OS(O.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:q}},[r,a,O.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:B,refs:z,elements:O,floatingStyles:F}),[u,B,z,O,F])}const Y4=Og.useInsertionEffect,Q4=Y4||(e=>e());function X4(e){const t=S.useRef(()=>{});return Q4(()=>{t.current=e}),S.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}var MS=typeof document<"u"?S.useLayoutEffect:S.useEffect;let Sf=!1,Z4=0;const mv=()=>"floating-ui-"+Z4++;function J4(){const[e,t]=S.useState(()=>Sf?mv():void 0);return MS(()=>{e==null&&t(mv())},[]),S.useEffect(()=>{Sf||(Sf=!0)},[]),e}const eA=Og.useId,tA=eA||J4;function rA(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const nA=S.createContext(null),iA=S.createContext(null),sA=()=>{var e;return((e=S.useContext(nA))==null?void 0:e.id)||null},oA=()=>S.useContext(iA);function aA(e){var t;e===void 0&&(e={});const{open:r=!1,onOpenChange:n,nodeId:i}=e,[s,o]=S.useState(null),a=((t=e.elements)==null?void 0:t.reference)||s,l=W4(e),c=oA(),u=sA()!=null,d=X4((k,m,R)=>{k&&(f.current.openEvent=m),g.emit("openchange",{open:k,event:m,reason:R,nested:u}),n==null||n(k,m,R)}),h=S.useRef(null),f=S.useRef({}),g=S.useState(()=>rA())[0],y=tA(),E=S.useCallback(k=>{const m=Qr(k)?{getBoundingClientRect:()=>k.getBoundingClientRect(),contextElement:k}:k;l.refs.setReference(m)},[l.refs]),p=S.useCallback(k=>{(Qr(k)||k===null)&&(h.current=k,o(k)),(Qr(l.refs.reference.current)||l.refs.reference.current===null||k!==null&&!Qr(k))&&l.refs.setReference(k)},[l.refs]),v=S.useMemo(()=>({...l.refs,setReference:p,setPositionReference:E,domReference:h}),[l.refs,p,E]),C=S.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),b=S.useMemo(()=>({...l,refs:v,elements:C,dataRef:f,nodeId:i,floatingId:y,events:g,open:r,onOpenChange:d}),[l,i,y,g,r,d,v,C]);return MS(()=>{const k=c==null?void 0:c.nodesRef.current.find(m=>m.id===i);k&&(k.context=b)}),S.useMemo(()=>({...l,context:b,refs:v,elements:C}),[l,v,C,b])}function lA(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[r,n]=t.split("-"),i=r==="right"?"left":"right";return n===void 0?i:`${i}-${n}`}return t}function yv(e,t,r,n){return e==="center"||n==="center"?{top:t}:e==="end"?{bottom:r}:e==="start"?{top:r}:{}}function vv(e,t,r,n,i){return e==="center"||n==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:r}:e==="start"?{[i==="ltr"?"left":"right"]:r}:{}}const cA={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function uA({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,c="center"]=e.split("-"),u={width:J(t),height:J(t),transform:"rotate(45deg)",position:"absolute",[cA[l]]:J(n)},d=J(-t/2);return l==="left"?{...u,...yv(c,o,r,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...u,...yv(c,o,r,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...u,...vv(c,s,r,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...u,...vv(c,s,r,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const US=S.forwardRef(({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...c},u)=>{const{dir:d}=ih();return s?x.createElement("div",{...c,ref:u,style:{...l,...uA({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});US.displayName="@mantine/core/FloatingArrow";const[dA,HS]=Mi("Popover component was not found in the tree");function lh({children:e,active:t=!0,refProp:r="ref"}){const n=kI(t),i=sn(n,e==null?void 0:e.ref);return Cc(e)?S.cloneElement(e,{[r]:i}):e}function FS(e){return x.createElement(Um,{tabIndex:-1,"data-autofocus":!0,...e})}lh.displayName="@mantine/core/FocusTrap";FS.displayName="@mantine/core/FocusTrapInitialFocus";lh.InitialFocus=FS;function hA(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const fA={},jS=S.forwardRef((e,t)=>{const{children:r,target:n,...i}=be("Portal",fA,e),[s,o]=S.useState(!1),a=S.useRef(null);return Fa(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:hA(i),tS(t,a.current),!n&&a.current&&document.body.appendChild(a.current),()=>{!n&&a.current&&document.body.removeChild(a.current)}),[n]),!s||!a.current?null:vc.createPortal(x.createElement(x.Fragment,null,r),a.current)});jS.displayName="@mantine/core/Portal";function Ym({withinPortal:e=!0,children:t,...r}){return e?x.createElement(jS,{...r},t):x.createElement(x.Fragment,null,t)}Ym.displayName="@mantine/core/OptionalPortal";const rl=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${J(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),iu={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${J(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${J(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${J(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${J(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...rl("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...rl("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...rl("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...rl("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...rl("top"),common:{transformOrigin:"top right"}}},Ev={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function pA({transition:e,state:t,duration:r,timingFunction:n}){const i={transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof e=="string"?e in iu?{transitionProperty:iu[e].transitionProperty,...i,...iu[e].common,...iu[e][Ev[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ev[t]]}}function gA({duration:e,exitDuration:t,timingFunction:r,mounted:n,onEnter:i,onExit:s,onEntered:o,onExited:a}){const l=fi(),c=rS(),u=l.respectReducedMotion?c:!1,[d,h]=S.useState(u?0:e),[f,g]=S.useState(n?"entered":"exited"),y=S.useRef(-1),E=S.useRef(-1),p=v=>{const C=v?i:s,b=v?o:a;window.clearTimeout(y.current);const k=u?0:v?e:t;h(k),k===0?(typeof C=="function"&&C(),typeof b=="function"&&b(),g(v?"entered":"exited")):E.current=requestAnimationFrame(()=>{UC.flushSync(()=>{g(v?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof C=="function"&&C(),g(v?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof b=="function"&&b(),g(v?"entered":"exited")},k)})})};return ka(()=>{p(n)},[n]),S.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(E.current)},[]),{transitionDuration:d,transitionStatus:f,transitionTimingFunction:r||"ease"}}function So({keepMounted:e,transition:t="fade",duration:r=250,exitDuration:n=r,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:c,onExited:u}){const{transitionDuration:d,transitionStatus:h,transitionTimingFunction:f}=gA({mounted:i,exitDuration:n,duration:r,timingFunction:o,onExit:a,onEntered:l,onEnter:c,onExited:u});return d===0?i?x.createElement(x.Fragment,null,s({})):e?s({display:"none"}):null:h==="exited"?e?s({display:"none"}):null:x.createElement(x.Fragment,null,s(pA({transition:t,duration:d,state:h,timingFunction:f})))}So.displayName="@mantine/core/Transition";var VS={dropdown:"m-38a85659",arrow:"m-a31dc6c1"};const mA={},Qm=Le((e,t)=>{var E,p,v,C;const r=be("PopoverDropdown",mA,e),{className:n,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...d}=r,h=HS(),f=XC({opened:h.opened,shouldReturnFocus:h.returnFocus}),g=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},y=sn(t,h.floating);return h.disabled?null:x.createElement(Ym,{...h.portalProps,withinPortal:h.withinPortal},x.createElement(So,{mounted:h.opened,...h.transitionProps,transition:((E=h.transitionProps)==null?void 0:E.transition)||"fade",duration:((p=h.transitionProps)==null?void 0:p.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((v=h.transitionProps)==null?void 0:v.exitDuration)=="number"?h.transitionProps.exitDuration:(C=h.transitionProps)==null?void 0:C.duration},b=>x.createElement(lh,{active:h.trapFocus},x.createElement(we,{...g,...d,variant:l,ref:y,onKeyDownCapture:gI(h.onClose,{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,...h.getStyles("dropdown",{className:n,props:r,classNames:c,styles:u,style:[{...b,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:J(h.width)},i]})},o,x.createElement(US,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:r,classNames:c,styles:u})})))))});Qm.classes=VS;Qm.displayName="@mantine/core/PopoverDropdown";const yA={refProp:"ref",popupType:"dialog"},qS=Le((e,t)=>{const{children:r,refProp:n,popupType:i,...s}=be("PopoverTarget",yA,e);if(!Cc(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=HS(),l=sn(a.reference,r.ref,t),c=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return S.cloneElement(r,{...o,...c,...a.targetProps,className:pr(a.targetProps.className,o.className,r.props.className),[n]:l,...a.controlled?null:{onClick:a.onToggle}})});qS.displayName="@mantine/core/PopoverTarget";function vA({opened:e,floating:t,position:r,positionDependencies:n}){const[i,s]=S.useState(0);S.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return H4(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,r]),ka(()=>{t.update()},n),ka(()=>{s(o=>o+1)},[e])}function EA(e,t){var n,i,s,o;const r=[C4(e.offset)];return(n=e.middlewares)!=null&&n.shift&&r.push(F4({limiter:z4()})),(i=e.middlewares)!=null&&i.flip&&r.push(j4()),(s=e.middlewares)!=null&&s.inline&&r.push(q4()),r.push(G4({element:e.arrowRef,padding:e.arrowOffset})),((o=e.middlewares)!=null&&o.size||e.width==="target")&&r.push(V4({apply({rects:a,availableWidth:l,availableHeight:c}){var h,f;const d=((h=t().refs.floating.current)==null?void 0:h.style)??{};(f=e.middlewares)!=null&&f.size&&Object.assign(d,{maxWidth:`${l}px`,maxHeight:`${c}px`}),e.width==="target"&&Object.assign(d,{width:`${a.reference.width}px`})}})),r}function CA(e){const[t,r]=go({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=()=>{var o;t&&((o=e.onClose)==null||o.call(e),r(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),r(!1)):((a=e.onOpen)==null||a.call(e),r(!0))},s=aA({strategy:e.strategy,placement:e.position,middleware:EA(e,()=>s)});return vA({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),ka(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),ka(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:n,onToggle:i}}const SA={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ha("popover"),__staticSelector:"Popover",width:"max-content"},wA=(e,{radius:t,shadow:r})=>({dropdown:{"--popover-radius":t===void 0?void 0:Vn(t),"--popover-shadow":_m(r)}});function Ht(e){var ir,dt,pt,Rn,Mt,qi;const t=be("Popover",SA,e),{children:r,position:n,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:c,middlewares:u,withArrow:d,arrowSize:h,arrowOffset:f,arrowRadius:g,arrowPosition:y,unstyled:E,classNames:p,styles:v,closeOnClickOutside:C,withinPortal:b,portalProps:k,closeOnEscape:m,clickOutsideEvents:R,trapFocus:_,onClose:H,onOpen:A,onChange:P,zIndex:B,radius:N,shadow:z,id:O,defaultOpened:F,__staticSelector:M,withRoles:$,disabled:q,returnFocus:W,variant:ie,keepMounted:ae,vars:ve,floatingStrategy:Ee,...Ie}=t,Re=nt({name:M,props:t,classes:VS,classNames:p,styles:v,unstyled:E,rootSelector:"dropdown",vars:ve,varsResolver:wA}),Ae=S.useRef(null),[Fe,Ue]=S.useState(null),[$e,ke]=S.useState(null),{dir:Y}=ih(),de=Eo(O),le=CA({middlewares:u,width:c,position:lA(Y,n),offset:typeof i=="number"?i+(d?h/2:0):i,arrowRef:Ae,arrowOffset:f,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:F,onChange:P,onOpen:A,onClose:H,strategy:Ee});vI(()=>C&&le.onClose(),R,[Fe,$e]);const ye=S.useCallback(on=>{Ue(on),le.floating.refs.setReference(on)},[le.floating.refs.setReference]),Je=S.useCallback(on=>{ke(on),le.floating.refs.setFloating(on)},[le.floating.refs.setFloating]);return x.createElement(dA,{value:{returnFocus:W,disabled:q,controlled:le.controlled,reference:ye,floating:Je,x:le.floating.x,y:le.floating.y,arrowX:(pt=(dt=(ir=le.floating)==null?void 0:ir.middlewareData)==null?void 0:dt.arrow)==null?void 0:pt.x,arrowY:(qi=(Mt=(Rn=le.floating)==null?void 0:Rn.middlewareData)==null?void 0:Mt.arrow)==null?void 0:qi.y,opened:le.opened,arrowRef:Ae,transitionProps:l,width:c,withArrow:d,arrowSize:h,arrowOffset:f,arrowRadius:g,arrowPosition:y,placement:le.floating.placement,trapFocus:_,withinPortal:b,portalProps:k,zIndex:B,radius:N,shadow:z,closeOnEscape:m,onClose:le.onClose,onToggle:le.onToggle,getTargetId:()=>`${de}-target`,getDropdownId:()=>`${de}-dropdown`,withRoles:$,targetProps:Ie,__staticSelector:M,classNames:p,styles:v,unstyled:E,variant:ie,keepMounted:ae,getStyles:Re}},r)}Ht.Target=qS;Ht.Dropdown=Qm;Ht.displayName="@mantine/core/Popover";Ht.extend=e=>e;var $n={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const bA=S.forwardRef(({className:e,...t},r)=>x.createElement(we,{component:"span",className:pr($n.barsLoader,e),...t,ref:r},x.createElement("span",{className:$n.bar}),x.createElement("span",{className:$n.bar}),x.createElement("span",{className:$n.bar}))),TA=S.forwardRef(({className:e,...t},r)=>x.createElement(we,{component:"span",className:pr($n.dotsLoader,e),...t,ref:r},x.createElement("span",{className:$n.dot}),x.createElement("span",{className:$n.dot}),x.createElement("span",{className:$n.dot}))),IA=S.forwardRef(({className:e,...t},r)=>x.createElement(we,{component:"span",className:pr($n.ovalLoader,e),...t,ref:r})),zS={bars:bA,oval:IA,dots:TA},AA={loaders:zS,type:"oval"},RA=(e,{size:t,color:r})=>({root:{"--loader-size":It(t,"loader-size"),"--loader-color":r?Un(r,e):void 0}}),Ic=Le((e,t)=>{const r=be("Loader",AA,e),{size:n,color:i,type:s,vars:o,className:a,style:l,classNames:c,styles:u,unstyled:d,loaders:h,variant:f,children:g,...y}=r,E=nt({name:"Loader",props:r,classes:$n,className:a,style:l,classNames:c,styles:u,unstyled:d,vars:o,varsResolver:RA});return g?x.createElement(we,{...E("root"),ref:t,...y},g):x.createElement(we,{...E("root"),ref:t,component:h[s],variant:f,size:n,...y})});Ic.defaultLoaders=zS;Ic.classes=$n;Ic.displayName="@mantine/core/Loader";var ch={root:"m-8d3f4000",icon:"m-8d3afb97",loader:"m-302b9fb1",group:"m-1a0f1b21"};const Cv={orientation:"horizontal"},kA=(e,{borderWidth:t})=>({group:{"--ai-border-width":J(t)}}),Xm=Le((e,t)=>{const r=be("ActionIconGroup",Cv,e),{className:n,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:d,mod:h,...f}=be("ActionIconGroup",Cv,e),g=nt({name:"ActionIconGroup",props:r,classes:ch,className:n,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:kA,rootSelector:"group"});return x.createElement(we,{...g("group"),ref:t,variant:d,mod:[{"data-orientation":l},h],role:"group",...f})});Xm.classes=ch;Xm.displayName="@mantine/core/ActionIconGroup";const _A={},xA=(e,{size:t,radius:r,variant:n,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:n||"filled",autoContrast:o});return{root:{"--ai-size":It(t,"ai-size"),"--ai-radius":r===void 0?void 0:Vn(r),"--ai-bg":s||n?a.background:void 0,"--ai-hover":s||n?a.hover:void 0,"--ai-hover-color":s||n?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||n?a.border:void 0}}},ei=pi((e,t)=>{const r=be("ActionIcon",_A,e),{className:n,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:c,loaderProps:u,size:d,color:h,radius:f,__staticSelector:g,gradient:y,vars:E,children:p,disabled:v,"data-disabled":C,autoContrast:b,mod:k,...m}=r,R=nt({name:["ActionIcon",g],props:r,className:n,style:l,classes:ch,classNames:o,styles:a,unstyled:i,vars:E,varsResolver:xA});return x.createElement(bc,{...R("root",{active:!v&&!c&&!C}),...m,unstyled:i,variant:s,size:d,disabled:v||c,ref:t,mod:[{loading:c,disabled:v||C},k]},x.createElement(So,{mounted:!!c,transition:"slide-down",duration:150},_=>x.createElement(we,{component:"span",...R("loader",{style:_}),"aria-hidden":!0},x.createElement(Ic,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u}))),x.createElement(we,{component:"span",mod:{loading:c},...R("icon")},p))});ei.classes=ch;ei.displayName="@mantine/core/ActionIcon";ei.Group=Xm;const KS=S.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...r},n)=>x.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:n,...r},x.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})));KS.displayName="@mantine/core/CloseIcon";var GS={root:"m-86a44da5","root--subtle":"m-220c80f2"};const NA={variant:"subtle"},DA=(e,{size:t,radius:r,iconSize:n})=>({root:{"--cb-size":It(t,"cb-size"),"--cb-radius":r===void 0?void 0:Vn(r),"--cb-icon-size":J(n)}}),uh=pi((e,t)=>{const r=be("CloseButton",NA,e),{iconSize:n,children:i,vars:s,radius:o,className:a,classNames:l,style:c,styles:u,unstyled:d,"data-disabled":h,disabled:f,variant:g,icon:y,mod:E,...p}=r,v=nt({name:"CloseButton",props:r,className:a,style:c,classes:GS,classNames:l,styles:u,unstyled:d,vars:s,varsResolver:DA});return x.createElement(bc,{ref:t,...p,unstyled:d,variant:g,disabled:f,mod:[{disabled:f||h},E],...v("root",{variant:g,active:!0})},y||x.createElement(KS,null),i)});uh.classes=GS;uh.displayName="@mantine/core/CloseButton";function PA(e){return S.Children.toArray(e).filter(Boolean)}var WS={root:"m-4081bf90"};const BA={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},$A=(e,{grow:t,preventGrowOverflow:r,gap:n,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&r?a:void 0,"--group-gap":po(n),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$i=Le((e,t)=>{const r=be("Group",BA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,children:l,gap:c,align:u,justify:d,wrap:h,grow:f,preventGrowOverflow:g,vars:y,variant:E,__size:p,mod:v,...C}=r,b=PA(l),k=b.length,m=po(c??"md"),_={childWidth:`calc(${100/k}% - (${m} - ${m} / ${k}))`},H=nt({name:"Group",props:r,stylesCtx:_,className:i,style:s,classes:WS,classNames:n,styles:o,unstyled:a,vars:y,varsResolver:$A});return x.createElement(we,{...H("root"),ref:t,variant:E,mod:[{grow:f},v],size:p,...C},b)});$i.classes=WS;$i.displayName="@mantine/core/Group";var YS={root:"m-9814e45f"};const LA={zIndex:Ha("modal")},OA=(e,{gradient:t,color:r,backgroundOpacity:n,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(r!==void 0||n!==void 0)&&kr(r||"#000",n??.6)||void 0,"--overlay-filter":i?`blur(${J(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Vn(s),"--overlay-z-index":o==null?void 0:o.toString()}}),Zm=pi((e,t)=>{const r=be("Overlay",LA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:c,center:u,children:d,radius:h,zIndex:f,gradient:g,blur:y,color:E,backgroundOpacity:p,mod:v,...C}=r,b=nt({name:"Overlay",props:r,classes:YS,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:OA});return x.createElement(we,{ref:t,...b("root"),mod:[{center:u,fixed:c},v],...C},d)});Zm.classes=YS;Zm.displayName="@mantine/core/Overlay";const[MA,Hi]=Mi("ModalBase component was not found in tree");function UA({opened:e,transitionDuration:t}){const[r,n]=S.useState(e),i=S.useRef(),o=rS()?0:t;return S.useEffect(()=>(e?(n(!0),window.clearTimeout(i.current)):o===0?n(!1):i.current=window.setTimeout(()=>n(!1),o),()=>window.clearTimeout(i.current)),[e,o]),r}function HA({id:e,transitionProps:t,opened:r,trapFocus:n,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Eo(e),[l,c]=S.useState(!1),[u,d]=S.useState(!1),h=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,f=UA({opened:r,transitionDuration:h});return NI("keydown",g=>{var y;g.key==="Escape"&&i&&((y=g.target)==null?void 0:y.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),XC({opened:r,shouldReturnFocus:n&&o}),{_id:a,titleMounted:l,bodyMounted:u,shouldLockScroll:f,setTitleMounted:c,setBodyMounted:d}}const FA=S.forwardRef(({keepMounted:e,opened:t,onClose:r,id:n,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:c,portalProps:u,lockScroll:d,children:h,zIndex:f,shadow:g,padding:y,__vars:E,unstyled:p,removeScrollProps:v,...C},b)=>{const{_id:k,titleMounted:m,bodyMounted:R,shouldLockScroll:_,setTitleMounted:H,setBodyMounted:A}=HA({id:n,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:r,returnFocus:a});return x.createElement(Ym,{...u,withinPortal:c},x.createElement(MA,{value:{opened:t,onClose:r,closeOnClickOutside:l,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${k}-title`,getBodyId:()=>`${k}-body`,titleMounted:m,bodyMounted:R,setTitleMounted:H,setBodyMounted:A,trapFocus:s,closeOnEscape:o,zIndex:f,unstyled:p}},x.createElement(cI,{enabled:_&&d,...v},x.createElement(we,{ref:b,...C,__vars:{...E,"--mb-z-index":(f||Ha("modal")).toString(),"--mb-shadow":_m(g),"--mb-padding":po(y)}},h))))});function jA(){const e=Hi();return S.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var Da={title:"m-615af6c9",header:"m-b5489c3c",inner:"m-60c222c7",content:"m-fd1ab0aa",close:"m-606cb269",body:"m-5df29311"};const QS=S.forwardRef(({className:e,...t},r)=>{const n=jA(),i=Hi();return x.createElement(we,{ref:r,...t,id:n,className:pr({[Da.body]:!i.unstyled},e)})});QS.displayName="@mantine/core/ModalBaseBody";const XS=S.forwardRef(({className:e,onClick:t,...r},n)=>{const i=Hi();return x.createElement(uh,{ref:n,...r,onClick:s=>{i.onClose(),t==null||t(s)},className:pr({[Da.close]:!i.unstyled},e),unstyled:i.unstyled})});XS.displayName="@mantine/core/ModalBaseCloseButton";const VA=S.forwardRef(({transitionProps:e,className:t,innerProps:r,onKeyDown:n,style:i,...s},o)=>{const a=Hi();return x.createElement(So,{mounted:a.opened,transition:"pop",...a.transitionProps,...e},l=>x.createElement("div",{...r,className:pr({[Da.inner]:!a.unstyled},r.className)},x.createElement(lh,{active:a.opened&&a.trapFocus},x.createElement(Hm,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,l],className:pr({[Da.content]:!a.unstyled},t),unstyled:a.unstyled},s.children))))}),ZS=S.forwardRef(({className:e,...t},r)=>{const n=Hi();return x.createElement(we,{component:"header",ref:r,className:pr({[Da.header]:!n.unstyled},e),...t})});ZS.displayName="@mantine/core/ModalBaseHeader";const qA={duration:200,timingFunction:"ease",transition:"fade"};function zA(e){const t=Hi();return{...qA,...t.transitionProps,...e}}const JS=S.forwardRef(({onClick:e,transitionProps:t,style:r,...n},i)=>{const s=Hi(),o=zA(t);return x.createElement(So,{mounted:s.opened,...o,transition:"fade"},a=>x.createElement(Zm,{ref:i,fixed:!0,style:[r,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...n}))});JS.displayName="@mantine/core/ModalBaseOverlay";function KA(){const e=Hi();return S.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const ew=S.forwardRef(({className:e,...t},r)=>{const n=KA(),i=Hi();return x.createElement(we,{component:"h2",ref:r,className:pr({[Da.title]:!i.unstyled},e),...t,id:n})});ew.displayName="@mantine/core/ModalBaseTitle";function GA({children:e}){return x.createElement(x.Fragment,null,e)}const[WA,Ac]=hI({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var In={wrapper:"m-6c018570",input:"m-8fb7ebe7",section:"m-82577fc2",placeholder:"m-88bacfd0",root:"m-46b77525",label:"m-8fdc1311",required:"m-78a94662",error:"m-8f816625",description:"m-fe47ce59"};const Sv={},YA=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Zr(t)} - ${J(2)})`}}),dh=Le((e,t)=>{const r=be("InputDescription",Sv,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:h,...f}=be("InputDescription",Sv,r),g=Ac(),y=nt({name:["InputWrapper",u],props:r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:YA}),E=d&&(g==null?void 0:g.getStyles)||y;return x.createElement(we,{component:"p",ref:t,variant:h,size:c,...E("description",g!=null&&g.getStyles?{className:i,style:s}:void 0),...f})});dh.classes=In;dh.displayName="@mantine/core/InputDescription";const QA={},XA=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Zr(t)} - ${J(2)})`}}),hh=Le((e,t)=>{const r=be("InputError",QA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:h,...f}=r,g=nt({name:["InputWrapper",u],props:r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:XA}),y=Ac(),E=d&&(y==null?void 0:y.getStyles)||g;return x.createElement(we,{component:"p",ref:t,variant:h,size:c,...E("error",y!=null&&y.getStyles?{className:i,style:s}:void 0),...f})});hh.classes=In;hh.displayName="@mantine/core/InputError";const wv={labelElement:"label"},ZA=(e,{size:t})=>({label:{"--input-label-size":Zr(t),"--input-asterisk-color":void 0}}),fh=Le((e,t)=>{const r=be("InputLabel",wv,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:c,size:u,required:d,htmlFor:h,onMouseDown:f,children:g,__staticSelector:y,variant:E,mod:p,...v}=be("InputLabel",wv,r),C=nt({name:["InputWrapper",y],props:r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:ZA}),b=Ac(),k=(b==null?void 0:b.getStyles)||C;return x.createElement(we,{...k("label",b!=null&&b.getStyles?{className:i,style:s}:void 0),component:c,variant:E,size:u,ref:t,htmlFor:c==="label"?h:void 0,mod:[{required:d},p],onMouseDown:m=>{f==null||f(m),!m.defaultPrevented&&m.detail>1&&m.preventDefault()},...v},g,d&&x.createElement("span",{...k("required"),"aria-hidden":!0}," *"))});fh.classes=In;fh.displayName="@mantine/core/InputLabel";const bv={},Jm=Le((e,t)=>{const r=be("InputPlaceholder",bv,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:c,variant:u,error:d,mod:h,...f}=be("InputPlaceholder",bv,r),g=nt({name:["InputPlaceholder",c],props:r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"placeholder"});return x.createElement(we,{...g("placeholder"),mod:[{error:!!d},h],component:"span",variant:u,ref:t,...f})});Jm.classes=In;Jm.displayName="@mantine/core/InputPlaceholder";function JA(e,{hasDescription:t,hasError:r}){const n=e.findIndex(l=>l==="input"),i=e[n-1],s=e[n+1];return{offsetBottom:t&&s==="description"||r&&s==="error",offsetTop:t&&i==="description"||r&&i==="error"}}const eR={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},tR=(e,{size:t})=>({label:{"--input-label-size":Zr(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Zr(t)} - ${J(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Zr(t)} - ${J(2)})`}}),e0=Le((e,t)=>{const r=be("InputWrapper",eR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,variant:u,__staticSelector:d,inputContainer:h,inputWrapperOrder:f,label:g,error:y,description:E,labelProps:p,descriptionProps:v,errorProps:C,labelElement:b,children:k,withAsterisk:m,id:R,required:_,__stylesApiProps:H,mod:A,...P}=r,B=nt({name:["InputWrapper",d],props:H||r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:tR}),N={size:c,variant:u,__staticSelector:d},z=Eo(R),O=typeof m=="boolean"?m:_,F=(C==null?void 0:C.id)||`${z}-error`,M=(v==null?void 0:v.id)||`${z}-description`,$=z,q=!!y&&typeof y!="boolean",W=!!E,ie=`${q?F:""} ${W?M:""}`,ae=ie.trim().length>0?ie.trim():void 0,ve=(p==null?void 0:p.id)||`${z}-label`,Ee=g&&x.createElement(fh,{key:"label",labelElement:b,id:ve,htmlFor:$,required:O,...N,...p},g),Ie=W&&x.createElement(dh,{key:"description",...v,...N,size:(v==null?void 0:v.size)||N.size,id:(v==null?void 0:v.id)||M},E),Re=x.createElement(x.Fragment,{key:"input"},h(k)),Ae=q&&x.createElement(hh,{...C,...N,size:(C==null?void 0:C.size)||N.size,key:"error",id:(C==null?void 0:C.id)||F},y),Fe=f.map(Ue=>{switch(Ue){case"label":return Ee;case"input":return Re;case"description":return Ie;case"error":return Ae;default:return null}});return x.createElement(WA,{value:{getStyles:B,describedBy:ae,inputId:$,labelId:ve,...JA(f,{hasDescription:W,hasError:q})}},x.createElement(we,{ref:t,variant:u,size:c,mod:[{error:!!y},A],...B("root"),...P},Fe))});e0.classes=In;e0.displayName="@mantine/core/InputWrapper";const rR={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},nR=(e,t,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":It(t.size,"input-height"),"--input-fz":Zr(t.size),"--input-radius":t.radius===void 0?void 0:Vn(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?J(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?J(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?It(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),nr=pi((e,t)=>{const r=be("Input",rR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:d,wrapperProps:h,error:f,disabled:g,leftSection:y,leftSectionProps:E,leftSectionWidth:p,rightSection:v,rightSectionProps:C,rightSectionWidth:b,rightSectionPointerEvents:k,leftSectionPointerEvents:m,variant:R,vars:_,pointer:H,multiline:A,radius:P,id:B,withAria:N,withErrorStyles:z,mod:O,...F}=r,{styleProps:M,rest:$}=wc(F),q=Ac(),W={offsetBottom:q==null?void 0:q.offsetBottom,offsetTop:q==null?void 0:q.offsetTop},ie=nt({name:["Input",c],props:u||r,classes:In,className:i,style:s,classNames:n,styles:o,unstyled:a,stylesCtx:W,rootSelector:"wrapper",vars:_,varsResolver:nR}),ae=N?{required:l,disabled:g,"aria-invalid":!!f,"aria-describedby":q==null?void 0:q.describedBy,id:(q==null?void 0:q.inputId)||B}:{};return x.createElement(we,{...ie("wrapper"),...M,...h,mod:[{error:!!f&&z,pointer:H,disabled:g,multiline:A,"data-with-right-section":!!v,"data-with-left-section":!!y},O],variant:R,size:d},y&&x.createElement("div",{...E,"data-position":"left",...ie("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style})},y),x.createElement(we,{component:"input",...$,...ae,ref:t,required:l,mod:{disabled:g,error:!!f&&z},variant:R,...ie("input")}),v&&x.createElement("div",{...C,"data-position":"right",...ie("section",{className:C==null?void 0:C.className,style:C==null?void 0:C.style})},v))});nr.classes=In;nr.Wrapper=e0;nr.Label=fh;nr.Error=hh;nr.Description=dh;nr.Placeholder=Jm;nr.displayName="@mantine/core/Input";function iR(e,t,r){const n=be(e,t,r),{label:i,description:s,error:o,required:a,classNames:l,styles:c,className:u,unstyled:d,__staticSelector:h,__stylesApiProps:f,errorProps:g,labelProps:y,descriptionProps:E,wrapperProps:p,id:v,size:C,style:b,inputContainer:k,inputWrapperOrder:m,withAsterisk:R,variant:_,vars:H,mod:A,...P}=n,{styleProps:B,rest:N}=wc(P),z={label:i,description:s,error:o,required:a,classNames:l,className:u,__staticSelector:h,__stylesApiProps:f||n,errorProps:g,labelProps:y,descriptionProps:E,unstyled:d,styles:c,size:C,style:b,inputContainer:k,inputWrapperOrder:m,withAsterisk:R,variant:_,id:v,mod:A,...p};return{...N,classNames:l,styles:c,unstyled:d,wrapperProps:{...z,...B},inputProps:{required:a,classNames:l,styles:c,unstyled:d,size:C,__staticSelector:h,__stylesApiProps:f||n,error:o,variant:_,id:v}}}const sR={__staticSelector:"InputBase",withAria:!0},wo=pi((e,t)=>{const{inputProps:r,wrapperProps:n,...i}=iR("InputBase",sR,e);return x.createElement(nr.Wrapper,{...n},x.createElement(nr,{...r,...i,ref:t}))});wo.classes={...nr.classes,...nr.Wrapper.classes};wo.displayName="@mantine/core/InputBase";var tw={root:"m-b6d8b162"};function oR(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const aR={inherit:!1},lR=(e,{variant:t,lineClamp:r,gradient:n,size:i,color:s})=>({root:{"--text-fz":Zr(i),"--text-lh":mI(i),"--text-gradient":t==="gradient"?Xp(n,e):void 0,"--text-line-clamp":typeof r=="number"?r.toString():void 0,"--text-color":s?Un(s,e):void 0}}),Id=pi((e,t)=>{const r=be("Text",aR,e),{lineClamp:n,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:c,vars:u,className:d,style:h,classNames:f,styles:g,unstyled:y,variant:E,mod:p,size:v,...C}=r,b=nt({name:["Text",c],props:r,classes:tw,className:d,style:h,classNames:f,styles:g,unstyled:y,vars:u,varsResolver:lR});return x.createElement(we,{...b("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:E,mod:[{"data-truncate":oR(i),"data-line-clamp":typeof n=="number","data-inline":s,"data-inherit":o},p],size:v,...C})});Id.classes=tw;Id.displayName="@mantine/core/Text";function rw(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>rw(t))}:e}function cR(e){return e?e.map(t=>rw(t)):[]}function nw(e){return e.reduce((t,r)=>"group"in r?{...t,...nw(r.items)}:(t[r.value]=r,t),{})}var Vr={dropdown:"m-88b62a41",options:"m-b2821a6e",option:"m-92253aa5",search:"m-985517d8",empty:"m-2530cd1d",header:"m-858f94bd",footer:"m-82b967cb",group:"m-254f3e4f",groupLabel:"m-2bb2e9e5",chevron:"m-2943220b",optionsDropdownOption:"m-390b5f4",optionsDropdownCheckIcon:"m-8ee53fc2"};const uR={error:null},dR=(e,{size:t})=>({chevron:{"--combobox-chevron-size":It(t,"combobox-chevron-size")}}),t0=Le((e,t)=>{const r=be("ComboboxChevron",uR,e),{size:n,error:i,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,mod:d,...h}=r,f=nt({name:"ComboboxChevron",classes:Vr,props:r,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,varsResolver:dR,rootSelector:"chevron"});return x.createElement(we,{component:"svg",...h,...f("chevron"),size:n,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t},x.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))});t0.classes=Vr;t0.displayName="@mantine/core/ComboboxChevron";const[hR,An]=Mi("Combobox component was not found in tree"),iw=S.forwardRef(({size:e,onMouseDown:t,onClick:r,onClear:n,...i},s)=>x.createElement(uh,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{n(),r==null||r(o)}}));iw.displayName="@mantine/core/ComboboxClearButton";const fR={},r0=Le((e,t)=>{const{classNames:r,styles:n,className:i,style:s,hidden:o,...a}=be("ComboboxDropdown",fR,e),l=An();return x.createElement(Ht.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:r,styles:n})})});r0.classes=Vr;r0.displayName="@mantine/core/ComboboxDropdown";const pR={refProp:"ref"},sw=Le((e,t)=>{const{children:r,refProp:n}=be("ComboboxDropdownTarget",pR,e);if(An(),!Cc(r))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return x.createElement(Ht.Target,{ref:t,refProp:n},r)});sw.displayName="@mantine/core/ComboboxDropdownTarget";const gR={},n0=Le((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=be("ComboboxEmpty",gR,e),l=An();return x.createElement(we,{ref:t,...l.getStyles("empty",{className:n,classNames:r,styles:s,style:i}),...a})});n0.classes=Vr;n0.displayName="@mantine/core/ComboboxEmpty";function i0({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:r,withExpandedAttribute:n,targetType:i,autoComplete:s}){const o=An(),[a,l]=S.useState(null),c=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){const h=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&h!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...r?{"aria-haspopup":"listbox","aria-expanded":n&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:c}}const mR={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ow=Le((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=be("ComboboxEventsTarget",mR,e);if(!Cc(r))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=An(),d=i0({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:l});return S.cloneElement(r,{...d,...c,[n]:sn(t,u.store.targetRef,r==null?void 0:r.ref)})});ow.displayName="@mantine/core/ComboboxEventsTarget";const yR={},s0=Le((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=be("ComboboxFooter",yR,e),l=An();return x.createElement(we,{ref:t,...l.getStyles("footer",{className:n,classNames:r,style:i,styles:s}),...a})});s0.classes=Vr;s0.displayName="@mantine/core/ComboboxFooter";const vR={},o0=Le((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,children:a,label:l,...c}=be("ComboboxGroup",vR,e),u=An();return x.createElement(we,{ref:t,...u.getStyles("group",{className:n,classNames:r,style:i,styles:s}),...c},l&&x.createElement("div",{...u.getStyles("groupLabel",{classNames:r,styles:s})},l),a)});o0.classes=Vr;o0.displayName="@mantine/core/ComboboxGroup";const ER={},a0=Le((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=be("ComboboxHeader",ER,e),l=An();return x.createElement(we,{ref:t,...l.getStyles("header",{className:n,classNames:r,style:i,styles:s}),...a})});a0.classes=Vr;a0.displayName="@mantine/core/ComboboxHeader";const CR={},l0=Le((e,t)=>{const r=be("ComboboxOption",CR,e),{classNames:n,className:i,style:s,styles:o,vars:a,onClick:l,id:c,active:u,onMouseDown:d,onMouseOver:h,disabled:f,selected:g,mod:y,...E}=r,p=An(),v=S.useId(),C=c||v;return x.createElement(we,{...p.getStyles("option",{className:i,classNames:n,styles:o,style:s}),...E,ref:t,id:C,mod:["combobox-option",{"combobox-active":u,"combobox-disabled":f,"combobox-selected":g},y],role:"option",onClick:b=>{var k;f?b.preventDefault():((k=p.onOptionSubmit)==null||k.call(p,r.value,r),l==null||l(b))},onMouseDown:b=>{b.preventDefault(),d==null||d(b)},onMouseOver:b=>{p.resetSelectionOnOptionHover&&p.store.resetSelectedOption(),h==null||h(b)}})});l0.classes=Vr;l0.displayName="@mantine/core/ComboboxOption";const SR={},c0=Le((e,t)=>{const r=be("ComboboxOptions",SR,e),{classNames:n,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:c,...u}=r,d=An(),h=Eo(a);return S.useEffect(()=>{d.store.setListId(h)},[h]),x.createElement(we,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:n,styles:o}),...u,id:h,role:"listbox","aria-labelledby":c,onMouseDown:f=>{f.preventDefault(),l==null||l(f)}})});c0.classes=Vr;c0.displayName="@mantine/core/ComboboxOptions";const wR={withAriaAttributes:!0,withKeyboardNavigation:!0},u0=Le((e,t)=>{const r=be("ComboboxSearch",wR,e),{classNames:n,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:c,size:u,...d}=r,h=An(),f=h.getStyles("search"),g=i0({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return x.createElement(nr,{ref:sn(t,h.store.searchRef),classNames:[{input:f.className},n],styles:[{input:f.style},i],size:u||h.size,...g,...d,__staticSelector:"Combobox"})});u0.classes=Vr;u0.displayName="@mantine/core/ComboboxSearch";const bR={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},aw=Le((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=be("ComboboxTarget",bR,e);if(!Cc(r))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=An(),d=i0({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:l}),h=S.cloneElement(r,{...d,...c});return x.createElement(Ht.Target,{ref:sn(t,u.store.targetRef)},h)});aw.displayName="@mantine/core/ComboboxTarget";function TR(e,t,r){for(let n=e-1;n>=0;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=t.length-1;n>-1;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function IR(e,t,r){for(let n=e+1;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=0;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function AR(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function lw({defaultOpened:e,opened:t,onOpenedChange:r,onDropdownClose:n,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=go({value:t,defaultValue:e,finalValue:!1,onChange:r}),c=S.useRef(null),u=S.useRef(-1),d=S.useRef(null),h=S.useRef(null),f=S.useRef(-1),g=S.useRef(-1),y=S.useRef(-1),E=S.useCallback((F="unknown")=>{a||(l(!0),i==null||i(F))},[l,i,a]),p=S.useCallback((F="unknown")=>{a&&(l(!1),n==null||n(F))},[l,n,a]),v=S.useCallback((F="unknown")=>{a?p(F):E(F)},[p,E,a]),C=S.useCallback(()=>{const F=document.querySelector(`#${c.current} [data-combobox-selected]`);F==null||F.removeAttribute("data-combobox-selected"),F==null||F.removeAttribute("aria-selected")},[]),b=S.useCallback(F=>{const M=document.getElementById(c.current),$=M==null?void 0:M.querySelectorAll("[data-combobox-option]");if(!$)return null;const q=F>=$.length?0:F<0?$.length-1:F;return u.current=q,$!=null&&$[q]&&!$[q].hasAttribute("data-combobox-disabled")?(C(),$[q].setAttribute("data-combobox-selected","true"),$[q].setAttribute("aria-selected","true"),$[q].scrollIntoView({block:"nearest",behavior:o}),$[q].id):null},[o,C]),k=S.useCallback(()=>{const F=document.querySelector(`#${c.current} [data-combobox-active]`);if(F){const M=document.querySelectorAll(`#${c.current} [data-combobox-option]`),$=Array.from(M).findIndex(q=>q===F);return b($)}return b(0)},[b]),m=S.useCallback(()=>b(IR(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),R=S.useCallback(()=>b(TR(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),_=S.useCallback(()=>b(AR(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[b]),H=S.useCallback((F="selected",M)=>{y.current=window.setTimeout(()=>{var W;const $=document.querySelectorAll(`#${c.current} [data-combobox-option]`),q=Array.from($).findIndex(ie=>ie.hasAttribute(`data-combobox-${F}`));u.current=q,M!=null&&M.scrollIntoView&&((W=$[q])==null||W.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),A=S.useCallback(()=>{u.current=-1,C()},[C]),P=S.useCallback(()=>{const F=document.querySelectorAll(`#${c.current} [data-combobox-option]`),M=F==null?void 0:F[u.current];M==null||M.click()},[]),B=S.useCallback(F=>{c.current=F},[]),N=S.useCallback(()=>{f.current=window.setTimeout(()=>d.current.focus(),0)},[]),z=S.useCallback(()=>{g.current=window.setTimeout(()=>h.current.focus(),0)},[]),O=S.useCallback(()=>u.current,[]);return S.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(g.current),window.clearTimeout(y.current)},[]),{dropdownOpened:a,openDropdown:E,closeDropdown:p,toggleDropdown:v,selectedOptionIndex:u.current,getSelectedOptionIndex:O,selectOption:b,selectFirstOption:_,selectActiveOption:k,selectNextOption:m,selectPreviousOption:R,resetSelectedOption:A,updateSelectedOptionIndex:H,listId:c.current,setListId:B,clickSelectedOption:P,searchRef:d,focusSearchInput:N,targetRef:h,focusTarget:z}}const RR={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},kR=(e,{size:t,dropdownPadding:r})=>({options:{"--combobox-option-fz":Zr(t),"--combobox-option-padding":It(t,"combobox-option-padding")},dropdown:{"--combobox-padding":r===void 0?void 0:J(r),"--combobox-option-fz":Zr(t),"--combobox-option-padding":It(t,"combobox-option-padding")}});function Ct(e){const t=be("Combobox",RR,e),{classNames:r,styles:n,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:c,size:u,dropdownPadding:d,resetSelectionOnOptionHover:h,__staticSelector:f,readOnly:g,...y}=t,E=lw(),p=o||E,v=nt({name:f||"Combobox",classes:Vr,props:t,classNames:r,styles:n,unstyled:i,vars:a,varsResolver:kR}),C=()=>{c==null||c(),p.closeDropdown()};return x.createElement(hR,{value:{getStyles:v,store:p,onOptionSubmit:l,size:u,resetSelectionOnOptionHover:h,readOnly:g}},x.createElement(Ht,{opened:p.dropdownOpened,...y,onClose:C,withRoles:!1,unstyled:i},s))}const _R=e=>e;Ct.extend=_R;Ct.classes=Vr;Ct.displayName="@mantine/core/Combobox";Ct.Target=aw;Ct.Dropdown=r0;Ct.Options=c0;Ct.Option=l0;Ct.Search=u0;Ct.Empty=n0;Ct.Chevron=t0;Ct.Footer=s0;Ct.Header=a0;Ct.EventsTarget=ow;Ct.DropdownTarget=sw;Ct.Group=o0;Ct.ClearButton=iw;var cw={root:"m-5f75b09e",body:"m-5f6e695e",labelWrapper:"m-d3ea56bb",label:"m-8ee546b8",description:"m-328f68c0",error:"m-8e8a99cc"};const xR=cw,uw=S.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:r,classNames:n,styles:i,unstyled:s,children:o,label:a,description:l,id:c,disabled:u,error:d,size:h,labelPosition:f="left",bodyElement:g="div",labelElement:y="label",variant:E,style:p,vars:v,mod:C,...b},k)=>{const m=nt({name:e,props:t,className:r,style:p,classes:cw,classNames:n,styles:i,unstyled:s});return x.createElement(we,{...m("root"),ref:k,__vars:{"--label-fz":Zr(h),"--label-lh":It(h,"label-lh")},mod:[{"label-position":f},C],variant:E,size:h,...b},x.createElement(we,{component:g,htmlFor:g==="label"?c:void 0,...m("body")},o,x.createElement("div",{...m("labelWrapper"),"data-disabled":u||void 0},a&&x.createElement(we,{component:y,htmlFor:y==="label"?c:void 0,...m("label"),"data-disabled":u||void 0},a),l&&x.createElement(nr.Description,{size:h,__inheritStyles:!1,...m("description")},l),d&&d!=="boolean"&&x.createElement(nr.Error,{size:h,__inheritStyles:!1,...m("error")},d))))});uw.displayName="@mantine/core/InlineInput";const dw=S.createContext(null),NR=dw.Provider,DR=()=>S.useContext(dw);function PR({children:e,role:t}){const r=Ac();return r?x.createElement("div",{role:t,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy},e):x.createElement(x.Fragment,null,e)}const BR={},d0=Le((e,t)=>{const{value:r,defaultValue:n,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...c}=be("CheckboxGroup",BR,e),[u,d]=go({value:r,defaultValue:n,finalValue:[],onChange:i}),h=f=>{const g=f.currentTarget.value;!l&&d(u.includes(g)?u.filter(y=>y!==g):[...u,g])};return x.createElement(NR,{value:{value:u,onChange:h,size:s}},x.createElement(nr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"CheckboxGroup"},x.createElement(PR,{role:"group"},a)))});d0.classes=nr.Wrapper.classes;d0.displayName="@mantine/core/CheckboxGroup";function hw({size:e,style:t,...r}){const n=e!==void 0?{width:J(e),height:J(e),...t}:t;return x.createElement("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r},x.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function $R({indeterminate:e,...t}){return e?x.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t},x.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):x.createElement(hw,{...t})}var fw={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const LR={labelPosition:"right",icon:$R},OR=(e,{radius:t,color:r,size:n,iconColor:i,variant:s,autoContrast:o})=>{const a=ja({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":It(n,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Vn(t),"--checkbox-color":s==="outline"?l:Un(r,e),"--checkbox-icon-color":i?Un(i,e):w5(o,e)?oS({color:r,theme:e}):void 0}}},ph=Le((e,t)=>{const r=be("Checkbox",LR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,color:c,label:u,id:d,size:h,radius:f,wrapperProps:g,children:y,checked:E,labelPosition:p,description:v,error:C,disabled:b,variant:k,indeterminate:m,icon:R,rootRef:_,iconColor:H,onChange:A,autoContrast:P,mod:B,...N}=r,z=DR(),O=h||(z==null?void 0:z.size),F=R,M=nt({name:"Checkbox",props:r,classes:fw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:OR}),{styleProps:$,rest:q}=wc(N),W=Eo(d),ie=z?{checked:z.value.includes(q.value),onChange:ae=>{z.onChange(ae),A==null||A(ae)}}:{};return x.createElement(uw,{...M("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:W,size:O,labelPosition:p,label:u,description:v,error:C,disabled:b,classNames:n,styles:o,unstyled:a,"data-checked":ie.checked||E||void 0,variant:k,ref:_,mod:B,...$,...g},x.createElement(we,{...M("inner"),mod:{"data-label-position":p}},x.createElement(we,{component:"input",id:W,ref:t,checked:E,disabled:b,mod:{error:!!C,indeterminate:m},...M("input",{focusable:!0,variant:k}),onChange:A,...q,...ie,type:"checkbox"}),x.createElement(F,{indeterminate:m,...M("icon")})))});ph.classes={...fw,...xR};ph.displayName="@mantine/core/Checkbox";ph.Group=d0;function sc(e){return"group"in e}function pw({options:e,search:t,limit:r}){const n=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===r)return i;sc(o)&&i.push({group:o.group,items:pw({options:o.items,search:t,limit:r-i.length})}),sc(o)||o.label.toLowerCase().includes(n)&&i.push(o)}return i}function MR(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function gw(e,t=new Set){if(Array.isArray(e))for(const r of e)if(sc(r))gw(r.items,t);else{if(typeof r.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof r.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof r.value}`);if(t.has(r.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${r.value}" was provided more than once`);t.add(r.value)}}function UR(e,t){return Array.isArray(e)?e.includes(t):e===t}function mw({data:e,withCheckIcon:t,value:r,checkIconPosition:n,unstyled:i,renderOption:s}){if(!sc(e)){const a=UR(r,e.value),l=t&&a&&x.createElement(hw,{className:Vr.optionsDropdownCheckIcon}),c=x.createElement(x.Fragment,null,n==="left"&&l,x.createElement("span",null,e.label),n==="right"&&l);return x.createElement(Ct.Option,{value:e.value,disabled:e.disabled,className:pr({[Vr.optionsDropdownOption]:!i}),"data-reverse":n==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a},typeof s=="function"?s({option:e,checked:a}):c)}const o=e.items.map(a=>x.createElement(mw,{data:a,value:r,key:a.value,unstyled:i,withCheckIcon:t,checkIconPosition:n}));return x.createElement(Ct.Group,{label:e.group},o)}function HR({data:e,hidden:t,hiddenWhenEmpty:r,filter:n,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:c=!1,value:u,checkIconPosition:d,nothingFoundMessage:h,unstyled:f,labelId:g,renderOption:y}){gw(e);const p=typeof i=="string"?(n||pw)({options:e,search:l?i:"",limit:s??1/0}):e,v=MR(p),C=p.map(b=>x.createElement(mw,{data:b,key:sc(b)?b.group:b.value,withCheckIcon:c,value:u,checkIconPosition:d,unstyled:f,renderOption:y}));return x.createElement(Ct.Dropdown,{hidden:t||r&&v},x.createElement(Ct.Options,{labelledBy:g},a?x.createElement(Va.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y"},C):C,v&&h&&x.createElement(Ct.Empty,null,h)))}var yw={root:"m-347db0ec","root--dot":"m-fbd81e3d",label:"m-5add502a",section:"m-91fdda9b"};const FR={},jR=(e,{radius:t,color:r,gradient:n,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":It(s,"badge-height"),"--badge-padding-x":It(s,"badge-padding-x"),"--badge-fz":It(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Vn(t),"--badge-bg":r||i?a.background:void 0,"--badge-color":r||i?a.color:void 0,"--badge-bd":r||i?a.border:void 0,"--badge-dot-color":i==="dot"?Un(r,e):void 0}}},Rc=pi((e,t)=>{const r=be("Badge",FR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,radius:c,color:u,gradient:d,leftSection:h,rightSection:f,children:g,variant:y,fullWidth:E,autoContrast:p,circle:v,mod:C,...b}=r,k=nt({name:"Badge",props:r,classes:yw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:jR});return x.createElement(we,{variant:y,mod:[{block:E,circle:v},C],...k("root",{variant:y}),ref:t,...b},h&&x.createElement("span",{...k("section"),"data-position":"left"},h),x.createElement("span",{...k("label")},g),f&&x.createElement("span",{...k("section"),"data-position":"right"},f))});Rc.classes=yw;Rc.displayName="@mantine/core/Badge";var gh={root:"m-77c9d27d",inner:"m-80f1301b",label:"m-811560b9",section:"m-a74036a",loader:"m-a25b86ee",group:"m-80d6d844"};const Tv={orientation:"horizontal"},VR=(e,{borderWidth:t})=>({group:{"--button-border-width":J(t)}}),h0=Le((e,t)=>{const r=be("ButtonGroup",Tv,e),{className:n,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:d,mod:h,...f}=be("ButtonGroup",Tv,e),g=nt({name:"ButtonGroup",props:r,classes:gh,className:n,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:VR,rootSelector:"group"});return x.createElement(we,{...g("group"),ref:t,variant:d,mod:[{"data-orientation":l},h],role:"group",...f})});h0.classes=gh;h0.displayName="@mantine/core/ButtonGroup";const qR={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${J(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},zR={},KR=(e,{radius:t,color:r,gradient:n,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":It(s,"button-height"),"--button-padding-x":It(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Zr(s.replace("compact-","")):Zr(s),"--button-radius":t===void 0?void 0:Vn(t),"--button-bg":r||i?l.background:void 0,"--button-hover":r||i?l.hover:void 0,"--button-color":l.color,"--button-bd":r||i?l.border:void 0,"--button-hover-color":r||i?l.hoverColor:void 0}}},Li=pi((e,t)=>{const r=be("Button",zR,e),{style:n,vars:i,className:s,color:o,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:d,variant:h,radius:f,loading:g,loaderProps:y,gradient:E,classNames:p,styles:v,unstyled:C,"data-disabled":b,autoContrast:k,mod:m,...R}=r,_=nt({name:"Button",props:r,classes:gh,className:s,style:n,classNames:p,styles:v,unstyled:C,vars:i,varsResolver:KR}),H=!!c,A=!!u;return x.createElement(bc,{ref:t,..._("root",{active:!a&&!g&&!b}),unstyled:C,variant:h,disabled:a||g,mod:[{disabled:a||b,loading:g,block:d,"with-left-section":H,"with-right-section":A},m],...R},x.createElement(So,{mounted:!!g,transition:qR,duration:150},P=>x.createElement(we,{component:"span",..._("loader",{style:P}),"aria-hidden":!0},x.createElement(Ic,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...y}))),x.createElement("span",{..._("inner")},c&&x.createElement(we,{component:"span",..._("section"),mod:{position:"left"}},c),x.createElement(we,{component:"span",mod:{loading:g},..._("label")},l),u&&x.createElement(we,{component:"span",..._("section"),mod:{position:"right"}},u)))});Li.classes=gh;Li.displayName="@mantine/core/Button";Li.Group=h0;var vw={root:"m-7485cace"};const GR={},WR=(e,{size:t,fluid:r})=>({root:{"--container-size":r?void 0:It(t,"container-size")}}),f0=Le((e,t)=>{const r=be("Container",GR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:c,mod:u,...d}=r,h=nt({name:"Container",classes:vw,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:WR});return x.createElement(we,{ref:t,mod:[{fluid:c},u],...h("root"),...d})});f0.classes=vw;f0.displayName="@mantine/core/Container";const[YR,Ew]=Mi("Grid component was not found in tree"),rg=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Iv=(e,t,r)=>r||e==="auto"?"100%":e==="content"?"unset":rg(e,t),Av=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Rv=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function QR({span:e,order:t,offset:r,selector:n}){var h;const i=fi(),s=Ew(),a=Cl(e)===void 0?12:Cl(e),l=Ec({"--col-order":(h=Cl(t))==null?void 0:h.toString(),"--col-flex-grow":Av(a,s.grow),"--col-flex-basis":rg(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Iv(a,s.columns,s.grow),"--col-offset":Rv(Cl(r),s.columns)}),c=Er(i.breakpoints).reduce((f,g)=>{var y;return f[g]||(f[g]={}),typeof t=="object"&&t[g]!==void 0&&(f[g]["--col-order"]=(y=t[g])==null?void 0:y.toString()),typeof e=="object"&&e[g]!==void 0&&(f[g]["--col-flex-grow"]=Av(e[g],s.grow),f[g]["--col-flex-basis"]=rg(e[g],s.columns),f[g]["--col-width"]=e[g]==="content"?"auto":void 0,f[g]["--col-max-width"]=Iv(e[g],s.columns,s.grow)),typeof r=="object"&&r[g]!==void 0&&(f[g]["--col-offset"]=Rv(r[g],s.columns)),f},{}),d=QC(Er(c),i).filter(f=>Er(c[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:c[f.value]}));return x.createElement(Bm,{styles:l,media:d,selector:n})}var p0={root:"m-410352e9",inner:"m-dee7bd2f",col:"m-96bdd299"};const XR={span:12},g0=Le((e,t)=>{const r=be("GridCol",XR,e),{classNames:n,className:i,style:s,styles:o,vars:a,span:l,order:c,offset:u,...d}=r,h=Ew(),f=$m();return x.createElement(x.Fragment,null,x.createElement(QR,{selector:`.${f}`,span:l,order:c,offset:u}),x.createElement(we,{ref:t,...h.getStyles("col",{className:pr(i,f),style:s,classNames:n,styles:o}),...d}))});g0.classes=p0;g0.displayName="@mantine/core/GridCol";function ZR({gutter:e,selector:t}){const r=fi(),n=Ec({"--grid-gutter":po(Cl(e))}),i=Er(r.breakpoints).reduce((a,l)=>(a[l]||(a[l]={}),typeof e=="object"&&e[l]!==void 0&&(a[l]["--grid-gutter"]=po(e[l])),a),{}),o=QC(Er(i),r).filter(a=>Er(i[a.value]).length>0).map(a=>({query:`(min-width: ${r.breakpoints[a.value]})`,styles:i[a.value]}));return x.createElement(Bm,{styles:n,media:o,selector:t})}const JR={gutter:"md",grow:!1,columns:12},e8=(e,{justify:t,align:r,overflow:n})=>({root:{"--grid-justify":t,"--grid-align":r,"--grid-overflow":n}}),ga=Le((e,t)=>{const r=be("Grid",JR,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,grow:c,gutter:u,columns:d,align:h,justify:f,children:g,...y}=r,E=nt({name:"Grid",classes:p0,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:e8}),p=$m();return x.createElement(YR,{value:{getStyles:E,grow:c,columns:d}},x.createElement(ZR,{selector:`.${p}`,...r}),x.createElement(we,{ref:t,...E("root",{className:p}),...y},x.createElement("div",{...E("inner")},g)))});ga.classes=p0;ga.displayName="@mantine/core/Grid";ga.Col=g0;const[t8,za]=Mi("Modal component was not found in tree");var Fi={root:"m-9df02822",content:"m-54c44539",inner:"m-1f958f16",header:"m-d0e2b9cd"};const r8={},mh=Le((e,t)=>{const r=be("ModalBody",r8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=za();return x.createElement(QS,{ref:t,...c.getStyles("body",{classNames:n,style:s,styles:o,className:i}),...l})});mh.classes=Fi;mh.displayName="@mantine/core/ModalBody";const n8={},yh=Le((e,t)=>{const r=be("ModalCloseButton",n8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=za();return x.createElement(XS,{ref:t,...c.getStyles("close",{classNames:n,style:s,styles:o,className:i}),...l})});yh.classes=Fi;yh.displayName="@mantine/core/ModalCloseButton";const i8={},vh=Le((e,t)=>{const r=be("ModalContent",i8,e),{classNames:n,className:i,style:s,styles:o,vars:a,children:l,...c}=r,u=za(),d=u.scrollAreaComponent||GA;return x.createElement(VA,{...u.getStyles("content",{className:i,style:s,styles:o,classNames:n}),innerProps:u.getStyles("inner",{className:i,style:s,styles:o,classNames:n}),"data-full-screen":u.fullScreen||void 0,ref:t,...c},x.createElement(d,{style:{maxHeight:u.fullScreen?"100dvh":`calc(100dvh - (${J(u.yOffset)} * 2))`}},l))});vh.classes=Fi;vh.displayName="@mantine/core/ModalContent";const s8={},Eh=Le((e,t)=>{const r=be("ModalHeader",s8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=za();return x.createElement(ZS,{ref:t,...c.getStyles("header",{classNames:n,style:s,styles:o,className:i}),...l})});Eh.classes=Fi;Eh.displayName="@mantine/core/ModalHeader";const o8={},Ch=Le((e,t)=>{const r=be("ModalOverlay",o8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=za();return x.createElement(JS,{ref:t,...c.getStyles("overlay",{classNames:n,style:s,styles:o,className:i}),...l})});Ch.classes=Fi;Ch.displayName="@mantine/core/ModalOverlay";const a8={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ha("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},l8=(e,{radius:t,size:r,yOffset:n,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Vn(t),"--modal-size":It(r,"modal-size"),"--modal-y-offset":J(n),"--modal-x-offset":J(i)}}),Sh=Le((e,t)=>{const r=be("ModalRoot",a8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:c,scrollAreaComponent:u,radius:d,fullScreen:h,centered:f,xOffset:g,__staticSelector:y,...E}=r,p=nt({name:y,classes:Fi,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:l8});return x.createElement(t8,{value:{yOffset:c,scrollAreaComponent:u,getStyles:p,fullScreen:h}},x.createElement(FA,{ref:t,...p("root"),"data-full-screen":h||void 0,"data-centered":f||void 0,unstyled:a,...E}))});Sh.classes=Fi;Sh.displayName="@mantine/core/ModalRoot";const c8={},wh=Le((e,t)=>{const r=be("ModalTitle",c8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=za();return x.createElement(ew,{ref:t,...c.getStyles("title",{classNames:n,style:s,styles:o,className:i}),...l})});wh.classes=Fi;wh.displayName="@mantine/core/ModalTitle";const u8={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ha("modal"),transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0},gi=Le((e,t)=>{const{title:r,withOverlay:n,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...c}=be("Modal",u8,e),u=!!r||s;return x.createElement(Sh,{ref:t,radius:l,...c},n&&x.createElement(Ch,{...i}),x.createElement(vh,{radius:l},u&&x.createElement(Eh,null,r&&x.createElement(wh,null,r),s&&x.createElement(yh,{...o})),x.createElement(mh,null,a)))});gi.classes=Fi;gi.displayName="@mantine/core/Modal";gi.Root=Sh;gi.Overlay=Ch;gi.Content=vh;gi.Body=mh;gi.Header=Eh;gi.Title=wh;gi.CloseButton=yh;const d8=({reveal:e})=>x.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"}},x.createElement("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}));var ng={root:"m-f61ca620",input:"m-ccf8da4c",innerInput:"m-f2d85dd2",visibilityToggle:"m-b1072d44"};const h8={visibilityToggleIcon:d8},f8=(e,{size:t})=>({root:{"--psi-icon-size":It(t,"psi-icon-size"),"--psi-button-size":It(t,"psi-button-size")}}),m0=Le((e,t)=>{const r=be("PasswordInput",h8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,required:c,error:u,leftSection:d,disabled:h,id:f,variant:g,inputContainer:y,description:E,label:p,size:v,errorProps:C,descriptionProps:b,labelProps:k,withAsterisk:m,inputWrapperOrder:R,wrapperProps:_,radius:H,rightSection:A,rightSectionWidth:P,rightSectionPointerEvents:B,leftSectionWidth:N,visible:z,defaultVisible:O,onVisibilityChange:F,visibilityToggleIcon:M,visibilityToggleButtonProps:$,rightSectionProps:q,leftSectionProps:W,leftSectionPointerEvents:ie,mod:ae,...ve}=r,Ee=Eo(f),[Ie,Re]=go({value:z,defaultValue:O,finalValue:!1,onChange:F}),Ae=()=>Re(!Ie),Fe=nt({name:"PasswordInput",classes:ng,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:f8}),{resolvedClassNames:Ue,resolvedStyles:$e}=uS({classNames:n,styles:o,props:r}),{styleProps:ke,rest:Y}=wc(ve),de=M,le=x.createElement(ei,{...Fe("visibilityToggle"),disabled:h,radius:H,"aria-hidden":!$,tabIndex:-1,...$,variant:"subtle",color:"gray",unstyled:a,onMouseDown:ye=>{var Je;ye.preventDefault(),(Je=$==null?void 0:$.onMouseDown)==null||Je.call($,ye),Ae()},onKeyDown:ye=>{var Je;(Je=$==null?void 0:$.onKeyDown)==null||Je.call($,ye),ye.key===" "&&(ye.preventDefault(),Ae())}},x.createElement(de,{reveal:Ie}));return x.createElement(nr.Wrapper,{required:c,id:Ee,label:p,error:u,description:E,size:v,classNames:Ue,styles:$e,__staticSelector:"PasswordInput",errorProps:C,descriptionProps:b,unstyled:a,withAsterisk:m,inputWrapperOrder:R,inputContainer:y,variant:g,labelProps:{...k,htmlFor:Ee},mod:ae,...Fe("root"),...ke,..._},x.createElement(nr,{component:"div",error:u,leftSection:d,size:v,classNames:{...Ue,input:pr(ng.input,Ue.input)},styles:$e,radius:H,disabled:h,__staticSelector:"PasswordInput",rightSectionWidth:P,rightSection:A??le,variant:g,unstyled:a,leftSectionWidth:N,rightSectionPointerEvents:B||"all",rightSectionProps:q,leftSectionProps:W,leftSectionPointerEvents:ie,withAria:!1},x.createElement("input",{required:c,"data-invalid":!!u||void 0,"data-with-left-section":!!d||void 0,...Fe("innerInput"),disabled:h,id:Ee,ref:t,...Y,autoComplete:Y.autoComplete||"off",type:Ie?"text":"password"})))});m0.classes={...wo.classes,...ng};m0.displayName="@mantine/core/PasswordInput";const p8={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},oc=Le((e,t)=>{const r=be("Select",p8,e),{classNames:n,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:c,onDropdownOpen:u,onFocus:d,onBlur:h,onClick:f,onChange:g,data:y,value:E,defaultValue:p,selectFirstOptionOnChange:v,onOptionSubmit:C,comboboxProps:b,readOnly:k,disabled:m,filter:R,limit:_,withScrollArea:H,maxDropdownHeight:A,size:P,searchable:B,rightSection:N,checkIconPosition:z,withCheckIcon:O,nothingFoundMessage:F,name:M,form:$,searchValue:q,defaultSearchValue:W,onSearchChange:ie,allowDeselect:ae,error:ve,rightSectionPointerEvents:Ee,id:Ie,clearable:Re,clearButtonProps:Ae,hiddenInputProps:Fe,renderOption:Ue,onClear:$e,autoComplete:ke,...Y}=r,de=S.useMemo(()=>cR(y),[y]),le=S.useMemo(()=>nw(de),[de]),ye=Eo(Ie),[Je,ir]=go({value:E,defaultValue:p,finalValue:null,onChange:g}),dt=typeof Je=="string"?le[Je]:void 0,[pt,Rn]=go({value:q,defaultValue:W,finalValue:dt?dt.label:"",onChange:ie}),Mt=lw({opened:a,defaultOpened:l,onDropdownOpen:()=>{u==null||u(),Mt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{c==null||c(),Mt.resetSelectedOption()}}),{resolvedClassNames:qi,resolvedStyles:on}=uS({props:r,styles:i,classNames:n});S.useEffect(()=>{v&&Mt.selectFirstOption()},[v,Je]),S.useEffect(()=>{E===null&&Rn(""),typeof E=="string"&&dt&&Rn(dt.label)},[E,dt]);const kn=Re&&!!Je&&!m&&!k&&x.createElement(Ct.ClearButton,{size:P,...Ae,onClear:()=>{ir(null,null),Rn(""),$e==null||$e()}});return x.createElement(x.Fragment,null,x.createElement(Ct,{store:Mt,__staticSelector:"Select",classNames:qi,styles:on,unstyled:s,readOnly:k,onOptionSubmit:Kt=>{C==null||C(Kt);const an=ae&&le[Kt].value===Je?null:le[Kt],$s=an?an.value:null;ir($s,an),Rn(typeof $s=="string"&&(an==null?void 0:an.label)||""),Mt.closeDropdown()},size:P,...b},x.createElement(Ct.Target,{targetType:B?"input":"button",autoComplete:ke},x.createElement(wo,{id:ye,ref:t,rightSection:N||kn||x.createElement(Ct.Chevron,{size:P,error:ve,unstyled:s}),rightSectionPointerEvents:Ee||(kn?"all":"none"),...Y,size:P,__staticSelector:"Select",disabled:m,readOnly:k||!B,value:pt,onChange:Kt=>{Rn(Kt.currentTarget.value),Mt.openDropdown(),v&&Mt.selectFirstOption()},onFocus:Kt=>{B&&Mt.openDropdown(),d==null||d(Kt)},onBlur:Kt=>{var an;B&&Mt.closeDropdown(),Rn(Je!=null&&((an=le[Je])==null?void 0:an.label)||""),h==null||h(Kt)},onClick:Kt=>{B?Mt.openDropdown():Mt.toggleDropdown(),f==null||f(Kt)},classNames:qi,styles:on,unstyled:s,pointer:!B,error:ve})),x.createElement(HR,{data:de,hidden:k||m,filter:R,search:pt,limit:_,hiddenWhenEmpty:!B||!F,withScrollArea:H,maxDropdownHeight:A,filterOptions:B&&(dt==null?void 0:dt.label)!==pt,value:Je,checkIconPosition:z,withCheckIcon:O,nothingFoundMessage:F,unstyled:s,labelId:`${ye}-label`,renderOption:Ue})),x.createElement("input",{type:"hidden",name:M,value:Je||"",form:$,disabled:m,...Fe}))});oc.classes={...wo.classes,...Ct.classes};oc.displayName="@mantine/core/Select";const[g8,bh]=Mi("SliderProvider was not found in tree"),Cw=S.forwardRef(({size:e,disabled:t,variant:r,color:n,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=bh();return x.createElement(we,{tabIndex:-1,variant:r,size:e,ref:a,...l("root"),...o})});Cw.displayName="@mantine/core/SliderRoot";const Sw=S.forwardRef(({max:e,min:t,value:r,position:n,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:c,thumbLabel:u,onFocus:d,onBlur:h,showLabelOnHover:f,isHovered:g,children:y=null,disabled:E},p)=>{const{getStyles:v}=bh(),[C,b]=S.useState(!1),k=c||s||C||f&&g;return x.createElement(we,{tabIndex:0,role:"slider","aria-label":u,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":r,ref:p,__vars:{"--slider-thumb-offset":`${n}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:E},onFocus:()=>{b(!0),typeof d=="function"&&d()},onBlur:()=>{b(!1),typeof h=="function"&&h()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:m=>m.stopPropagation()},y,x.createElement(So,{mounted:i!=null&&!!k,transition:"fade",duration:0,...l},m=>x.createElement("div",{...v("label",{style:m})},i)))});Sw.displayName="@mantine/core/SliderThumb";function ww({value:e,min:t,max:r}){const n=(e-t)/(r-t)*100;return Math.min(Math.max(n,0),100)}function m8({mark:e,offset:t,value:r,inverted:n=!1}){return n?typeof t=="number"&&e.value<=t||e.value>=r:typeof t=="number"?e.value>=t&&e.value<=r:e.value<=r}function bw({marks:e,min:t,max:r,disabled:n,value:i,offset:s,inverted:o}){const{getStyles:a}=bh();if(!e)return null;const l=e.map((c,u)=>x.createElement(we,{...a("markWrapper"),__vars:{"--mark-offset":`${ww({value:c.value,min:t,max:r})}%`},key:u},x.createElement(we,{...a("mark"),mod:{filled:m8({mark:c,value:i,offset:s,inverted:o}),disabled:n}}),c.label&&x.createElement("div",{...a("markLabel")},c.label)));return x.createElement("div",null,l)}bw.displayName="@mantine/core/SliderMarks";function Tw({filled:e,children:t,offset:r,disabled:n,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=bh();return x.createElement(x.Fragment,null,x.createElement(we,{...l("trackContainer"),mod:{disabled:n},...o},x.createElement(we,{...l("track"),mod:{inverted:s,disabled:n}},x.createElement(we,{mod:{inverted:s,disabled:n},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${r}% - var(--slider-size))`},...l("bar")}),t,x.createElement(bw,{...a,offset:i,disabled:n,inverted:s}))))}Tw.displayName="@mantine/core/SliderTrack";function y8({value:e,containerWidth:t,min:r,max:n,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(n-r),l=(a!==0?Math.round(a/i)*i:0)+r,c=Math.max(l,r);return s!==void 0?Number(c.toFixed(s)):c}function su(e,t){return parseFloat(e.toFixed(t))}function v8(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var Iw={root:"m-dd36362e",label:"m-c9357328",thumb:"m-c9a9a60a",trackContainer:"m-a8645c2",track:"m-c9ade57f",bar:"m-38aeed47",markWrapper:"m-b7b0423a",mark:"m-dd33bc19",markLabel:"m-68c77a5b"};const E8={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},C8=(e,{size:t,color:r,thumbSize:n,radius:i})=>({root:{"--slider-size":It(t,"slider-size"),"--slider-color":r?Un(r,e):void 0,"--slider-radius":i===void 0?void 0:Vn(i),"--slider-thumb-size":n!==void 0?J(n):"calc(var(--slider-size) * 2)"}}),y0=Le((e,t)=>{const r=be("Slider",E8,e),{classNames:n,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:c,max:u,step:d,precision:h,defaultValue:f,name:g,marks:y,label:E,labelTransitionProps:p,labelAlwaysOn:v,thumbLabel:C,showLabelOnHover:b,thumbChildren:k,disabled:m,unstyled:R,scale:_,inverted:H,className:A,style:P,vars:B,hiddenInputProps:N,...z}=r,O=nt({name:"Slider",props:r,classes:Iw,classNames:n,className:A,styles:i,style:P,vars:B,varsResolver:C8,unstyled:R}),{dir:F}=ih(),[M,$]=S.useState(!1),[q,W]=go({value:typeof s=="number"?Bl(s,c,u):s,defaultValue:typeof f=="number"?Bl(f,c,u):f,finalValue:Bl(0,c,u),onChange:o}),ie=S.useRef(q),ae=S.useRef(),ve=S.useRef(),Ee=ww({value:q,min:c,max:u}),Ie=_(q),Re=typeof E=="function"?E(Ie):E,Ae=h??v8(d),Fe=S.useCallback(({x:Y})=>{if(!m){const de=y8({value:Y,min:c,max:u,step:d,precision:Ae});W(de),ie.current=de}},[m,c,u,d,Ae,W]),{ref:Ue,active:$e}=PI(Fe,{onScrubEnd:()=>a==null?void 0:a(ie.current)},F),ke=Y=>{var de,le,ye,Je,ir,dt;if(!m)switch(Y.key){case"ArrowUp":{Y.preventDefault(),(de=ve.current)==null||de.focus();const pt=su(Math.min(Math.max(q+d,c),u),Ae);a==null||a(pt),W(pt);break}case"ArrowRight":{Y.preventDefault(),(le=ve.current)==null||le.focus();const pt=su(Math.min(Math.max(F==="rtl"?q-d:q+d,c),u),Ae);a==null||a(pt),W(pt);break}case"ArrowDown":{Y.preventDefault(),(ye=ve.current)==null||ye.focus();const pt=su(Math.min(Math.max(q-d,c),u),Ae);a==null||a(pt),W(pt);break}case"ArrowLeft":{Y.preventDefault(),(Je=ve.current)==null||Je.focus();const pt=su(Math.min(Math.max(F==="rtl"?q+d:q-d,c),u),Ae);a==null||a(pt),W(pt);break}case"Home":{Y.preventDefault(),(ir=ve.current)==null||ir.focus(),a==null||a(c),W(c);break}case"End":{Y.preventDefault(),(dt=ve.current)==null||dt.focus(),a==null||a(u),W(u);break}}};return x.createElement(g8,{value:{getStyles:O}},x.createElement(Cw,{...z,ref:sn(t,ae),onKeyDownCapture:ke,onMouseDownCapture:()=>{var Y;return(Y=ae.current)==null?void 0:Y.focus()},size:l,disabled:m},x.createElement(Tw,{inverted:H,offset:0,filled:Ee,marks:y,min:c,max:u,value:Ie,disabled:m,containerProps:{ref:Ue,onMouseEnter:b?()=>$(!0):void 0,onMouseLeave:b?()=>$(!1):void 0}},x.createElement(Sw,{max:u,min:c,value:Ie,position:Ee,dragging:$e,label:Re,ref:ve,labelTransitionProps:p,labelAlwaysOn:v,thumbLabel:C,showLabelOnHover:b,isHovered:M,disabled:m},k)),x.createElement("input",{type:"hidden",name:g,value:Ie,...N})))});y0.classes=Iw;y0.displayName="@mantine/core/Slider";const[S8,w8]=Mi("Table component was not found in the tree");var kc={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function b8(e,t){if(!t)return;const r={};return t.columnBorder&&e.withColumnBorders&&(r["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(r["data-with-row-border"]=!0),t.striped&&e.striped&&(r["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(r["data-hover"]=!0),t.captionSide&&e.captionSide&&(r["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(r["data-sticky"]=!0),r}function bo(e,t){const r=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,n=Le((i,s)=>{const o=be(r,{},i),{classNames:a,className:l,style:c,styles:u,...d}=o,h=w8();return x.createElement(we,{component:e,ref:s,...b8(h,t),...h.getStyles(e,{className:l,classNames:a,style:c,styles:u,props:o}),...d})});return n.displayName=`@mantine/core/${r}`,n.classes=kc,n}const ig=bo("th",{columnBorder:!0}),Aw=bo("td",{columnBorder:!0}),ju=bo("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Rw=bo("thead",{stickyHeader:!0}),kw=bo("tbody"),_w=bo("tfoot"),xw=bo("caption",{captionSide:!0});function v0({data:e}){return x.createElement(x.Fragment,null,e.caption&&x.createElement(xw,null,e.caption),e.head&&x.createElement(Rw,null,x.createElement(ju,null,e.head.map((t,r)=>x.createElement(ig,{key:r},t)))),e.body&&x.createElement(kw,null,e.body.map((t,r)=>x.createElement(ju,{key:r},t.map((n,i)=>x.createElement(Aw,{key:i},n))))),e.foot&&x.createElement(_w,null,x.createElement(ju,null,e.foot.map((t,r)=>x.createElement(ig,{key:r},t)))))}v0.displayName="@mantine/core/TableDataRenderer";const T8={type:"scrollarea"},I8=(e,{minWidth:t,type:r})=>({scrollContainer:{"--table-min-width":J(t),"--table-overflow":r==="native"?"auto":void 0}}),E0=Le((e,t)=>{const r=be("TableScrollContainer",T8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,children:c,minWidth:u,type:d,...h}=r,f=nt({name:"TableScrollContainer",classes:kc,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:I8,rootSelector:"scrollContainer"});return x.createElement(we,{component:d==="scrollarea"?Va:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...f("scrollContainer"),...h},x.createElement("div",{...f("scrollContainerInner")},c))});E0.classes=kc;E0.displayName="@mantine/core/TableScrollContainer";const A8={withRowBorders:!0,verticalSpacing:7},R8=(e,{layout:t,captionSide:r,horizontalSpacing:n,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:c,stickyHeaderOffset:u,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":r,"--table-horizontal-spacing":po(n),"--table-vertical-spacing":po(i),"--table-border-color":s?Un(s,e):void 0,"--table-striped-color":l&&o?Un(o,e):void 0,"--table-highlight-on-hover-color":c&&a?Un(a,e):void 0,"--table-sticky-header-offset":d?J(u):void 0}}),ct=Le((e,t)=>{const r=be("Table",A8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:c,verticalSpacing:u,captionSide:d,stripedColor:h,highlightOnHoverColor:f,striped:g,highlightOnHover:y,withColumnBorders:E,withRowBorders:p,withTableBorder:v,borderColor:C,layout:b,variant:k,data:m,children:R,stickyHeader:_,stickyHeaderOffset:H,mod:A,...P}=r,B=nt({name:"Table",props:r,className:i,style:s,classes:kc,classNames:n,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:R8});return x.createElement(S8,{value:{getStyles:B,stickyHeader:_,striped:g===!0?"odd":g||void 0,highlightOnHover:y,withColumnBorders:E,withRowBorders:p,captionSide:d||"bottom"}},x.createElement(we,{component:"table",variant:k,ref:t,mod:[{"data-with-table-border":v},A],...B("table"),...P},R||!!m&&x.createElement(v0,{data:m})))});ct.classes=kc;ct.displayName="@mantine/core/Table";ct.Td=Aw;ct.Th=ig;ct.Tr=ju;ct.Thead=Rw;ct.Tbody=kw;ct.Tfoot=_w;ct.Caption=xw;ct.ScrollContainer=E0;ct.DataRenderer=v0;const k8={},Ti=Le((e,t)=>{const r=be("TextInput",k8,e);return x.createElement(wo,{component:"input",ref:t,...r,__staticSelector:"TextInput"})});Ti.classes=wo.classes;Ti.displayName="@mantine/core/TextInput";const _8=["h1","h2","h3","h4","h5","h6"];function x8(e,t){const r=t!==void 0?t:`h${e}`;return _8.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:{fontSize:J(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Nw={root:"m-8a5d1357"};const N8={order:1},D8=(e,{order:t,size:r,lineClamp:n,textWrap:i})=>{const s=x8(t,r);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":i}}},Ad=Le((e,t)=>{const r=be("Title",N8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,order:l,vars:c,size:u,variant:d,lineClamp:h,textWrap:f,mod:g,...y}=r,E=nt({name:"Title",props:r,classes:Nw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:D8});return[1,2,3,4,5,6].includes(l)?x.createElement(we,{...E("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof h=="number"},g],size:u,...y}):null});Ad.classes=Nw;Ad.displayName="@mantine/core/Title";const C0=S.createContext(null);C0.displayName="@mantine/modals/ModalsContext";function P8(){const e=S.useContext(C0);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function B8({id:e,cancelProps:t,confirmProps:r,labels:n={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:c}){const{cancel:u,confirm:d}=n,h=P8(),f=y=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(y)),typeof a=="function"&&a(),s&&h.closeModal(e)},g=y=>{typeof(r==null?void 0:r.onClick)=="function"&&(r==null||r.onClick(y)),typeof l=="function"&&l(),i&&h.closeModal(e)};return x.createElement(x.Fragment,null,c&&x.createElement(we,{mb:"md"},c),x.createElement($i,{justify:"flex-end",...o},x.createElement(Li,{variant:"default",...t,onClick:f},(t==null?void 0:t.children)||u),x.createElement(Li,{...r,onClick:g},(r==null?void 0:r.children)||d)))}const[$8,_c]=$I("mantine-modals"),L8=_c("openModal"),O8=_c("closeModal"),M8=_c("closeAllModals"),U8=_c("openConfirmModal"),H8=e=>_c("openContextModal")(e),F8={open:L8,close:O8,closeAll:M8,openConfirmModal:U8,openContextModal:H8};function kv(e,t){var r,n,i,s;t&&e.type==="confirm"&&((n=(r=e.props).onCancel)==null||n.call(r)),(s=(i=e.props).onClose)==null||s.call(i)}function j8(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(i=>i.id===t.modalId);if(!r)return e;kv(r,t.canceled);const n=e.modals.filter(i=>i.id!==t.modalId);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{kv(r,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function V8(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:r,onCancel:n,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:c,labels:u,...d}=e;return{confirmProps:{id:t,children:r,onCancel:n,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:c,labels:u},modalProps:{id:t,...d}}}function q8({children:e,modalProps:t,labels:r,modals:n}){const[i,s]=S.useReducer(j8,{modals:[],current:null}),o=S.useRef(i);o.current=i;const a=S.useCallback(E=>{s({type:"CLOSE_ALL",canceled:E})},[o,s]),l=S.useCallback(({modalId:E,...p})=>{const v=E||$l();return s({type:"OPEN",modal:{id:v,type:"content",props:p}}),v},[s]),c=S.useCallback(({modalId:E,...p})=>{const v=E||$l();return s({type:"OPEN",modal:{id:v,type:"confirm",props:p}}),v},[s]),u=S.useCallback((E,{modalId:p,...v})=>{const C=p||$l();return s({type:"OPEN",modal:{id:C,type:"context",props:v,ctx:E}}),C},[s]),d=S.useCallback((E,p)=>{s({type:"CLOSE",modalId:E,canceled:p})},[o,s]);$8({openModal:l,openConfirmModal:c,openContextModal:({modal:E,...p})=>u(E,p),closeModal:d,closeContextModal:d,closeAllModals:a});const h={modals:i.modals,openModal:l,openConfirmModal:c,openContextModal:u,closeModal:d,closeContextModal:d,closeAll:a},f=()=>{const E=o.current.current;switch(E==null?void 0:E.type){case"context":{const{innerProps:p,...v}=E.props,C=n[E.ctx];return{modalProps:v,content:x.createElement(C,{innerProps:p,context:h,id:E.id})}}case"confirm":{const{modalProps:p,confirmProps:v}=V8(E.props);return{modalProps:p,content:x.createElement(B8,{...v,id:E.id,labels:E.props.labels||r})}}case"content":{const{children:p,...v}=E.props;return{modalProps:v,content:x.createElement(x.Fragment,null,p)}}default:return{modalProps:{},content:null}}},{modalProps:g,content:y}=f();return x.createElement(C0.Provider,{value:h},x.createElement(gi,{zIndex:Ha("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var E;return d((E=i.current)==null?void 0:E.id)}},y),e)}/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$t.apply(this,arguments)}var Lt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lt||(Lt={}));const _v="popstate";function z8(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return ac("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:xc(i)}return G8(t,r,null,e)}function Xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Pa(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function K8(){return Math.random().toString(36).substr(2,8)}function xv(e,t){return{usr:e.state,key:e.key,idx:t}}function ac(e,t,r,n){return r===void 0&&(r=null),$t({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ji(t):t,{state:r,key:t&&t.key||n||K8()})}function xc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ji(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function G8(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Lt.Pop,l=null,c=u();c==null&&(c=0,o.replaceState($t({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Lt.Pop;let E=u(),p=E==null?null:E-c;c=E,l&&l({action:a,location:y.location,delta:p})}function h(E,p){a=Lt.Push;let v=ac(y.location,E,p);r&&r(v,E),c=u()+1;let C=xv(v,c),b=y.createHref(v);try{o.pushState(C,"",b)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(b)}s&&l&&l({action:a,location:y.location,delta:1})}function f(E,p){a=Lt.Replace;let v=ac(y.location,E,p);r&&r(v,E),c=u();let C=xv(v,c),b=y.createHref(v);o.replaceState(C,"",b),s&&l&&l({action:a,location:y.location,delta:0})}function g(E){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof E=="string"?E:xc(E);return v=v.replace(/ $/,"%20"),Xe(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let y={get action(){return a},get location(){return e(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(_v,d),l=E,()=>{i.removeEventListener(_v,d),l=null}},createHref(E){return t(i,E)},createURL:g,encodeLocation(E){let p=g(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(E){return o.go(E)}};return y}var Dt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dt||(Dt={}));const W8=new Set(["lazy","caseSensitive","path","id","index","children"]);function Y8(e){return e.index===!0}function sg(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,s)=>{let o=[...r,s],a=typeof i.id=="string"?i.id:o.join("-");if(Xe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Xe(!n[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Y8(i)){let l=$t({},i,t(i),{id:a});return n[a]=l,l}else{let l=$t({},i,t(i),{id:a,children:void 0});return n[a]=l,i.children&&(l.children=sg(i.children,t,o,n)),l}})}function ra(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?ji(t):t,i=Nc(n.pathname||"/",r);if(i==null)return null;let s=Dw(e);X8(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=ck(i);o=ok(s[a],l)}return o}function Q8(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function Dw(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Xe(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=oo([n,l.relativePath]),u=r.concat(l);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Dw(s.children,t,u,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:ik(c,s.index),routesMeta:u})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of Pw(s.path))i(s,o,l)}),t}function Pw(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=Pw(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function X8(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:sk(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Z8=/^:[\w-]+$/,J8=3,ek=2,tk=1,rk=10,nk=-2,Nv=e=>e==="*";function ik(e,t){let r=e.split("/"),n=r.length;return r.some(Nv)&&(n+=nk),t&&(n+=ek),r.filter(i=>!Nv(i)).reduce((i,s)=>i+(Z8.test(s)?J8:s===""?tk:rk),n)}function sk(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function ok(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],l=o===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",u=ak({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(n,u.params);let d=a.route;s.push({params:n,pathname:oo([i,u.pathname]),pathnameBase:pk(oo([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=oo([i,u.pathnameBase]))}return s}function ak(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=lk(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let y=a[d]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function lk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Pa(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function ck(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Pa(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Nc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function uk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?ji(e):e;return{pathname:r?r.startsWith("/")?r:dk(r,t):t,search:gk(n),hash:mk(i)}}function dk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function wf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Bw(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function hk(e,t){let r=Bw(e);return t?r.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function fk(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=ji(e):(i=$t({},e),Xe(!i.pathname||!i.pathname.includes("?"),wf("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),wf("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),wf("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=uk(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const oo=e=>e.join("/").replace(/\/\/+/g,"/"),pk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),gk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,mk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class S0{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function $w(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Lw=["post","put","patch","delete"],yk=new Set(Lw),vk=["get",...Lw],Ek=new Set(vk),Ck=new Set([301,302,303,307,308]),Sk=new Set([307,308]),bf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Ow=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bk=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),Mw="remix-router-transitions";function Tk(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Xe(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let j=e.detectErrorBoundary;i=K=>({hasErrorBoundary:j(K)})}else i=bk;let s={},o=sg(e.routes,i,void 0,s),a,l=e.basename||"/",c=$t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),u=null,d=new Set,h=null,f=null,g=null,y=e.hydrationData!=null,E=ra(o,e.history.location,l),p=null;if(E==null){let j=dn(404,{pathname:e.history.location.pathname}),{matches:K,route:Z}=Uv(o);E=K,p={[Z.id]:j}}let v,C=E.some(j=>j.route.lazy),b=E.some(j=>j.route.loader);if(C)v=!1;else if(!b)v=!0;else if(c.v7_partialHydration){let j=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null,Z=ue=>ue.route.loader?ue.route.loader.hydrate===!0?!1:j&&j[ue.route.id]!==void 0||K&&K[ue.route.id]!==void 0:!0;if(K){let ue=E.findIndex(Te=>K[Te.route.id]!==void 0);v=E.slice(0,ue+1).every(Z)}else v=E.every(Z)}else v=e.hydrationData!=null;let k,m={historyAction:e.history.action,location:e.history.location,matches:E,initialized:v,navigation:bf,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||p,fetchers:new Map,blockers:new Map},R=Lt.Pop,_=!1,H,A=!1,P=new Map,B=null,N=!1,z=!1,O=[],F=[],M=new Map,$=0,q=-1,W=new Map,ie=new Set,ae=new Map,ve=new Map,Ee=new Set,Ie=new Map,Re=new Map,Ae=!1;function Fe(){if(u=e.history.listen(j=>{let{action:K,location:Z,delta:ue}=j;if(Ae){Ae=!1;return}Pa(Re.size===0||ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=P0({currentLocation:m.location,nextLocation:Z,historyAction:K});if(Te&&ue!=null){Ae=!0,e.history.go(ue*-1),Bc(Te,{state:"blocked",location:Z,proceed(){Bc(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),e.history.go(ue)},reset(){let qe=new Map(m.blockers);qe.set(Te,nl),ke({blockers:qe})}});return}return ye(K,Z)}),r){$k(t,P);let j=()=>Lk(t,P);t.addEventListener("pagehide",j),B=()=>t.removeEventListener("pagehide",j)}return m.initialized||ye(Lt.Pop,m.location,{initialHydration:!0}),k}function Ue(){u&&u(),B&&B(),d.clear(),H&&H.abort(),m.fetchers.forEach((j,K)=>$s(K)),m.blockers.forEach((j,K)=>D0(K))}function $e(j){return d.add(j),()=>d.delete(j)}function ke(j,K){K===void 0&&(K={}),m=$t({},m,j);let Z=[],ue=[];c.v7_fetcherPersist&&m.fetchers.forEach((Te,qe)=>{Te.state==="idle"&&(Ee.has(qe)?ue.push(qe):Z.push(qe))}),[...d].forEach(Te=>Te(m,{deletedFetchers:ue,unstable_viewTransitionOpts:K.viewTransitionOpts,unstable_flushSync:K.flushSync===!0})),c.v7_fetcherPersist&&(Z.forEach(Te=>m.fetchers.delete(Te)),ue.forEach(Te=>$s(Te)))}function Y(j,K,Z){var ue,Te;let{flushSync:qe}=Z===void 0?{}:Z,Oe=m.actionData!=null&&m.navigation.formMethod!=null&&Pn(m.navigation.formMethod)&&m.navigation.state==="loading"&&((ue=j.state)==null?void 0:ue._isRedirect)!==!0,Be;K.actionData?Object.keys(K.actionData).length>0?Be=K.actionData:Be=null:Oe?Be=m.actionData:Be=null;let _e=K.loaderData?Mv(m.loaderData,K.loaderData,K.matches||[],K.errors):m.loaderData,Qe=m.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((mt,sr)=>Qe.set(sr,nl)));let Gt=_===!0||m.navigation.formMethod!=null&&Pn(m.navigation.formMethod)&&((Te=j.state)==null?void 0:Te._isRedirect)!==!0;a&&(o=a,a=void 0),N||R===Lt.Pop||(R===Lt.Push?e.history.push(j,j.state):R===Lt.Replace&&e.history.replace(j,j.state));let je;if(R===Lt.Pop){let mt=P.get(m.location.pathname);mt&&mt.has(j.pathname)?je={currentLocation:m.location,nextLocation:j}:P.has(j.pathname)&&(je={currentLocation:j,nextLocation:m.location})}else if(A){let mt=P.get(m.location.pathname);mt?mt.add(j.pathname):(mt=new Set([j.pathname]),P.set(m.location.pathname,mt)),je={currentLocation:m.location,nextLocation:j}}ke($t({},K,{actionData:Be,loaderData:_e,historyAction:R,location:j,initialized:!0,navigation:bf,revalidation:"idle",restoreScrollPosition:$0(j,K.matches||m.matches),preventScrollReset:Gt,blockers:Qe}),{viewTransitionOpts:je,flushSync:qe===!0}),R=Lt.Pop,_=!1,A=!1,N=!1,z=!1,O=[],F=[]}async function de(j,K){if(typeof j=="number"){e.history.go(j);return}let Z=og(m.location,m.matches,l,c.v7_prependBasename,j,c.v7_relativeSplatPath,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:ue,submission:Te,error:qe}=Dv(c.v7_normalizeFormMethod,!1,Z,K),Oe=m.location,Be=ac(m.location,ue,K&&K.state);Be=$t({},Be,e.history.encodeLocation(Be));let _e=K&&K.replace!=null?K.replace:void 0,Qe=Lt.Push;_e===!0?Qe=Lt.Replace:_e===!1||Te!=null&&Pn(Te.formMethod)&&Te.formAction===m.location.pathname+m.location.search&&(Qe=Lt.Replace);let Gt=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,je=(K&&K.unstable_flushSync)===!0,mt=P0({currentLocation:Oe,nextLocation:Be,historyAction:Qe});if(mt){Bc(mt,{state:"blocked",location:Be,proceed(){Bc(mt,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),de(j,K)},reset(){let sr=new Map(m.blockers);sr.set(mt,nl),ke({blockers:sr})}});return}return await ye(Qe,Be,{submission:Te,pendingError:qe,preventScrollReset:Gt,replace:K&&K.replace,enableViewTransition:K&&K.unstable_viewTransition,flushSync:je})}function le(){if(on(),ke({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){ye(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}ye(R||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation})}}async function ye(j,K,Z){H&&H.abort(),H=null,R=j,N=(Z&&Z.startUninterruptedRevalidation)===!0,Xb(m.location,m.matches),_=(Z&&Z.preventScrollReset)===!0,A=(Z&&Z.enableViewTransition)===!0;let ue=a||o,Te=Z&&Z.overrideNavigation,qe=ra(ue,K,l),Oe=(Z&&Z.flushSync)===!0;if(!qe){let sr=dn(404,{pathname:K.pathname}),{matches:qr,route:Wt}=Uv(ue);Ph(),Y(K,{matches:qr,loaderData:{},errors:{[Wt.id]:sr}},{flushSync:Oe});return}if(m.initialized&&!z&&_k(m.location,K)&&!(Z&&Z.submission&&Pn(Z.submission.formMethod))){Y(K,{matches:qe},{flushSync:Oe});return}H=new AbortController;let Be=sl(e.history,K,H.signal,Z&&Z.submission),_e,Qe;if(Z&&Z.pendingError)Qe={[Ll(qe).route.id]:Z.pendingError};else if(Z&&Z.submission&&Pn(Z.submission.formMethod)){let sr=await Je(Be,K,Z.submission,qe,{replace:Z.replace,flushSync:Oe});if(sr.shortCircuited)return;_e=sr.pendingActionData,Qe=sr.pendingActionError,Te=Tf(K,Z.submission),Oe=!1,Be=new Request(Be.url,{signal:Be.signal})}let{shortCircuited:Gt,loaderData:je,errors:mt}=await ir(Be,K,qe,Te,Z&&Z.submission,Z&&Z.fetcherSubmission,Z&&Z.replace,Z&&Z.initialHydration===!0,Oe,_e,Qe);Gt||(H=null,Y(K,$t({matches:qe},_e?{actionData:_e}:{},{loaderData:je,errors:mt})))}async function Je(j,K,Z,ue,Te){Te===void 0&&(Te={}),on();let qe=Pk(K,Z);ke({navigation:qe},{flushSync:Te.flushSync===!0});let Oe,Be=lg(ue,K);if(!Be.route.action&&!Be.route.lazy)Oe={type:Dt.error,error:dn(405,{method:j.method,pathname:K.pathname,routeId:Be.route.id})};else if(Oe=await il("action",j,Be,ue,s,i,l,c.v7_relativeSplatPath),j.signal.aborted)return{shortCircuited:!0};if(Js(Oe)){let _e;return Te&&Te.replace!=null?_e=Te.replace:_e=Oe.location===m.location.pathname+m.location.search,await Mt(m,Oe,{submission:Z,replace:_e}),{shortCircuited:!0}}if(na(Oe)){let _e=Ll(ue,Be.route.id);return(Te&&Te.replace)!==!0&&(R=Lt.Push),{pendingActionData:{},pendingActionError:{[_e.route.id]:Oe.error}}}if(Zs(Oe))throw dn(400,{type:"defer-action"});return{pendingActionData:{[Be.route.id]:Oe.data}}}async function ir(j,K,Z,ue,Te,qe,Oe,Be,_e,Qe,Gt){let je=ue||Tf(K,Te),mt=Te||qe||jv(je),sr=a||o,[qr,Wt]=Pv(e.history,m,Z,mt,K,c.v7_partialHydration&&Be===!0,z,O,F,Ee,ae,ie,sr,l,Qe,Gt);if(Ph(st=>!(Z&&Z.some(ht=>ht.route.id===st))||qr&&qr.some(ht=>ht.route.id===st)),q=++$,qr.length===0&&Wt.length===0){let st=x0();return Y(K,$t({matches:Z,loaderData:{},errors:Gt||null},Qe?{actionData:Qe}:{},st?{fetchers:new Map(m.fetchers)}:{}),{flushSync:_e}),{shortCircuited:!0}}if(!N&&(!c.v7_partialHydration||!Be)){Wt.forEach(ht=>{let Dr=m.fetchers.get(ht.key),Lc=ol(void 0,Dr?Dr.data:void 0);m.fetchers.set(ht.key,Lc)});let st=Qe||m.actionData;ke($t({navigation:je},st?Object.keys(st).length===0?{actionData:null}:{actionData:st}:{},Wt.length>0?{fetchers:new Map(m.fetchers)}:{}),{flushSync:_e})}Wt.forEach(st=>{M.has(st.key)&&zi(st.key),st.controller&&M.set(st.key,st.controller)});let Ao=()=>Wt.forEach(st=>zi(st.key));H&&H.signal.addEventListener("abort",Ao);let{results:Bh,loaderResults:Ro,fetcherResults:Ki}=await qi(m.matches,Z,qr,Wt,j);if(j.signal.aborted)return{shortCircuited:!0};H&&H.signal.removeEventListener("abort",Ao),Wt.forEach(st=>M.delete(st.key));let Ls=Hv(Bh);if(Ls){if(Ls.idx>=qr.length){let st=Wt[Ls.idx-qr.length].key;ie.add(st)}return await Mt(m,Ls.result,{replace:Oe}),{shortCircuited:!0}}let{loaderData:$h,errors:Ka}=Ov(m,Z,qr,Ro,Gt,Wt,Ki,Ie);Ie.forEach((st,ht)=>{st.subscribe(Dr=>{(Dr||st.done)&&Ie.delete(ht)})}),c.v7_partialHydration&&Be&&m.errors&&Object.entries(m.errors).filter(st=>{let[ht]=st;return!qr.some(Dr=>Dr.route.id===ht)}).forEach(st=>{let[ht,Dr]=st;Ka=Object.assign(Ka||{},{[ht]:Dr})});let Lh=x0(),ko=N0(q),$c=Lh||ko||Wt.length>0;return $t({loaderData:$h,errors:Ka},$c?{fetchers:new Map(m.fetchers)}:{})}function dt(j,K,Z,ue){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");M.has(j)&&zi(j);let Te=(ue&&ue.unstable_flushSync)===!0,qe=a||o,Oe=og(m.location,m.matches,l,c.v7_prependBasename,Z,c.v7_relativeSplatPath,K,ue==null?void 0:ue.relative),Be=ra(qe,Oe,l);if(!Be){Kt(j,K,dn(404,{pathname:Oe}),{flushSync:Te});return}let{path:_e,submission:Qe,error:Gt}=Dv(c.v7_normalizeFormMethod,!0,Oe,ue);if(Gt){Kt(j,K,Gt,{flushSync:Te});return}let je=lg(Be,_e);if(_=(ue&&ue.preventScrollReset)===!0,Qe&&Pn(Qe.formMethod)){pt(j,K,_e,je,Be,Te,Qe);return}ae.set(j,{routeId:K,path:_e}),Rn(j,K,_e,je,Be,Te,Qe)}async function pt(j,K,Z,ue,Te,qe,Oe){if(on(),ae.delete(j),!ue.route.action&&!ue.route.lazy){let ht=dn(405,{method:Oe.formMethod,pathname:Z,routeId:K});Kt(j,K,ht,{flushSync:qe});return}let Be=m.fetchers.get(j);kn(j,Bk(Oe,Be),{flushSync:qe});let _e=new AbortController,Qe=sl(e.history,Z,_e.signal,Oe);M.set(j,_e);let Gt=$,je=await il("action",Qe,ue,Te,s,i,l,c.v7_relativeSplatPath);if(Qe.signal.aborted){M.get(j)===_e&&M.delete(j);return}if(c.v7_fetcherPersist&&Ee.has(j)){if(Js(je)||na(je)){kn(j,Ji(void 0));return}}else{if(Js(je))if(M.delete(j),q>Gt){kn(j,Ji(void 0));return}else return ie.add(j),kn(j,ol(Oe)),Mt(m,je,{fetcherSubmission:Oe});if(na(je)){Kt(j,K,je.error);return}}if(Zs(je))throw dn(400,{type:"defer-action"});let mt=m.navigation.location||m.location,sr=sl(e.history,mt,_e.signal),qr=a||o,Wt=m.navigation.state!=="idle"?ra(qr,m.navigation.location,l):m.matches;Xe(Wt,"Didn't find any matches after fetcher action");let Ao=++$;W.set(j,Ao);let Bh=ol(Oe,je.data);m.fetchers.set(j,Bh);let[Ro,Ki]=Pv(e.history,m,Wt,Oe,mt,!1,z,O,F,Ee,ae,ie,qr,l,{[ue.route.id]:je.data},void 0);Ki.filter(ht=>ht.key!==j).forEach(ht=>{let Dr=ht.key,Lc=m.fetchers.get(Dr),Jb=ol(void 0,Lc?Lc.data:void 0);m.fetchers.set(Dr,Jb),M.has(Dr)&&zi(Dr),ht.controller&&M.set(Dr,ht.controller)}),ke({fetchers:new Map(m.fetchers)});let Ls=()=>Ki.forEach(ht=>zi(ht.key));_e.signal.addEventListener("abort",Ls);let{results:$h,loaderResults:Ka,fetcherResults:Lh}=await qi(m.matches,Wt,Ro,Ki,sr);if(_e.signal.aborted)return;_e.signal.removeEventListener("abort",Ls),W.delete(j),M.delete(j),Ki.forEach(ht=>M.delete(ht.key));let ko=Hv($h);if(ko){if(ko.idx>=Ro.length){let ht=Ki[ko.idx-Ro.length].key;ie.add(ht)}return Mt(m,ko.result)}let{loaderData:$c,errors:st}=Ov(m,m.matches,Ro,Ka,void 0,Ki,Lh,Ie);if(m.fetchers.has(j)){let ht=Ji(je.data);m.fetchers.set(j,ht)}N0(Ao),m.navigation.state==="loading"&&Ao>q?(Xe(R,"Expected pending action"),H&&H.abort(),Y(m.navigation.location,{matches:Wt,loaderData:$c,errors:st,fetchers:new Map(m.fetchers)})):(ke({errors:st,loaderData:Mv(m.loaderData,$c,Wt,st),fetchers:new Map(m.fetchers)}),z=!1)}async function Rn(j,K,Z,ue,Te,qe,Oe){let Be=m.fetchers.get(j);kn(j,ol(Oe,Be?Be.data:void 0),{flushSync:qe});let _e=new AbortController,Qe=sl(e.history,Z,_e.signal);M.set(j,_e);let Gt=$,je=await il("loader",Qe,ue,Te,s,i,l,c.v7_relativeSplatPath);if(Zs(je)&&(je=await Fw(je,Qe.signal,!0)||je),M.get(j)===_e&&M.delete(j),!Qe.signal.aborted){if(Ee.has(j)){kn(j,Ji(void 0));return}if(Js(je))if(q>Gt){kn(j,Ji(void 0));return}else{ie.add(j),await Mt(m,je);return}if(na(je)){Kt(j,K,je.error);return}Xe(!Zs(je),"Unhandled fetcher deferred data"),kn(j,Ji(je.data))}}async function Mt(j,K,Z){let{submission:ue,fetcherSubmission:Te,replace:qe}=Z===void 0?{}:Z;K.revalidate&&(z=!0);let Oe=ac(j.location,K.location,{_isRedirect:!0});if(Xe(Oe,"Expected a location on the redirect navigation"),r){let mt=!1;if(K.reloadDocument)mt=!0;else if(Ow.test(K.location)){const sr=e.history.createURL(K.location);mt=sr.origin!==t.location.origin||Nc(sr.pathname,l)==null}if(mt){qe?t.location.replace(K.location):t.location.assign(K.location);return}}H=null;let Be=qe===!0?Lt.Replace:Lt.Push,{formMethod:_e,formAction:Qe,formEncType:Gt}=j.navigation;!ue&&!Te&&_e&&Qe&&Gt&&(ue=jv(j.navigation));let je=ue||Te;if(Sk.has(K.status)&&je&&Pn(je.formMethod))await ye(Be,Oe,{submission:$t({},je,{formAction:K.location}),preventScrollReset:_});else{let mt=Tf(Oe,ue);await ye(Be,Oe,{overrideNavigation:mt,fetcherSubmission:Te,preventScrollReset:_})}}async function qi(j,K,Z,ue,Te){let qe=await Promise.all([...Z.map(_e=>il("loader",Te,_e,K,s,i,l,c.v7_relativeSplatPath)),...ue.map(_e=>_e.matches&&_e.match&&_e.controller?il("loader",sl(e.history,_e.path,_e.controller.signal),_e.match,_e.matches,s,i,l,c.v7_relativeSplatPath):{type:Dt.error,error:dn(404,{pathname:_e.path})})]),Oe=qe.slice(0,Z.length),Be=qe.slice(Z.length);return await Promise.all([Fv(j,Z,Oe,Oe.map(()=>Te.signal),!1,m.loaderData),Fv(j,ue.map(_e=>_e.match),Be,ue.map(_e=>_e.controller?_e.controller.signal:null),!0)]),{results:qe,loaderResults:Oe,fetcherResults:Be}}function on(){z=!0,O.push(...Ph()),ae.forEach((j,K)=>{M.has(K)&&(F.push(K),zi(K))})}function kn(j,K,Z){Z===void 0&&(Z={}),m.fetchers.set(j,K),ke({fetchers:new Map(m.fetchers)},{flushSync:(Z&&Z.flushSync)===!0})}function Kt(j,K,Z,ue){ue===void 0&&(ue={});let Te=Ll(m.matches,K);$s(j),ke({errors:{[Te.route.id]:Z},fetchers:new Map(m.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function an(j){return c.v7_fetcherPersist&&(ve.set(j,(ve.get(j)||0)+1),Ee.has(j)&&Ee.delete(j)),m.fetchers.get(j)||wk}function $s(j){let K=m.fetchers.get(j);M.has(j)&&!(K&&K.state==="loading"&&W.has(j))&&zi(j),ae.delete(j),W.delete(j),ie.delete(j),Ee.delete(j),m.fetchers.delete(j)}function Wb(j){if(c.v7_fetcherPersist){let K=(ve.get(j)||0)-1;K<=0?(ve.delete(j),Ee.add(j)):ve.set(j,K)}else $s(j);ke({fetchers:new Map(m.fetchers)})}function zi(j){let K=M.get(j);Xe(K,"Expected fetch controller: "+j),K.abort(),M.delete(j)}function _0(j){for(let K of j){let Z=an(K),ue=Ji(Z.data);m.fetchers.set(K,ue)}}function x0(){let j=[],K=!1;for(let Z of ie){let ue=m.fetchers.get(Z);Xe(ue,"Expected fetcher: "+Z),ue.state==="loading"&&(ie.delete(Z),j.push(Z),K=!0)}return _0(j),K}function N0(j){let K=[];for(let[Z,ue]of W)if(ue<j){let Te=m.fetchers.get(Z);Xe(Te,"Expected fetcher: "+Z),Te.state==="loading"&&(zi(Z),W.delete(Z),K.push(Z))}return _0(K),K.length>0}function Yb(j,K){let Z=m.blockers.get(j)||nl;return Re.get(j)!==K&&Re.set(j,K),Z}function D0(j){m.blockers.delete(j),Re.delete(j)}function Bc(j,K){let Z=m.blockers.get(j)||nl;Xe(Z.state==="unblocked"&&K.state==="blocked"||Z.state==="blocked"&&K.state==="blocked"||Z.state==="blocked"&&K.state==="proceeding"||Z.state==="blocked"&&K.state==="unblocked"||Z.state==="proceeding"&&K.state==="unblocked","Invalid blocker state transition: "+Z.state+" -> "+K.state);let ue=new Map(m.blockers);ue.set(j,K),ke({blockers:ue})}function P0(j){let{currentLocation:K,nextLocation:Z,historyAction:ue}=j;if(Re.size===0)return;Re.size>1&&Pa(!1,"A router only supports one blocker at a time");let Te=Array.from(Re.entries()),[qe,Oe]=Te[Te.length-1],Be=m.blockers.get(qe);if(!(Be&&Be.state==="proceeding")&&Oe({currentLocation:K,nextLocation:Z,historyAction:ue}))return qe}function Ph(j){let K=[];return Ie.forEach((Z,ue)=>{(!j||j(ue))&&(Z.cancel(),K.push(ue),Ie.delete(ue))}),K}function Qb(j,K,Z){if(h=j,g=K,f=Z||null,!y&&m.navigation===bf){y=!0;let ue=$0(m.location,m.matches);ue!=null&&ke({restoreScrollPosition:ue})}return()=>{h=null,g=null,f=null}}function B0(j,K){return f&&f(j,K.map(ue=>Q8(ue,m.loaderData)))||j.key}function Xb(j,K){if(h&&g){let Z=B0(j,K);h[Z]=g()}}function $0(j,K){if(h){let Z=B0(j,K),ue=h[Z];if(typeof ue=="number")return ue}return null}function Zb(j){s={},a=sg(j,i,void 0,s)}return k={get basename(){return l},get future(){return c},get state(){return m},get routes(){return o},get window(){return t},initialize:Fe,subscribe:$e,enableScrollRestoration:Qb,navigate:de,fetch:dt,revalidate:le,createHref:j=>e.history.createHref(j),encodeLocation:j=>e.history.encodeLocation(j),getFetcher:an,deleteFetcher:Wb,dispose:Ue,getBlocker:Yb,deleteBlocker:D0,_internalFetchControllers:M,_internalActiveDeferreds:Ie,_internalSetRoutes:Zb},k}function Ik(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function og(e,t,r,n,i,s,o,a){let l,c;if(o){l=[];for(let d of t)if(l.push(d),d.route.id===o){c=d;break}}else l=t,c=t[t.length-1];let u=fk(i||".",hk(l,s),Nc(e.pathname,r)||e.pathname,a==="path");return i==null&&(u.search=e.search,u.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!w0(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(u.pathname=u.pathname==="/"?r:oo([r,u.pathname])),xc(u)}function Dv(e,t,r,n){if(!n||!Ik(n))return{path:r};if(n.formMethod&&!Dk(n.formMethod))return{path:r,error:dn(405,{method:n.formMethod})};let i=()=>({path:r,error:dn(400,{type:"invalid-body"})}),s=n.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=Hw(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!Pn(o))return i();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,g)=>{let[y,E]=g;return""+f+y+"="+E+`
`},""):String(n.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!Pn(o))return i();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=ag(n.formData),c=n.formData;else if(n.body instanceof FormData)l=ag(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=Lv(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=Lv(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Pn(u.formMethod))return{path:r,submission:u};let d=ji(r);return t&&d.search&&w0(d.search)&&l.append("index",""),d.search="?"+l,{path:xc(d),submission:u}}function Ak(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Pv(e,t,r,n,i,s,o,a,l,c,u,d,h,f,g,y){let E=y?Object.values(y)[0]:g?Object.values(g)[0]:void 0,p=e.createURL(t.location),v=e.createURL(i),C=y?Object.keys(y)[0]:void 0,k=Ak(r,C).filter((R,_)=>{let{route:H}=R;if(H.lazy)return!0;if(H.loader==null)return!1;if(s)return H.loader.hydrate?!0:t.loaderData[H.id]===void 0&&(!t.errors||t.errors[H.id]===void 0);if(Rk(t.loaderData,t.matches[_],R)||a.some(B=>B===R.route.id))return!0;let A=t.matches[_],P=R;return Bv(R,$t({currentUrl:p,currentParams:A.params,nextUrl:v,nextParams:P.params},n,{actionResult:E,defaultShouldRevalidate:o||p.pathname+p.search===v.pathname+v.search||p.search!==v.search||Uw(A,P)}))}),m=[];return u.forEach((R,_)=>{if(s||!r.some(N=>N.route.id===R.routeId)||c.has(_))return;let H=ra(h,R.path,f);if(!H){m.push({key:_,routeId:R.routeId,path:R.path,matches:null,match:null,controller:null});return}let A=t.fetchers.get(_),P=lg(H,R.path),B=!1;d.has(_)?B=!1:l.includes(_)?B=!0:A&&A.state!=="idle"&&A.data===void 0?B=o:B=Bv(P,$t({currentUrl:p,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:r[r.length-1].params},n,{actionResult:E,defaultShouldRevalidate:o})),B&&m.push({key:_,routeId:R.routeId,path:R.path,matches:H,match:P,controller:new AbortController})}),[k,m]}function Rk(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function Uw(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Bv(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function $v(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Xe(i,"No route found in manifest");let s={};for(let o in n){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Pa(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!W8.has(o)&&(s[o]=n[o])}Object.assign(i,s),Object.assign(i,$t({},t(i),{lazy:void 0}))}async function il(e,t,r,n,i,s,o,a,l){l===void 0&&(l={});let c,u,d,h=y=>{let E,p=new Promise((v,C)=>E=C);return d=()=>E(),t.signal.addEventListener("abort",d),Promise.race([y({request:t,params:r.params,context:l.requestContext}),p])};try{let y=r.route[e];if(r.route.lazy)if(y){let E,p=await Promise.all([h(y).catch(v=>{E=v}),$v(r.route,s,i)]);if(E)throw E;u=p[0]}else if(await $v(r.route,s,i),y=r.route[e],y)u=await h(y);else if(e==="action"){let E=new URL(t.url),p=E.pathname+E.search;throw dn(405,{method:t.method,pathname:p,routeId:r.route.id})}else return{type:Dt.data,data:void 0};else if(y)u=await h(y);else{let E=new URL(t.url),p=E.pathname+E.search;throw dn(404,{pathname:p})}Xe(u!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(y){c=Dt.error,u=y}finally{d&&t.signal.removeEventListener("abort",d)}if(Nk(u)){let y=u.status;if(Ck.has(y)){let p=u.headers.get("Location");if(Xe(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!Ow.test(p))p=og(new URL(t.url),n.slice(0,n.indexOf(r)+1),o,!0,p,a);else if(!l.isStaticRequest){let v=new URL(t.url),C=p.startsWith("//")?new URL(v.protocol+p):new URL(p),b=Nc(C.pathname,o)!=null;C.origin===v.origin&&b&&(p=C.pathname+C.search+C.hash)}if(l.isStaticRequest)throw u.headers.set("Location",p),u;return{type:Dt.redirect,status:y,location:p,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===Dt.error?Dt.error:Dt.data,response:u};let E;try{let p=u.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?u.body==null?E=null:E=await u.json():E=await u.text()}catch(p){return{type:Dt.error,error:p}}return c===Dt.error?{type:c,error:new S0(y,u.statusText,E),headers:u.headers}:{type:Dt.data,data:E,statusCode:u.status,headers:u.headers}}if(c===Dt.error)return{type:c,error:u};if(xk(u)){var f,g;return{type:Dt.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((g=u.init)==null?void 0:g.headers)&&new Headers(u.init.headers)}}return{type:Dt.data,data:u}}function sl(e,t,r,n){let i=e.createURL(Hw(t)).toString(),s={signal:r};if(n&&Pn(n.formMethod)){let{formMethod:o,formEncType:a}=n;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=ag(n.formData):s.body=n.formData}return new Request(i,s)}function ag(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function Lv(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function kk(e,t,r,n,i){let s={},o=null,a,l=!1,c={};return r.forEach((u,d)=>{let h=t[d].route.id;if(Xe(!Js(u),"Cannot handle redirect results in processLoaderData"),na(u)){let f=Ll(e,h),g=u.error;n&&(g=Object.values(n)[0],n=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),s[h]=void 0,l||(l=!0,a=$w(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else Zs(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),n&&(o=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Ov(e,t,r,n,i,s,o,a){let{loaderData:l,errors:c}=kk(t,r,n,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h,controller:f}=s[u];Xe(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let g=o[u];if(!(f&&f.signal.aborted))if(na(g)){let y=Ll(e.matches,h==null?void 0:h.route.id);c&&c[y.route.id]||(c=$t({},c,{[y.route.id]:g.error})),e.fetchers.delete(d)}else if(Js(g))Xe(!1,"Unhandled fetcher revalidation redirect");else if(Zs(g))Xe(!1,"Unhandled fetcher deferred data");else{let y=Ji(g.data);e.fetchers.set(d,y)}}return{loaderData:l,errors:c}}function Mv(e,t,r,n){let i=$t({},t);for(let s of r){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),n&&n.hasOwnProperty(o))break}return i}function Ll(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function Uv(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function dn(e,t){let{pathname:r,routeId:n,method:i,type:s}=t===void 0?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",i&&r&&n?a="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",a='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",i&&r&&n?a="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new S0(e||500,o,new Error(a),!0)}function Hv(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Js(r))return{result:r,idx:t}}}function Hw(e){let t=typeof e=="string"?ji(e):e;return xc($t({},t,{hash:""}))}function _k(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Zs(e){return e.type===Dt.deferred}function na(e){return e.type===Dt.error}function Js(e){return(e&&e.type)===Dt.redirect}function xk(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Nk(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Dk(e){return Ek.has(e.toLowerCase())}function Pn(e){return yk.has(e.toLowerCase())}async function Fv(e,t,r,n,i,s){for(let o=0;o<r.length;o++){let a=r[o],l=t[o];if(!l)continue;let c=e.find(d=>d.route.id===l.route.id),u=c!=null&&!Uw(c,l)&&(s&&s[l.route.id])!==void 0;if(Zs(a)&&(i||u)){let d=n[o];Xe(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Fw(a,d,i).then(h=>{h&&(r[o]=h||r[o])})}}}async function Fw(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Dt.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Dt.error,error:i}}return{type:Dt.data,data:e.deferredData.data}}}function w0(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function lg(e,t){let r=typeof t=="string"?ji(t).search:t.search;if(e[e.length-1].route.index&&w0(r||""))return e[e.length-1];let n=Bw(e);return n[n.length-1]}function jv(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function Tf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Pk(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function ol(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Bk(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Ji(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function $k(e,t){try{let r=e.sessionStorage.getItem(Mw);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function Lk(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(Mw,JSON.stringify(r))}catch(n){Pa(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rd(){return Rd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rd.apply(this,arguments)}const jw=S.createContext(null),Vw=S.createContext(null),qw=S.createContext(null),Th=S.createContext(null),Ih=S.createContext({outlet:null,matches:[],isDataRoute:!1}),zw=S.createContext(null);function b0(){return S.useContext(Th)!=null}function Ok(){return b0()||Xe(!1),S.useContext(Th).location}function Mk(e,t,r,n){b0()||Xe(!1);let{navigator:i}=S.useContext(qw),{matches:s}=S.useContext(Ih),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ok(),u;if(t){var d;let E=typeof t=="string"?ji(t):t;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||Xe(!1),u=E}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let E=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let g=ra(e,{pathname:f}),y=Vk(g&&g.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:oo([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:oo([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,r,n);return t&&y?S.createElement(Th.Provider,{value:{location:Rd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Lt.Pop}},y):y}function Uk(){let e=Gk(),t=$w(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:i},r):null,null)}const Hk=S.createElement(Uk,null);class Fk extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(Ih.Provider,{value:this.props.routeContext},S.createElement(zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jk(e){let{routeContext:t,match:r,children:n}=e,i=S.useContext(jw);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Ih.Provider,{value:t},n)}function Vk(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Xe(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=r,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,g=!1,y=null,E=null;r&&(f=a&&d.route.id?a[d.route.id]:void 0,y=d.route.errorElement||Hk,l&&(c<0&&h===0?(Wk("route-fallback",!1),g=!0,E=null):c===h&&(g=!0,E=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),v=()=>{let C;return f?C=y:g?C=E:d.route.Component?C=S.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,S.createElement(jk,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:C})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(Fk,{location:r.location,revalidation:r.revalidation,component:y,error:f,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var cg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(cg||{});function qk(e){let t=S.useContext(Vw);return t||Xe(!1),t}function zk(e){let t=S.useContext(Ih);return t||Xe(!1),t}function Kk(e){let t=zk(),r=t.matches[t.matches.length-1];return r.route.id||Xe(!1),r.route.id}function Gk(){var e;let t=S.useContext(zw),r=qk(cg.UseRouteError),n=Kk(cg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}const Vv={};function Wk(e,t,r){!t&&!Vv[e]&&(Vv[e]=!0)}function Yk(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Lt.Pop,navigator:s,static:o=!1,future:a}=e;b0()&&Xe(!1);let l=t.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:s,static:o,future:Rd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=ji(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=n,y=S.useMemo(()=>{let E=Nc(u,l);return E==null?null:{location:{pathname:E,search:d,hash:h,state:f,key:g},navigationType:i}},[l,u,d,h,f,g,i]);return y==null?null:S.createElement(qw.Provider,{value:c},S.createElement(Th.Provider,{children:r,value:y}))}new Promise(()=>{});function Qk(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:S.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:S.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:S.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kd(){return kd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kd.apply(this,arguments)}const Xk="6";try{window.__reactRouterVersion=Xk}catch{}function Zk(e,t){return Tk({basename:t==null?void 0:t.basename,future:kd({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:z8({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Jk(),routes:e,mapRouteProperties:Qk,window:t==null?void 0:t.window}).initialize()}function Jk(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=kd({},t,{errors:e_(t.errors)})),t}function e_(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new S0(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}const t_=S.createContext({isTransitioning:!1}),r_=S.createContext(new Map),n_="startTransition",qv=Og[n_],i_="flushSync",zv=A3[i_];function s_(e){qv?qv(e):e()}function al(e){zv?zv(e):e()}class o_{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function a_(e){let{fallbackElement:t,router:r,future:n}=e,[i,s]=S.useState(r.state),[o,a]=S.useState(),[l,c]=S.useState({isTransitioning:!1}),[u,d]=S.useState(),[h,f]=S.useState(),[g,y]=S.useState(),E=S.useRef(new Map),{v7_startTransition:p}=n||{},v=S.useCallback(R=>{p?s_(R):R()},[p]),C=S.useCallback((R,_)=>{let{deletedFetchers:H,unstable_flushSync:A,unstable_viewTransitionOpts:P}=_;H.forEach(N=>E.current.delete(N)),R.fetchers.forEach((N,z)=>{N.data!==void 0&&E.current.set(z,N.data)});let B=r.window==null||typeof r.window.document.startViewTransition!="function";if(!P||B){A?al(()=>s(R)):v(()=>s(R));return}if(A){al(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let N=r.window.document.startViewTransition(()=>{al(()=>s(R))});N.finished.finally(()=>{al(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),al(()=>f(N));return}h?(u&&u.resolve(),h.skipTransition(),y({state:R,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(R),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,h,u,E,v]);S.useLayoutEffect(()=>r.subscribe(C),[r,C]),S.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new o_)},[l]),S.useEffect(()=>{if(u&&o&&r.window){let R=o,_=u.promise,H=r.window.document.startViewTransition(async()=>{v(()=>s(R)),await _});H.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(H)}},[v,o,u,r.window]),S.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,h,i.location,o]),S.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),y(void 0))},[l.isTransitioning,g]),S.useEffect(()=>{},[]);let b=S.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:R=>r.navigate(R),push:(R,_,H)=>r.navigate(R,{state:_,preventScrollReset:H==null?void 0:H.preventScrollReset}),replace:(R,_,H)=>r.navigate(R,{replace:!0,state:_,preventScrollReset:H==null?void 0:H.preventScrollReset})}),[r]),k=r.basename||"/",m=S.useMemo(()=>({router:r,navigator:b,static:!1,basename:k}),[r,b,k]);return S.createElement(S.Fragment,null,S.createElement(jw.Provider,{value:m},S.createElement(Vw.Provider,{value:i},S.createElement(r_.Provider,{value:E.current},S.createElement(t_.Provider,{value:l},S.createElement(Yk,{basename:k,location:i.location,navigationType:i.historyAction,navigator:b,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},i.initialized||r.future.v7_partialHydration?S.createElement(l_,{routes:r.routes,future:r.future,state:i}):t))))),null)}function l_(e){let{routes:t,future:r,state:n}=e;return Mk(t,void 0,n,r)}var Kv;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kv||(Kv={}));var Gv;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));var c_=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const Wv=hc(c_);function u_(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const d_=typeof window<"u"?S.useLayoutEffect:S.useEffect;function or(e,t){d_(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function h_(e,t){e&&u_(e),or(`mantine-form:${e}:set-field-value`,r=>t.setFieldValue(r.detail.path,r.detail.value)),or(`mantine-form:${e}:set-values`,r=>t.setValues(r.detail)),or(`mantine-form:${e}:set-initial-values`,r=>t.setInitialValues(r.detail)),or(`mantine-form:${e}:set-errors`,r=>t.setErrors(r.detail)),or(`mantine-form:${e}:set-field-error`,r=>t.setFieldError(r.detail.path,r.detail.error)),or(`mantine-form:${e}:clear-field-error`,r=>t.clearFieldError(r.detail)),or(`mantine-form:${e}:clear-errors`,t.clearErrors),or(`mantine-form:${e}:reset`,t.reset),or(`mantine-form:${e}:validate`,t.validate),or(`mantine-form:${e}:validate-field`,r=>t.validateField(r.detail)),or(`mantine-form:${e}:reorder-list-item`,r=>t.reorderListItem(r.detail.path,r.detail.payload)),or(`mantine-form:${e}:remove-list-item`,r=>t.removeListItem(r.detail.path,r.detail.index)),or(`mantine-form:${e}:insert-list-item`,r=>t.insertListItem(r.detail.path,r.detail.item,r.detail.index)),or(`mantine-form:${e}:set-dirty`,r=>t.setDirty(r.detail)),or(`mantine-form:${e}:set-touched`,r=>t.setTouched(r.detail)),or(`mantine-form:${e}:reset-dirty`,r=>t.resetDirty(r.detail)),or(`mantine-form:${e}:reset-touched`,t.resetTouched)}function ug(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,r)=>{const n=e[r];return n!=null&&n!==!1&&(t[r]=n),t},{})}function f_(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:r}=t;r instanceof HTMLInputElement?r.type==="checkbox"?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t)}}function Yv(e,t){const r=Object.keys(e);if(typeof t=="string"){const n=r.filter(i=>i.startsWith(`${t}.`));return e[t]||n.some(i=>e[i])||!1}return r.some(n=>e[n])}function Kw(e,t){if(t===null||typeof t!="object")return{};const r={...t};return Object.keys(t).forEach(n=>{n.includes(`${String(e)}.`)&&delete r[n]}),r}function Qv(e,t){const r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function Xv(e,t,r,n){if(t===void 0)return r;const i=`${String(e)}`;let s=r;n===-1&&(s=Kw(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const c=Qv(l,i);return Number.isNaN(c)?!1:c>=t}).forEach(([l,c])=>{const u=Qv(l,i),d=l.replace(`${i}.${u}`,`${i}.${u+n}`);o[d]=c,a.add(d),a.has(l)||delete o[l]}),o}function p_(e,{from:t,to:r},n){const i=`${e}.${t}`,s=`${e}.${r}`,o={...n};return Object.keys(n).every(a=>{let l,c;if(a.startsWith(i)&&(l=a,c=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),c=a),l&&c){const u=o[l],d=o[c];return d===void 0?delete o[l]:o[l]=d,u===void 0?delete o[c]:o[c]=u,!1}return!0}),o}function Gw(e){return typeof e!="string"?[]:e.split(".")}function ti(e,t){const r=Gw(e);if(r.length===0||typeof t!="object"||t===null)return;let n=t[r[0]];for(let i=1;i<r.length&&n!==void 0;i+=1)n=n[r[i]];return n}function Zv(e,t,r){typeof r.value=="object"&&(r.value=ia(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function ia(e){if(typeof e!="object")return e;var t=0,r,n,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(ia(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(ia(a),ia(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(ia(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)Zv(i,n[t],Object.getOwnPropertyDescriptor(e,n[t]));for(t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++)Object.hasOwnProperty.call(i,r=n[t])&&i[r]===e[r]||Zv(i,r,Object.getOwnPropertyDescriptor(e,r))}return i||e}function Ah(e,t,r){const n=Gw(e);if(n.length===0)return r;const i=ia(r);if(n.length===1)return i[n[0]]=t,i;let s=i[n[0]];for(let o=1;o<n.length-1;o+=1){if(s===void 0)return i;s=s[n[o]]}return s[n[n.length-1]]=t,i}function g_(e,{from:t,to:r},n){const i=ti(e,n);if(!Array.isArray(i))return n;const s=[...i],o=i[t];return s.splice(t,1),s.splice(r,0,o),Ah(e,s,n)}function m_(e,t,r,n){const i=ti(e,n);if(!Array.isArray(i))return n;const s=[...i];return s.splice(typeof r=="number"?r:s.length,0,t),Ah(e,s,n)}function y_(e,t,r){const n=ti(e,r);return Array.isArray(n)?Ah(e,n.filter((i,s)=>s!==t),r):r}function Jv(e){const t=ug(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function dg(e,t,r="",n={}){return typeof e!="object"||e===null?n:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${r===""?"":`${r}.`}${s}`,l=ti(a,t);let c=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(c=!0,l.forEach((u,d)=>dg(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(c||dg(o,t,a,i)),i},n)}function hg(e,t){return Jv(typeof e=="function"?e(t):dg(e,t))}function ou(e,t,r){if(typeof e!="string")return{hasError:!1,error:null};const n=hg(t,r),i=Object.keys(n.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?n.errors[i]:null}}const v_="__MANTINE_FORM_INDEX__";function e1(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${v_}`)):!1:!1}function Ww({name:e,initialValues:t,initialErrors:r={},initialDirty:n={},initialTouched:i={},clearInputErrorOnChange:s=!0,validateInputOnChange:o=!1,validateInputOnBlur:a=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:u,validate:d}={}){const[h,f]=S.useState(i),[g,y]=S.useState(n),[E,p]=S.useState(t||{}),[v,C]=S.useState(ug(r)),[b,k]=S.useState(!1),m=S.useRef(t||{}),R=Y=>{m.current=Y},_=S.useCallback(Y=>{b||(k(!0),p(Y),R(Y))},[b]),H=S.useCallback(()=>f({}),[]),A=Y=>{const de=Y?{...E,...Y}:E;R(de),y({})},P=S.useCallback(Y=>C(de=>ug(typeof Y=="function"?Y(de):Y)),[]),B=S.useCallback(()=>C({}),[]),N=S.useCallback(()=>{p(m.current),B(),y({}),H()},[]),z=S.useCallback((Y,de)=>P(le=>({...le,[Y]:de})),[]),O=S.useCallback(Y=>P(de=>{if(typeof Y!="string")return de;const le={...de};return delete le[Y],le}),[]),F=S.useCallback(Y=>y(de=>{if(typeof Y!="string")return de;const le=Kw(Y,de);return delete le[Y],le}),[]),M=S.useCallback((Y,de)=>{const le=e1(Y,o);F(Y),f(ye=>({...ye,[Y]:!0})),p(ye=>{const Je=ti(Y,ye),ir=Ah(Y,de instanceof Function?de(Je):de,ye);if(le){const dt=ou(Y,d,ir);dt.hasError?z(Y,dt.error):O(Y)}return l==null||l(ir,ye),ir}),!le&&s&&z(Y,null)},[l]),$=S.useCallback(Y=>{p(de=>{const le=Y instanceof Function?Y(de):Y,ye={...de,...le};return l==null||l(ye,de),ye}),s&&B()},[l]),q=S.useCallback((Y,de)=>{F(Y),p(le=>{const ye=g_(Y,de,le);return l==null||l(ye,le),ye}),C(le=>p_(Y,de,le))},[]),W=S.useCallback((Y,de)=>{F(Y),p(le=>{const ye=y_(Y,de,le);return l==null||l(ye,le),ye}),C(le=>Xv(Y,de,le,-1))},[]),ie=S.useCallback((Y,de,le)=>{F(Y),p(ye=>{const Je=m_(Y,de,le,ye);return l==null||l(Je,ye),Je}),C(ye=>Xv(Y,le,ye,1))},[]),ae=S.useCallback(()=>{const Y=hg(d,E);return C(Y.errors),Y},[E,d]),ve=S.useCallback(Y=>{const de=ou(Y,d,E);return de.hasError?z(Y,de.error):O(Y),de},[E,d]),Ee=(Y,{type:de="input",withError:le=!0,withFocus:ye=!0,...Je}={})=>{const dt={onChange:f_(pt=>M(Y,pt))};return le&&(dt.error=v[Y]),de==="checkbox"?dt.checked=ti(Y,E):dt.value=ti(Y,E),ye&&(dt.onFocus=()=>f(pt=>({...pt,[Y]:!0})),dt.onBlur=()=>{if(e1(Y,a)){const pt=ou(Y,d,E);pt.hasError?z(Y,pt.error):O(Y)}}),Object.assign(dt,u==null?void 0:u({inputProps:dt,field:Y,options:{type:de,withError:le,withFocus:ye,...Je},form:ke}))},Ie=(Y,de)=>le=>{le==null||le.preventDefault();const ye=ae();ye.hasErrors?de==null||de(ye.errors,E,le):Y==null||Y(c(E),le)},Re=Y=>c(Y||E),Ae=S.useCallback(Y=>{Y.preventDefault(),N()},[]),Fe=Y=>{if(Y){const le=ti(Y,g);if(typeof le=="boolean")return le;const ye=ti(Y,E),Je=ti(Y,m.current);return!Wv(ye,Je)}return Object.keys(g).length>0?Yv(g):!Wv(E,m.current)},Ue=S.useCallback(Y=>Yv(h,Y),[h]),$e=S.useCallback(Y=>Y?!ou(Y,d,E).hasError:!hg(d,E).hasErrors,[E,d]),ke={initialized:b,values:E,errors:v,initialize:_,setValues:$,setInitialValues:R,setErrors:P,setFieldValue:M,setFieldError:z,clearFieldError:O,clearErrors:B,reset:N,validate:ae,validateField:ve,reorderListItem:q,removeListItem:W,insertListItem:ie,getInputProps:Ee,onSubmit:Ie,onReset:Ae,isDirty:Fe,isTouched:Ue,setTouched:f,setDirty:y,resetTouched:H,resetDirty:A,isValid:$e,getTransformedValues:Re};return h_(e,ke),ke}function ft(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function a(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof r?u:new r(function(d){d(u)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function es(){}function ot(){ot.init.call(this)}function Yw(e){return e._maxListeners===void 0?ot.defaultMaxListeners:e._maxListeners}function t1(e,t,r,n){var i,s,o,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=new es,e._eventsCount=0),o){if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=Yw(e))&&i>0&&o.length>i){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,a=l,typeof console.warn=="function"?console.warn(a):console.log(a)}}else o=s[t]=r,++e._eventsCount;return e}function r1(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function n1(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}function ll(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}typeof SuppressedError=="function"&&SuppressedError,es.prototype=Object.create(null),ot.EventEmitter=ot,ot.usingDomains=!1,ot.prototype.domain=void 0,ot.prototype._events=void 0,ot.prototype._maxListeners=void 0,ot.defaultMaxListeners=10,ot.init=function(){this.domain=null,ot.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new es,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},ot.prototype.getMaxListeners=function(){return Yw(this)},ot.prototype.emit=function(e){var t,r,n,i,s,o,a,l=e==="error";if(o=this._events)l=l&&o.error==null;else if(!l)return!1;if(a=this.domain,l){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=o[e]))return!1;var u=typeof r=="function";switch(n=arguments.length){case 1:(function(d,h,f){if(h)d.call(f);else for(var g=d.length,y=ll(d,g),E=0;E<g;++E)y[E].call(f)})(r,u,this);break;case 2:(function(d,h,f,g){if(h)d.call(f,g);else for(var y=d.length,E=ll(d,y),p=0;p<y;++p)E[p].call(f,g)})(r,u,this,arguments[1]);break;case 3:(function(d,h,f,g,y){if(h)d.call(f,g,y);else for(var E=d.length,p=ll(d,E),v=0;v<E;++v)p[v].call(f,g,y)})(r,u,this,arguments[1],arguments[2]);break;case 4:(function(d,h,f,g,y,E){if(h)d.call(f,g,y,E);else for(var p=d.length,v=ll(d,p),C=0;C<p;++C)v[C].call(f,g,y,E)})(r,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),s=1;s<n;s++)i[s-1]=arguments[s];(function(d,h,f,g){if(h)d.apply(f,g);else for(var y=d.length,E=ll(d,y),p=0;p<y;++p)E[p].apply(f,g)})(r,u,this,i)}return!0},ot.prototype.addListener=function(e,t){return t1(this,e,t,!1)},ot.prototype.on=ot.prototype.addListener,ot.prototype.prependListener=function(e,t){return t1(this,e,t,!0)},ot.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,r1(this,e,t)),this},ot.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,r1(this,e,t)),this},ot.prototype.removeListener=function(e,t){var r,n,i,s,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)--this._eventsCount==0?this._events=new es:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(i=-1,s=r.length;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount==0)return this._events=new es,this;delete n[e]}else(function(a,l){for(var c=l,u=c+1,d=a.length;u<d;c+=1,u+=1)a[c]=a[u];a.pop()})(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},ot.prototype.off=function(e,t){return this.removeListener(e,t)},ot.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return arguments.length===0?(this._events=new es,this._eventsCount=0):r[e]&&(--this._eventsCount==0?this._events=new es:delete r[e]),this;if(arguments.length===0){for(var n,i=Object.keys(r),s=0;s<i.length;++s)(n=i[s])!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new es,this._eventsCount=0,this}if(typeof(t=r[e])=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},ot.prototype.listeners=function(e){var t,r,n=this._events;return r=n&&(t=n[e])?typeof t=="function"?[t.listener||t]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(t):[],r},ot.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):n1.call(e,t)},ot.prototype.listenerCount=n1,ot.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var E_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Ve={options:{usePureJavaScript:!1}},lc=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function Qw(){throw new Error("setTimeout has not been defined")}function Xw(){throw new Error("clearTimeout has not been defined")}var ts=Qw,rs=Xw;function Zw(e){if(ts===setTimeout)return setTimeout(e,0);if((ts===Qw||!ts)&&setTimeout)return ts=setTimeout,setTimeout(e,0);try{return ts(e,0)}catch{try{return ts.call(null,e,0)}catch{return ts.call(this,e,0)}}}typeof lc.setTimeout=="function"&&(ts=setTimeout),typeof lc.clearTimeout=="function"&&(rs=clearTimeout);var eo,Ri=[],ma=!1,Vu=-1;function S_(){ma&&eo&&(ma=!1,eo.length?Ri=eo.concat(Ri):Vu=-1,Ri.length&&Jw())}function Jw(){if(!ma){var e=Zw(S_);ma=!0;for(var t=Ri.length;t;){for(eo=Ri,Ri=[];++Vu<t;)eo&&eo[Vu].run();Vu=-1,t=Ri.length}eo=null,ma=!1,function(r){if(rs===clearTimeout)return clearTimeout(r);if((rs===Xw||!rs)&&clearTimeout)return rs=clearTimeout,clearTimeout(r);try{return rs(r)}catch{try{return rs.call(null,r)}catch{return rs.call(this,r)}}}(e)}}function eb(e,t){this.fun=e,this.array=t}eb.prototype.run=function(){this.fun.apply(null,this.array)};function To(){}var w_=To,b_=To,T_=To,I_=To,A_=To,R_=To,k_=To,Ho=lc.performance||{},__=Ho.now||Ho.mozNow||Ho.msNow||Ho.oNow||Ho.webkitNow||function(){return new Date().getTime()},x_=new Date,ns={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ri.push(new eb(e,t)),Ri.length!==1||ma||Zw(Jw)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:w_,addListener:b_,once:T_,off:I_,removeListener:A_,removeAllListeners:R_,emit:k_,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*__.call(Ho),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-x_)/1e3}},oi=[],un=[],N_=typeof Uint8Array<"u"?Uint8Array:Array,T0=!1;function tb(){T0=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)oi[t]=e[t],un[e.charCodeAt(t)]=t;un[45]=62,un[95]=63}function D_(e,t,r){for(var n,i,s=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s.push(oi[(i=n)>>18&63]+oi[i>>12&63]+oi[i>>6&63]+oi[63&i]);return s.join("")}function i1(e){var t;T0||tb();for(var r=e.length,n=r%3,i="",s=[],o=16383,a=0,l=r-n;a<l;a+=o)s.push(D_(e,a,a+o>l?l:a+o));return n===1?(t=e[r-1],i+=oi[t>>2],i+=oi[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=oi[t>>10],i+=oi[t>>4&63],i+=oi[t<<2&63],i+="="),s.push(i),s.join("")}function au(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)}function rb(e,t,r,n,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,g=n?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*l-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=g,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+f]=255&o,f+=g,o/=256,c-=8);e[r+f-g]|=128*y}var P_={}.toString,nb=Array.isArray||function(e){return P_.call(e)=="[object Array]"};function _d(){return ee.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ki(e,t){if(_d()<t)throw new RangeError("Invalid typed array length");return ee.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ee.prototype:(e===null&&(e=new ee(t)),e.length=t),e}function ee(e,t,r){if(!(ee.TYPED_ARRAY_SUPPORT||this instanceof ee))return new ee(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return fg(this,e)}return ib(this,e,t,r)}function ib(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),ee.TYPED_ARRAY_SUPPORT?(i=s).__proto__=ee.prototype:i=If(i,s),i}(e,t,r,n):typeof t=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!ee.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|ob(s,o);i=ki(i,a);var l=i.write(s,o);return l!==a&&(i=i.slice(0,l)),i}(e,t,r):function(i,s){if(ai(s)){var o=0|I0(s.length);return(i=ki(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?ki(i,0):If(i,s);if(s.type==="Buffer"&&nb(s.data))return If(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function sb(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function fg(e,t){if(sb(t),e=ki(e,t<0?0:0|I0(t)),!ee.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function If(e,t){var r=t.length<0?0:0|I0(t.length);e=ki(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function I0(e){if(e>=_d())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_d().toString(16)+" bytes");return 0|e}function ai(e){return!(e==null||!e._isBuffer)}function ob(e,t){if(ai(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return xd(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ub(e).length;default:if(n)return xd(e).length;t=(""+t).toLowerCase(),n=!0}}function B_(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return V_(this,t,r);case"utf8":case"utf-8":return lb(this,t,r);case"ascii":return F_(this,t,r);case"latin1":case"binary":return j_(this,t,r);case"base64":return H_(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return q_(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Ms(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function s1(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if(typeof t=="string"&&(t=ee.from(t,n)),ai(t))return t.length===0?-1:o1(e,t,r,n,i);if(typeof t=="number")return t&=255,ee.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):o1(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function o1(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,r/=2}function c(f,g){return o===1?f[g]:f.readUInt16BE(g*o)}if(i){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===l)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var d=!0,h=0;h<l;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return-1}function $_(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function L_(e,t,r,n){return Rh(xd(t,e.length-r),e,r,n)}function ab(e,t,r,n){return Rh(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(t),e,r,n)}function O_(e,t,r,n){return ab(e,t,r,n)}function M_(e,t,r,n){return Rh(ub(t),e,r,n)}function U_(e,t,r,n){return Rh(function(i,s){for(var o,a,l,c=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,l=o%256,c.push(l),c.push(a);return c}(t,e.length-r),e,r,n)}function H_(e,t,r){return t===0&&r===e.length?i1(e):i1(e.slice(t,r))}function lb(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}u===null?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return function(h){var f=h.length;if(f<=a1)return String.fromCharCode.apply(String,h);for(var g="",y=0;y<f;)g+=String.fromCharCode.apply(String,h.slice(y,y+=a1));return g}(n)}ee.TYPED_ARRAY_SUPPORT=lc.TYPED_ARRAY_SUPPORT===void 0||lc.TYPED_ARRAY_SUPPORT,_d(),ee.poolSize=8192,ee._augment=function(e){return e.__proto__=ee.prototype,e},ee.from=function(e,t,r){return ib(null,e,t,r)},ee.TYPED_ARRAY_SUPPORT&&(ee.prototype.__proto__=Uint8Array.prototype,ee.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ee[Symbol.species]),ee.alloc=function(e,t,r){return function(n,i,s,o){return sb(i),i<=0?ki(n,i):s!==void 0?typeof o=="string"?ki(n,i).fill(s,o):ki(n,i).fill(s):ki(n,i)}(null,e,t,r)},ee.allocUnsafe=function(e){return fg(null,e)},ee.allocUnsafeSlow=function(e){return fg(null,e)},ee.isBuffer=function(e){return e!=null&&(!!e._isBuffer||u1(e)||function(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&u1(t.slice(0,0))}(e))},ee.compare=function(e,t){if(!ai(e)||!ai(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},ee.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ee.concat=function(e,t){if(!nb(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ee.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ee.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!ai(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},ee.byteLength=ob,ee.prototype._isBuffer=!0,ee.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Ms(this,t,t+1);return this},ee.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Ms(this,t,t+3),Ms(this,t+1,t+2);return this},ee.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Ms(this,t,t+7),Ms(this,t+1,t+6),Ms(this,t+2,t+5),Ms(this,t+3,t+4);return this},ee.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?lb(this,0,e):B_.apply(this,arguments)},ee.prototype.equals=function(e){if(!ai(e))throw new TypeError("Argument must be a Buffer");return this===e||ee.compare(this,e)===0},ee.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ee.prototype.compare=function(e,t,r,n,i){if(!ai(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(n,i),c=e.slice(t,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},ee.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},ee.prototype.indexOf=function(e,t,r){return s1(this,e,t,r,!0)},ee.prototype.lastIndexOf=function(e,t,r){return s1(this,e,t,r,!1)},ee.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,n===void 0&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((r===void 0||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return $_(this,e,t,r);case"utf8":case"utf-8":return L_(this,e,t,r);case"ascii":return ab(this,e,t,r);case"latin1":case"binary":return O_(this,e,t,r);case"base64":return M_(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U_(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var a1=4096;function F_(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function j_(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function V_(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=K_(e[s]);return i}function q_(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function Yt(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Pr(e,t,r,n,i,s){if(!ai(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function lu(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function cu(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function cb(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function l1(e,t,r,n,i){return i||cb(e,0,r,4),rb(e,t,r,n,23,4),r+4}function c1(e,t,r,n,i){return i||cb(e,0,r,8),rb(e,t,r,n,52,8),r+8}ee.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=t===void 0?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),ee.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=ee.prototype;else{var i=t-e;r=new ee(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},ee.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},ee.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},ee.prototype.readUInt8=function(e,t){return t||Yt(e,1,this.length),this[e]},ee.prototype.readUInt16LE=function(e,t){return t||Yt(e,2,this.length),this[e]|this[e+1]<<8},ee.prototype.readUInt16BE=function(e,t){return t||Yt(e,2,this.length),this[e]<<8|this[e+1]},ee.prototype.readUInt32LE=function(e,t){return t||Yt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ee.prototype.readUInt32BE=function(e,t){return t||Yt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ee.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},ee.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},ee.prototype.readInt8=function(e,t){return t||Yt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ee.prototype.readInt16LE=function(e,t){t||Yt(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt16BE=function(e,t){t||Yt(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt32LE=function(e,t){return t||Yt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ee.prototype.readInt32BE=function(e,t){return t||Yt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ee.prototype.readFloatLE=function(e,t){return t||Yt(e,4,this.length),au(this,e,!0,23,4)},ee.prototype.readFloatBE=function(e,t){return t||Yt(e,4,this.length),au(this,e,!1,23,4)},ee.prototype.readDoubleLE=function(e,t){return t||Yt(e,8,this.length),au(this,e,!0,52,8)},ee.prototype.readDoubleBE=function(e,t){return t||Yt(e,8,this.length),au(this,e,!1,52,8)},ee.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Pr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},ee.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Pr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},ee.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,1,255,0),ee.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ee.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):lu(this,e,t,!0),t+2},ee.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):lu(this,e,t,!1),t+2},ee.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):cu(this,e,t,!0),t+4},ee.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):cu(this,e,t,!1),t+4},ee.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Pr(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&a===0&&this[t+s-1]!==0&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},ee.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Pr(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&a===0&&this[t+s+1]!==0&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},ee.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,1,127,-128),ee.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ee.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):lu(this,e,t,!0),t+2},ee.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):lu(this,e,t,!1),t+2},ee.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,2147483647,-2147483648),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):cu(this,e,t,!0),t+4},ee.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):cu(this,e,t,!1),t+4},ee.prototype.writeFloatLE=function(e,t,r){return l1(this,e,t,!0,r)},ee.prototype.writeFloatBE=function(e,t,r){return l1(this,e,t,!1,r)},ee.prototype.writeDoubleLE=function(e,t,r){return c1(this,e,t,!0,r)},ee.prototype.writeDoubleBE=function(e,t,r){return c1(this,e,t,!1,r)},ee.prototype.copy=function(e,t,r,n){if(r||(r=0),n||n===0||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!ee.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},ee.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ee.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0),typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{var o=ai(e)?e:xd(new ee(e,n).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var z_=/[^+\/0-9A-Za-z-_]/g;function K_(e){return e<16?"0"+e.toString(16):e.toString(16)}function xd(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function ub(e){return function(t){var r,n,i,s,o,a;T0||tb();var l=t.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[l-2]==="="?2:t[l-1]==="="?1:0,a=new N_(3*l/4-o),i=o>0?l-4:l;var c=0;for(r=0,n=0;r<i;r+=4,n+=3)s=un[t.charCodeAt(r)]<<18|un[t.charCodeAt(r+1)]<<12|un[t.charCodeAt(r+2)]<<6|un[t.charCodeAt(r+3)],a[c++]=s>>16&255,a[c++]=s>>8&255,a[c++]=255&s;return o===2?(s=un[t.charCodeAt(r)]<<2|un[t.charCodeAt(r+1)]>>4,a[c++]=255&s):o===1&&(s=un[t.charCodeAt(r)]<<10|un[t.charCodeAt(r+1)]<<4|un[t.charCodeAt(r+2)]>>2,a[c++]=s>>8&255,a[c++]=255&s),a}(function(t){if((t=function(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}(t).replace(z_,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(e))}function Rh(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function u1(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var pg={},G_=pg,d1={};pg.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(d,h){var f=0,g=h.length,y=h.charAt(0),E=[0];for(f=0;f<d.length();++f){for(var p=0,v=d.at(f);p<E.length;++p)v+=E[p]<<8,E[p]=v%g,v=v/g|0;for(;v>0;)E.push(v%g),v=v/g|0}var C="";for(f=0;d.at(f)===0&&f<d.length()-1;++f)C+=y;for(f=E.length-1;f>=0;--f)C+=h[E[f]];return C}(e,t);if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n},pg.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=d1[t];if(!r){r=d1[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,s=t.charAt(0),o=[0];for(n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<o.length;++l)c+=o[l]*i,o[l]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var u=0;e[u]===s&&u<e.length-1;++u)o.push(0);return ee!==void 0?ee.from(o.reverse()):new Uint8Array(o.reverse())};var h1=Ve,f1=G_,U=h1.util=h1.util||{};function cl(e){if(e!==8&&e!==16&&e!==24&&e!==32)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function gg(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(U.isArrayBuffer(e)||U.isArrayBufferView(e))if(ee!==void 0&&e instanceof ee)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof gg||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}(function(){if(ns!==void 0&&ns.nextTick&&!ns.browser)return U.nextTick=ns.nextTick,void(typeof setImmediate=="function"?U.setImmediate=setImmediate:U.setImmediate=U.nextTick);if(typeof setImmediate=="function")return U.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(U.nextTick=function(a){return setImmediate(a)});if(U.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(u){u()})}};var o=a,e="forge.setImmediate",t=[];U.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div");t=[],new MutationObserver(function(){var a=t.slice();t.length=0,a.forEach(function(l){l()})}).observe(i,{attributes:!0});var s=U.setImmediate;U.setImmediate=function(a){Date.now()-r>15?(r=Date.now(),s(a)):(t.push(a),t.length===1&&i.setAttribute("a",n=!n))}}U.nextTick=U.setImmediate})(),U.isNodejs=ns!==void 0&&ns.versions&&ns.versions.node,U.globalScope=U.isNodejs?E_:typeof self>"u"?window:self,U.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},U.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer},U.isArrayBufferView=function(e){return e&&U.isArrayBuffer(e.buffer)&&e.byteLength!==void 0},U.ByteBuffer=gg,U.ByteStringBuffer=gg;U.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},U.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},U.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},U.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},U.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},U.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},U.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(U.encodeUtf8(e))},U.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},U.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},U.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},U.ByteStringBuffer.prototype.putInt=function(e,t){cl(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)},U.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},U.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},U.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},U.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},U.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},U.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},U.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},U.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},U.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},U.ByteStringBuffer.prototype.getInt=function(e){cl(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},U.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},U.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},U.ByteStringBuffer.prototype.bytes=function(e){return e===void 0?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},U.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},U.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},U.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},U.ByteStringBuffer.prototype.copy=function(){var e=U.createBuffer(this.data);return e.read=this.read,e},U.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},U.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},U.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},U.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},U.ByteStringBuffer.prototype.toString=function(){return U.decodeUtf8(this.bytes())},U.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=U.isArrayBuffer(e),n=U.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},U.DataBuffer.prototype.length=function(){return this.write-this.read},U.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},U.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},U.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},U.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},U.DataBuffer.prototype.putBytes=function(e,t){if(U.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(U.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof U.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&U.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(e instanceof U.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var i;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.hex.decode(e,i,this.write),this;if(t==="base64")return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.base64.decode(e,i,this.write),this;if(t==="utf8"&&(e=U.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.raw.decode(i),this;if(t==="utf16")return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=U.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},U.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},U.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},U.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},U.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},U.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},U.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},U.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},U.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},U.DataBuffer.prototype.putInt=function(e,t){cl(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},U.DataBuffer.prototype.putSignedInt=function(e,t){return cl(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},U.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},U.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},U.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},U.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},U.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},U.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},U.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},U.DataBuffer.prototype.getInt=function(e){cl(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},U.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},U.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},U.DataBuffer.prototype.bytes=function(e){return e===void 0?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},U.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},U.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},U.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},U.DataBuffer.prototype.copy=function(){return new U.DataBuffer(this)},U.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},U.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},U.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},U.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},U.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if((e=e||"utf8")==="binary"||e==="raw")return U.binary.raw.encode(t);if(e==="hex")return U.binary.hex.encode(t);if(e==="base64")return U.binary.base64.encode(t);if(e==="utf8")return U.text.utf8.decode(t);if(e==="utf16")return U.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},U.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=U.encodeUtf8(e)),new U.ByteBuffer(e)},U.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},U.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},U.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},U.bytesToHex=function(e){return U.createBuffer(e).toHex()},U.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var Wi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Yi=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],p1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";U.encode64=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=Wi.charAt(r>>2),s+=Wi.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=Wi.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":Wi.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+`\r
`,s=s.substr(t));return o+=s},U.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",o=0;o<e.length;)t=Yi[e.charCodeAt(o++)-43],r=Yi[e.charCodeAt(o++)-43],n=Yi[e.charCodeAt(o++)-43],i=Yi[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),n!==64&&(s+=String.fromCharCode((15&r)<<4|n>>2),i!==64&&(s+=String.fromCharCode((3&n)<<6|i)));return s},U.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},U.decodeUtf8=function(e){return decodeURIComponent(escape(e))},U.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:f1.encode,decode:f1.decode}},U.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},U.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},U.binary.hex.encode=U.bytesToHex,U.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},U.binary.base64.encode=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],s+=Wi.charAt(r>>2),s+=Wi.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=Wi.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":Wi.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+`\r
`,s=s.substr(t));return o+=s},U.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var l=0,c=r=r||0;l<e.length;)n=Yi[e.charCodeAt(l++)-43],i=Yi[e.charCodeAt(l++)-43],s=Yi[e.charCodeAt(l++)-43],o=Yi[e.charCodeAt(l++)-43],a[c++]=n<<2|i>>4,s!==64&&(a[c++]=(15&i)<<4|s>>2,o!==64&&(a[c++]=(3&s)<<6|o));return t?c-r:a.subarray(0,c)},U.binary.base58.encode=function(e,t){return U.binary.baseN.encode(e,p1,t)},U.binary.base58.decode=function(e,t){return U.binary.baseN.decode(e,p1,t)},U.text={utf8:{},utf16:{}},U.text.utf8.encode=function(e,t,r){e=U.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},U.text.utf8.decode=function(e){return U.decodeUtf8(String.fromCharCode.apply(null,e))},U.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},U.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},U.deflate=function(e,t,r){if(t=U.decode64(e.deflate(U.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},U.inflate=function(e,t,r){var n=e.inflate(U.encode64(t)).rval;return n===null?null:U.decode64(n)};var A0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=U.encode64(JSON.stringify(r)),n=e.setItem(t,r)),n!==void 0&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},R0=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(U.decode64(r))),r},W_=function(e,t,r,n){var i=R0(e,t);i===null&&(i={}),i[r]=n,A0(e,t,i)},Y_=function(e,t,r){var n=R0(e,t);return n!==null&&(n=r in n?n[r]:null),n},Q_=function(e,t,r){var n=R0(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),A0(e,t,n)}},X_=function(e,t){A0(e,t,null)},uu=function(e,t,r){var n,i=null;r===void 0&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if(n==="flash"||n==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");i=e.apply(this,t),s=n==="flash"}n!=="web"&&n!=="both"||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(l){o=l}if(s)break}if(!s)throw o;return i};U.setItem=function(e,t,r,n,i){uu(W_,arguments,i)},U.getItem=function(e,t,r,n){return uu(Y_,arguments,n)},U.removeItem=function(e,t,r,n){uu(Q_,arguments,n)},U.clearItems=function(e,t,r){uu(X_,arguments,r)},U.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},U.format=function(e){for(var t,r,n=/%./g,i=0,s=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},U.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")},U.formatSize=function(e){return e=e>=1073741824?U.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?U.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?U.formatNumber(e/1024,0)+" KiB":U.formatNumber(e,0)+" bytes"},U.bytesFromIP=function(e){return e.indexOf(".")!==-1?U.bytesFromIPv4(e):e.indexOf(":")!==-1?U.bytesFromIPv6(e):null},U.bytesFromIPv4=function(e){if((e=e.split(".")).length!==4)return null;for(var t=U.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},U.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter(function(o){return o.length===0&&++t,!0})).length+t),n=U.createBuffer(),i=0;i<8;++i)if(e[i]&&e[i].length!==0){var s=U.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},U.bytesToIP=function(e){return e.length===4?U.bytesToIPv4(e):e.length===16?U.bytesToIPv6(e):null},U.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},U.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=U.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;o&&a===o.end+1?(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")},U.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in U&&!e.update)return t(null,U.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return U.cores=navigator.hardwareConcurrency,t(null,U.cores);if(typeof Worker>"u")return U.cores=1,t(null,U.cores);if(typeof Blob>"u")return U.cores=2,t(null,U.cores);var r=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(n){var i=Date.now(),s=i+4;self.postMessage({st:i,et:s})})}).toString(),")()"],{type:"application/javascript"}));(function n(i,s,o){if(s===0){var a=Math.floor(i.reduce(function(l,c){return l+c},0)/i.length);return U.cores=Math.max(1,a),URL.revokeObjectURL(r),t(null,U.cores)}(function(l,c){for(var u=[],d=[],h=0;h<l;++h){var f=new Worker(r);f.addEventListener("message",function(g){if(d.push(g.data),d.length===l){for(var y=0;y<l;++y)u[y].terminate();c(null,d)}}),u.push(f)}for(h=0;h<l;++h)u[h].postMessage(h)})(o,function(l,c){i.push(function(u,d){for(var h=[],f=0;f<u;++f)for(var g=d[f],y=h[f]=[],E=0;E<u;++E)if(f!==E){var p=d[E];(g.st>p.st&&g.st<p.et||p.st>g.st&&p.st<g.et)&&y.push(E)}return h.reduce(function(v,C){return Math.max(v,C.length)},0)}(o,c)),n(i,s-1,o)})})([],5,16)};var Xt=Ve;Xt.cipher=Xt.cipher||{},Xt.cipher.algorithms=Xt.cipher.algorithms||{},Xt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Xt.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new Xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},Xt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Xt.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new Xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},Xt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Xt.cipher.algorithms[e]=t},Xt.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in Xt.cipher.algorithms?Xt.cipher.algorithms[e]:null};var Af=Xt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Af.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Xt.util.createBuffer(),this.output=e.output||Xt.util.createBuffer(),this.mode.start(t)},Af.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},Af.prototype.finish=function(e){!e||this.mode.name!=="ECB"&&this.mode.name!=="CBC"||(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))};var Zt=Ve;Zt.cipher=Zt.cipher||{};var ze=Zt.cipher.modes=Zt.cipher.modes||{};function du(e,t){if(typeof e=="string"&&(e=Zt.util.createBuffer(e)),Zt.util.isArray(e)&&e.length>4){var r=e;e=Zt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Zt.util.isArray(e)){var i=[],s=t/4;for(n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function hu(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Rf(e){return[e/4294967296|0,4294967295&e]}ze.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},ze.ecb.prototype.start=function(e){},ze.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},ze.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},ze.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},ze.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},ze.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},ze.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=du(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},ze.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},ze.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},ze.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},ze.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},ze.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=du(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=du(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.ofb.prototype.decrypt=ze.ofb.prototype.encrypt,ze.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=du(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}hu(this._inBlock)},ze.ctr.prototype.decrypt=ze.ctr.prototype.encrypt,ze.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0,this._R=3774873600},ze.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=Zt.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?Zt.util.createBuffer(e.additionalData):Zt.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=Zt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=r.length();if(n===12)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Rf(8*n)))}this._inBlock=this._j0.slice(0),hu(this._inBlock),this._partialBytes=0,t=Zt.util.createBuffer(t),this._aDataLength=Rf(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},ze.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),hu(this._inBlock)},ze.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),hu(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},ze.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Zt.util.createBuffer();var n=this._aDataLength.concat(Rf(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},ze.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i)e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},ze.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},ze.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},ze.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},ze.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],l=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<l,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},ze.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],l=i[o];i[s+o]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};var yt=Ve;function Bo(e,t){yt.cipher.registerAlgorithm(e,function(){return new yt.aes.Algorithm(e,t)})}yt.aes=yt.aes||{},yt.aes.startEncrypting=function(e,t,r,n){var i=fu({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},yt.aes.createEncryptionCipher=function(e,t){return fu({key:e,output:null,decrypt:!1,mode:t})},yt.aes.startDecrypting=function(e,t,r,n){var i=fu({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},yt.aes.createDecryptionCipher=function(e,t){return fu({key:e,output:null,decrypt:!0,mode:t})},yt.aes.Algorithm=function(e,t){yg||g1();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return kf(r._w,n,i,!1)},decrypt:function(n,i){return kf(r._w,n,i,!0)}}}),r._init=!1},yt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if(typeof r!="string"||r.length!==16&&r.length!==24&&r.length!==32){if(yt.util.isArray(r)&&(r.length===16||r.length===24||r.length===32)){t=r,r=yt.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=yt.util.createBuffer(r);if(!yt.util.isArray(r)){t=r,r=[];var i=t.length();if(i===16||i===24||i===32)for(i>>>=2,n=0;n<i;++n)r.push(t.getInt32())}if(!yt.util.isArray(r)||r.length!==4&&r.length!==6&&r.length!==8)throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=m1(r,e.decrypt&&!o),this._init=!0}},yt.aes._expandKey=function(e,t){return yg||g1(),m1(e,t)},yt.aes._updateBlock=kf,Bo("AES-ECB",yt.cipher.modes.ecb),Bo("AES-CBC",yt.cipher.modes.cbc),Bo("AES-CFB",yt.cipher.modes.cfb),Bo("AES-OFB",yt.cipher.modes.ofb),Bo("AES-CTR",yt.cipher.modes.ctr),Bo("AES-GCM",yt.cipher.modes.gcm);var Ar,mg,db,to,Ln,yg=!1,$o=4;function g1(){yg=!0,db=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(Ar=new Array(256),mg=new Array(256),to=new Array(4),Ln=new Array(4),t=0;t<4;++t)to[t]=new Array(256),Ln[t]=new Array(256);var r,n,i,s,o,a,l,c=0,u=0;for(t=0;t<256;++t){s=(s=u^u<<1^u<<2^u<<3^u<<4)>>8^255&s^99,Ar[c]=s,mg[s]=c,a=(o=e[s])<<24^s<<16^s<<8^s^o,l=((r=e[c])^(n=e[r])^(i=e[n]))<<24^(c^i)<<16^(c^n^i)<<8^c^r^i;for(var d=0;d<4;++d)to[d][c]=a,Ln[d][s]=l,a=a<<24|a>>>8,l=l<<24|l>>>8;c===0?c=u=1:(c=r^e[e[e[r^i]]],u^=e[e[u]])}}function m1(e,t){for(var r,n=e.slice(0),i=1,s=n.length,o=$o*(s+6+1),a=s;a<o;++a)r=n[a-1],a%s==0?(r=Ar[r>>>16&255]<<24^Ar[r>>>8&255]<<16^Ar[255&r]<<8^Ar[r>>>24]^db[i]<<24,i++):s>6&&a%s==4&&(r=Ar[r>>>24]<<24^Ar[r>>>16&255]<<16^Ar[r>>>8&255]<<8^Ar[255&r]),n[a]=n[a-s]^r;if(t){for(var l,c=Ln[0],u=Ln[1],d=Ln[2],h=Ln[3],f=n.slice(0),g=(a=0,(o=n.length)-$o);a<o;a+=$o,g-=$o)if(a===0||a===o-$o)f[a]=n[g],f[a+1]=n[g+3],f[a+2]=n[g+2],f[a+3]=n[g+1];else for(var y=0;y<$o;++y)l=n[g+y],f[a+(3&-y)]=c[Ar[l>>>24]]^u[Ar[l>>>16&255]]^d[Ar[l>>>8&255]]^h[Ar[255&l]];n=f}return n}function kf(e,t,r,n){var i,s,o,a,l,c,u,d,h,f,g,y,E=e.length/4-1;n?(i=Ln[0],s=Ln[1],o=Ln[2],a=Ln[3],l=mg):(i=to[0],s=to[1],o=to[2],a=to[3],l=Ar),c=t[0]^e[0],u=t[n?3:1]^e[1],d=t[2]^e[2],h=t[n?1:3]^e[3];for(var p=3,v=1;v<E;++v)f=i[c>>>24]^s[u>>>16&255]^o[d>>>8&255]^a[255&h]^e[++p],g=i[u>>>24]^s[d>>>16&255]^o[h>>>8&255]^a[255&c]^e[++p],y=i[d>>>24]^s[h>>>16&255]^o[c>>>8&255]^a[255&u]^e[++p],h=i[h>>>24]^s[c>>>16&255]^o[u>>>8&255]^a[255&d]^e[++p],c=f,u=g,d=y;r[0]=l[c>>>24]<<24^l[u>>>16&255]<<16^l[d>>>8&255]<<8^l[255&h]^e[++p],r[n?3:1]=l[u>>>24]<<24^l[d>>>16&255]<<16^l[h>>>8&255]<<8^l[255&c]^e[++p],r[2]=l[d>>>24]<<24^l[h>>>16&255]<<16^l[c>>>8&255]<<8^l[255&u]^e[++p],r[n?1:3]=l[h>>>24]<<24^l[c>>>16&255]<<16^l[u>>>8&255]<<8^l[255&d]^e[++p]}function fu(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?yt.cipher.createDecipher(r,e.key):yt.cipher.createCipher(r,e.key)).start;return t.start=function(i,s){var o=null;s instanceof yt.util.ByteBuffer&&(o=s,s={}),(s=s||{}).output=o,s.iv=i,n.call(t,s)},t}var Ol=Ve;Ol.pki=Ol.pki||{};var vg=Ol.pki.oids=Ol.oids=Ol.oids||{};function se(e,t){vg[e]=t,vg[t]=e}function at(e,t){vg[e]=t}se("1.2.840.113549.1.1.1","rsaEncryption"),se("1.2.840.113549.1.1.4","md5WithRSAEncryption"),se("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),se("1.2.840.113549.1.1.7","RSAES-OAEP"),se("1.2.840.113549.1.1.8","mgf1"),se("1.2.840.113549.1.1.9","pSpecified"),se("1.2.840.113549.1.1.10","RSASSA-PSS"),se("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),se("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),se("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),se("1.3.101.112","EdDSA25519"),se("1.2.840.10040.4.3","dsa-with-sha1"),se("1.3.14.3.2.7","desCBC"),se("1.3.14.3.2.26","sha1"),se("1.3.14.3.2.29","sha1WithRSASignature"),se("2.16.840.1.101.3.4.2.1","sha256"),se("2.16.840.1.101.3.4.2.2","sha384"),se("2.16.840.1.101.3.4.2.3","sha512"),se("2.16.840.1.101.3.4.2.4","sha224"),se("2.16.840.1.101.3.4.2.5","sha512-224"),se("2.16.840.1.101.3.4.2.6","sha512-256"),se("1.2.840.113549.2.2","md2"),se("1.2.840.113549.2.5","md5"),se("1.2.840.113549.1.7.1","data"),se("1.2.840.113549.1.7.2","signedData"),se("1.2.840.113549.1.7.3","envelopedData"),se("1.2.840.113549.1.7.4","signedAndEnvelopedData"),se("1.2.840.113549.1.7.5","digestedData"),se("1.2.840.113549.1.7.6","encryptedData"),se("1.2.840.113549.1.9.1","emailAddress"),se("1.2.840.113549.1.9.2","unstructuredName"),se("1.2.840.113549.1.9.3","contentType"),se("1.2.840.113549.1.9.4","messageDigest"),se("1.2.840.113549.1.9.5","signingTime"),se("1.2.840.113549.1.9.6","counterSignature"),se("1.2.840.113549.1.9.7","challengePassword"),se("1.2.840.113549.1.9.8","unstructuredAddress"),se("1.2.840.113549.1.9.14","extensionRequest"),se("1.2.840.113549.1.9.20","friendlyName"),se("1.2.840.113549.1.9.21","localKeyId"),se("1.2.840.113549.1.9.22.1","x509Certificate"),se("1.2.840.113549.1.12.10.1.1","keyBag"),se("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),se("1.2.840.113549.1.12.10.1.3","certBag"),se("1.2.840.113549.1.12.10.1.4","crlBag"),se("1.2.840.113549.1.12.10.1.5","secretBag"),se("1.2.840.113549.1.12.10.1.6","safeContentsBag"),se("1.2.840.113549.1.5.13","pkcs5PBES2"),se("1.2.840.113549.1.5.12","pkcs5PBKDF2"),se("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),se("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),se("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),se("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),se("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),se("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),se("1.2.840.113549.2.7","hmacWithSHA1"),se("1.2.840.113549.2.8","hmacWithSHA224"),se("1.2.840.113549.2.9","hmacWithSHA256"),se("1.2.840.113549.2.10","hmacWithSHA384"),se("1.2.840.113549.2.11","hmacWithSHA512"),se("1.2.840.113549.3.7","des-EDE3-CBC"),se("2.16.840.1.101.3.4.1.2","aes128-CBC"),se("2.16.840.1.101.3.4.1.22","aes192-CBC"),se("2.16.840.1.101.3.4.1.42","aes256-CBC"),se("2.5.4.3","commonName"),se("2.5.4.4","surname"),se("2.5.4.5","serialNumber"),se("2.5.4.6","countryName"),se("2.5.4.7","localityName"),se("2.5.4.8","stateOrProvinceName"),se("2.5.4.9","streetAddress"),se("2.5.4.10","organizationName"),se("2.5.4.11","organizationalUnitName"),se("2.5.4.12","title"),se("2.5.4.13","description"),se("2.5.4.15","businessCategory"),se("2.5.4.17","postalCode"),se("2.5.4.42","givenName"),se("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),se("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),se("2.16.840.1.113730.1.1","nsCertType"),se("2.16.840.1.113730.1.13","nsComment"),at("2.5.29.1","authorityKeyIdentifier"),at("2.5.29.2","keyAttributes"),at("2.5.29.3","certificatePolicies"),at("2.5.29.4","keyUsageRestriction"),at("2.5.29.5","policyMapping"),at("2.5.29.6","subtreesConstraint"),at("2.5.29.7","subjectAltName"),at("2.5.29.8","issuerAltName"),at("2.5.29.9","subjectDirectoryAttributes"),at("2.5.29.10","basicConstraints"),at("2.5.29.11","nameConstraints"),at("2.5.29.12","policyConstraints"),at("2.5.29.13","basicConstraints"),se("2.5.29.14","subjectKeyIdentifier"),se("2.5.29.15","keyUsage"),at("2.5.29.16","privateKeyUsagePeriod"),se("2.5.29.17","subjectAltName"),se("2.5.29.18","issuerAltName"),se("2.5.29.19","basicConstraints"),at("2.5.29.20","cRLNumber"),at("2.5.29.21","cRLReason"),at("2.5.29.22","expirationDate"),at("2.5.29.23","instructionCode"),at("2.5.29.24","invalidityDate"),at("2.5.29.25","cRLDistributionPoints"),at("2.5.29.26","issuingDistributionPoint"),at("2.5.29.27","deltaCRLIndicator"),at("2.5.29.28","issuingDistributionPoint"),at("2.5.29.29","certificateIssuer"),at("2.5.29.30","nameConstraints"),se("2.5.29.31","cRLDistributionPoints"),se("2.5.29.32","certificatePolicies"),at("2.5.29.33","policyMappings"),at("2.5.29.34","policyConstraints"),se("2.5.29.35","authorityKeyIdentifier"),at("2.5.29.36","policyConstraints"),se("2.5.29.37","extKeyUsage"),at("2.5.29.46","freshestCRL"),at("2.5.29.54","inhibitAnyPolicy"),se("1.3.6.1.4.1.11129.2.4.2","timestampList"),se("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),se("1.3.6.1.5.5.7.3.1","serverAuth"),se("1.3.6.1.5.5.7.3.2","clientAuth"),se("1.3.6.1.5.5.7.3.3","codeSigning"),se("1.3.6.1.5.5.7.3.4","emailProtection"),se("1.3.6.1.5.5.7.3.8","timeStamping");var bt=Ve,fe=bt.asn1=bt.asn1||{};function ul(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}fe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},fe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},fe.create=function(e,t,r,n,i){if(bt.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||bt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=fe.copy(a)),a},fe.copy=function(e,t){var r;if(bt.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(fe.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:fe.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},fe.equals=function(e,t,r){if(bt.util.isArray(e)){if(!bt.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!fe.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&fe.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i},fe.getBerValueLength=function(e){var t=e.getByte();if(t!==128)return 128&t?e.getInt((127&t)<<3):t};function qu(e,t,r,n){var i;ul(e,t,2);var s=e.getByte();t--;var o=192&s,a=31&s;i=e.length();var l,c,u=function(b,k){var m=b.getByte();if(k--,m!==128){var R;if(128&m){var _=127&m;ul(b,k,_),R=b.getInt(_<<3)}else R=m;if(R<0)throw new Error("Negative length: "+R);return R}}(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=u,d}u=t}var h=!(32&~s);if(h)if(l=[],u===void 0)for(;;){if(ul(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),l.push(qu(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),l.push(qu(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(l===void 0&&o===fe.Class.UNIVERSAL&&a===fe.Type.BITSTRING&&(c=e.bytes(u)),l===void 0&&n.decodeBitStrings&&o===fe.Class.UNIVERSAL&&a===fe.Type.BITSTRING&&u>1){var f=e.read,g=t,y=0;if(a===fe.Type.BITSTRING&&(ul(e,t,1),y=e.getByte(),t--),y===0)try{i=e.length();var E=qu(e,t,r+1,{strict:!0,decodeBitStrings:!0}),p=i-e.length();t-=p,a==fe.Type.BITSTRING&&p++;var v=E.tagClass;p!==u||v!==fe.Class.UNIVERSAL&&v!==fe.Class.CONTEXT_SPECIFIC||(l=[E])}catch{}l===void 0&&(e.read=f,t=g)}if(l===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(a===fe.Type.BMPSTRING)for(l="";u>0;u-=2)ul(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(u),t-=u}var C=c===void 0?null:{bitStringContents:c};return fe.create(o,a,h,l,C)}fe.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=bt.util.createBuffer(e));var r=e.length(),n=qu(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n},fe.toDer=function(e){var t=bt.util.createBuffer(),r=e.tagClass|e.type,n=bt.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=fe.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(fe.toDer(e.value[s]))}else if(e.type===fe.Type.BMPSTRING)for(s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else!(e.type===fe.Type.INTEGER&&e.value.length>1)||(e.value.charCodeAt(0)!==0||128&e.value.charCodeAt(1))&&(e.value.charCodeAt(0)!==255||128&~e.value.charCodeAt(1))?n.putBytes(e.value):n.putBytes(e.value.substr(1));if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{var o=n.length(),a="";do a+=String.fromCharCode(255&o),o>>>=8;while(o>0);for(t.putByte(128|a.length),s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t},fe.oidToDer=function(e){var t,r,n,i,s=e.split("."),o=bt.util.createBuffer();o.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var a=2;a<s.length;++a){t=!0,r=[],n=parseInt(s[a],10);do i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1;while(n>0);for(var l=r.length-1;l>=0;--l)o.putByte(r[l])}return o},fe.derToOid=function(e){var t;typeof e=="string"&&(e=bt.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)n<<=7,128&(r=e.getByte())?n+=127&r:(t+="."+(n+r),n=0);return t},fe.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var l=e.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&((l=e.charAt(c))==="+"||l==="-")){var u=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);u*=6e4,l==="+"?t.setTime(+t-u):t.setTime(+t+u)}return t},fe.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var d=e.length-5,h=e.charAt(d);return h!=="+"&&h!=="-"||(c=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),c*=6e4,h==="+"&&(c*=-1),u=!0),e.charAt(14)==="."&&(l=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,l),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,l)),t},fe.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},fe.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},fe.integerToDer=function(e){var t=bt.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},fe.derToInteger=function(e){typeof e=="string"&&(e=bt.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},fe.validate=function(e,t,r,n){var i=!1;if(e.tagClass!==t.tagClass&&t.tagClass!==void 0||e.type!==t.type&&t.type!==void 0)n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||t.constructed===void 0){if(i=!0,t.value&&bt.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&((i=fe.validate(e.value[s],t.value[o],r,n))?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(e.bitStringContents.charCodeAt(0)!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return i};var y1=/[^\\u0000-\\u00ff]/;fe.prettyPrint=function(e,t,r){var n="";r=r||2,(t=t||0)>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case fe.Class.UNIVERSAL:n+="Universal:";break;case fe.Class.APPLICATION:n+="Application:";break;case fe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case fe.Class.PRIVATE:n+="Private:"}if(e.tagClass===fe.Class.UNIVERSAL)switch(n+=e.type,e.type){case fe.Type.NONE:n+=" (None)";break;case fe.Type.BOOLEAN:n+=" (Boolean)";break;case fe.Type.INTEGER:n+=" (Integer)";break;case fe.Type.BITSTRING:n+=" (Bit string)";break;case fe.Type.OCTETSTRING:n+=" (Octet string)";break;case fe.Type.NULL:n+=" (Null)";break;case fe.Type.OID:n+=" (Object Identifier)";break;case fe.Type.ODESC:n+=" (Object Descriptor)";break;case fe.Type.EXTERNAL:n+=" (External or Instance of)";break;case fe.Type.REAL:n+=" (Real)";break;case fe.Type.ENUMERATED:n+=" (Enumerated)";break;case fe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case fe.Type.UTF8:n+=" (UTF8)";break;case fe.Type.ROID:n+=" (Relative Object Identifier)";break;case fe.Type.SEQUENCE:n+=" (Sequence)";break;case fe.Type.SET:n+=" (Set)";break;case fe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case fe.Type.IA5String:n+=" (IA5String (ASCII))";break;case fe.Type.UTCTIME:n+=" (UTC time)";break;case fe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case fe.Type.BMPSTRING:n+=" (BMP String)"}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){var o=0,a="";for(s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=fe.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===fe.Type.OID){var l=fe.derToOid(e.value);n+=l,bt.pki&&bt.pki.oids&&l in bt.pki.oids&&(n+=" ("+bt.pki.oids[l]+") ")}if(e.type===fe.Type.INTEGER)try{n+=fe.derToInteger(e.value)}catch{n+="0x"+bt.util.bytesToHex(e.value)}else if(e.type===fe.Type.BITSTRING){if(e.value.length>1?n+="0x"+bt.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===fe.Type.OCTETSTRING)y1.test(e.value)||(n+="("+e.value+") "),n+="0x"+bt.util.bytesToHex(e.value);else if(e.type===fe.Type.UTF8)try{n+=bt.util.decodeUtf8(e.value)}catch(u){if(u.message!=="URI malformed")throw u;n+="0x"+bt.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===fe.Type.PRINTABLESTRING||e.type===fe.Type.IA5String?n+=e.value:y1.test(e.value)?n+="0x"+bt.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n};var pu=Ve;pu.md=pu.md||{},pu.md.algorithms=pu.md.algorithms||{};var yi=Ve;(yi.hmac=yi.hmac||{}).create=function(){var e=null,t=null,r=null,n=null,i={start:function(s,o){if(s!==null)if(typeof s=="string"){if(!((s=s.toLowerCase())in yi.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=yi.md.algorithms[s].create()}else t=s;if(o===null)o=e;else{if(typeof o=="string")o=yi.util.createBuffer(o);else if(yi.util.isArray(o)){var a=o;o=yi.util.createBuffer();for(var l=0;l<a.length;++l)o.putByte(a[l])}var c=o.length();for(c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=yi.util.createBuffer(),n=yi.util.createBuffer(),c=o.length(),l=0;l<c;++l)a=o.at(l),r.putByte(54^a),n.putByte(92^a);if(c<t.blockLength)for(a=t.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},update:function(s){t.update(s)},getMac:function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()}};return i.digest=i.getMac,i};var Qn=Ve,v1=Qn.md5=Qn.md5||{};Qn.md.md5=Qn.md.algorithms.md5=v1,v1.create=function(){E1||function(){_f="",_f+=Qn.util.fillString("\0",64),zu=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Sl=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],sa=new Array(64);for(var i=0;i<64;++i)sa[i]=Math.floor(4294967296*Math.abs(Math.sin(i+1)));E1=!0}();var e=null,t=Qn.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Qn.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Qn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),C1(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Qn.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(_f.substr(0,n.blockLength-s));for(var o,a=0,l=n.fullMessageLength.length-1;l>=0;--l)a=(o=8*n.fullMessageLength[l]+a)/4294967296>>>0,i.putInt32Le(o>>>0);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};C1(c,r,i);var u=Qn.util.createBuffer();return u.putInt32Le(c.h0),u.putInt32Le(c.h1),u.putInt32Le(c.h2),u.putInt32Le(c.h3),u},n};var _f=null,zu=null,Sl=null,sa=null,E1=!1;function C1(e,t,r){for(var n,i,s,o,a,l,c,u=r.length();u>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=0;c<16;++c)t[c]=r.getInt32Le(),n=i+(a^s&(o^a))+sa[c]+t[c],i=a,a=o,o=s,s+=n<<(l=Sl[c])|n>>>32-l;for(;c<32;++c)n=i+(o^a&(s^o))+sa[c]+t[zu[c]],i=a,a=o,o=s,s+=n<<(l=Sl[c])|n>>>32-l;for(;c<48;++c)n=i+(s^o^a)+sa[c]+t[zu[c]],i=a,a=o,o=s,s+=n<<(l=Sl[c])|n>>>32-l;for(;c<64;++c)n=i+(o^(s|~a))+sa[c]+t[zu[c]],i=a,a=o,o=s,s+=n<<(l=Sl[c])|n>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,u-=64}}var Nd=Ve,S1=Nd.pem=Nd.pem||{};function gu(e){for(var t=e.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else t[i]!==" "&&t[i]!=="	"&&t[i]!==","||(o=i);return t}function Z_(e){return e.replace(/^\s+/,"")}S1.encode=function(e,t){t=t||{};var r,n="-----BEGIN "+e.type+`-----\r
`;if(e.procType&&(n+=gu(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(n+=gu(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=gu(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=gu(e.headers[i]);return e.procType&&(n+=`\r
`),n+=Nd.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`},S1.decode=function(e){for(var t,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=n.exec(e);){var o=t[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Nd.util.decode64(t[3])};if(r.push(a),t[2]){for(var l=t[2].split(s),c=0;t&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),d=c+1;d<l.length;++d){var h=l[d];if(!/\s/.test(h[0]))break;u+=h,c=d}if(t=u.match(i)){for(var f={name:t[1],values:[]},g=t[2].split(","),y=0;y<g.length;++y)f.values.push(Z_(g[y]));if(a.procType)if(a.contentDomain||f.name!=="Content-Domain")if(a.dekInfo||f.name!=="DEK-Info")a.headers.push(f);else{if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:g[0],parameters:g[1]||null}}else a.contentDomain=g[0]||"";else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:g[0],type:g[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(r.length===0)throw new Error("Invalid PEM formatted message.");return r};var At=Ve;function zn(e,t){At.cipher.registerAlgorithm(e,function(){return new At.des.Algorithm(e,t)})}At.des=At.des||{},At.des.startEncrypting=function(e,t,r,n){var i=mu({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i},At.des.createEncryptionCipher=function(e,t){return mu({key:e,output:null,decrypt:!1,mode:t})},At.des.startDecrypting=function(e,t,r,n){var i=mu({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i},At.des.createDecryptionCipher=function(e,t){return mu({key:e,output:null,decrypt:!0,mode:t})},At.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return w1(r._keys,n,i,!1)},decrypt:function(n,i){return w1(r._keys,n,i,!0)}}}),r._init=!1},At.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=At.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(r){for(var n,i=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],s=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],l=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],c=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],d=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],g=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],y=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],E=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],v=r.length()>8?3:1,C=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],k=0,m=0;m<v;m++){var R=r.getInt32(),_=r.getInt32();R^=(n=252645135&(R>>>4^_))<<4,R^=n=65535&((_^=n)>>>-16^R),R^=(n=858993459&(R>>>2^(_^=n<<-16)))<<2,R^=n=65535&((_^=n)>>>-16^R),R^=(n=1431655765&(R>>>1^(_^=n<<-16)))<<1,R^=n=16711935&((_^=n)>>>8^R),n=(R^=(n=1431655765&(R>>>1^(_^=n<<8)))<<1)<<8|(_^=n)>>>20&240,R=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=n;for(var H=0;H<b.length;++H){b[H]?(R=R<<2|R>>>26,_=_<<2|_>>>26):(R=R<<1|R>>>27,_=_<<1|_>>>27),_&=-15;var A=i[(R&=-15)>>>28]|s[R>>>24&15]|o[R>>>20&15]|a[R>>>16&15]|l[R>>>12&15]|c[R>>>8&15]|u[R>>>4&15],P=d[_>>>28]|h[_>>>24&15]|f[_>>>20&15]|g[_>>>16&15]|y[_>>>12&15]|E[_>>>8&15]|p[_>>>4&15];n=65535&(P>>>16^A),C[k++]=A^n,C[k++]=P^n<<16}}return C}(t),this._init=!0}},zn("DES-ECB",At.cipher.modes.ecb),zn("DES-CBC",At.cipher.modes.cbc),zn("DES-CFB",At.cipher.modes.cfb),zn("DES-OFB",At.cipher.modes.ofb),zn("DES-CTR",At.cipher.modes.ctr),zn("3DES-ECB",At.cipher.modes.ecb),zn("3DES-CBC",At.cipher.modes.cbc),zn("3DES-CFB",At.cipher.modes.cfb),zn("3DES-OFB",At.cipher.modes.ofb),zn("3DES-CTR",At.cipher.modes.ctr);var J_=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],ex=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],tx=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],rx=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],nx=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],ix=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],sx=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ox=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function w1(e,t,r,n){var i,s,o=e.length===32?3:9;i=o===3?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a=t[0],l=t[1];a^=(s=252645135&(a>>>4^l))<<4,a^=(s=65535&(a>>>16^(l^=s)))<<16,a^=s=858993459&((l^=s)>>>2^a),a^=s=16711935&((l^=s<<2)>>>8^a),a=(a^=(s=1431655765&(a>>>1^(l^=s<<8)))<<1)<<1|a>>>31,l=(l^=s)<<1|l>>>31;for(var c=0;c<o;c+=3){for(var u=i[c+1],d=i[c+2],h=i[c];h!=u;h+=d){var f=l^e[h],g=(l>>>4|l<<28)^e[h+1];s=a,a=l,l=s^(ex[f>>>24&63]|rx[f>>>16&63]|ix[f>>>8&63]|ox[63&f]|J_[g>>>24&63]|tx[g>>>16&63]|nx[g>>>8&63]|sx[63&g])}s=a,a=l,l=s}l=l>>>1|l<<31,l^=s=1431655765&((a=a>>>1|a<<31)>>>1^l),l^=(s=16711935&(l>>>8^(a^=s<<1)))<<8,l^=(s=858993459&(l>>>2^(a^=s)))<<2,l^=s=65535&((a^=s)>>>16^l),l^=s=252645135&((a^=s<<16)>>>4^l),a^=s<<4,r[0]=a,r[1]=l}function mu(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?At.cipher.createDecipher(r,e.key):At.cipher.createCipher(r,e.key)).start;return t.start=function(i,s){var o=null;s instanceof At.util.ByteBuffer&&(o=s,s={}),(s=s||{}).output=o,s.iv=i,n.call(t,s)},t}var vi,k0=C_(Object.freeze({__proto__:null,default:{}})),Ir=Ve,ax=Ir.pkcs5=Ir.pkcs5||{};Ir.util.isNodejs&&!Ir.options.usePureJavaScript&&(vi=k0),Ir.pbkdf2=ax.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Ir.util.isNodejs&&!Ir.options.usePureJavaScript&&vi.pbkdf2&&(i===null||typeof i!="object")&&(vi.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=ee.from(e,"binary"),t=ee.from(t,"binary"),s?vi.pbkdf2Sync.length===4?vi.pbkdf2(e,t,r,n,function(C,b){if(C)return s(C);s(null,b.toString("binary"))}):vi.pbkdf2(e,t,r,n,i,function(C,b){if(C)return s(C);s(null,b.toString("binary"))}):vi.pbkdf2Sync.length===4?vi.pbkdf2Sync(e,t,r,n).toString("binary"):vi.pbkdf2Sync(e,t,r,n,i).toString("binary");if(i==null&&(i="sha1"),typeof i=="string"){if(!(i in Ir.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ir.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var l=Math.ceil(n/o),c=n-(l-1)*o,u=Ir.hmac.create();u.start(i,e);var d,h,f,g="";if(!s){for(var y=1;y<=l;++y){u.start(null,null),u.update(t),u.update(Ir.util.int32ToBytes(y)),d=f=u.digest().getBytes();for(var E=2;E<=r;++E)u.start(null,null),u.update(f),h=u.digest().getBytes(),d=Ir.util.xorBytes(d,h,o),f=h;g+=y<l?d:d.substr(0,c)}return g}y=1;function p(){if(y>l)return s(null,g);u.start(null,null),u.update(t),u.update(Ir.util.int32ToBytes(y)),d=f=u.digest().getBytes(),E=2,v()}function v(){if(E<=r)return u.start(null,null),u.update(f),h=u.digest().getBytes(),d=Ir.util.xorBytes(d,h,o),f=h,++E,Ir.util.setImmediate(v);g+=y<l?d:d.substr(0,c),++y,p()}p()};var Xn=Ve,b1=Xn.sha256=Xn.sha256||{};Xn.md.sha256=Xn.md.algorithms.sha256=b1,b1.create=function(){T1||(xf="",xf+=Xn.util.fillString("\0",64),hb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T1=!0);var e=null,t=Xn.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Xn.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Xn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),I1(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Xn.util.createBuffer();i.putBytes(t.bytes());var s,o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(xf.substr(0,n.blockLength-o));for(var a=8*n.fullMessageLength[0],l=0;l<n.fullMessageLength.length-1;++l)a+=(s=8*n.fullMessageLength[l+1])/4294967296>>>0,i.putInt32(a>>>0),a=s>>>0;i.putInt32(a);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};I1(c,r,i);var u=Xn.util.createBuffer();return u.putInt32(c.h0),u.putInt32(c.h1),u.putInt32(c.h2),u.putInt32(c.h3),u.putInt32(c.h4),u.putInt32(c.h5),u.putInt32(c.h6),u.putInt32(c.h7),u},n};var xf=null,T1=!1,hb=null;function I1(e,t,r){for(var n,i,s,o,a,l,c,u,d,h,f,g,y,E=r.length();E>=64;){for(a=0;a<16;++a)t[a]=r.getInt32();for(;a<64;++a)n=((n=t[a-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[a-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[a]=n+t[a-7]+i+t[a-16]|0;for(l=e.h0,c=e.h1,u=e.h2,d=e.h3,h=e.h4,f=e.h5,g=e.h6,y=e.h7,a=0;a<64;++a)s=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=l&c|u&(l^c),n=y+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(g^h&(f^g))+hb[a]+t[a],y=g,g=f,f=h,h=d+n>>>0,d=u,u=c,c=l,l=n+(i=s+o)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+u|0,e.h3=e.h3+d|0,e.h4=e.h4+h|0,e.h5=e.h5+f|0,e.h6=e.h6+g|0,e.h7=e.h7+y|0,E-=64}}var Kn=Ve,yu=null;!Kn.util.isNodejs||Kn.options.usePureJavaScript||ns.versions["node-webkit"]||(yu=k0),(Kn.prng=Kn.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();function s(){if(t.pools[0].messageLength>=32)return o();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var c=1,u=0;u<32;++u)t.reseeds%c==0&&(l.update(t.pools[u].digest().getBytes()),t.pools[u].start()),c<<=1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var d=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(d),t.generated=0}function a(l){var c=null,u=Kn.util.globalScope,d=u.crypto||u.msCrypto;d&&d.getRandomValues&&(c=function(b){return d.getRandomValues(b)});var h=Kn.util.createBuffer();if(c)for(;h.length()<l;){var f=Math.max(1,Math.min(l-h.length(),65536)/4),g=new Uint32Array(Math.floor(f));try{c(g);for(var y=0;y<g.length;++y)h.putInt32(g[y])}catch(b){if(!(typeof QuotaExceededError<"u"&&b instanceof QuotaExceededError))throw b}}if(h.length()<l)for(var E,p,v,C=Math.floor(65536*Math.random());h.length()<l;)for(p=16807*(65535&C),p+=(32767&(E=16807*(C>>16)))<<16,C=4294967295&(p=(2147483647&(p+=E>>15))+(p>>31)),y=0;y<3;++y)v=C>>>(y<<3),v^=Math.floor(256*Math.random()),h.putByte(255&v);return h.getBytes(l)}return t.pools=n,t.pool=0,t.generate=function(l,c){if(!c)return t.generateSync(l);var u=t.plugin.cipher,d=t.plugin.increment,h=t.plugin.formatKey,f=t.plugin.formatSeed,g=Kn.util.createBuffer();t.key=null,function y(E){if(E)return c(E);if(g.length()>=l)return c(null,g.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return Kn.util.nextTick(function(){(function(v){if(t.pools[0].messageLength>=32)return o(),v();var C=32-t.pools[0].messageLength<<5;t.seedFile(C,function(b,k){if(b)return v(b);t.collect(k),o(),v()})})(y)});var p=u(t.key,t.seed);t.generated+=p.length,g.putBytes(p),t.key=h(u(t.key,d(t.seed))),t.seed=f(u(t.key,t.seed)),Kn.util.setImmediate(y)}()},t.generateSync=function(l){var c=t.plugin.cipher,u=t.plugin.increment,d=t.plugin.formatKey,h=t.plugin.formatSeed;t.key=null;for(var f=Kn.util.createBuffer();f.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&s();var g=c(t.key,t.seed);t.generated+=g.length,f.putBytes(g),t.key=d(c(t.key,u(t.seed))),t.seed=h(c(t.key,t.seed))}return f.getBytes(l)},yu?(t.seedFile=function(l,c){yu.randomBytes(l,function(u,d){if(u)return c(u);c(null,d.toString())})},t.seedFileSync=function(l){return yu.randomBytes(l).toString()}):(t.seedFile=function(l,c){try{c(null,a(l))}catch(u){c(u)}},t.seedFileSync=a),t.collect=function(l){for(var c=l.length,u=0;u<c;++u)t.pools[t.pool].update(l.substr(u,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(l,c){for(var u="",d=0;d<c;d+=8)u+=String.fromCharCode(l>>d&255);t.collect(u)},t.registerWorker=function(l){l===self?t.seedFile=function(c,u){self.addEventListener("message",function d(h){var f=h.data;f.forge&&f.forge.prng&&(self.removeEventListener("message",d),u(f.forge.prng.err,f.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:c}}})}:l.addEventListener("message",function(c){var u=c.data;u.forge&&u.forge.prng&&t.seedFile(u.forge.prng.needed,function(d,h){l.postMessage({forge:{prng:{err:d,bytes:h}}})})})},t};var wr=Ve;wr.random&&wr.random.getBytes||function(e){var t={},r=new Array(4),n=wr.util.createBuffer();function i(){var d=wr.prng.create(t);return d.getBytes=function(h,f){return d.generate(h,f)},d.getBytesSync=function(h){return d.generate(h)},d}t.formatKey=function(d){var h=wr.util.createBuffer(d);return(d=new Array(4))[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),wr.aes._expandKey(d,!1)},t.formatSeed=function(d){var h=wr.util.createBuffer(d);return(d=new Array(4))[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),d},t.cipher=function(d,h){return wr.aes._updateBlock(d,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(d){return++d[3],d},t.md=wr.md.sha256;var s=i(),o=null,a=wr.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(o=function(d){return l.getRandomValues(d)}),!wr.util.isNodejs&&!o){if(s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(d){s.collectInt(d.clientX,16),s.collectInt(d.clientY,16)}),e().keypress(function(d){s.collectInt(d.charCode,8)}))}if(wr.random)for(var u in s)wr.random[u]=s[u];else wr.random=s;wr.random.createInstance=i}(typeof jQuery<"u"?jQuery:null);var Lr=Ve,Nf=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],A1=[1,2,3,5],lx=function(e,t){return e<<t&65535|(65535&e)>>16-t},cx=function(e,t){return(65535&e)>>t|e<<16-t&65535};Lr.rc2=Lr.rc2||{},Lr.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Lr.util.createBuffer(e)),t=t||128;var r,n=e,i=e.length(),s=t,o=Math.ceil(s/8),a=255>>(7&s);for(r=i;r<128;r++)n.putByte(Nf[n.at(r-1)+n.at(r-i)&255]);for(n.setAt(128-o,Nf[n.at(128-o)&a]),r=127-o;r>=0;r--)n.setAt(r,Nf[n.at(r+1)^n.at(r+o)]);return n};var R1=function(e,t,r){var n,i,s,o,a=!1,l=null,c=null,u=null,d=[];for(e=Lr.rc2.expandKey(e,t),s=0;s<64;s++)d.push(e.getInt16Le());r?(n=function(g){for(s=0;s<4;s++)g[s]+=d[o]+(g[(s+3)%4]&g[(s+2)%4])+(~g[(s+3)%4]&g[(s+1)%4]),g[s]=lx(g[s],A1[s]),o++},i=function(g){for(s=0;s<4;s++)g[s]+=d[63&g[(s+3)%4]]}):(n=function(g){for(s=3;s>=0;s--)g[s]=cx(g[s],A1[s]),g[s]-=d[o]+(g[(s+3)%4]&g[(s+2)%4])+(~g[(s+3)%4]&g[(s+1)%4]),o--},i=function(g){for(s=3;s>=0;s--)g[s]-=d[63&g[(s+3)%4]]});var h=function(g){var y=[];for(s=0;s<4;s++){var E=l.getInt16Le();u!==null&&(r?E^=u.getInt16Le():u.putInt16Le(E)),y.push(65535&E)}o=r?0:63;for(var p=0;p<g.length;p++)for(var v=0;v<g[p][0];v++)g[p][1](y);for(s=0;s<4;s++)u!==null&&(r?u.putInt16Le(y[s]):y[s]^=u.getInt16Le()),c.putInt16Le(y[s])},f=null;return f={start:function(g,y){g&&typeof g=="string"&&(g=Lr.util.createBuffer(g)),a=!1,l=Lr.util.createBuffer(),c=y||new Lr.util.createBuffer,u=g,f.output=c},update:function(g){for(a||l.putBuffer(g);l.length()>=8;)h([[5,n],[1,i],[6,n],[1,i],[5,n]])},finish:function(g){var y=!0;if(r)if(g)y=g(8,l,!r);else{var E=l.length()===8?8:8-l.length();l.fillWithByte(E,E)}if(y&&(a=!0,f.update()),!r&&(y=l.length()===0))if(g)y=g(8,c,!r);else{var p=c.length(),v=c.at(p-1);v>p?y=!1:c.truncate(v)}return y}}};Lr.rc2.startEncrypting=function(e,t,r){var n=Lr.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},Lr.rc2.createEncryptionCipher=function(e,t){return R1(e,t,!0)},Lr.rc2.startDecrypting=function(e,t,r){var n=Lr.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},Lr.rc2.createDecryptionCipher=function(e,t){return R1(e,t,!1)};var Si,Df=Ve;function re(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function tt(){return new re(null)}function k1(e,t,r,n,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var l=16383&this.data[e],c=this.data[e++]>>14,u=a*l+c*o;i=((l=o*l+((16383&u)<<14)+r.data[n]+i)>>28)+(u>>14)+a*c,r.data[n++]=268435455&l}return i}Df.jsbn=Df.jsbn||{},Df.jsbn.BigInteger=re,typeof navigator>"u"?(re.prototype.am=k1,Si=28):navigator.appName=="Microsoft Internet Explorer"?(re.prototype.am=function(e,t,r,n,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var l=32767&this.data[e],c=this.data[e++]>>15,u=a*l+c*o;i=((l=o*l+((32767&u)<<15)+r.data[n]+(1073741823&i))>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=1073741823&l}return i},Si=30):navigator.appName!="Netscape"?(re.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},Si=26):(re.prototype.am=k1,Si=28),re.prototype.DB=Si,re.prototype.DM=(1<<Si)-1,re.prototype.DV=1<<Si;re.prototype.FV=Math.pow(2,52),re.prototype.F1=52-Si,re.prototype.F2=2*Si-52;var Ba,vn,ux="0123456789abcdefghijklmnopqrstuvwxyz",kh=new Array;for(Ba=48,vn=0;vn<=9;++vn)kh[Ba++]=vn;for(Ba=97,vn=10;vn<36;++vn)kh[Ba++]=vn;for(Ba=65,vn=10;vn<36;++vn)kh[Ba++]=vn;function _1(e){return ux.charAt(e)}function fb(e,t){var r=kh[e.charCodeAt(t)];return r??-1}function os(e){var t=tt();return t.fromInt(e),t}function Ku(e){var t,r=1;return(t=e>>>16)!=0&&(e=t,r+=16),(t=e>>8)!=0&&(e=t,r+=8),(t=e>>4)!=0&&(e=t,r+=4),(t=e>>2)!=0&&(e=t,r+=2),(t=e>>1)!=0&&(e=t,r+=1),r}function zs(e){this.m=e}function Ks(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function dx(e,t){return e&t}function Pf(e,t){return e|t}function x1(e,t){return e^t}function N1(e,t){return e&~t}function hx(e){if(e==0)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function fx(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function wl(){}function D1(e){return e}function Fo(e){this.r2=tt(),this.q3=tt(),re.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}zs.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},zs.prototype.revert=function(e){return e},zs.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},zs.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},zs.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Ks.prototype.convert=function(e){var t=tt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(re.ZERO)>0&&this.m.subTo(t,t),t},Ks.prototype.revert=function(e){var t=tt();return e.copyTo(t),this.reduce(t),t},Ks.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Ks.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Ks.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},re.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},re.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},re.prototype.fromString=function(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else{if(t!=4)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?255&e[n]:fb(e,n);o<0?e.charAt(n)=="-"&&(i=!0):(i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}r==8&&128&e[0]&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&re.ZERO.subTo(this,this)},re.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},re.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},re.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},re.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},re.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},re.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},re.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&re.ZERO.subTo(t,t)},re.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},re.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return t!=null&&t.fromInt(0),void(r!=null&&this.copyTo(r));r==null&&(r=tt());var s=tt(),o=this.s,a=e.s,l=this.DB-Ku(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,u=s.data[c-1];if(u!=0){var d=u*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),h=this.FV/d,f=(1<<this.F1)/d,g=1<<this.F2,y=r.t,E=y-c,p=t??tt();for(s.dlShiftTo(E,p),r.compareTo(p)>=0&&(r.data[r.t++]=1,r.subTo(p,r)),re.ONE.dlShiftTo(c,p),p.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--E>=0;){var v=r.data[--y]==u?this.DM:Math.floor(r.data[y]*h+(r.data[y-1]+g)*f);if((r.data[y]+=s.am(0,v,r,E,0,c))<v)for(s.dlShiftTo(E,p),r.subTo(p,r);r.data[y]<--v;)r.subTo(p,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&re.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&re.ZERO.subTo(r,r)}}},re.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},re.prototype.isEven=function(){return(this.t>0?1&this.data[0]:this.s)==0},re.prototype.exp=function(e,t){if(e>4294967295||e<1)return re.ONE;var r=tt(),n=tt(),i=t.convert(this),s=Ku(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)},re.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=_1(r));o>=0;)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=_1(r));return i?s:"0"},re.prototype.negate=function(){var e=tt();return re.ZERO.subTo(this,e),e},re.prototype.abs=function(){return this.s<0?this.negate():this},re.prototype.compareTo=function(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if((t=r-e.t)!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0},re.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Ku(this.data[this.t-1]^this.s&this.DM)},re.prototype.mod=function(e){var t=tt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(re.ZERO)>0&&e.subTo(t,t),t},re.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new zs(t):new Ks(t),this.exp(e,r)},re.ZERO=os(0),re.ONE=os(1),wl.prototype.convert=D1,wl.prototype.revert=D1,wl.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},wl.prototype.sqrTo=function(e,t){e.squareTo(t)},Fo.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=tt();return e.copyTo(t),this.reduce(t),t},Fo.prototype.revert=function(e){return e},Fo.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Fo.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Fo.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var xn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],px=(1<<26)/xn[xn.length-1];re.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},re.prototype.toRadix=function(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=os(r),i=tt(),s=tt(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o},re.prototype.fromRadix=function(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var l=fb(e,a);l<0?e.charAt(a)=="-"&&this.signum()==0&&(i=!0):(o=t*o+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&re.ZERO.subTo(this,this)},re.prototype.fromNumber=function(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(re.ONE.shiftLeft(e-1),Pf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(re.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},re.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},re.prototype.changeBit=function(e,t){var r=re.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},re.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},re.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},re.prototype.dAddOffset=function(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},re.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},re.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},re.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},re.prototype.millerRabin=function(e){var t=this.subtract(re.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),s={nextBytes:function(c){for(var u=0;u<c.length;++u)c[u]=Math.floor(256*Math.random())}},o=0;o<e;++o){do n=new re(this.bitLength(),s);while(n.compareTo(re.ONE)<=0||n.compareTo(t)>=0);var a=n.modPow(i,this);if(a.compareTo(re.ONE)!=0&&a.compareTo(t)!=0){for(var l=1;l++<r&&a.compareTo(t)!=0;)if((a=a.modPowInt(2,this)).compareTo(re.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0},re.prototype.clone=function(){var e=tt();return this.copyTo(e),e},re.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},re.prototype.byteValue=function(){return this.t==0?this.s:this.data[0]<<24>>24},re.prototype.shortValue=function(){return this.t==0?this.s:this.data[0]<<16>>16},re.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1},re.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),128&r&&(r|=-256),i==0&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},re.prototype.equals=function(e){return this.compareTo(e)==0},re.prototype.min=function(e){return this.compareTo(e)<0?this:e},re.prototype.max=function(e){return this.compareTo(e)>0?this:e},re.prototype.and=function(e){var t=tt();return this.bitwiseTo(e,dx,t),t},re.prototype.or=function(e){var t=tt();return this.bitwiseTo(e,Pf,t),t},re.prototype.xor=function(e){var t=tt();return this.bitwiseTo(e,x1,t),t},re.prototype.andNot=function(e){var t=tt();return this.bitwiseTo(e,N1,t),t},re.prototype.not=function(){for(var e=tt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},re.prototype.shiftLeft=function(e){var t=tt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},re.prototype.shiftRight=function(e){var t=tt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},re.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+hx(this.data[e]);return this.s<0?this.t*this.DB:-1},re.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=fx(this.data[r]^t);return e},re.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:!!(this.data[t]&1<<e%this.DB)},re.prototype.setBit=function(e){return this.changeBit(e,Pf)},re.prototype.clearBit=function(e){return this.changeBit(e,N1)},re.prototype.flipBit=function(e){return this.changeBit(e,x1)},re.prototype.add=function(e){var t=tt();return this.addTo(e,t),t},re.prototype.subtract=function(e){var t=tt();return this.subTo(e,t),t},re.prototype.multiply=function(e){var t=tt();return this.multiplyTo(e,t),t},re.prototype.divide=function(e){var t=tt();return this.divRemTo(e,t,null),t},re.prototype.remainder=function(e){var t=tt();return this.divRemTo(e,null,t),t},re.prototype.divideAndRemainder=function(e){var t=tt(),r=tt();return this.divRemTo(e,t,r),new Array(t,r)},re.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=os(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new zs(t):t.isEven()?new Fo(t):new Ks(t);var o=new Array,a=3,l=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),r>1){var u=tt();for(n.sqrTo(o[1],u);a<=c;)o[a]=tt(),n.mulTo(u,o[a-2],o[a]),a+=2}var d,h,f=e.t-1,g=!0,y=tt();for(i=Ku(e.data[f])-1;f>=0;){for(i>=l?d=e.data[f]>>i-l&c:(d=(e.data[f]&(1<<i+1)-1)<<l-i,f>0&&(d|=e.data[f-1]>>this.DB+i-l)),a=r;!(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),g)o[d].copyTo(s),g=!1;else{for(;a>1;)n.sqrTo(s,y),n.sqrTo(y,s),a-=2;a>0?n.sqrTo(s,y):(h=s,s=y,y=h),n.mulTo(y,o[d],s)}for(;f>=0&&!(e.data[f]&1<<i);)n.sqrTo(s,y),h=s,s=y,y=h,--i<0&&(i=this.DB-1,--f)}return n.revert(s)},re.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return re.ZERO;for(var r=e.clone(),n=this.clone(),i=os(1),s=os(0),o=os(0),a=os(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}return n.compareTo(re.ONE)!=0?re.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},re.prototype.pow=function(e){return this.exp(e,new wl)},re.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},re.prototype.isProbablePrime=function(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=xn[xn.length-1]){for(t=0;t<xn.length;++t)if(r.data[0]==xn[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<xn.length;){for(var n=xn[t],i=t+1;i<xn.length&&n<px;)n*=xn[i++];for(n=r.modInt(n);t<i;)if(n%xn[t++]==0)return!1}return r.millerRabin(e)};var Zn=Ve,P1=Zn.sha1=Zn.sha1||{};Zn.md.sha1=Zn.md.algorithms.sha1=P1,P1.create=function(){B1||(Bf="",Bf+=Zn.util.fillString("\0",64),B1=!0);var e=null,t=Zn.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Zn.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Zn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),$1(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Zn.util.createBuffer();i.putBytes(t.bytes());var s,o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(Bf.substr(0,n.blockLength-o));for(var a=8*n.fullMessageLength[0],l=0;l<n.fullMessageLength.length-1;++l)a+=(s=8*n.fullMessageLength[l+1])/4294967296>>>0,i.putInt32(a>>>0),a=s>>>0;i.putInt32(a);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};$1(c,r,i);var u=Zn.util.createBuffer();return u.putInt32(c.h0),u.putInt32(c.h1),u.putInt32(c.h2),u.putInt32(c.h3),u.putInt32(c.h4),u},n};var Bf=null,B1=!1;function $1(e,t,r){for(var n,i,s,o,a,l,c,u=r.length();u>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,l=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+l+2400959708+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+3395469782+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,u-=64}}var Jn=Ve,L1=Jn.pkcs1=Jn.pkcs1||{};function vu(e,t,r){r||(r=Jn.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}L1.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=Jn.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),l=a-2*s.digestLength-2;if(t.length>l)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=t.length,g.maxLength=l,g;n||(n=""),s.update(n,"raw");for(var c=s.digest(),u="",d=l-t.length,h=0;h<d;h++)u+="\0";var f=c.getBytes()+u+""+t;if(i){if(i.length!==s.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=i.length,g.digestLength=s.digestLength,g}}else i=Jn.random.getBytes(s.digestLength);var y=vu(i,a-s.digestLength-1,o),E=Jn.util.xorBytes(f,y,f.length),p=vu(E,s.digestLength,o);return"\0"+Jn.util.xorBytes(i,p,i.length)+E},L1.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o)throw(y=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,y.expectedLength=o,y;if(i===void 0?i=Jn.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=t.charAt(0),c=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),d=vu(u,i.digestLength,s),h=vu(Jn.util.xorBytes(c,d,c.length),o-i.digestLength-1,s),f=Jn.util.xorBytes(u,h,u.length),g=f.substring(0,i.digestLength),y=l!=="\0",E=0;E<i.digestLength;++E)y|=a.charAt(E)!==g.charAt(E);for(var p=1,v=i.digestLength,C=i.digestLength;C<f.length;C++){var b=f.charCodeAt(C);y|=b&(p?65534:0),v+=p&=1&b^1}if(y||f.charCodeAt(v)!==1)throw new Error("Invalid RSAES-OAEP padding.");return f.substring(v+1)};var Us=Ve;(function(){if(!Us.prime){var e=Us.prime=Us.prime||{},t=Us.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,c){return l|c};e.generateProbablePrime=function(l,c,u){typeof c=="function"&&(u=c,c={});var d=(c=c||{}).algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var h=c.prng||Us.random,f={nextBytes:function(g){for(var y=h.getBytesSync(g.length),E=0;E<g.length;++E)g[E]=y.charCodeAt(E)}};if(d.name==="PRIMEINC")return function(g,y,E,p){return"workers"in E?function(v,C,b,k){if(typeof Worker>"u")return s(v,C,b,k);var m=a(v,C),R=b.workers,_=b.workLoad||100,H=30*_/8,A=b.workerScript||"forge/prime.worker.js";if(R===-1)return Us.util.estimateCores(function(B,N){B&&(N=2),R=N-1,P()});function P(){R=Math.max(1,R);for(var B=[],N=0;N<R;++N)B[N]=new Worker(A);for(N=0;N<R;++N)B[N].addEventListener("message",O);var z=!1;function O(F){if(!z){var M=F.data;if(M.found){for(var $=0;$<B.length;++$)B[$].terminate();return z=!0,k(null,new t(M.prime,16))}m.bitLength()>v&&(m=a(v,C));var q=m.toString(16);F.target.postMessage({hex:q,workLoad:_}),m.dAddOffset(H,0)}}}P()}(g,y,E,p):s(g,y,E,p)}(l,f,d.options,u);throw new Error("Invalid prime generation algorithm: "+d.name)}}function s(l,c,u,d){var h=a(l,c),f=function(y){return y<=100?27:y<=150?18:y<=200?15:y<=250?12:y<=300?9:y<=350?8:y<=400?7:y<=500?6:y<=600?5:y<=800?4:y<=1250?3:2}(h.bitLength());"millerRabinTests"in u&&(f=u.millerRabinTests);var g=10;"maxBlockTime"in u&&(g=u.maxBlockTime),o(h,l,c,0,f,g,d)}function o(l,c,u,d,h,f,g){var y=+new Date;do{if(l.bitLength()>c&&(l=a(c,u)),l.isProbablePrime(h))return g(null,l);l.dAddOffset(r[d++%8],0)}while(f<0||+new Date-y<f);Us.util.setImmediate(function(){o(l,c,u,d,h,f,g)})}function a(l,c){var u=new t(l,c),d=l-1;return u.testBit(d)||u.bitwiseTo(t.ONE.shiftLeft(d),i,u),u.dAddOffset(31-u.mod(n).byteValue(),0),u}})();var xe=Ve;if(et===void 0)var et=xe.jsbn.BigInteger;var Eg=xe.util.isNodejs?k0:null,V=xe.asn1,En=xe.util;xe.pki=xe.pki||{},xe.pki.rsa=xe.rsa=xe.rsa||{};var Me=xe.pki,gx=[6,4,2,4,2,4,6,2],mx={name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},yx={name:"RSAPrivateKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},vx={name:"RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},Ex=xe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},Cx={name:"DigestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,type:V.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},Sx=function(e){var t;if(!(e.algorithm in Me.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=Me.oids[e.algorithm];var n=V.oidToDer(t).getBytes(),i=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),s=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);s.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,n)),s.value.push(V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,""));var o=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),V.toDer(i).getBytes()},O1=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;t.dP||(t.dP=t.d.mod(t.p.subtract(et.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(et.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do n=new et(xe.util.bytesToHex(xe.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(et.ONE));for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n)};function M1(e,t,r){var n=xe.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o,a=i-3-e.length;if(r===0||r===1){o=r===0?0:255;for(var l=0;l<a;++l)n.putByte(o)}else for(;a>0;){var c=0,u=xe.random.getBytes(a);for(l=0;l<a;++l)(o=u.charCodeAt(l))===0?++c:n.putByte(o);a=c}return n.putByte(0),n.putBytes(e),n}function Eu(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=xe.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&n===void 0)throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(a===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}if(s.getByte()!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Gn(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=xe.util.hexToBytes(t);return!(r.length>1)||(r.charCodeAt(0)!==0||128&r.charCodeAt(1))&&(r.charCodeAt(0)!==255||128&~r.charCodeAt(1))?r:r.substr(1)}function wx(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function U1(e){return xe.util.isNodejs&&typeof Eg[e]=="function"}function H1(e){return En.globalScope!==void 0&&typeof En.globalScope.crypto=="object"&&typeof En.globalScope.crypto.subtle=="object"&&typeof En.globalScope.crypto.subtle[e]=="function"}function F1(e){return En.globalScope!==void 0&&typeof En.globalScope.msCrypto=="object"&&typeof En.globalScope.msCrypto.subtle=="object"&&typeof En.globalScope.msCrypto.subtle[e]=="function"}function j1(e){for(var t=xe.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}Me.rsa.encrypt=function(e,t,r){var n,i=r,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=M1(e,t,r)):(n=xe.util.createBuffer()).putBytes(e);for(var o=new et(n.toHex(),16),a=O1(o,t,i).toString(16),l=xe.util.createBuffer(),c=s-Math.ceil(a.length/2);c>0;)l.putByte(0),--c;return l.putBytes(xe.util.hexToBytes(a)),l.getBytes()},Me.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new et(xe.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=O1(o,t,r).toString(16),l=xe.util.createBuffer(),c=i-Math.ceil(a.length/2);c>0;)l.putByte(0),--c;return l.putBytes(xe.util.hexToBytes(a)),n!==!1?Eu(l.getBytes(),t,r):l.getBytes()},Me.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048;var n,i=(r=r||{}).prng||xe.random,s={nextBytes:function(a){for(var l=i.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},o=r.algorithm||"PRIMEINC";if(o!=="PRIMEINC")throw new Error("Invalid key generation algorithm: "+o);return(n={algorithm:o,state:0,bits:e,rng:s,eInt:t||65537,e:new et(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(n.eInt),n},Me.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new et(null);r.fromInt(30);for(var n,i=0,s=function(d,h){return d|h},o=+new Date,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,c=l-1;e.pqState===0?(e.num=new et(l,e.rng),e.num.testBit(c)||e.num.bitwiseTo(et.ONE.shiftLeft(c),s,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(wx(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(gx[i++%8],0):e.pqState===2?e.pqState=e.num.subtract(et.ONE).gcd(e.e).compareTo(et.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(et.ONE),e.q1=e.q.subtract(et.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(et.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Me.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Me.rsa.setPublicKey(e.n,e.e)}}a+=(n=+new Date)-o,o=n}return e.keys!==null},Me.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(U1("generateKeyPair"))return Eg.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:Me.privateKeyFromPem(c),publicKey:Me.publicKeyFromPem(l)})});if(H1("generateKey")&&H1("exportKey"))return En.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:j1(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return En.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=Me.privateKeyFromAsn1(V.fromDer(xe.util.createBuffer(a)));n(null,{privateKey:l,publicKey:Me.setRsaPublicKey(l.n,l.e)})}});if(F1("generateKey")&&F1("exportKey")){var i=En.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:j1(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(a){var l=a.target.result,c=En.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var d=u.target.result,h=Me.privateKeyFromAsn1(V.fromDer(xe.util.createBuffer(d)));n(null,{privateKey:h,publicKey:Me.setRsaPublicKey(h.n,h.e)})},c.onerror=function(u){n(u)}},void(i.onerror=function(a){n(a)})}}else if(U1("generateKeyPairSync")){var s=Eg.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Me.privateKeyFromPem(s.privateKey),publicKey:Me.publicKeyFromPem(s.publicKey)}}}var o=Me.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Me.rsa.stepKeyPairGenerationState(o,0),o.keys;(function(a,l,c){typeof l=="function"&&(c=l,l={}),l=l||{};var u={algorithm:{name:l.algorithm||"PRIMEINC",options:{workers:l.workers||2,workLoad:l.workLoad||100,workerScript:l.workerScript}}};"prng"in l&&(u.prng=l.prng);function d(){h(a.pBits,function(g,y){return g?c(g):(a.p=y,a.q!==null?f(g,a.q):void h(a.qBits,f))})}function h(g,y){xe.prime.generateProbablePrime(g,u,y)}function f(g,y){if(g)return c(g);if(a.q=y,a.p.compareTo(a.q)<0){var E=a.p;a.p=a.q,a.q=E}if(a.p.subtract(et.ONE).gcd(a.e).compareTo(et.ONE)!==0)return a.p=null,void d();if(a.q.subtract(et.ONE).gcd(a.e).compareTo(et.ONE)!==0)return a.q=null,void h(a.qBits,f);if(a.p1=a.p.subtract(et.ONE),a.q1=a.q.subtract(et.ONE),a.phi=a.p1.multiply(a.q1),a.phi.gcd(a.e).compareTo(et.ONE)!==0)return a.p=a.q=null,void d();if(a.n=a.p.multiply(a.q),a.n.bitLength()!==a.bits)return a.q=null,void h(a.qBits,f);var p=a.e.modInverse(a.phi);a.keys={privateKey:Me.rsa.setPrivateKey(a.n,a.e,p,a.p,a.q,p.mod(a.p1),p.mod(a.q1),a.q.modInverse(a.p)),publicKey:Me.rsa.setPublicKey(a.n,a.e)},c(null,a.keys)}d()})(o,r,n)},Me.setRsaPublicKey=Me.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return M1(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return xe.pkcs1.encode_rsa_oaep(l,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return Me.rsa.encrypt(o,r,!0)},verify:function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(l,c){c=Eu(c,r,!0);var u=V.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),d={},h=[];if(!V.validate(u,Cx,d,h))throw(f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=h,f;var f,g=V.derToOid(d.algorithmIdentifier);if(g!==xe.oids.md2&&g!==xe.oids.md5&&g!==xe.oids.sha1&&g!==xe.oids.sha224&&g!==xe.oids.sha256&&g!==xe.oids.sha384&&g!==xe.oids.sha512&&g!==xe.oids["sha512-224"]&&g!==xe.oids["sha512-256"])throw(f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=g,f;if((g===xe.oids.md2||g===xe.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===d.digest}}:s!=="NONE"&&s!=="NULL"&&s!==null||(s={verify:function(l,c){return l===(c=Eu(c,r,!0))}});var a=Me.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())}};return r},Me.setRsaPrivateKey=Me.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a,decrypt:function(c,u,d){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var h=Me.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:Eu};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(f,g){return xe.pkcs1.decode_rsa_oaep(g,f,d)}};else{if(["RAW","NONE","NULL",null].indexOf(u)===-1)throw new Error('Unsupported encryption scheme: "'+u+'".');u={decode:function(f){return f}}}return u.decode(h,l,!1)},sign:function(c,u){var d=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:Sx},d=1):u!=="NONE"&&u!=="NULL"&&u!==null||(u={encode:function(){return c}},d=1);var h=u.encode(c,l.n.bitLength());return Me.rsa.encrypt(h,l,d)}};return l},Me.wrapRsaPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Me.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(e).getBytes())])},Me.privateKeyFromAsn1=function(e){var t,r,n,i,s,o,a,l,c={},u=[];if(V.validate(e,mx,c,u)&&(e=V.fromDer(xe.util.createBuffer(c.privateKey))),c={},u=[],!V.validate(e,yx,c,u)){var d=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw d.errors=u,d}return t=xe.util.createBuffer(c.privateKeyModulus).toHex(),r=xe.util.createBuffer(c.privateKeyPublicExponent).toHex(),n=xe.util.createBuffer(c.privateKeyPrivateExponent).toHex(),i=xe.util.createBuffer(c.privateKeyPrime1).toHex(),s=xe.util.createBuffer(c.privateKeyPrime2).toHex(),o=xe.util.createBuffer(c.privateKeyExponent1).toHex(),a=xe.util.createBuffer(c.privateKeyExponent2).toHex(),l=xe.util.createBuffer(c.privateKeyCoefficient).toHex(),Me.setRsaPrivateKey(new et(t,16),new et(r,16),new et(n,16),new et(i,16),new et(s,16),new et(o,16),new et(a,16),new et(l,16))},Me.privateKeyToAsn1=Me.privateKeyToRSAPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.e)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.d)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.p)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.q)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.dP)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.dQ)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.qInv))])},Me.publicKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,Ex,t,r)){var n,i=V.derToOid(t.publicKeyOid);if(i!==Me.oids.rsaEncryption)throw(n=new Error("Cannot read public key. Unknown OID.")).oid=i,n;e=t.rsaPublicKey}if(r=[],!V.validate(e,vx,t,r))throw(n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,n;var s=xe.util.createBuffer(t.publicKeyModulus).toHex(),o=xe.util.createBuffer(t.publicKeyExponent).toHex();return Me.setRsaPublicKey(new et(s,16),new et(o,16))},Me.publicKeyToAsn1=Me.publicKeyToSubjectPublicKeyInfo=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Me.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,[Me.publicKeyToRSAPublicKey(e)])])},Me.publicKeyToRSAPublicKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Gn(e.e))])};var me=Ve;if(bx===void 0)var bx=me.jsbn.BigInteger;var Q=me.asn1,He=me.pki=me.pki||{};He.pbe=me.pbe=me.pbe||{};var Hs=He.oids,Tx={name:"EncryptedPrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},Ix={name:"PBES2Algorithms",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},Ax={name:"pkcs-12PbeParams",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"iterations"}]};function V1(e,t){return e.start().update(t).digest().getBytes()}function q1(e){var t;if(e){if(!(t=He.oids[Q.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return pb(t)}function pb(e){var t=me.md;switch(e){case"hmacWithSHA224":t=me.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}He.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,s,o=me.random.getBytesSync(r.saltSize),a=r.count,l=Q.integerToDer(a);if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,d;switch(r.algorithm){case"aes128":n=16,c=16,u=Hs["aes128-CBC"],d=me.aes.createEncryptionCipher;break;case"aes192":n=24,c=16,u=Hs["aes192-CBC"],d=me.aes.createEncryptionCipher;break;case"aes256":n=32,c=16,u=Hs["aes256-CBC"],d=me.aes.createEncryptionCipher;break;case"des":n=8,c=8,u=Hs.desCBC,d=me.des.createEncryptionCipher;break;default:throw(p=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,p}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),f=pb(h),g=me.pkcs5.pbkdf2(t,o,a,n,f),y=me.random.getBytesSync(c);(v=d(g)).start(y),v.update(Q.toDer(e)),v.finish(),s=v.output.getBytes();var E=function(b,k,m,R){var _=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,b),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,k.getBytes())]);return R!=="hmacWithSHA1"&&_.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,me.util.hexToBytes(m.toString(16))),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(He.oids[R]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")])),_}(o,l,n,h);i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Hs.pkcs5PBES2).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Hs.pkcs5PBKDF2).getBytes()),E]),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(u).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,y)])])])}else{var p;if(r.algorithm!=="3des")throw(p=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,p;n=24;var v,C=new me.util.ByteBuffer(o);g=He.pbe.generatePkcs12Key(t,C,1,a,n),y=He.pbe.generatePkcs12Key(t,C,2,a,n),(v=me.des.createEncryptionCipher(g)).start(y),v.update(Q.toDer(e)),v.finish(),s=v.output.getBytes(),i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(Hs["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,o),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,l.getBytes())])])}return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[i,Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,s)])},He.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!Q.validate(e,Tx,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=Q.derToOid(n.encryptionOid),a=He.pbe.getCipher(o,n.encryptionParams,t),l=me.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=Q.fromDer(a.output)),r},He.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:Q.toDer(e).getBytes()};return me.pem.encode(r,{maxline:t})},He.encryptedPrivateKeyFromPem=function(e){var t=me.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Q.fromDer(t.body)},He.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=He.wrapRsaPrivateKey(He.privateKeyToAsn1(e));return n=He.encryptPrivateKeyInfo(n,t,r),He.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=me.random.getBytesSync(8),a=me.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=me.random.getBytesSync(8),a=me.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=a(me.pbe.opensslDeriveBytes(t,s.substr(0,8),o));c.start(s),c.update(Q.toDer(He.privateKeyToAsn1(e))),c.finish();var u={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:me.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return me.pem.encode(u)},He.decryptRsaPrivateKey=function(e,t){var r=null,n=me.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY")throw(o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=o,o;if(n.procType&&n.procType.type==="ENCRYPTED"){var i,s;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,s=me.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,s=me.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,s=me.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,s=me.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,s=me.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,s=function(c){return me.rc2.createDecryptionCipher(c,40)};break;case"RC2-64-CBC":i=8,s=function(c){return me.rc2.createDecryptionCipher(c,64)};break;case"RC2-128-CBC":i=16,s=function(c){return me.rc2.createDecryptionCipher(c,128)};break;default:var o;throw(o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,o}var a=me.util.hexToBytes(n.dekInfo.parameters),l=s(me.pbe.opensslDeriveBytes(t,a.substr(0,8),i));if(l.start(a),l.update(me.util.createBuffer(n.body)),!l.finish())return r;r=l.output.getBytes()}else r=n.body;return(r=n.type==="ENCRYPTED PRIVATE KEY"?He.decryptPrivateKeyInfo(Q.fromDer(r),t):Q.fromDer(r))!==null&&(r=He.privateKeyFromAsn1(r)),r},He.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(s==null){if(!("sha1"in me.md))throw new Error('"sha1" hash algorithm unavailable.');s=me.md.sha1.create()}var l=s.digestLength,c=s.blockLength,u=new me.util.ByteBuffer,d=new me.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)d.putInt16(e.charCodeAt(a));d.putInt16(0)}var h=d.length(),f=t.length(),g=new me.util.ByteBuffer;g.fillWithByte(r,c);var y=c*Math.ceil(f/c),E=new me.util.ByteBuffer;for(a=0;a<y;a++)E.putByte(t.at(a%f));var p=c*Math.ceil(h/c),v=new me.util.ByteBuffer;for(a=0;a<p;a++)v.putByte(d.at(a%h));var C=E;C.putBuffer(v);for(var b=Math.ceil(i/l),k=1;k<=b;k++){var m=new me.util.ByteBuffer;m.putBytes(g.bytes()),m.putBytes(C.bytes());for(var R=0;R<n;R++)s.start(),s.update(m.getBytes()),m=s.digest();var _=new me.util.ByteBuffer;for(a=0;a<c;a++)_.putByte(m.at(a%l));var H=Math.ceil(f/c)+Math.ceil(h/c),A=new me.util.ByteBuffer;for(o=0;o<H;o++){var P=new me.util.ByteBuffer(C.getBytes(c)),B=511;for(a=_.length()-1;a>=0;a--)B>>=8,B+=_.at(a)+P.at(a),P.setAt(a,255&B);A.putBuffer(P)}C=A,u.putBuffer(m)}return u.truncate(u.length()-i),u},He.pbe.getCipher=function(e,t,r){switch(e){case He.oids.pkcs5PBES2:return He.pbe.getCipherForPBES2(e,t,r);case He.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case He.oids["pbewithSHAAnd40BitRC2-CBC"]:return He.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},He.pbe.getCipherForPBES2=function(e,t,r){var n,i={},s=[];if(!Q.validate(t,Ix,i,s))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,n;if((e=Q.derToOid(i.kdfOid))!==He.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,n.supportedOids=["pkcs5PBKDF2"],n;if((e=Q.derToOid(i.encOid))!==He.oids["aes128-CBC"]&&e!==He.oids["aes192-CBC"]&&e!==He.oids["aes256-CBC"]&&e!==He.oids["des-EDE3-CBC"]&&e!==He.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var o,a,l=i.kdfSalt,c=me.util.createBuffer(i.kdfIterationCount);switch(c=c.getInt(c.length()<<3),He.oids[e]){case"aes128-CBC":o=16,a=me.aes.createDecryptionCipher;break;case"aes192-CBC":o=24,a=me.aes.createDecryptionCipher;break;case"aes256-CBC":o=32,a=me.aes.createDecryptionCipher;break;case"des-EDE3-CBC":o=24,a=me.des.createDecryptionCipher;break;case"desCBC":o=8,a=me.des.createDecryptionCipher}var u=q1(i.prfOid),d=me.pkcs5.pbkdf2(r,l,c,o,u),h=i.encIv,f=a(d);return f.start(h),f},He.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!Q.validate(t,Ax,n,i))throw(u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,u;var s,o,a,l=me.util.createBuffer(n.salt),c=me.util.createBuffer(n.iterations);switch(c=c.getInt(c.length()<<3),e){case He.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:s=24,o=8,a=me.des.startDecrypting;break;case He.oids["pbewithSHAAnd40BitRC2-CBC"]:s=5,o=8,a=function(f,g){var y=me.rc2.createDecryptionCipher(f,40);return y.start(g,null),y};break;default:var u;throw(u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,u}var d=q1(n.prfOid),h=He.pbe.generatePkcs12Key(r,l,1,c,s,d);return d.start(),a(h,He.pbe.generatePkcs12Key(r,l,2,c,o,d))},He.pbe.opensslDeriveBytes=function(e,t,r,n){if(n==null){if(!("md5"in me.md))throw new Error('"md5" hash algorithm unavailable.');n=me.md.md5.create()}t===null&&(t="");for(var i=[V1(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(V1(n,i[o-1]+e+t));return i.join("").substr(0,r)};var ya=Ve,ge=ya.asn1,$a=ya.pkcs7asn1=ya.pkcs7asn1||{};ya.pkcs7=ya.pkcs7||{},ya.pkcs7.asn1=$a;var gb={name:"ContentInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};$a.contentInfoValidator=gb;var z1={name:"EncryptedContentInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};$a.envelopedDataValidator={name:"EnvelopedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(z1)},$a.encryptedDataValidator={name:"EncryptedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"}].concat(z1)};var Rx={name:"SignerInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ge.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};$a.signedDataValidator={name:"SignedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},gb,{name:"SignedData.Certificates",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ge.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,capture:"signerInfos",optional:!0,value:[Rx]}]},$a.recipientInfoValidator={name:"RecipientInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Fs=Ve;Fs.mgf=Fs.mgf||{},(Fs.mgf.mgf1=Fs.mgf1=Fs.mgf1||{}).create=function(e){var t={generate:function(r,n){for(var i=new Fs.util.ByteBuffer,s=Math.ceil(n/e.digestLength),o=0;o<s;o++){var a=new Fs.util.ByteBuffer;a.putInt32(o),e.start(),e.update(r+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t};var Cu=Ve;Cu.mgf=Cu.mgf||{},Cu.mgf.mgf1=Cu.mgf1;var js=Ve;(js.pss=js.pss||{}).create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,n=e.mgf,i=r.digestLength,s=e.salt||null;if(typeof s=="string"&&(s=js.util.createBuffer(s)),"saltLength"in e)t=e.saltLength;else{if(s===null)throw new Error("Salt length not specified or specific salt not given.");t=s.length()}if(s!==null&&s.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||js.random,a={encode:function(l,c){var u,d,h=c-1,f=Math.ceil(h/8),g=l.digest().getBytes();if(f<i+t+2)throw new Error("Message is too long to encrypt.");d=s===null?o.getBytesSync(t):s.bytes();var y=new js.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(g),y.putBytes(d),r.start(),r.update(y.getBytes());var E=r.digest().getBytes(),p=new js.util.ByteBuffer;p.fillWithByte(0,f-t-i-2),p.putByte(1),p.putBytes(d);var v=p.getBytes(),C=f-i-1,b=n.generate(E,C),k="";for(u=0;u<C;u++)k+=String.fromCharCode(v.charCodeAt(u)^b.charCodeAt(u));var m=65280>>8*f-h&255;return(k=String.fromCharCode(k.charCodeAt(0)&~m)+k.substr(1))+E+""},verify:function(l,c,u){var d,h=u-1,f=Math.ceil(h/8);if(c=c.substr(-f),f<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=f-i-1,y=c.substr(0,g),E=c.substr(g,i),p=65280>>8*f-h&255;if(y.charCodeAt(0)&p)throw new Error("Bits beyond keysize not zero as expected.");var v=n.generate(E,g),C="";for(d=0;d<g;d++)C+=String.fromCharCode(y.charCodeAt(d)^v.charCodeAt(d));C=String.fromCharCode(C.charCodeAt(0)&~p)+C.substr(1);var b=f-i-t-2;for(d=0;d<b;d++)if(C.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(C.charCodeAt(b)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var k=C.substr(-t),m=new js.util.ByteBuffer;return m.fillWithByte(0,8),m.putBytes(l),m.putBytes(k),r.start(),r.update(m.getBytes()),E===r.digest().getBytes()}};return a};var Ne=Ve,w=Ne.asn1,ce=Ne.pki=Ne.pki||{},Ze=ce.oids,Nt={};Nt.CN=Ze.commonName,Nt.commonName="CN",Nt.C=Ze.countryName,Nt.countryName="C",Nt.L=Ze.localityName,Nt.localityName="L",Nt.ST=Ze.stateOrProvinceName,Nt.stateOrProvinceName="ST",Nt.O=Ze.organizationName,Nt.organizationName="O",Nt.OU=Ze.organizationalUnitName,Nt.organizationalUnitName="OU",Nt.E=Ze.emailAddress,Nt.emailAddress="E";var mb=Ne.pki.rsa.publicKeyValidator,kx={name:"Certificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},mb,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},_x={name:"rsapss",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},xx={name:"CertificationRequestInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},mb,{name:"CertificationRequestInfo.attributes",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:w.Class.UNIVERSAL,type:w.Type.SET,constructed:!0}]}]}]},Nx={name:"CertificationRequest",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[xx,{name:"CertificationRequest.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function Qi(e,t){typeof t=="string"&&(t={shortName:t});for(var r,n=null,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}ce.RDNAttributesAsArray=function(e,t){for(var r,n,i,s=[],o=0;o<e.value.length;++o){r=e.value[o];for(var a=0;a<r.value.length;++a)i={},n=r.value[a],i.type=w.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in Ze&&(i.name=Ze[i.type],i.name in Nt&&(i.shortName=Nt[i.name])),t&&(t.update(i.type),t.update(i.value)),s.push(i)}return s},ce.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=w.derToOid(n.value[0].value),s=n.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=i,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in Ze&&(a.name=Ze[a.type],a.name in Nt&&(a.shortName=Nt[a.name])),a.type===Ze.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(ce.certificateExtensionFromAsn1(a.value[l]))}t.push(a)}return t};var Su=function(e,t,r){var n={};if(e!==Ze["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ze.sha1},mgf:{algorithmOid:Ze.mgf1,hash:{algorithmOid:Ze.sha1}},saltLength:20});var i={},s=[];if(!w.validate(t,_x,i,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=w.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=w.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=w.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},wu=function(e){switch(Ze[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ne.md.sha1.create();case"md5WithRSAEncryption":return Ne.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return Ne.md.sha256.create();case"sha384WithRSAEncryption":return Ne.md.sha384.create();case"sha512WithRSAEncryption":return Ne.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},K1=function(e){var t,r=e.certificate;switch(r.signatureOid){case Ze.sha1WithRSAEncryption:case Ze.sha1WithRSASignature:break;case Ze["RSASSA-PSS"]:var n,i,s;if((n=Ze[r.signatureParameters.mgf.hash.algorithmOid])===void 0||Ne.md[n]===void 0)throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=n,s;if((i=Ze[r.signatureParameters.mgf.algorithmOid])===void 0||Ne.mgf[i]===void 0)throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=Ne.mgf[i].create(Ne.md[n].create()),(n=Ze[r.signatureParameters.hash.algorithmOid])===void 0||Ne.md[n]===void 0)throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=n,s;t=Ne.pss.create(Ne.md[n].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function jo(e){for(var t,r,n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),i=e.attributes,s=0;s<i.length;++s){var o=(t=i[s]).value,a=w.Type.PRINTABLESTRING;"valueTagClass"in t&&(a=t.valueTagClass)===w.Type.UTF8&&(o=Ne.util.encodeUtf8(o)),r=w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.type).getBytes()),w.create(w.Class.UNIVERSAL,a,!1,o)])]),n.value.push(r)}return n}function ln(e){for(var t,r=0;r<e.length;++r){if((t=e[r]).name===void 0&&(t.type&&t.type in ce.oids?t.name=ce.oids[t.type]:t.shortName&&t.shortName in Nt&&(t.name=ce.oids[Nt[t.shortName]])),t.type===void 0){if(!t.name||!(t.name in ce.oids))throw(i=new Error("Attribute type not specified.")).attribute=t,i;t.type=ce.oids[t.name]}if(t.shortName===void 0&&t.name&&t.name in Nt&&(t.shortName=Nt[t.name]),t.type===Ze.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=w.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(ce.certificateExtensionToAsn1(yb(t.extensions[n])))}var i;if(t.value===void 0)throw(i=new Error("Attribute value not specified.")).attribute=t,i}}function yb(e,t){if(t=t||{},e.name===void 0&&e.id&&e.id in ce.oids&&(e.name=ce.oids[e.id]),e.id===void 0){if(!e.name||!(e.name in ce.oids))throw(E=new Error("Extension ID not specified.")).extension=e,E;e.id=ce.oids[e.name]}if(e.value!==void 0)return e;if(e.name==="keyUsage"){var r=0,n=0,i=0;e.digitalSignature&&(n|=128,r=7),e.nonRepudiation&&(n|=64,r=6),e.keyEncipherment&&(n|=32,r=5),e.dataEncipherment&&(n|=16,r=4),e.keyAgreement&&(n|=8,r=3),e.keyCertSign&&(n|=4,r=2),e.cRLSign&&(n|=2,r=1),e.encipherOnly&&(n|=1,r=0),e.decipherOnly&&(i|=128,r=7);var s=String.fromCharCode(r);i!==0?s+=String.fromCharCode(n)+String.fromCharCode(i):n!==0&&(s+=String.fromCharCode(n)),e.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"")),"pathLenConstraint"in e&&e.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var a in e)e[a]===!0&&(a in Ze?o.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Ze[a]).getBytes())):a.indexOf(".")!==-1&&o.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(a).getBytes())))}else if(e.name==="nsCertType")r=0,n=0,e.client&&(n|=128,r=7),e.server&&(n|=64,r=6),e.email&&(n|=32,r=5),e.objsign&&(n|=16,r=4),e.reserved&&(n|=8,r=3),e.sslCA&&(n|=4,r=2),e.emailCA&&(n|=2,r=1),e.objCA&&(n|=1,r=0),s=String.fromCharCode(r),n!==0&&(s+=String.fromCharCode(n)),e.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s);else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var l=0;l<e.altNames.length;++l){if(s=(f=e.altNames[l]).value,f.type===7&&f.ip){if((s=Ne.util.bytesFromIP(f.ip))===null)throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else f.type===8&&(s=f.oid?w.oidToDer(w.oidToDer(f.oid)):w.oidToDer(s));e.value.value.push(w.create(w.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=w.create(w.Class.UNIVERSAL,w.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var c=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=c.toHex(),e.value=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,c.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){if(e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),o=e.value.value,e.keyIdentifier){var u=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!1,u))}if(e.authorityCertIssuer){var d=[w.create(w.Class.CONTEXT_SPECIFIC,4,!0,[jo(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,d))}if(e.serialNumber){var h=Ne.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!1,h))}}else if(e.name==="cRLDistributionPoints"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),o=e.value.value;var f,g=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),y=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);for(l=0;l<e.altNames.length;++l){if(s=(f=e.altNames[l]).value,f.type===7&&f.ip){if((s=Ne.util.bytesFromIP(f.ip))===null)throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else f.type===8&&(s=f.oid?w.oidToDer(w.oidToDer(f.oid)):w.oidToDer(s));y.value.push(w.create(w.Class.CONTEXT_SPECIFIC,f.type,!1,s))}g.value.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[y])),o.push(g)}var E;if(e.value===void 0)throw(E=new Error("Extension value not specified.")).extension=e,E;return e}function $f(e,t){if(e===Ze["RSASSA-PSS"]){var r=[];return t.hash.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.mgf.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.mgf.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.saltLength).getBytes())])),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,r)}return w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")}function Dx(e){var t=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,o=w.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===w.Type.UTF8&&(s=Ne.util.encodeUtf8(s));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(i.type).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,o,a,s)])]);t.value.push(l)}return t}ce.certificateFromPem=function(e,t,r){var n=Ne.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=w.fromDer(n.body,r);return ce.certificateFromAsn1(s,t)},ce.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:w.toDer(ce.certificateToAsn1(e)).getBytes()};return Ne.pem.encode(r,{maxline:t})},ce.publicKeyFromPem=function(e){var t=Ne.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=w.fromDer(t.body);return ce.publicKeyFromAsn1(n)},ce.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:w.toDer(ce.publicKeyToAsn1(e)).getBytes()};return Ne.pem.encode(r,{maxline:t})},ce.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:w.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes()};return Ne.pem.encode(r,{maxline:t})},ce.getPublicKeyFingerprint=function(e,t){var r,n=(t=t||{}).md||Ne.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=w.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=w.toDer(ce.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(r);var i=n.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i},ce.certificationRequestFromPem=function(e,t,r){var n=Ne.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=w.fromDer(n.body,r);return ce.certificationRequestFromAsn1(s,t)},ce.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:w.toDer(ce.certificationRequestToAsn1(e)).getBytes()};return Ne.pem.encode(r,{maxline:t})},ce.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Qi(e.issuer,t)},e.issuer.addField=function(t){ln([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Qi(e.subject,t)},e.subject.addField=function(t){ln([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){ln(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){ln(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)yb(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r,n=null,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||Ne.md.sha1.create();var n=Ze[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=ce.getTBSCertificate(e);var s=w.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=t.md;if(o===null){o=wu({signatureOid:t.signatureOid,type:"certificate"});var a=t.tbsCertificate||ce.getTBSCertificate(t),l=w.toDer(a);o.update(l.getBytes())}return o!==null&&(r=K1({certificate:e,md:o,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return ce.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Ze.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return Ne.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e},ce.certificateFromAsn1=function(e,t){var r={},n=[];if(!w.validate(e,kx,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}if(w.derToOid(r.publicKeyOid)!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=Ne.util.createBuffer(r.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=Ne.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Su(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ne.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Su(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var a=[];if(r.certValidity1UTCTime!==void 0&&a.push(w.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&a.push(w.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&a.push(w.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&a.push(w.generalizedTimeToDate(r.certValidity4GeneralizedTime)),a.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(a.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=a[0],s.validity.notAfter=a[1],s.tbsCertificate=r.tbsCertificate,t){s.md=wu({signatureOid:s.signatureOid,type:"certificate"});var l=w.toDer(s.tbsCertificate);s.md.update(l.getBytes())}var c=Ne.md.sha1.create(),u=w.toDer(r.certIssuer);c.update(u.getBytes()),s.issuer.getField=function(f){return Qi(s.issuer,f)},s.issuer.addField=function(f){ln([f]),s.issuer.attributes.push(f)},s.issuer.attributes=ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=c.digest().toHex();var d=Ne.md.sha1.create(),h=w.toDer(r.certSubject);return d.update(h.getBytes()),s.subject.getField=function(f){return Qi(s.subject,f)},s.subject.addField=function(f){ln([f]),s.subject.attributes.push(f)},s.subject.attributes=ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=d.digest().toHex(),r.certExtensions?s.extensions=ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s},ce.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(ce.certificateExtensionFromAsn1(n.value[i]));return t},ce.certificateExtensionFromAsn1=function(e){var t={};if(t.id=w.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===w.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Ze)if(t.name=Ze[t.id],t.name==="keyUsage"){var r=0,n=0;(s=w.fromDer(t.value)).value.length>1&&(r=s.value.charCodeAt(1),n=s.value.length>2?s.value.charCodeAt(2):0),t.digitalSignature=!(128&~r),t.nonRepudiation=!(64&~r),t.keyEncipherment=!(32&~r),t.dataEncipherment=!(16&~r),t.keyAgreement=!(8&~r),t.keyCertSign=!(4&~r),t.cRLSign=!(2&~r),t.encipherOnly=!(1&~r),t.decipherOnly=!(128&~n)}else if(t.name==="basicConstraints"){(s=w.fromDer(t.value)).value.length>0&&s.value[0].type===w.Type.BOOLEAN?t.cA=s.value[0].value.charCodeAt(0)!==0:t.cA=!1;var i=null;s.value.length>0&&s.value[0].type===w.Type.INTEGER?i=s.value[0].value:s.value.length>1&&(i=s.value[1].value),i!==null&&(t.pathLenConstraint=w.derToInteger(i))}else if(t.name==="extKeyUsage")for(var s=w.fromDer(t.value),o=0;o<s.value.length;++o){var a=w.derToOid(s.value[o].value);a in Ze?t[Ze[a]]=!0:t[a]=!0}else if(t.name==="nsCertType")r=0,(s=w.fromDer(t.value)).value.length>1&&(r=s.value.charCodeAt(1)),t.client=!(128&~r),t.server=!(64&~r),t.email=!(32&~r),t.objsign=!(16&~r),t.reserved=!(8&~r),t.sslCA=!(4&~r),t.emailCA=!(2&~r),t.objCA=!(1&~r);else if(t.name==="subjectAltName"||t.name==="issuerAltName"){var l;t.altNames=[],s=w.fromDer(t.value);for(var c=0;c<s.value.length;++c){var u={type:(l=s.value[c]).type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=Ne.util.bytesToIP(l.value);break;case 8:u.oid=w.derToOid(l.value)}}}else t.name==="subjectKeyIdentifier"&&(s=w.fromDer(t.value),t.subjectKeyIdentifier=Ne.util.bytesToHex(s.value));return t},ce.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!w.validate(e,Nx,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}if(w.derToOid(r.publicKeyOid)!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ne.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Su(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ne.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Su(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=wu({signatureOid:s.signatureOid,type:"certification request"});var o=w.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var a=Ne.md.sha1.create();return s.subject.getField=function(l){return Qi(s.subject,l)},s.subject.addField=function(l){ln([l]),s.subject.attributes.push(l)},s.subject.attributes=ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,a),s.subject.hash=a.digest().toHex(),s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(l){return Qi(s,l)},s.addAttribute=function(l){ln([l]),s.attributes.push(l)},s.attributes=ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s},ce.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Qi(e.subject,t)},e.subject.addField=function(t){ln([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Qi(e,t)},e.addAttribute=function(t){ln([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){ln(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){ln(t),e.attributes=t},e.sign=function(t,r){e.md=r||Ne.md.sha1.create();var n=Ze[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=ce.getCertificationRequestInfo(e);var s=w.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=wu({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||ce.getCertificationRequestInfo(e),i=w.toDer(n);r.update(i.getBytes())}return r!==null&&(t=K1({certificate:e,md:r,signature:e.signature})),t},e};var Px=new Date("1950-01-01T00:00:00Z"),Bx=new Date("2050-01-01T00:00:00Z");function G1(e){return e>=Px&&e<Bx?w.create(w.Class.UNIVERSAL,w.Type.UTCTIME,!1,w.dateToUtcTime(e)):w.create(w.Class.UNIVERSAL,w.Type.GENERALIZEDTIME,!1,w.dateToGeneralizedTime(e))}ce.getTBSCertificate=function(e){var t=G1(e.validity.notBefore),r=G1(e.validity.notAfter),n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.version).getBytes())]),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,Ne.util.hexToBytes(e.serialNumber)),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.siginfo.algorithmOid).getBytes()),$f(e.siginfo.algorithmOid,e.siginfo.parameters)]),jo(e.issuer),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,r]),jo(e.subject),ce.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(ce.certificateExtensionsToAsn1(e.extensions)),n},ce.getCertificationRequestInfo=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.version).getBytes()),jo(e.subject),ce.publicKeyToAsn1(e.publicKey),Dx(e)])},ce.distinguishedNameToAsn1=function(e){return jo(e)},ce.certificateToAsn1=function(e){var t=e.tbsCertificate||ce.getTBSCertificate(e);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.signatureOid).getBytes()),$f(e.signatureOid,e.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.signature)])},ce.certificateExtensionsToAsn1=function(e){var t=w.create(w.Class.CONTEXT_SPECIFIC,3,!0,[]),r=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(ce.certificateExtensionToAsn1(e[n]));return t},ce.certificateExtensionToAsn1=function(e){var t=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);t.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.id).getBytes())),e.critical&&t.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,""));var r=e.value;return typeof e.value!="string"&&(r=w.toDer(r).getBytes()),t.value.push(w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r)),t},ce.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||ce.getCertificationRequestInfo(e);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.signatureOid).getBytes()),$f(e.signatureOid,e.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.signature)])},ce.createCaStore=function(e){var t={certs:{}};function r(o){return n(o),t.certs[o.hash]||null}function n(o){if(!o.hash){var a=Ne.md.sha1.create();o.attributes=ce.RDNAttributesAsArray(jo(o),a),o.hash=a.digest().toHex()}}if(t.getIssuer=function(o){return r(o.issuer)},t.addCertificate=function(o){if(typeof o=="string"&&(o=Ne.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var a=t.certs[o.subject.hash];Ne.util.isArray(a)||(a=[a]),a.push(o),t.certs[o.subject.hash]=a}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=Ne.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;Ne.util.isArray(a)||(a=[a]);for(var l=w.toDer(ce.certificateToAsn1(o)).getBytes(),c=0;c<a.length;++c)if(l===w.toDer(ce.certificateToAsn1(a[c])).getBytes())return!0;return!1},t.listAllCertificates=function(){var o=[];for(var a in t.certs)if(t.certs.hasOwnProperty(a)){var l=t.certs[a];if(Ne.util.isArray(l))for(var c=0;c<l.length;++c)o.push(l[c]);else o.push(l)}return o},t.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=Ne.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))return null;var l=r(o.subject);if(!Ne.util.isArray(l))return a=t.certs[o.subject.hash],delete t.certs[o.subject.hash],a;for(var c=w.toDer(ce.certificateToAsn1(o)).getBytes(),u=0;u<l.length;++u)c===w.toDer(ce.certificateToAsn1(l[u])).getBytes()&&(a=l[u],l.splice(u,1));return l.length===0&&delete t.certs[o.subject.hash],a},e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t},ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},ce.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{};var n=(t=t.slice(0)).slice(0),i=r.validityCheckDate;i===void 0&&(i=new Date);var s=!0,o=null,a=0;do{var l=t.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:ce.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),o===null){if((c=t[0]||e.getIssuer(l))===null&&l.isIssuer(l)&&(u=!0,c=l),c){var d=c;Ne.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){c=d.shift();try{h=c.verify(l)}catch{}}h||(o={message:"Certificate signature is invalid.",error:ce.certificateError.bad_certificate})}o!==null||c&&!u||e.hasCertificate(l)||(o={message:"Certificate is not trusted.",error:ce.certificateError.unknown_ca})}if(o===null&&c&&!l.isIssuer(c)&&(o={message:"Certificate issuer is invalid.",error:ce.certificateError.bad_certificate}),o===null)for(var f={keyUsage:!0,basicConstraints:!0},g=0;o===null&&g<l.extensions.length;++g){var y=l.extensions[g];y.critical&&!(y.name in f)&&(o={message:"Certificate has an unsupported critical extension.",error:ce.certificateError.unsupported_certificate})}if(o===null&&(!s||t.length===0&&(!c||u))){var E=l.getExtension("basicConstraints"),p=l.getExtension("keyUsage");p!==null&&(p.keyCertSign&&E!==null||(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:ce.certificateError.bad_certificate})),o!==null||E===null||E.cA||(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:ce.certificateError.bad_certificate}),o===null&&p!==null&&"pathLenConstraint"in E&&a-1>E.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:ce.certificateError.bad_certificate})}var v=o===null||o.error,C=r.verify?r.verify(v,a,n):v;if(C!==!0)throw v===!0&&(o={message:"The application rejected the certificate.",error:ce.certificateError.bad_certificate}),(C||C===0)&&(typeof C!="object"||Ne.util.isArray(C)?typeof C=="string"&&(o.error=C):(C.message&&(o.message=C.message),C.error&&(o.error=C.error))),o;o=null,s=!1,++a}while(t.length>0);return!0};var vt=Ve,D=vt.asn1,Ge=vt.pki,dl=vt.pkcs12=vt.pkcs12||{},vb={name:"ContentInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},$x={name:"PFX",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"version"},vb,{name:"PFX.macData",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},Lx={name:"SafeBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},Ox={name:"Attribute",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,capture:"values"}]},Mx={name:"CertBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:D.Class.UNIVERSAL,type:D.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function hl(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];n!==void 0&&a.type!==n||(t!==null?a.attributes[t]!==void 0&&a.attributes[t].indexOf(r)>=0&&i.push(a):i.push(a))}return i}function Cg(e){if(e.composed||e.constructed){for(var t=vt.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function Ux(e,t){var r={},n=[];if(!D.validate(e,vt.pkcs7.asn1.encryptedDataValidator,r,n))throw(i=new Error("Cannot read EncryptedContentInfo.")).errors=n,i;var i,s=D.derToOid(r.contentType);if(s!==Ge.oids.data)throw(i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,i;s=D.derToOid(r.encAlgorithm);var o=Ge.pbe.getCipher(s,r.encParameter,t),a=Cg(r.encryptedContentAsn1),l=vt.util.createBuffer(a.value);if(o.update(l),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function Hx(e,t,r){if(!t&&e.length===0)return[];if((e=D.fromDer(e,t)).tagClass!==D.Class.UNIVERSAL||e.type!==D.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],o={},a=[];if(!D.validate(s,Lx,o,a))throw(h=new Error("Cannot read SafeBag.")).errors=a,h;var l,c,u={type:D.derToOid(o.bagId),attributes:Fx(o.bagAttributes)};n.push(u);var d=o.bagValue.value[0];switch(u.type){case Ge.oids.pkcs8ShroudedKeyBag:if((d=Ge.decryptPrivateKeyInfo(d,r))===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ge.oids.keyBag:try{u.key=Ge.privateKeyFromAsn1(d)}catch{u.key=null,u.asn1=d}continue;case Ge.oids.certBag:l=Mx,c=function(){if(D.derToOid(o.certId)!==Ge.oids.x509Certificate){var f=new Error("Unsupported certificate type, only X.509 supported.");throw f.oid=D.derToOid(o.certId),f}var g=D.fromDer(o.cert,t);try{u.cert=Ge.certificateFromAsn1(g,!0)}catch{u.cert=null,u.asn1=g}};break;default:var h;throw(h=new Error("Unsupported PKCS#12 SafeBag type.")).oid=u.type,h}if(l!==void 0&&!D.validate(d,l,o,a))throw(h=new Error("Cannot read PKCS#12 "+l.name)).errors=a,h;c()}return n}function Fx(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!D.validate(e[r],Ox,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var o=D.derToOid(n.oid);if(Ge.oids[o]!==void 0){t[Ge.oids[o]]=[];for(var a=0;a<n.values.length;++a)t[Ge.oids[o]].push(n.values[a].value)}}return t}dl.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={};if(!D.validate(e,$x,n,[]))throw(i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=i,i;var i,s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var y,E={};return"localKeyId"in g?y=g.localKeyId:"localKeyIdHex"in g&&(y=vt.util.hexToBytes(g.localKeyIdHex)),y===void 0&&!("friendlyName"in g)&&"bagType"in g&&(E[g.bagType]=hl(s.safeContents,null,null,g.bagType)),y!==void 0&&(E.localKeyId=hl(s.safeContents,"localKeyId",y,g.bagType)),"friendlyName"in g&&(E.friendlyName=hl(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),E},getBagsByFriendlyName:function(g,y){return hl(s.safeContents,"friendlyName",g,y)},getBagsByLocalKeyId:function(g,y){return hl(s.safeContents,"localKeyId",g,y)}};if(n.version.charCodeAt(0)!==3)throw(i=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=n.version.charCodeAt(0),i;if(D.derToOid(n.contentType)!==Ge.oids.data)throw(i=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=D.derToOid(n.contentType),i;var o=n.content.value[0];if(o.tagClass!==D.Class.UNIVERSAL||o.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Cg(o),n.mac){var a=null,l=0,c=D.derToOid(n.macAlgorithm);switch(c){case Ge.oids.sha1:a=vt.md.sha1.create(),l=20;break;case Ge.oids.sha256:a=vt.md.sha256.create(),l=32;break;case Ge.oids.sha384:a=vt.md.sha384.create(),l=48;break;case Ge.oids.sha512:a=vt.md.sha512.create(),l=64;break;case Ge.oids.md5:a=vt.md.md5.create(),l=16}if(a===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+c);var u=new vt.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt(vt.util.bytesToHex(n.macIterations),16):1,h=dl.generateKey(r,u,3,d,l,a),f=vt.hmac.create();if(f.start(a,h),f.update(o.value),f.getMac().getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(g,y,E,p){if(y=D.fromDer(y,E),y.tagClass!==D.Class.UNIVERSAL||y.type!==D.Type.SEQUENCE||y.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var v=0;v<y.value.length;v++){var C=y.value[v],b={},k=[];if(!D.validate(C,vb,b,k))throw(H=new Error("Cannot read ContentInfo.")).errors=k,H;var m={encrypted:!1},R=null,_=b.content.value[0];switch(D.derToOid(b.contentType)){case Ge.oids.data:if(_.tagClass!==D.Class.UNIVERSAL||_.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");R=Cg(_).value;break;case Ge.oids.encryptedData:R=Ux(_,p),m.encrypted=!0;break;default:var H;throw(H=new Error("Unsupported PKCS#12 contentType.")).contentType=D.derToOid(b.contentType),H}m.safeBags=Hx(R,E,p),g.safeContents.push(m)}}(s,o.value,t,r),s},dl.toPkcs12Asn1=function(e,t,r,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i,s=n.localKeyId;if(s!==null)s=vt.util.hexToBytes(s);else if(n.generateLocalKeyId)if(t){var o=vt.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=Ge.certificateFromPem(o)),(R=vt.md.sha1.create()).update(D.toDer(Ge.certificateToAsn1(o)).getBytes()),s=R.digest().getBytes()}else s=vt.random.getBytes(20);var a=[];s!==null&&a.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.localKeyId).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,s)])])),"friendlyName"in n&&a.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.friendlyName).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.BMPSTRING,!1,n.friendlyName)])])),a.length>0&&(i=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,a));var l=[],c=[];t!==null&&(c=vt.util.isArray(t)?t:[t]);for(var u=[],d=0;d<c.length;++d){typeof(t=c[d])=="string"&&(t=Ge.certificateFromPem(t));var h=d===0?i:void 0,f=Ge.certificateToAsn1(t),g=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.certBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.x509Certificate).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(f).getBytes())])])]),h]);u.push(g)}if(u.length>0){var y=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,u),E=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(y).getBytes())])]);l.push(E)}var p=null;if(e!==null){var v=Ge.wrapRsaPrivateKey(Ge.privateKeyToAsn1(e));p=r===null?D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.keyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[v]),i]):D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.pkcs8ShroudedKeyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[Ge.encryptPrivateKeyInfo(v,r,n)]),i]);var C=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[p]),b=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(C).getBytes())])]);l.push(b)}var k,m=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,l);if(n.useMac){var R=vt.md.sha1.create(),_=new vt.util.ByteBuffer(vt.random.getBytes(n.saltSize)),H=n.count,A=(e=dl.generateKey(r,_,3,H,20),vt.hmac.create());A.start(R,e),A.update(D.toDer(m).getBytes());var P=A.getMac();k=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.sha1).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,P.getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,_.getBytes()),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(H).getBytes())])}return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(3).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(m).getBytes())])]),k])},dl.generateKey=vt.pbe.generatePkcs12Key;var cs=Ve,Lf=cs.asn1,Lo=cs.pki=cs.pki||{};Lo.pemToDer=function(e){var t=cs.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return cs.util.createBuffer(t.body)},Lo.privateKeyFromPem=function(e){var t=cs.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Lf.fromDer(t.body);return Lo.privateKeyFromAsn1(n)},Lo.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Lf.toDer(Lo.privateKeyToAsn1(e)).getBytes()};return cs.pem.encode(r,{maxline:t})},Lo.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Lf.toDer(e).getBytes()};return cs.pem.encode(r,{maxline:t})};var ne=Ve,Dd=function(e,t,r,n){var i=ne.util.createBuffer(),s=e.length>>1,o=s+(1&e.length),a=e.substr(0,o),l=e.substr(s,o),c=ne.util.createBuffer(),u=ne.hmac.create();r=t+r;var d=Math.ceil(n/16),h=Math.ceil(n/20);u.start("MD5",a);var f=ne.util.createBuffer();c.putBytes(r);for(var g=0;g<d;++g)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),f.putBuffer(u.digest());u.start("SHA1",l);var y=ne.util.createBuffer();for(c.clear(),c.putBytes(r),g=0;g<h;++g)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),y.putBuffer(u.digest());return i.putBytes(ne.util.xorBytes(f.getBytes(),y.getBytes(),n)),i},jx=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=ne.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},Vx=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=ne.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},zr=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return ne.util.createBuffer(e.getBytes(r))},cn=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},I={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};I.SupportedVersions=[I.Versions.TLS_1_1,I.Versions.TLS_1_0],I.Version=I.SupportedVersions[0],I.MaxFragment=15360,I.ConnectionEnd={server:0,client:1},I.PRFAlgorithm={tls_prf_sha256:0},I.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},I.CipherType={stream:0,block:1,aead:2},I.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},I.CompressionMethod={none:0,deflate:1},I.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},I.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},I.Alert={},I.Alert.Level={warning:1,fatal:2},I.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},I.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},I.CipherSuites={},I.getCipherSuite=function(e){var t=null;for(var r in I.CipherSuites){var n=I.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},I.handleUnexpected=function(e,t){!e.open&&e.entity===I.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}})},I.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(I.queue(e,I.createAlert(e,{level:I.Alert.Level.warning,description:I.Alert.Description.no_renegotiation})),I.flush(e)),e.process()},I.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===I.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:ne.util.createBuffer(s.getBytes(32)),session_id:zr(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=zr(s,2),n.compression_methods=zr(s,1)),(o=r-(o-s.length()))>0){for(var a=zr(s,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:zr(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=zr(c.data,2);u.length()>0&&u.getByte()===0;)e.session.extensions.server_name.serverNameList.push(zr(u,2).getBytes())}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=I.getCipherSuite(n.cipher_suite);else for(var d=ne.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=I.getCipherSuite(d.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure},cipherSuite:ne.util.bytesToHex(n.cipher_suite)});e.session.compressionMethod=i?n.compression_method:I.CompressionMethod.none}return n},I.createSecurityParameters=function(e,t){var r=e.entity===I.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:I.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:I.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}},I.handleServerHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=Y1,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=qx,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.session.id=i,e.process()}},I.handleClientHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&((s=e.sessionCache.getSession(i))===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=ne.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var o,a=1;a<I.SupportedVersions.length&&!((o=I.SupportedVersions[a]).minor<=n.version.minor);++a);e.version={major:o.major,minor:o.minor},e.session.version=e.version}s!==null?(e.expect=Mf,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?Qx:Of,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.open=!0,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHello(e)})),e.session.resuming?(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.pending=I.createConnectionState(e),e.state.current.write=e.state.pending.write,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))):(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)})),e.fail||(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerKeyExchange(e)})),e.verifyClient!==!1&&I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificateRequest(e)})),I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHelloDone(e)})))),I.flush(e),e.process()}},I.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n,i,s=t.fragment,o={certificate_list:zr(s,3)},a=[];try{for(;o.certificate_list.length()>0;)n=zr(o.certificate_list,3),i=ne.asn1.fromDer(n),n=ne.pki.certificateFromAsn1(i,!0),a.push(n)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var l=e.entity===I.ConnectionEnd.client;!l&&e.verifyClient!==!0||a.length!==0?a.length===0?e.expect=l?W1:Of:(l?e.session.serverCertificate=a[0]:e.session.clientCertificate=a[0],I.verifyCertificateChain(e,a)&&(e.expect=l?W1:Of)):e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}}),e.process()},I.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});e.expect=zx,e.process()},I.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:zr(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=ne.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var a=e.session.clientHelloVersion;if(a.major!==o.pre_master_secret.charCodeAt(0)||a.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=ne.random.getBytes(48)}e.expect=Mf,e.session.clientCertificate!==null&&(e.expect=Xx),e.process()},I.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:zr(n,1),certificate_authorities:zr(n,2)};e.session.certificateRequest=i,e.expect=Kx,e.process()},I.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:zr(n,2).getBytes()},o=ne.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(o,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure}})}e.expect=Mf,e.process()},I.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.insufficient_security}},i=e.verify(e,n.alert.description,0,[]);if(i!==!0)return(i||i===0)&&(typeof i!="object"||ne.util.isArray(i)?typeof i=="number"&&(n.alert.description=i):(i.message&&(n.message=i.message),i.alert&&(n.alert.description=i.alert))),e.error(e,n)}e.session.certificateRequest!==null&&(t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)}),I.queue(e,t)),t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createClientKeyExchange(e)}),I.queue(e,t),e.expect=Yx;var s=function(o,a){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createCertificateVerify(o,a)})),I.queue(o,I.createRecord(o,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),o.state.pending=I.createConnectionState(o),o.state.current.write=o.state.pending.write,I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createFinished(o)})),o.expect=Y1,I.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);I.getClientSignature(e,s)},I.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var r=e.entity===I.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=I.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?Gx:Zx,e.process()},I.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();(n=ne.util.createBuffer()).putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===I.ConnectionEnd.client,a=o?"server finished":"client finished",l=e.session.sp;if((n=Dd(l.master_secret,a,n.getBytes(),12)).getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))),e.expect=o?Wx:Jx,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,I.flush(e),e.isConnected=!0,e.connected(e),e.process()},I.handleAlert=function(e,t){var r,n=t.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case I.Alert.Description.close_notify:r="Connection closed.";break;case I.Alert.Description.unexpected_message:r="Unexpected message.";break;case I.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case I.Alert.Description.decryption_failed:r="Decryption failed.";break;case I.Alert.Description.record_overflow:r="Record overflow.";break;case I.Alert.Description.decompression_failure:r="Decompression failed.";break;case I.Alert.Description.handshake_failure:r="Handshake failure.";break;case I.Alert.Description.bad_certificate:r="Bad certificate.";break;case I.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case I.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case I.Alert.Description.certificate_expired:r="Certificate expired.";break;case I.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case I.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case I.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case I.Alert.Description.access_denied:r="Access denied.";break;case I.Alert.Description.decode_error:r="Decode error.";break;case I.Alert.Description.decrypt_error:r="Decrypt error.";break;case I.Alert.Description.export_restriction:r="Export restriction.";break;case I.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case I.Alert.Description.insufficient_security:r="Insufficient security.";break;case I.Alert.Description.internal_error:r="Internal error.";break;case I.Alert.Description.user_canceled:r="User canceled.";break;case I.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(i.description===I.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===I.ConnectionEnd.client?"server":"client",alert:i}),e.process()},I.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=ne.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in Pd[e.entity][e.expect]?(e.entity!==I.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ne.md.md5.create(),sha1:ne.md.sha1.create()}),n!==I.HandshakeType.hello_request&&n!==I.HandshakeType.certificate_verify&&n!==I.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),Pd[e.entity][e.expect][n](e,t,i)):I.handleUnexpected(e,t)},I.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},I.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===I.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();I.queue(e,I.createRecord(e,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_response,s)})),I.flush(e)}else if(n===I.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,ne.util.createBuffer(s))}e.process()};var qx=1,W1=2,zx=3,Kx=4,Y1=5,Gx=6,Wx=7,Yx=8,Qx=1,Of=2,Xx=3,Mf=4,Zx=5,Jx=6,T=I.handleUnexpected,Q1=I.handleChangeCipherSpec,ar=I.handleAlert,br=I.handleHandshake,X1=I.handleApplicationData,lr=I.handleHeartbeat,Sg=[];Sg[I.ConnectionEnd.client]=[[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[Q1,ar,T,T,lr],[T,ar,br,T,lr],[T,ar,br,X1,lr],[T,ar,br,T,lr]],Sg[I.ConnectionEnd.server]=[[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[Q1,ar,T,T,lr],[T,ar,br,T,lr],[T,ar,br,X1,lr],[T,ar,br,T,lr]];var Xi=I.handleHelloRequest,eN=I.handleServerHello,Eb=I.handleCertificate,Z1=I.handleServerKeyExchange,Uf=I.handleCertificateRequest,bu=I.handleServerHelloDone,Cb=I.handleFinished,Pd=[];Pd[I.ConnectionEnd.client]=[[T,T,eN,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,Eb,Z1,Uf,bu,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,Z1,Uf,bu,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,Uf,bu,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,T,bu,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Cb],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Xi,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var tN=I.handleClientHello,rN=I.handleClientKeyExchange,nN=I.handleCertificateVerify;Pd[I.ConnectionEnd.server]=[[T,tN,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,Eb,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,rN,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,nN,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Cb],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]],I.generateKeys=function(e,t){var r=Dd,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===I.Versions.TLS_1_0.major&&e.version.minor===I.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,i),a={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(a.client_write_IV=o.getBytes(t.fixed_iv_length),a.server_write_IV=o.getBytes(t.fixed_iv_length)),a},I.createConnectionState=function(e){var t=e.entity===I.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,o){return n.read.cipherFunction(o,n.read)?n.read.compressFunction(s,o,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,o){return n.write.compressFunction(s,o,n.write)?n.write.cipherFunction(o,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=I.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case I.CompressionMethod.none:break;case I.CompressionMethod.deflate:n.read.compressFunction=Vx,n.write.compressFunction=jx;break;default:throw new Error("Unsupported compression algorithm.")}}return n},I.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=ne.util.createBuffer();return r.putInt32(t),r.putBytes(ne.random.getBytes(28)),r},I.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},I.createAlert=function(e,t){var r=ne.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),I.createRecord(e,{type:I.ContentType.alert,data:r})},I.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=ne.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=ne.util.createBuffer();s.putByte(I.CompressionMethod.none);var o=s.length(),a=ne.util.createBuffer();if(e.virtualHost){var l=ne.util.createBuffer();l.putByte(0),l.putByte(0);var c=ne.util.createBuffer();c.putByte(0),cn(c,2,ne.util.createBuffer(e.virtualHost));var u=ne.util.createBuffer();cn(u,2,c),cn(l,2,u),a.putBuffer(l)}var d=a.length();d>0&&(d+=2);var h=e.session.id,f=h.length+1+2+4+28+2+i+1+o+d,g=ne.util.createBuffer();return g.putByte(I.HandshakeType.client_hello),g.putInt24(f),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),cn(g,1,ne.util.createBuffer(h)),cn(g,2,t),cn(g,1,s),d>0&&cn(g,2,a),g},I.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=ne.util.createBuffer();return n.putByte(I.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),cn(n,1,ne.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n},I.createCertificate=function(e){var t,r=e.entity===I.ConnectionEnd.client,n=null;e.getCertificate&&(t=r?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,t));var i=ne.util.createBuffer();if(n!==null)try{ne.util.isArray(n)||(n=[n]);for(var s=null,o=0;o<n.length;++o){var a=ne.pem.decode(n[o])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=ne.util.createBuffer(a.body);s===null&&(s=ne.asn1.fromDer(c.bytes(),!1));var u=ne.util.createBuffer();cn(u,3,c),i.putBuffer(u)}n=ne.pki.certificateFromAsn1(s),r?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(f){return e.error(e,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var d=3+i.length(),h=ne.util.createBuffer();return h.putByte(I.HandshakeType.certificate),h.putInt24(d),cn(h,3,i),h},I.createClientKeyExchange=function(e){var t=ne.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(ne.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=(t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=ne.util.createBuffer();return i.putByte(I.HandshakeType.client_key_exchange),i.putInt24(n),i.putInt16(t.length),i.putBytes(t),i},I.createServerKeyExchange=function(e){return ne.util.createBuffer()},I.getClientSignature=function(e,t){var r=ne.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var o=null;if(n.getPrivateKey)try{o=n.getPrivateKey(n,n.session.clientCertificate),o=ne.pki.privateKeyFromPem(o)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}})}o===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):i=o.sign(i,null),s(n,i)},e.getSignature(e,r,t)},I.createCertificateVerify=function(e,t){var r=t.length+2,n=ne.util.createBuffer();return n.putByte(I.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n},I.createCertificateRequest=function(e){var t=ne.util.createBuffer();t.putByte(1);var r=ne.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=ne.pki.distinguishedNameToAsn1(i.subject),o=ne.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var a=1+t.length()+2+r.length(),l=ne.util.createBuffer();return l.putByte(I.HandshakeType.certificate_request),l.putInt24(a),cn(l,1,t),cn(l,2,r),l},I.createServerHelloDone=function(e){var t=ne.util.createBuffer();return t.putByte(I.HandshakeType.server_hello_done),t.putInt24(0),t},I.createChangeCipherSpec=function(){var e=ne.util.createBuffer();return e.putByte(1),e},I.createFinished=function(e){var t=ne.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===I.ConnectionEnd.client,n=e.session.sp,i=r?"client finished":"server finished";t=Dd(n.master_secret,i,t.getBytes(),12);var s=ne.util.createBuffer();return s.putByte(I.HandshakeType.finished),s.putInt24(t.length()),s.putBuffer(t),s},I.createHeartbeat=function(e,t,r){r===void 0&&(r=t.length);var n=ne.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(ne.random.getBytes(s)),n},I.queue=function(e,t){if(t&&(t.fragment.length()!==0||t.type!==I.ContentType.handshake&&t.type!==I.ContentType.alert&&t.type!==I.ContentType.change_cipher_spec)){if(t.type===I.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=I.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>I.MaxFragment;)n.push(I.createRecord(e,{type:t.type,data:ne.util.createBuffer(i.slice(0,I.MaxFragment))})),i=i.slice(I.MaxFragment);i.length>0&&n.push(I.createRecord(e,{type:t.type,data:ne.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var o=n[s];e.state.current.write.update(e,o)&&e.records.push(o)}}},I.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Hf=function(e){switch(e){case!0:return!0;case ne.pki.certificateError.bad_certificate:return I.Alert.Description.bad_certificate;case ne.pki.certificateError.unsupported_certificate:return I.Alert.Description.unsupported_certificate;case ne.pki.certificateError.certificate_revoked:return I.Alert.Description.certificate_revoked;case ne.pki.certificateError.certificate_expired:return I.Alert.Description.certificate_expired;case ne.pki.certificateError.certificate_unknown:return I.Alert.Description.certificate_unknown;case ne.pki.certificateError.unknown_ca:return I.Alert.Description.unknown_ca;default:return I.Alert.Description.bad_certificate}};for(var Ff in I.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,o,a){Hf(s);var l=e.verify(e,s,o,a);if(l!==!0){if(typeof l=="object"&&!ne.util.isArray(l)){var c=new Error("The application rejected the certificate.");throw c.send=!0,c.alert={level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate},l.message&&(c.message=l.message),l.alert&&(c.alert.description=l.alert),c}l!==s&&(l=function(u){switch(u){case!0:return!0;case I.Alert.Description.bad_certificate:return ne.pki.certificateError.bad_certificate;case I.Alert.Description.unsupported_certificate:return ne.pki.certificateError.unsupported_certificate;case I.Alert.Description.certificate_revoked:return ne.pki.certificateError.certificate_revoked;case I.Alert.Description.certificate_expired:return ne.pki.certificateError.certificate_expired;case I.Alert.Description.certificate_unknown:return ne.pki.certificateError.certificate_unknown;case I.Alert.Description.unknown_ca:return ne.pki.certificateError.unknown_ca;default:return ne.pki.certificateError.bad_certificate}}(l))}return l},ne.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||ne.util.isArray(i))&&(i={send:!0,alert:{level:I.Alert.Level.fatal,description:Hf(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:I.Alert.Level.fatal,description:Hf(i.error)}),e.error(e,i)}return!e.fail},I.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{for(var n in(r={}).cache=e||{},r.capacity=Math.max(t||100,1),r.order=[],e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,o=null;if(i?o=ne.util.bytesToHex(i):r.order.length>0&&(o=r.order[0]),o!==null&&o in r.cache){for(var a in s=r.cache[o],delete r.cache[o],r.order)if(r.order[a]===o){r.order.splice(a,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=ne.util.bytesToHex(i),r.order.push(o),r.cache[o]=s}}return r},I.createConnection=function(e){var t=null;t=e.caStore?ne.util.isArray(e.caStore)?ne.pki.createCaStore(e.caStore):e.caStore:ne.pki.createCaStore();var r=e.cipherSuites||null;if(r===null)for(var n in r=[],I.CipherSuites)r.push(I.CipherSuites[n]);var i=e.server?I.ConnectionEnd.server:I.ConnectionEnd.client,s=e.sessionCache?I.createSessionCache(e.sessionCache):null,o={version:{major:I.Version.major,minor:I.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(a,l,c,u){return l},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:ne.util.createBuffer(),tlsData:ne.util.createBuffer(),data:ne.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(a,l){l.origin=l.origin||(a.entity===I.ConnectionEnd.client?"client":"server"),l.send&&(I.queue(a,I.createAlert(a,l.alert)),I.flush(a));var c=l.fatal!==!1;c&&(a.fail=!0),e.error(a,l),c&&a.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(a){o.version={major:I.Version.major,minor:I.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=(o.entity,I.ConnectionEnd.client,0),o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(a||a===void 0),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=I.createConnectionState(o)}};return o.reset(),o.handshake=function(a){if(o.entity!==I.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0;var l=null;(a=a||"").length>0&&(o.sessionCache&&(l=o.sessionCache.getSession(a)),l===null&&(a="")),a.length===0&&o.sessionCache&&(l=o.sessionCache.getSession())!==null&&(a=l.id),o.session={id:a,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ne.md.md5.create(),sha1:ne.md.sha1.create()},l&&(o.version=l.version,o.session.sp=l.sp),o.session.sp.client_random=I.createRandom().getBytes(),o.open=!0,I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createClientHello(o)})),I.flush(o)}},o.process=function(a){var l=0;return a&&o.input.putBytes(a),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(l=function(c){var u=0,d=c.input,h=d.length();if(h<5)u=5-h;else{c.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:ne.util.createBuffer(),ready:!1};var f=c.record.version.major===c.version.major;f&&c.session&&c.session.version&&(f=c.record.version.minor===c.version.minor),f||c.error(c,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}})}return u}(o)),o.fail||o.record===null||o.record.ready||(l=function(c){var u=0,d=c.input,h=d.length();return h<c.record.length?u=c.record.length-h:(c.record.fragment.putBytes(d.getBytes(c.record.length)),d.compact(),c.state.current.read.update(c,c.record)&&(c.fragmented!==null&&(c.fragmented.type===c.record.type?(c.fragmented.fragment.putBuffer(c.record.fragment),c.record=c.fragmented):c.error(c,{message:"Invalid fragmented record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}})),c.record.ready=!0)),u}(o)),!o.fail&&o.record!==null&&o.record.ready&&function(c,u){var d=u.type-I.ContentType.change_cipher_spec,h=Sg[c.entity][c.expect];d in h?h[d](c,u):I.handleUnexpected(c,u)}(o,o.record)),l},o.prepare=function(a){return I.queue(o,I.createRecord(o,{type:I.ContentType.application_data,data:ne.util.createBuffer(a)})),I.flush(o)},o.prepareHeartbeatRequest=function(a,l){return a instanceof ne.util.ByteBuffer&&(a=a.bytes()),l===void 0&&(l=a.length),o.expectedHeartbeatPayload=a,I.queue(o,I.createRecord(o,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_request,a,l)})),I.flush(o)},o.close=function(a){if(!o.fail&&o.sessionCache&&o.session){var l={id:o.session.id,version:o.session.version,sp:o.session.sp};l.sp.keys=null,o.sessionCache.setSession(l.id,l)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,I.queue(o,I.createAlert(o,{level:I.Alert.Level.warning,description:I.Alert.Description.close_notify})),I.flush(o)),o.closed(o)),o.reset(a)},o},ne.tls=ne.tls||{},I)typeof I[Ff]!="function"&&(ne.tls[Ff]=I[Ff]);ne.tls.prf_tls1=Dd,ne.tls.hmac_sha1=function(e,t,r){var n=ne.hmac.create();n.start("SHA1",e);var i=ne.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},ne.tls.createSessionCache=I.createSessionCache,ne.tls.createConnection=I.createConnection;var Is=Ve,hn=Is.tls;function J1(e,t,r){var n=t.entity===Is.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:Is.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:Is.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=aN,e.write.cipherFunction=iN,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=hn.hmac_sha1}function iN(e,t){var r,n=!1,i=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(i),t.updateSequenceNumber(),r=e.version.minor===hn.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:Is.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:r}),e.version.minor>=hn.Versions.TLS_1_1.minor&&s.output.putBytes(r),s.update(e.fragment),s.finish(sN)&&(e.fragment=s.output,e.length=e.fragment.length(),n=!0),n}function sN(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function oN(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),o=i-1-s;o<i-1;++o)n=n&&t.at(o)==s;n&&t.truncate(s+1)}return n}function aN(e,t){var r,n=!1;r=e.version.minor===hn.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(oN);var s=t.macLength,o=Is.random.getBytesSync(s),a=i.output.length();a>=s?(e.fragment=i.output.getBytes(a-s),o=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=Is.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=function(c,u,d){var h=Is.hmac.create();return h.start("SHA1",c),h.update(u),u=h.digest().getBytes(),h.start(null,null),h.update(d),d=h.digest().getBytes(),u===d}(t.macKey,o,l)&&n,n}hn.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=hn.BulkCipherAlgorithm.aes,e.cipher_type=hn.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=hn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:J1},hn.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=hn.BulkCipherAlgorithm.aes,e.cipher_type=hn.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=hn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:J1};var wt=Ve,bl=wt.sha512=wt.sha512||{};wt.md.sha512=wt.md.algorithms.sha512=bl;var e2=wt.sha384=wt.sha512.sha384=wt.sha512.sha384||{};e2.create=function(){return bl.create("SHA-384")},wt.md.sha384=wt.md.algorithms.sha384=e2,wt.sha512.sha256=wt.sha512.sha256||{create:function(){return bl.create("SHA-512/256")}},wt.md["sha512/256"]=wt.md.algorithms["sha512/256"]=wt.sha512.sha256,wt.sha512.sha224=wt.sha512.sha224||{create:function(){return bl.create("SHA-512/224")}},wt.md["sha512/224"]=wt.md.algorithms["sha512/224"]=wt.sha512.sha224,bl.create=function(e){if(t2||(jf="",jf+=wt.util.fillString("\0",128),wg=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(Oo={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Oo["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Oo["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Oo["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],t2=!0),e===void 0&&(e="SHA-512"),!(e in Oo))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Oo[e],r=null,n=wt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);for(n=wt.util.createBuffer(),r=new Array(t.length),c=0;c<t.length;++c)r[c]=t[c].slice(0);return a}};return a.start(),a.update=function(l,c){c==="utf8"&&(l=wt.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=u[1],u[1]=u[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),r2(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=wt.util.createBuffer();l.putBytes(n.bytes());var c,u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;l.putBytes(jf.substr(0,a.blockLength-u));for(var d=8*a.fullMessageLength[0],h=0;h<a.fullMessageLength.length-1;++h)d+=(c=8*a.fullMessageLength[h+1])/4294967296>>>0,l.putInt32(d>>>0),d=c>>>0;l.putInt32(d);var f=new Array(r.length);for(h=0;h<r.length;++h)f[h]=r[h].slice(0);r2(f,i,l);var g,y=wt.util.createBuffer();for(g=e==="SHA-512"?f.length:e==="SHA-384"?f.length-2:f.length-4,h=0;h<g;++h)y.putInt32(f[h][0]),h===g-1&&e==="SHA-512/224"||y.putInt32(f[h][1]);return y},a};var jf=null,t2=!1,wg=null,Oo=null;function r2(e,t,r){for(var n,i,s,o,a,l,c,u,d,h,f,g,y,E,p,v,C,b,k,m,R,_,H,A,P,B,N,z,O,F,M,$,q,W=r.length();W>=128;){for(N=0;N<16;++N)t[N][0]=r.getInt32()>>>0,t[N][1]=r.getInt32()>>>0;for(;N<80;++N)n=(((z=(F=t[N-2])[0])>>>19|(O=F[1])<<13)^(O>>>29|z<<3)^z>>>6)>>>0,i=((z<<13|O>>>19)^(O<<3|z>>>29)^(z<<26|O>>>6))>>>0,s=(((z=($=t[N-15])[0])>>>1|(O=$[1])<<31)^(z>>>8|O<<24)^z>>>7)>>>0,o=((z<<31|O>>>1)^(z<<24|O>>>8)^(z<<25|O>>>7))>>>0,M=t[N-7],q=t[N-16],O=i+M[1]+o+q[1],t[N][0]=n+M[0]+s+q[0]+(O/4294967296>>>0)>>>0,t[N][1]=O>>>0;for(f=e[0][0],g=e[0][1],y=e[1][0],E=e[1][1],p=e[2][0],v=e[2][1],C=e[3][0],b=e[3][1],k=e[4][0],m=e[4][1],R=e[5][0],_=e[5][1],H=e[6][0],A=e[6][1],P=e[7][0],B=e[7][1],N=0;N<80;++N)c=((k>>>14|m<<18)^(k>>>18|m<<14)^(m>>>9|k<<23))>>>0,u=(H^k&(R^H))>>>0,a=((f>>>28|g<<4)^(g>>>2|f<<30)^(g>>>7|f<<25))>>>0,l=((f<<4|g>>>28)^(g<<30|f>>>2)^(g<<25|f>>>7))>>>0,d=(f&y|p&(f^y))>>>0,h=(g&E|v&(g^E))>>>0,O=B+(((k<<18|m>>>14)^(k<<14|m>>>18)^(m<<23|k>>>9))>>>0)+((A^m&(_^A))>>>0)+wg[N][1]+t[N][1],n=P+c+u+wg[N][0]+t[N][0]+(O/4294967296>>>0)>>>0,i=O>>>0,s=a+d+((O=l+h)/4294967296>>>0)>>>0,o=O>>>0,P=H,B=A,H=R,A=_,R=k,_=m,k=C+n+((O=b+i)/4294967296>>>0)>>>0,m=O>>>0,C=p,b=v,p=y,v=E,y=f,E=g,f=n+s+((O=i+o)/4294967296>>>0)>>>0,g=O>>>0;O=e[0][1]+g,e[0][0]=e[0][0]+f+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+E,e[1][0]=e[1][0]+y+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+v,e[2][0]=e[2][0]+p+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+b,e[3][0]=e[3][0]+C+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+m,e[4][0]=e[4][0]+k+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+_,e[5][0]=e[5][0]+R+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+A,e[6][0]=e[6][0]+H+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+B,e[7][0]=e[7][0]+P+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,W-=128}}var bg={},Qt=Ve.asn1;bg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},bg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var dr=Ve,Sb=bg,lN=Sb.publicKeyValidator,cN=Sb.privateKeyValidator;if(uN===void 0)var uN=dr.jsbn.BigInteger;var Tg=dr.util.ByteBuffer,Br=ee===void 0?Uint8Array:ee;dr.pki=dr.pki||{},dr.pki.ed25519=dr.ed25519=dr.ed25519||{};var Ke=dr.ed25519;function Ei(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Br)return t;var r=e.encoding;if(t===void 0){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),r="binary"}if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(ee!==void 0)return ee.from(t,r);t=new Tg(t,r)}else if(!(t instanceof Tg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Br(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}Ke.constants={},Ke.constants.PUBLIC_KEY_BYTE_LENGTH=32,Ke.constants.PRIVATE_KEY_BYTE_LENGTH=64,Ke.constants.SEED_BYTE_LENGTH=32,Ke.constants.SIGN_BYTE_LENGTH=64,Ke.constants.HASH_BYTE_LENGTH=64,Ke.generateKeyPair=function(e){var t=(e=e||{}).seed;if(t===void 0)t=dr.random.getBytesSync(Ke.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Ke.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Ke.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Ei({message:t,encoding:"binary"});for(var r=new Br(Ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Br(Ke.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return function(s,o){var a,l=[Pe(),Pe(),Pe(),Pe()],c=fl(o,32);for(c[0]&=248,c[31]&=127,c[31]|=64,Kf(l,c),zf(s,l),a=0;a<32;++a)o[a+32]=s[a]}(r,n),{publicKey:r,privateKey:n}},Ke.privateKeyFromAsn1=function(e){var t={},r=[];if(!dr.asn1.validate(e,cN,t,r)){var n=new Error("Invalid Key.");throw n.errors=r,n}var i=dr.asn1.derToOid(t.privateKeyOid),s=dr.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.privateKey;return{privateKeyBytes:Ei({message:dr.asn1.fromDer(o).value,encoding:"binary"})}},Ke.publicKeyFromAsn1=function(e){var t={},r=[];if(!dr.asn1.validate(e,lN,t,r)){var n=new Error("Invalid Key.");throw n.errors=r,n}var i=dr.asn1.derToOid(t.publicKeyOid),s=dr.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==Ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Ei({message:o,encoding:"binary"})},Ke.publicKeyFromPrivateKey=function(e){var t=Ei({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==Ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ke.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Br(Ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r},Ke.sign=function(e){var t=Ei(e=e||{}),r=Ei({message:e.privateKey,encoding:"binary"});if(r.length===Ke.constants.SEED_BYTE_LENGTH)r=Ke.generateKeyPair({seed:r}).privateKey;else if(r.length!==Ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ke.constants.SEED_BYTE_LENGTH+" or "+Ke.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length);(function(o,a,l,c){var u,d,h=new Float64Array(64),f=[Pe(),Pe(),Pe(),Pe()],g=fl(c,32);for(g[0]&=248,g[31]&=127,g[31]|=64,u=0;u<l;++u)o[64+u]=a[u];for(u=0;u<32;++u)o[32+u]=g[32+u];var y=fl(o.subarray(32),l+32);for(qf(y),Kf(f,y),zf(o,f),u=32;u<64;++u)o[u]=c[u];var E=fl(o,l+64);for(qf(E),u=32;u<64;++u)h[u]=0;for(u=0;u<32;++u)h[u]=y[u];for(u=0;u<32;++u)for(d=0;d<32;d++)h[u+d]+=E[u]*g[d];wb(o.subarray(32),h)})(n,t,t.length,r);for(var i=new Br(Ke.constants.SIGN_BYTE_LENGTH),s=0;s<i.length;++s)i[s]=n[s];return i},Ke.verify=function(e){var t=Ei(e=e||{});if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Ei({message:e.signature,encoding:"binary"});if(r.length!==Ke.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Ke.constants.SIGN_BYTE_LENGTH);var n=Ei({message:e.publicKey,encoding:"binary"});if(n.length!==Ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Ke.constants.PUBLIC_KEY_BYTE_LENGTH);var i,s=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length),o=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length);for(i=0;i<Ke.constants.SIGN_BYTE_LENGTH;++i)s[i]=r[i];for(i=0;i<t.length;++i)s[i+Ke.constants.SIGN_BYTE_LENGTH]=t[i];return function(a,l,c,u){var d,h=new Br(32),f=[Pe(),Pe(),Pe(),Pe()],g=[Pe(),Pe(),Pe(),Pe()];if(c<64||function(E,p){var v=Pe(),C=Pe(),b=Pe(),k=Pe(),m=Pe(),R=Pe(),_=Pe();return fs(E[2],Bd),function(H,A){var P;for(P=0;P<16;++P)H[P]=A[2*P]+(A[2*P+1]<<8);H[15]&=32767}(E[1],p),Gs(b,E[1]),gt(k,b,dN),oa(b,b,E[2]),Vo(k,E[2],k),Gs(m,k),Gs(R,m),gt(_,R,m),gt(v,_,b),gt(v,v,k),function(H,A){var P,B=Pe();for(P=0;P<16;++P)B[P]=A[P];for(P=250;P>=0;--P)Gs(B,B),P!==1&&gt(B,B,A);for(P=0;P<16;++P)H[P]=B[P]}(v,v),gt(v,v,b),gt(v,v,k),gt(v,v,k),gt(E[0],v,k),Gs(C,E[0]),gt(C,C,k),o2(C,b)&&gt(E[0],E[0],fN),Gs(C,E[0]),gt(C,C,k),o2(C,b)?-1:(Tb(E[0])===p[31]>>7&&oa(E[0],Ig,E[0]),gt(E[3],E[0],E[1]),0)}(g,u))return-1;for(d=0;d<c;++d)a[d]=l[d];for(d=0;d<32;++d)a[d+32]=u[d];var y=fl(a,c);if(qf(y),Ib(f,g,y),Kf(g,l.subarray(32)),Ag(f,g),zf(h,f),c-=64,bb(l,0,h,0)){for(d=0;d<c;++d)a[d]=0;return-1}for(d=0;d<c;++d)a[d]=l[d+64];return c}(o,s,s.length,n)>=0};var Ig=Pe(),Bd=Pe([1]),dN=Pe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),hN=Pe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),n2=Pe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),i2=Pe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Vf=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),fN=Pe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function fl(e,t){var r=dr.md.sha512.create(),n=new Tg(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(ee!==void 0)return ee.from(i,"binary");for(var s=new Br(Ke.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=i.charCodeAt(o);return s}function wb(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*Vf[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*Vf[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*Vf[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function qf(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;wb(e,t)}function Ag(e,t){var r=Pe(),n=Pe(),i=Pe(),s=Pe(),o=Pe(),a=Pe(),l=Pe(),c=Pe(),u=Pe();oa(r,e[1],e[0]),oa(u,t[1],t[0]),gt(r,r,u),Vo(n,e[0],e[1]),Vo(u,t[0],t[1]),gt(n,n,u),gt(i,e[3],t[3]),gt(i,i,hN),gt(s,e[2],t[2]),Vo(s,s,s),oa(o,n,r),oa(a,s,i),Vo(l,s,i),Vo(c,n,r),gt(e[0],o,a),gt(e[1],c,l),gt(e[2],l,a),gt(e[3],o,c)}function s2(e,t,r){for(var n=0;n<4;++n)Ab(e[n],t[n],r)}function zf(e,t){var r=Pe(),n=Pe(),i=Pe();(function(s,o){var a,l=Pe();for(a=0;a<16;++a)l[a]=o[a];for(a=253;a>=0;--a)Gs(l,l),a!==2&&a!==4&&gt(l,l,o);for(a=0;a<16;++a)s[a]=l[a]})(i,t[2]),gt(r,t[0],i),gt(n,t[1],i),$d(e,n),e[31]^=Tb(r)<<7}function $d(e,t){var r,n,i,s=Pe(),o=Pe();for(r=0;r<16;++r)o[r]=t[r];for(Gf(o),Gf(o),Gf(o),n=0;n<2;++n){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Ab(o,s,1-i)}for(r=0;r<16;r++)e[2*r]=255&o[r],e[2*r+1]=o[r]>>8}function o2(e,t){var r=new Br(32),n=new Br(32);return $d(r,e),$d(n,t),bb(r,0,n,0)}function bb(e,t,r,n){return function(i,s,o,a,l){var c,u=0;for(c=0;c<l;++c)u|=i[s+c]^o[a+c];return(1&u-1>>>8)-1}(e,t,r,n,32)}function Tb(e){var t=new Br(32);return $d(t,e),1&t[0]}function Ib(e,t,r){var n,i;for(fs(e[0],Ig),fs(e[1],Bd),fs(e[2],Bd),fs(e[3],Ig),i=255;i>=0;--i)s2(e,t,n=r[i/8|0]>>(7&i)&1),Ag(t,e),Ag(e,e),s2(e,t,n)}function Kf(e,t){var r=[Pe(),Pe(),Pe(),Pe()];fs(r[0],n2),fs(r[1],i2),fs(r[2],Bd),gt(r[3],n2,i2),Ib(e,r,t)}function fs(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function Gf(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function Ab(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function Pe(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function Vo(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function oa(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Gs(e,t){gt(e,t,t)}function gt(e,t,r){var n,i,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,f=0,g=0,y=0,E=0,p=0,v=0,C=0,b=0,k=0,m=0,R=0,_=0,H=0,A=0,P=0,B=0,N=0,z=0,O=0,F=0,M=0,$=0,q=0,W=r[0],ie=r[1],ae=r[2],ve=r[3],Ee=r[4],Ie=r[5],Re=r[6],Ae=r[7],Fe=r[8],Ue=r[9],$e=r[10],ke=r[11],Y=r[12],de=r[13],le=r[14],ye=r[15];s+=(n=t[0])*W,o+=n*ie,a+=n*ae,l+=n*ve,c+=n*Ee,u+=n*Ie,d+=n*Re,h+=n*Ae,f+=n*Fe,g+=n*Ue,y+=n*$e,E+=n*ke,p+=n*Y,v+=n*de,C+=n*le,b+=n*ye,o+=(n=t[1])*W,a+=n*ie,l+=n*ae,c+=n*ve,u+=n*Ee,d+=n*Ie,h+=n*Re,f+=n*Ae,g+=n*Fe,y+=n*Ue,E+=n*$e,p+=n*ke,v+=n*Y,C+=n*de,b+=n*le,k+=n*ye,a+=(n=t[2])*W,l+=n*ie,c+=n*ae,u+=n*ve,d+=n*Ee,h+=n*Ie,f+=n*Re,g+=n*Ae,y+=n*Fe,E+=n*Ue,p+=n*$e,v+=n*ke,C+=n*Y,b+=n*de,k+=n*le,m+=n*ye,l+=(n=t[3])*W,c+=n*ie,u+=n*ae,d+=n*ve,h+=n*Ee,f+=n*Ie,g+=n*Re,y+=n*Ae,E+=n*Fe,p+=n*Ue,v+=n*$e,C+=n*ke,b+=n*Y,k+=n*de,m+=n*le,R+=n*ye,c+=(n=t[4])*W,u+=n*ie,d+=n*ae,h+=n*ve,f+=n*Ee,g+=n*Ie,y+=n*Re,E+=n*Ae,p+=n*Fe,v+=n*Ue,C+=n*$e,b+=n*ke,k+=n*Y,m+=n*de,R+=n*le,_+=n*ye,u+=(n=t[5])*W,d+=n*ie,h+=n*ae,f+=n*ve,g+=n*Ee,y+=n*Ie,E+=n*Re,p+=n*Ae,v+=n*Fe,C+=n*Ue,b+=n*$e,k+=n*ke,m+=n*Y,R+=n*de,_+=n*le,H+=n*ye,d+=(n=t[6])*W,h+=n*ie,f+=n*ae,g+=n*ve,y+=n*Ee,E+=n*Ie,p+=n*Re,v+=n*Ae,C+=n*Fe,b+=n*Ue,k+=n*$e,m+=n*ke,R+=n*Y,_+=n*de,H+=n*le,A+=n*ye,h+=(n=t[7])*W,f+=n*ie,g+=n*ae,y+=n*ve,E+=n*Ee,p+=n*Ie,v+=n*Re,C+=n*Ae,b+=n*Fe,k+=n*Ue,m+=n*$e,R+=n*ke,_+=n*Y,H+=n*de,A+=n*le,P+=n*ye,f+=(n=t[8])*W,g+=n*ie,y+=n*ae,E+=n*ve,p+=n*Ee,v+=n*Ie,C+=n*Re,b+=n*Ae,k+=n*Fe,m+=n*Ue,R+=n*$e,_+=n*ke,H+=n*Y,A+=n*de,P+=n*le,B+=n*ye,g+=(n=t[9])*W,y+=n*ie,E+=n*ae,p+=n*ve,v+=n*Ee,C+=n*Ie,b+=n*Re,k+=n*Ae,m+=n*Fe,R+=n*Ue,_+=n*$e,H+=n*ke,A+=n*Y,P+=n*de,B+=n*le,N+=n*ye,y+=(n=t[10])*W,E+=n*ie,p+=n*ae,v+=n*ve,C+=n*Ee,b+=n*Ie,k+=n*Re,m+=n*Ae,R+=n*Fe,_+=n*Ue,H+=n*$e,A+=n*ke,P+=n*Y,B+=n*de,N+=n*le,z+=n*ye,E+=(n=t[11])*W,p+=n*ie,v+=n*ae,C+=n*ve,b+=n*Ee,k+=n*Ie,m+=n*Re,R+=n*Ae,_+=n*Fe,H+=n*Ue,A+=n*$e,P+=n*ke,B+=n*Y,N+=n*de,z+=n*le,O+=n*ye,p+=(n=t[12])*W,v+=n*ie,C+=n*ae,b+=n*ve,k+=n*Ee,m+=n*Ie,R+=n*Re,_+=n*Ae,H+=n*Fe,A+=n*Ue,P+=n*$e,B+=n*ke,N+=n*Y,z+=n*de,O+=n*le,F+=n*ye,v+=(n=t[13])*W,C+=n*ie,b+=n*ae,k+=n*ve,m+=n*Ee,R+=n*Ie,_+=n*Re,H+=n*Ae,A+=n*Fe,P+=n*Ue,B+=n*$e,N+=n*ke,z+=n*Y,O+=n*de,F+=n*le,M+=n*ye,C+=(n=t[14])*W,b+=n*ie,k+=n*ae,m+=n*ve,R+=n*Ee,_+=n*Ie,H+=n*Re,A+=n*Ae,P+=n*Fe,B+=n*Ue,N+=n*$e,z+=n*ke,O+=n*Y,F+=n*de,M+=n*le,$+=n*ye,b+=(n=t[15])*W,o+=38*(m+=n*ae),a+=38*(R+=n*ve),l+=38*(_+=n*Ee),c+=38*(H+=n*Ie),u+=38*(A+=n*Re),d+=38*(P+=n*Ae),h+=38*(B+=n*Fe),f+=38*(N+=n*Ue),g+=38*(z+=n*$e),y+=38*(O+=n*ke),E+=38*(F+=n*Y),p+=38*(M+=n*de),v+=38*($+=n*le),C+=38*(q+=n*ye),s=(n=(s+=38*(k+=n*ie))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),C=(n=C+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),C=(n=C+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=g,e[10]=y,e[11]=E,e[12]=p,e[13]=v,e[14]=C,e[15]=b}var Gr=Ve;Gr.kem=Gr.kem||{};var a2=Gr.jsbn.BigInteger;function l2(e,t,r,n){e.generate=function(i,s){for(var o=new Gr.util.ByteBuffer,a=Math.ceil(s/n)+r,l=new Gr.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),t.start(),t.update(i+l.getBytes());var u=t.digest();o.putBytes(u.getBytes(n))}return o.truncate(o.length()-s),o.getBytes()}}Gr.kem.rsa={},Gr.kem.rsa.create=function(e,t){var r=(t=t||{}).prng||Gr.random,n={encrypt:function(i,s){var o,a=Math.ceil(i.n.bitLength()/8);do o=new a2(Gr.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(a2.ONE)<=0);var l=a-(o=Gr.util.hexToBytes(o.toString(16))).length;return l>0&&(o=Gr.util.fillString("\0",l)+o),{encapsulation:i.encrypt(o,"NONE"),key:e.generate(o,s)}},decrypt:function(i,s,o){var a=i.decrypt(s,"NONE");return e.generate(a,o)}};return n},Gr.kem.kdf1=function(e,t){l2(this,e,0,t||e.digestLength)},Gr.kem.kdf2=function(e,t){l2(this,e,1,t||e.digestLength)};var We=Ve;We.log=We.log||{},We.log.levels=["none","error","warning","info","debug","verbose","max"];var Gu={},Rg=[],Ml=null;We.log.LEVEL_LOCKED=2,We.log.NO_LEVEL_CHECK=4,We.log.INTERPOLATE=8;for(var ps=0;ps<We.log.levels.length;++ps){var c2=We.log.levels[ps];Gu[c2]={index:ps,name:c2.toUpperCase()}}We.log.logMessage=function(e){for(var t=Gu[e.level].index,r=0;r<Rg.length;++r){var n=Rg[r];n.flags&We.log.NO_LEVEL_CHECK?n.f(e):t<=Gu[n.level].index&&n.f(n,e)}},We.log.prepareStandard=function(e){"standard"in e||(e.standard=Gu[e.level].name+" ["+e.category+"] "+e.message)},We.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=We.util.format.apply(this,t)}},We.log.prepareStandardFull=function(e){"standardFull"in e||(We.log.prepareStandard(e),e.standardFull=e.standard)};var u2=["error","warning","info","debug","verbose"];for(ps=0;ps<u2.length;++ps)(function(e){We.log[e]=function(t,r){var n=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:r,arguments:n};We.log.logMessage(i)}})(u2[ps]);if(We.log.makeLogger=function(e){var t={flags:0,f:e};return We.log.setLevel(t,"none"),t},We.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&We.log.LEVEL_LOCKED)){for(var n=0;n<We.log.levels.length;++n)if(t==We.log.levels[n]){e.level=t,r=!0;break}}return r},We.log.lock=function(e,t){t===void 0||t?e.flags|=We.log.LEVEL_LOCKED:e.flags&=~We.log.LEVEL_LOCKED},We.log.addLogger=function(e){Rg.push(e)},typeof console<"u"&&"log"in console){var pl;if(console.error&&console.warn&&console.info&&console.debug){var pN={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Wf=function(e,t){We.log.prepareStandard(t);var r=pN[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};pl=We.log.makeLogger(Wf)}else Wf=function(e,t){We.log.prepareStandardFull(t),console.log(t.standardFull)},pl=We.log.makeLogger(Wf);We.log.setLevel(pl,"debug"),We.log.addLogger(pl),Ml=pl}else console={log:function(){}};if(Ml!==null&&typeof window<"u"&&window.location){var Tu=new URL(window.location.href).searchParams;Tu.has("console.level")&&We.log.setLevel(Ml,Tu.get("console.level").slice(-1)[0]),Tu.has("console.lock")&&Tu.get("console.lock").slice(-1)[0]=="true"&&We.log.lock(Ml)}We.log.consoleLogger=Ml;var he=Ve,L=he.asn1,Tr=he.pkcs7=he.pkcs7||{};function gN(e){var t={},r=[];if(!L.validate(e,Tr.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:he.pki.RDNAttributesAsArray(t.issuer),serialNumber:he.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:L.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function mN(e){for(var t,r=[],n=0;n<e.length;++n)r.push((t=e[n],L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(t.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[he.pki.distinguishedNameToAsn1({attributes:t.issuer}),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,he.util.hexToBytes(t.serialNumber))]),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(t.encryptedContent.algorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")]),L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function yN(e){var t=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[he.pki.distinguishedNameToAsn1({attributes:e.issuer}),L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,he.util.hexToBytes(e.serialNumber))]),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.digestAlgorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.signatureAlgorithm).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")])),t.value.push(L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=L.create(L.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(kg(i))}t.value.push(r)}return t}function kg(e){var t;if(e.type===he.pki.oids.contentType)t=L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.value).getBytes());else if(e.type===he.pki.oids.messageDigest)t=L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===he.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);i=isNaN(s)?i.length===13?L.utcTimeToDate(i):L.generalizedTimeToDate(i):new Date(s)}t=i>=r&&i<n?L.create(L.Class.UNIVERSAL,L.Type.UTCTIME,!1,L.dateToUtcTime(i)):L.create(L.Class.UNIVERSAL,L.Type.GENERALIZEDTIME,!1,L.dateToGeneralizedTime(i))}return L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,[t])])}function Yf(e,t,r){var n={};if(!L.validate(t,r,n,[])){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}if(L.derToOid(n.contentType)!==he.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var s="";if(he.util.isArray(n.encryptedContent))for(var o=0;o<n.encryptedContent.length;++o){if(n.encryptedContent[o].type!==L.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=n.encryptedContent[o].value}else s=n.encryptedContent;e.encryptedContent={algorithm:L.derToOid(n.encAlgorithm),parameter:he.util.createBuffer(n.encParameter.value),content:he.util.createBuffer(s)}}if(n.content){if(s="",he.util.isArray(n.content))for(o=0;o<n.content.length;++o){if(n.content[o].type!==L.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=n.content[o].value}else s=n.content;e.content=he.util.createBuffer(s)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function d2(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case he.pki.oids["aes128-CBC"]:case he.pki.oids["aes192-CBC"]:case he.pki.oids["aes256-CBC"]:t=he.aes.createDecryptionCipher(e.encryptedContent.key);break;case he.pki.oids.desCBC:case he.pki.oids["des-EDE3-CBC"]:t=he.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}Tr.messageFromPem=function(e){var t=he.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=L.fromDer(t.body);return Tr.messageFromAsn1(n)},Tr.messageToPem=function(e,t){var r={type:"PKCS7",body:L.toDer(e.toAsn1()).getBytes()};return he.pem.encode(r,{maxline:t})},Tr.messageFromAsn1=function(e){var t={},r=[];if(!L.validate(e,Tr.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i,s=L.derToOid(t.contentType);switch(s){case he.pki.oids.envelopedData:i=Tr.createEnvelopedData();break;case he.pki.oids.encryptedData:i=Tr.createEncryptedData();break;case he.pki.oids.signedData:i=Tr.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(t.content.value[0]),i},Tr.createSignedData=function(){var e=null;return e={type:he.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(Yf(e,t,Tr.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,n=0;n<r.length;++n)e.certificates.push(he.pki.certificateFromAsn1(r[n]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(he.pki.certificateToAsn1(e.certificates[r]));var n=[],i=L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&i.value[0].value.push(L.create(L.Class.CONTEXT_SPECIFIC,0,!0,t)),n.length>0&&i.value[0].value.push(L.create(L.Class.CONTEXT_SPECIFIC,1,!0,n)),i.value[0].value.push(L.create(L.Class.UNIVERSAL,L.Type.SET,!0,e.signerInfos)),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),i])},addSigner:function(t){var r=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;typeof i=="string"&&(i=he.pki.certificateFromPem(i)),r=i.issuer.attributes,n=i.serialNumber}var s=t.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof s=="string"&&(s=he.pki.privateKeyFromPem(s));var o=t.digestAlgorithm||he.pki.oids.sha1;switch(o){case he.pki.oids.sha1:case he.pki.oids.sha256:case he.pki.oids.sha384:case he.pki.oids.sha512:case he.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var a=t.authenticatedAttributes||[];if(a.length>0){for(var l=!1,c=!1,u=0;u<a.length;++u){var d=a[u];if(l||d.type!==he.pki.oids.contentType){if(!(c||d.type!==he.pki.oids.messageDigest)){if(c=!0,l)break}}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:s,version:1,issuer:r,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:he.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(t){var r;if(t=t||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(he.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof he.util.ByteBuffer?r=e.content.bytes():typeof e.content=="string"&&(r=he.util.encodeUtf8(e.content)),t.detached?e.detachedContent=L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,r)])))),e.signers.length!==0){var n=function(){for(var i={},s=0;s<e.signers.length;++s){var o=e.signers[s];(a=o.digestAlgorithm)in i||(i[a]=he.md[he.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=i[a]:o.md=he.md[he.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],i)e.digestAlgorithmIdentifiers.push(L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(a).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.NULL,!1,"")]));return i}();(function(i){var s;if(s=e.detachedContent?e.detachedContent:(s=e.contentInfo.value[1]).value[0],!s)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=L.derToOid(e.contentInfo.value[0].value),a=L.toDer(s);for(var l in a.getByte(),L.getBerValueLength(a),a=a.getBytes(),i)i[l].start().update(a);for(var c=new Date,u=0;u<e.signers.length;++u){var d=e.signers[u];if(d.authenticatedAttributes.length===0){if(o!==he.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=L.create(L.Class.UNIVERSAL,L.Type.SET,!0,[]),f=0;f<d.authenticatedAttributes.length;++f){var g=d.authenticatedAttributes[f];g.type===he.pki.oids.messageDigest?g.value=i[d.digestAlgorithm].digest():g.type===he.pki.oids.signingTime&&(g.value||(g.value=c)),h.value.push(kg(g)),d.authenticatedAttributesAsn1.value.push(kg(g))}a=L.toDer(h).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(y){for(var E=[],p=0;p<y.length;++p)E.push(yN(y[p]));return E}(e.signers)})(n)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){typeof t=="string"&&(t=he.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}},e},Tr.createEncryptedData=function(){var e=null;return e={type:he.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:he.pki.oids["aes256-CBC"]},fromAsn1:function(t){Yf(e,t,Tr.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),d2(e)}},e},Tr.createEnvelopedData=function(){var e=null;return e={type:he.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:he.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=Yf(e,t,Tr.asn1.envelopedDataValidator);e.recipients=function(n){for(var i=[],s=0;s<n.length;++s)i.push(gN(n[s]));return i}(r.recipientInfos.value)},toAsn1:function(){return L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(e.type).getBytes()),L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.INTEGER,!1,L.integerToDer(e.version).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SET,!0,mN(e.recipients)),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,(t=e.encryptedContent,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(he.pki.oids.data).getBytes()),L.create(L.Class.UNIVERSAL,L.Type.SEQUENCE,!0,[L.create(L.Class.UNIVERSAL,L.Type.OID,!1,L.oidToDer(t.algorithm).getBytes()),t.parameter?L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),L.create(L.Class.CONTEXT_SPECIFIC,0,!0,[L.create(L.Class.UNIVERSAL,L.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case he.pki.oids.rsaEncryption:case he.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=he.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}d2(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:he.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){var n,i,s;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case he.pki.oids["aes128-CBC"]:n=16,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["aes192-CBC"]:n=24,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["aes256-CBC"]:n=32,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=he.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=he.util.createBuffer(he.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=he.util.createBuffer(he.random.getBytes(i));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var a=0;a<e.recipients.length;++a){var l=e.recipients[a];if(l.encryptedContent.content===void 0){if(l.encryptedContent.algorithm!==he.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm);l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}},e};var Ut=Ve,Iu=Ut.ssh=Ut.ssh||{};function Wn(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Ut.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Mo(e,t){e.putInt32(t.length),e.putString(t)}function Au(){for(var e=Ut.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}Iu.privateKeyToPutty=function(e,t,r){var n="ssh-rsa",i=(t=t||"")===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+(r=r||"")+`\r
`;var o=Ut.util.createBuffer();Mo(o,n),Wn(o,e.e),Wn(o,e.n);var a=Ut.util.encode64(o.bytes(),64),l=Math.floor(a.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=a;var c,u=Ut.util.createBuffer();if(Wn(u,e.d),Wn(u,e.p),Wn(u,e.q),Wn(u,e.qInv),t){var d=u.length()+16-1;d-=d%16;var h=Au(u.bytes());h.truncate(h.length()-d+u.length()),u.putBuffer(h);var f=Ut.util.createBuffer();f.putBuffer(Au("\0\0\0\0",t)),f.putBuffer(Au("\0\0\0",t));var g=Ut.aes.createEncryptionCipher(f.truncate(8),"CBC");g.start(Ut.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),c=Ut.util.encode64(y.bytes(),64)}else c=Ut.util.encode64(u.bytes(),64);s+=`\r
Private-Lines: `+(l=Math.floor(c.length/66)+1)+`\r
`,s+=c;var E=Au("putty-private-key-file-mac-key",t),p=Ut.util.createBuffer();Mo(p,n),Mo(p,i),Mo(p,r),p.putInt32(o.length()),p.putBuffer(o),p.putInt32(u.length()),p.putBuffer(u);var v=Ut.hmac.create();return v.start("sha1",E),v.update(p.bytes()),s+=`\r
Private-MAC: `+v.digest().toHex()+`\r
`},Iu.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Ut.util.createBuffer();return Mo(n,r),Wn(n,e.e),Wn(n,e.n),r+" "+Ut.util.encode64(n.bytes())+" "+t},Iu.privateKeyToOpenSSH=function(e,t){return t?Ut.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Ut.pki.privateKeyToPem(e)},Iu.getPublicKeyFingerprint=function(e,t){var r=(t=t||{}).md||Ut.md.md5.create(),n=Ut.util.createBuffer();Mo(n,"ssh-rsa"),Wn(n,e.e),Wn(n,e.n),r.start(),r.update(n.getBytes());var i=r.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i};var Uo=Ve;class vN extends Error{constructor(t){super(t),this.name="TimeoutError"}}class EN extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const h2=e=>globalThis.DOMException===void 0?new EN(e):new DOMException(e),f2=e=>{const t=e.reason===void 0?h2("This operation was aborted."):e.reason;return t instanceof Error?t:h2(t)};class Io extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class _g extends Io{constructor(t){super(t||"Unsupported content type.")}}class xg extends Io{constructor(t){super(t||"Request pending.")}}class CN extends Io{constructor(t){super(t||"Unspecified session description handler error.")}}class Qf extends Io{constructor(){super("The session has terminated.")}}class gl extends Io{constructor(t){super(t||"An error occurred during state transition.")}}class SN{constructor(t){this.incomingAckRequest=t}get request(){return this.incomingAckRequest.message}}class wN{constructor(t){this.incomingByeRequest=t}get request(){return this.incomingByeRequest.message}accept(t){return this.incomingByeRequest.accept(t),Promise.resolve()}reject(t){return this.incomingByeRequest.reject(t),Promise.resolve()}}class bN{constructor(t){this.incomingCancelRequest=t}get request(){return this.incomingCancelRequest}}class cc{constructor(){this.listeners=new Array}addListener(t,r){const n=i=>{this.removeListener(n),t(i)};(r==null?void 0:r.once)===!0?this.listeners.push(n):this.listeners.push(t)}emit(t){this.listeners.slice().forEach(r=>r(t))}removeAllListeners(){this.listeners=[]}removeListener(t){this.listeners=this.listeners.filter(r=>r!==t)}on(t){return this.addListener(t)}off(t){return this.removeListener(t)}once(t){return this.addListener(t,{once:!0})}}class TN{constructor(t){this.incomingInfoRequest=t}get request(){return this.incomingInfoRequest.message}accept(t){return this.incomingInfoRequest.accept(t),Promise.resolve()}reject(t){return this.incomingInfoRequest.reject(t),Promise.resolve()}}class Rb{constructor(t){this.parameters={};for(const r in t)t.hasOwnProperty(r)&&this.setParam(r,t[r])}setParam(t,r){t&&(this.parameters[t.toLowerCase()]=r==null?null:r.toString())}getParam(t){if(t)return this.parameters[t.toLowerCase()]}hasParam(t){return!(!t||this.parameters[t.toLowerCase()]===void 0)}deleteParam(t){if(t=t.toLowerCase(),this.hasParam(t)){const r=this.parameters[t];return delete this.parameters[t],r}}clearParams(){this.parameters={}}}class Or extends Rb{constructor(t,r,n){super(n),this.uri=t,this._displayName=r}get friendlyName(){return this.displayName||this.uri.aor}get displayName(){return this._displayName}set displayName(t){this._displayName=t}clone(){return new Or(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))}toString(){let t=this.displayName||this.displayName==="0"?'"'+this.displayName+'" ':"";t+="<"+this.uri.toString()+">";for(const r in this.parameters)this.parameters.hasOwnProperty(r)&&(t+=";"+r,this.parameters[r]!==null&&(t+="="+this.parameters[r]));return t}}class di extends Rb{constructor(t="sip",r,n,i,s,o){if(super(s||{}),this.headers={},!n)throw new TypeError('missing or invalid "host" parameter');for(const a in o)o.hasOwnProperty(a)&&this.setHeader(a,o[a]);this.raw={scheme:t,user:r,host:n,port:i},this.normal={scheme:t.toLowerCase(),user:r,host:n.toLowerCase(),port:i}}get scheme(){return this.normal.scheme}set scheme(t){this.raw.scheme=t,this.normal.scheme=t.toLowerCase()}get user(){return this.normal.user}set user(t){this.normal.user=this.raw.user=t}get host(){return this.normal.host}set host(t){this.raw.host=t,this.normal.host=t.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(t){this.normal.port=this.raw.port=t}setHeader(t,r){this.headers[this.headerize(t)]=r instanceof Array?r:[r]}getHeader(t){if(t)return this.headers[this.headerize(t)]}hasHeader(t){return!!t&&!!this.headers.hasOwnProperty(this.headerize(t))}deleteHeader(t){if(t=this.headerize(t),this.headers.hasOwnProperty(t)){const r=this.headers[t];return delete this.headers[t],r}}clearHeaders(){this.headers={}}clone(){return new di(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(t){let r=t.scheme+":";t.scheme.toLowerCase().match("^sips?$")||(r+="//"),t.user&&(r+=this.escapeUser(t.user)+"@"),r+=t.host,(t.port||t.port===0)&&(r+=":"+t.port);for(const i in this.parameters)this.parameters.hasOwnProperty(i)&&(r+=";"+i,this.parameters[i]!==null&&(r+="="+this.parameters[i]));const n=[];for(const i in this.headers)if(this.headers.hasOwnProperty(i))for(const s in this.headers[i])this.headers[i].hasOwnProperty(s)&&n.push(i+"="+this.headers[i][s]);return n.length>0&&(r+="?"+n.join("&")),r}escapeUser(t){let r;try{r=decodeURIComponent(t)}catch(n){throw n}return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}headerize(t){const r={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},n=t.toLowerCase().replace(/_/g,"-").split("-"),i=n.length;let s="";for(let o=0;o<i;o++)o!==0&&(s+="-"),s+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return r[s]&&(s=r[s]),s}}function p2(e,t){if(e.scheme!==t.scheme||e.user!==t.user||e.host!==t.host||e.port!==t.port||!function(i,s){const o=Object.keys(i.parameters),a=Object.keys(s.parameters);return!!o.filter(l=>a.includes(l)).every(l=>i.parameters[l]===s.parameters[l])&&!!["user","ttl","method","transport"].every(l=>i.hasParam(l)&&s.hasParam(l)||!i.hasParam(l)&&!s.hasParam(l))&&!!["maddr"].every(l=>i.hasParam(l)&&s.hasParam(l)||!i.hasParam(l)&&!s.hasParam(l))}(e,t))return!1;const r=Object.keys(e.headers),n=Object.keys(t.headers);if(r.length!==0||n.length!==0){if(r.length!==n.length)return!1;const i=r.filter(s=>n.includes(s));if(i.length!==n.length||!i.every(s=>e.headers[s].length&&t.headers[s].length&&e.headers[s][0]===t.headers[s][0]))return!1}return!0}function Xf(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}class va extends Error{constructor(t,r,n,i){super(),this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,va.prototype):this.__proto__=va.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,va)}static buildMessage(t,r){function n(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,c=>"\\x0"+n(c)).replace(/[\x10-\x1F\x7F-\x9F]/g,c=>"\\x"+n(c))}function s(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,c=>"\\x0"+n(c)).replace(/[\x10-\x1F\x7F-\x9F]/g,c=>"\\x"+n(c))}function o(l){switch(l.type){case"literal":return'"'+i(l.text)+'"';case"class":const c=l.parts.map(u=>Array.isArray(u)?s(u[0])+"-"+s(u[1]):s(u));return"["+(l.inverted?"^":"")+c+"]";case"any":return"any character";case"end":return"end of input";case"other":return l.description}}return"Expected "+function(l){const c=l.map(o);let u,d;if(c.sort(),c.length>0){for(u=1,d=1;u<c.length;u++)c[u-1]!==c[u]&&(c[d]=c[u],d++);c.length=d}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(t)+" but "+(((a=r)?'"'+i(a)+'"':"end of input")+" found.");var a}format(t){let r="Error: "+this.message;if(this.location){let n,i=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){i=t[n].text.split(/\r\n|\n|\r/g);break}let s=this.location.start,o=this.location.source+":"+s.line+":"+s.column;if(i){let a=this.location.end,l=Xf("",s.line.toString().length," "),c=i[s.line-1],u=s.line===a.line?a.column:c.length+1;r+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+c+`
`+l+" | "+Xf("",s.column-1," ")+Xf("",u-s.column,"^")}else r+=`
 at `+o}return r}}const IN=function(e,t){const r={},n=(t=t!==void 0?t:{}).grammarSource,i={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231};let s=119;const o=[`\r
`,p(`\r
`,!1),/^[0-9]/,v([["0","9"]],!1,!1),/^[a-zA-Z]/,v([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,v([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,v([["\0",""]],!1,!1),/^["]/,v(['"'],!1,!1)," ",p(" ",!1),"	",p("	",!1),/^[a-zA-Z0-9]/,v([["a","z"],["A","Z"],["0","9"]],!1,!1),";",p(";",!1),"/",p("/",!1),"?",p("?",!1),":",p(":",!1),"@",p("@",!1),"&",p("&",!1),"=",p("=",!1),"+",p("+",!1),"$",p("$",!1),",",p(",",!1),"-",p("-",!1),"_",p("_",!1),".",p(".",!1),"!",p("!",!1),"~",p("~",!1),"*",p("*",!1),"'",p("'",!1),"(",p("(",!1),")",p(")",!1),"%",p("%",!1),function(){return" "},function(){return":"},/^[!-~]/,v([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,v([["",""]],!1,!1),/^[\x80-\xBF]/,v([["",""]],!1,!1),/^[a-f]/,v([["a","f"]],!1,!1),"`",p("`",!1),"<",p("<",!1),">",p(">",!1),"\\",p("\\",!1),"[",p("[",!1),"]",p("]",!1),"{",p("{",!1),"}",p("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,v([["!","'"]],!1,!1),/^[*-[]/,v([["*","["]],!1,!1),/^[\]-~]/,v([["]","~"]],!1,!1),function(A){return A},/^[#-[]/,v([["#","["]],!1,!1),/^[\0-\t]/,v([["\0","	"]],!1,!1),/^[\v-\f]/,v([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,v([["",""]],!1,!1),function(){(t=t||{data:{}}).data.uri=new di(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){(t=t||{data:{}}).data.uri=new di(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,t.startRule==="SIP_URI"&&(t.data=t.data.uri)},"sips",p("sips",!0),"sip",p("sip",!0),function(A){(t=t||{data:{}}).data.scheme=A},function(){(t=t||{data:{}}).data.user=decodeURIComponent(y().slice(0,-1))},function(){(t=t||{data:{}}).data.password=y()},function(){return(t=t||{data:{}}).data.host=y(),t.data.host},function(){return(t=t||{data:{}}).data.host_type="domain",y()},/^[a-zA-Z0-9_\-]/,v([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,v([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",y()},"::",p("::",!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",y()},function(){return(t=t||{data:{}}).data.host_type="IPv4",y()},"25",p("25",!1),/^[0-5]/,v([["0","5"]],!1,!1),"2",p("2",!1),/^[0-4]/,v([["0","4"]],!1,!1),"1",p("1",!1),/^[1-9]/,v([["1","9"]],!1,!1),function(A){return t=t||{data:{}},A=parseInt(A.join("")),t.data.port=A,A},"transport=",p("transport=",!0),"udp",p("udp",!0),"tcp",p("tcp",!0),"sctp",p("sctp",!0),"tls",p("tls",!0),function(A){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=A.toLowerCase()},"user=",p("user=",!0),"phone",p("phone",!0),"ip",p("ip",!0),function(A){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=A.toLowerCase()},"method=",p("method=",!0),function(A){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=A},"ttl=",p("ttl=",!0),function(A){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.ttl=A},"maddr=",p("maddr=",!0),function(A){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=A},"lr",p("lr",!0),function(){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(A,P){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),P=P===null?void 0:P[1],t.data.uri_params[A.toLowerCase()]=P},function(A,P){A=A.join("").toLowerCase(),P=P.join(""),(t=t||{data:{}}).data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[A]?t.data.uri_headers[A].push(P):t.data.uri_headers[A]=[P]},function(){(t=t||{data:{}}).startRule==="Refer_To"&&(t.data.uri=new di(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",p("//",!1),function(){(t=t||{data:{}}).data.scheme=y()},p("SIP",!0),function(){(t=t||{data:{}}).data.sip_version=y()},"INVITE",p("INVITE",!1),"ACK",p("ACK",!1),"VXACH",p("VXACH",!1),"OPTIONS",p("OPTIONS",!1),"BYE",p("BYE",!1),"CANCEL",p("CANCEL",!1),"REGISTER",p("REGISTER",!1),"SUBSCRIBE",p("SUBSCRIBE",!1),"NOTIFY",p("NOTIFY",!1),"REFER",p("REFER",!1),"PUBLISH",p("PUBLISH",!1),function(){return(t=t||{data:{}}).data.method=y(),t.data.method},function(A){(t=t||{data:{}}).data.status_code=parseInt(A.join(""))},function(){(t=t||{data:{}}).data.reason_phrase=y()},function(){(t=t||{data:{}}).data=y()},function(){var A,P;for(P=(t=t||{data:{}}).data.multi_header.length,A=0;A<P;A++)if(t.data.multi_header[A].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var A;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{A=new Or(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{A=null}t.data.multi_header.push({position:l,offset:E().start.offset,parsed:A})},function(A){(A=y().trim())[0]==='"'&&(A=A.substring(1,A.length-1)),(t=t||{data:{}}).data.displayName=A},"q",p("q",!0),function(A){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.q=A},"expires",p("expires",!0),function(A){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.expires=A},function(A){return parseInt(A.join(""))},"0",p("0",!1),function(){return parseFloat(y())},function(A,P){(t=t||{data:{}}).data.params||(t.data.params={}),P=P===null?void 0:P[1],t.data.params[A.toLowerCase()]=P},"render",p("render",!0),"session",p("session",!0),"icon",p("icon",!0),"alert",p("alert",!0),function(){(t=t||{data:{}}).startRule==="Content_Disposition"&&(t.data.type=y().toLowerCase())},"handling",p("handling",!0),"optional",p("optional",!0),"required",p("required",!0),function(A){(t=t||{data:{}}).data=parseInt(A.join(""))},function(){(t=t||{data:{}}).data=y()},"text",p("text",!0),"image",p("image",!0),"audio",p("audio",!0),"video",p("video",!0),"application",p("application",!0),"message",p("message",!0),"multipart",p("multipart",!0),"x-",p("x-",!0),function(A){(t=t||{data:{}}).data.value=parseInt(A.join(""))},function(A){(t=t||{data:{}}).data=A},function(A){(t=t||{data:{}}).data.event=A.toLowerCase()},function(){var A=(t=t||{data:{}}).data.tag;t.data=new Or(t.data.uri,t.data.displayName,t.data.params),A&&t.data.setParam("tag",A)},"tag",p("tag",!0),function(A){(t=t||{data:{}}).data.tag=A},function(A){(t=t||{data:{}}).data=parseInt(A.join(""))},function(A){(t=t||{data:{}}).data=A},function(){(t=t||{data:{}}).data=new Or(t.data.uri,t.data.displayName,t.data.params)},"digest",p("Digest",!0),"realm",p("realm",!0),function(A){(t=t||{data:{}}).data.realm=A},"domain",p("domain",!0),"nonce",p("nonce",!0),function(A){(t=t||{data:{}}).data.nonce=A},"opaque",p("opaque",!0),function(A){(t=t||{data:{}}).data.opaque=A},"stale",p("stale",!0),"true",p("true",!0),function(){(t=t||{data:{}}).data.stale=!0},"false",p("false",!0),function(){(t=t||{data:{}}).data.stale=!1},"algorithm",p("algorithm",!0),"md5",p("MD5",!0),"md5-sess",p("MD5-sess",!0),function(A){(t=t||{data:{}}).data.algorithm=A.toUpperCase()},"qop",p("qop",!0),"auth-int",p("auth-int",!0),"auth",p("auth",!0),function(A){(t=t||{data:{}}).data.qop||(t.data.qop=[]),t.data.qop.push(A.toLowerCase())},function(A){(t=t||{data:{}}).data.value=parseInt(A.join(""))},function(){var A,P;for(P=(t=t||{data:{}}).data.multi_header.length,A=0;A<P;A++)if(t.data.multi_header[A].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var A;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{A=new Or(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{A=null}t.data.multi_header.push({position:l,offset:E().start.offset,parsed:A})},function(){(t=t||{data:{}}).data=new Or(t.data.uri,t.data.displayName,t.data.params)},function(){(t=t||{data:{}}).data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){(t=t||{data:{}}).data={call_id:t.data}},"from-tag",p("from-tag",!0),function(A){(t=t||{data:{}}).data.replaces_from_tag=A},"to-tag",p("to-tag",!0),function(A){(t=t||{data:{}}).data.replaces_to_tag=A},"early-only",p("early-only",!0),function(){(t=t||{data:{}}).data.early_only=!0},function(A,P){return P},function(A,P){return function(B,N){return[B].concat(N)}(A,P)},function(A){(t=t||{data:{}}).startRule==="Require"&&(t.data=A||[])},function(A){(t=t||{data:{}}).data.value=parseInt(A.join(""))},"active",p("active",!0),"pending",p("pending",!0),"terminated",p("terminated",!0),function(){(t=t||{data:{}}).data.state=y()},"reason",p("reason",!0),function(A){t=t||{data:{}},A!==void 0&&(t.data.reason=A)},function(A){t=t||{data:{}},A!==void 0&&(t.data.expires=A)},"retry_after",p("retry_after",!0),function(A){t=t||{data:{}},A!==void 0&&(t.data.retry_after=A)},"deactivated",p("deactivated",!0),"probation",p("probation",!0),"rejected",p("rejected",!0),"timeout",p("timeout",!0),"giveup",p("giveup",!0),"noresource",p("noresource",!0),"invariant",p("invariant",!0),function(A){(t=t||{data:{}}).startRule==="Supported"&&(t.data=A||[])},function(){var A=(t=t||{data:{}}).data.tag;t.data=new Or(t.data.uri,t.data.displayName,t.data.params),A&&t.data.setParam("tag",A)},"ttl",p("ttl",!0),function(A){(t=t||{data:{}}).data.ttl=A},"maddr",p("maddr",!0),function(A){(t=t||{data:{}}).data.maddr=A},"received",p("received",!0),function(A){(t=t||{data:{}}).data.received=A},"branch",p("branch",!0),function(A){(t=t||{data:{}}).data.branch=A},"rport",p("rport",!0),function(A){t=t||{data:{}},A!==void 0&&(t.data.rport=A.join(""))},function(A){(t=t||{data:{}}).data.protocol=A},p("UDP",!0),p("TCP",!0),p("TLS",!0),p("SCTP",!0),function(A){(t=t||{data:{}}).data.transport=A},function(){(t=t||{data:{}}).data.host=y()},function(A){(t=t||{data:{}}).data.port=parseInt(A.join(""))},function(A){return parseInt(A.join(""))},function(A){(t=t||{data:{}}).startRule==="Session_Expires"&&(t.data.deltaSeconds=A)},"refresher",p("refresher",!1),"uas",p("uas",!1),"uac",p("uac",!1),function(A){(t=t||{data:{}}).startRule==="Session_Expires"&&(t.data.refresher=A)},function(A){(t=t||{data:{}}).startRule==="Min_SE"&&(t.data=A)},"stuns",p("stuns",!0),"stun",p("stun",!0),function(A){(t=t||{data:{}}).data.scheme=A},function(A){(t=t||{data:{}}).data.host=A},"?transport=",p("?transport=",!1),"turns",p("turns",!0),"turn",p("turn",!0),function(A){(t=t||{data:{}}).data.transport=A},function(){(t=t||{data:{}}).data=y()},"Referred-By",p("Referred-By",!1),"b",p("b",!1),"cid",p("cid",!1)],a=[m('2 ""6 7!'),m('4"""5!7#'),m('4$""5!7%'),m(`4&""5!7'`),m(";'.# &;("),m('4(""5!7)'),m('4*""5!7+'),m('2,""6,7-'),m('2.""6.7/'),m('40""5!71'),m('22""6273. &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(";).# &;,"),m('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),m(`%%2X""6X7Y/5#;#/,$;#/#$+#)(#'#("'#&'#/"!&,)`),m(`%%$;$0#*;$&/,#; /#$+")("'#&'#." &"/=#$;$/&#0#*;$&&&#/'$8":Z" )("'#&'#`),m(';.." &"'),m(`%$;'.# &;(0)*;'.# &;(&/?#28""6879/0$;//'$8#:[# )(#'#("'#&'#`),m(`%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("'#&'#0=*%$;.0#*;.&/,#;2/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m('4\\""5!7].# &;3'),m('4^""5!7_'),m('4`""5!7a'),m(';!.) &4b""5!7c'),m('%$;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m('%$;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m(`2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &2:""6:7;. &2D""6D7E. &22""6273. &28""6879. &2j""6j7k. &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;'.# &;(`),m('%$;). &2F""6F7G. &2J""6J7K. &2L""6L7M. &2X""6X7Y. &2P""6P7Q. &2H""6H7I. &2@""6@7A. &2d""6d7e. &2R""6R7S. &2N""6N7O. &2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/#0*;). &2F""6F7G. &2J""6J7K. &2L""6L7M. &2X""6X7Y. &2P""6P7Q. &2H""6H7I. &2@""6@7A. &2d""6d7e. &2R""6R7S. &2N""6N7O. &2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),m(`%;//?#2P""6P7Q/0$;//'$8#:t# )(#'#("'#&'#`),m(`%;//?#24""6475/0$;//'$8#:u# )(#'#("'#&'#`),m(`%;//?#2>""6>7?/0$;//'$8#:v# )(#'#("'#&'#`),m(`%;//?#2T""6T7U/0$;//'$8#:w# )(#'#("'#&'#`),m(`%;//?#2V""6V7W/0$;//'$8#:x# )(#'#("'#&'#`),m(`%2h""6h7i/0#;//'$8":y" )("'#&'#`),m(`%;//6#2f""6f7g/'$8":z" )("'#&'#`),m(`%;//?#2D""6D7E/0$;//'$8#:{# )(#'#("'#&'#`),m(`%;//?#22""6273/0$;//'$8#:|# )(#'#("'#&'#`),m(`%;//?#28""6879/0$;//'$8#:}# )(#'#("'#&'#`),m(`%;//0#;&/'$8":~" )("'#&'#`),m(`%;&/0#;//'$8":~" )("'#&'#`),m(`%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#("'#&'#`),m('4""5!7.A &4""5!7.5 &4""5!7.) &;3.# &;.'),m(`%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#("'#&'#/"!&,)`),m(`%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/"!&,)/1$;&/($8$:$!!)($'#(#'#("'#&'#`),m(';..G &2L""6L7M.; &4""5!7./ &4""5!7.# &;3'),m(`%2j""6j7k/J#4""5!7.5 &4""5!7.) &4""5!7/#$+")("'#&'#`),m(`%;N/M#28""6879/>$;O." &"/0$;S/'$8$:$ )($'#(#'#("'#&'#`),m(`%;N/d#28""6879/U$;O." &"/G$;S/>$;_/5$;l." &"/'$8&:& )(&'#(%'#($'#(#'#("'#&'#`),m(`%3""5$7.) &3""5#7/' 8!:!! )`),m(`%;P/]#%28""6879/,#;R/#$+")("'#&'#." &"/6$2:""6:7;/'$8#:# )(#'#("'#&'#`),m("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),m('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),m('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:! )'),m(`%;T/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:! )"),m(`%$%;V/2#2J""6J7K/#$+")("'#&'#0<*%;V/2#2J""6J7K/#$+")("'#&'#&/D#;W/;$2J""6J7K." &"/'$8#:# )(#'#("'#&'#`),m('$4""5!7/,#0)*4""5!7&&&#'),m(`%4$""5!7%/?#$4""5!70)*4""5!7&/#$+")("'#&'#`),m(`%2l""6l7m/?#;Y/6$2n""6n7o/'$8#:# )(#'#("'#&'#`),m(`%%;Z/#28""6879/$;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/#;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/#;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&'#(%'#($'#(#'#("'#&'#. &%2""67/D#;Z/;$28""6879/,$;[/#$+$)($'#(#'#("'#&'#. &%2""67/,#;[/#$+")("'#&'#. &%2""67/,#;Z/#$+")("'#&'#. &%;Z/#2""67/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$2""67/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/k$2""67/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/z$%28""6879/,#;Z/#$+")("'#&'#." &"/S$2""67/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;[/#$+')(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/Y$%28""6879/,#;Z/#$+")("'#&'#." &"/2$2""67/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#/& 8!:! )`),m(`%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($'#(#'#("'#&'#`),m(`%;Z/;#28""6879/,$;Z/#$+#)(#'#("'#&'#.# &;\\`),m(`%;]/o#2J""6J7K/\`$;]/W$2J""6J7K/H$;]/?$2J""6J7K/0$;]/'$8':' )(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%2""67/2#4""5!7/#$+")("'#&'#. &%2""67/;#4""5!7/,$;!/#$+#)(#'#("'#&'#.j &%2""67/5#;!/,$;!/#$+#)(#'#("'#&'#.B &%4""5!7/,#;!/#$+")("'#&'#.# &;!`),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:!! )`),m(`$%22""6273/,#;\`/#$+")("'#&'#0<*%22""6273/,#;\`/#$+")("'#&'#&`),m(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),m(`%3""5*7/a#3""5#7.G &3""5#7.; &3""5$7./ &3""5#7.# &;6/($8":"! )("'#&'#`),m(`%3""5%7/I#3""5%7./ &3""5"7.# &;6/($8":"! )("'#&'#`),m(`%3""5'7/1#;/($8":"! )("'#&'#`),m(`%3""5$7/1#;/($8":"! )("'#&'#`),m(`%3""5&7/1#;T/($8":"! )("'#&'#`),m(`%3""5"7/N#%2>""6>7?/,#;6/#$+")("'#&'#." &"/'$8":" )("'#&'#`),m(`%;h/P#%2>""6>7?/,#;i/#$+")("'#&'#." &"/)$8":""! )("'#&'#`),m('%$;j/&#0#*;j&&&#/"!&,)'),m('%$;j/&#0#*;j&&&#/"!&,)'),m(";k.) &;+.# &;-"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),m(`%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("'#&'#0<*%2<""6<7=/,#;m/#$+")("'#&'#&/#$+#)(#'#("'#&'#`),m(`%;n/A#2>""6>7?/2$;o/)$8#:#"" )(#'#("'#&'#`),m("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),m("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),m(";.# &;r"),m(`%;/G#;'/>$;s/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m(";M.# &;t"),m(`%;/E#28""6879/6$;u.# &;x/'$8#:# )(#'#("'#&'#`),m(`%;v.# &;w/J#%26""6677/,#;/#$+")("'#&'#." &"/#$+")("'#&'#`),m(`%2""67/:#;/1$;w." &"/#$+#)(#'#("'#&'#`),m(`%24""6475/,#;{/#$+")("'#&'#`),m(`%;z/3#$;y0#*;y&/#$+")("'#&'#`),m(";*.) &;+.# &;-"),m(';+. &;-. &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%;|/e#$%24""6475/,#;|/#$+")("'#&'#0<*%24""6475/,#;|/#$+")("'#&'#&/#$+")("'#&'#`),m(`%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("'#&'#0<*%22""6273/,#;}/#$+")("'#&'#&/#$+")("'#&'#`),m("$;~0#*;~&"),m(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%%;"/#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("'#&'#/& 8!:! )`),m(";.# &;"),m(`%%;O/2#2:""6:7;/#$+")("'#&'#." &"/,#;S/#$+")("'#&'#." &"`),m('$;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/#0*;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),m("$;y0#*;y&"),m(`%3""5#7/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/'$8%:% )(%'#($'#(#'#("'#&'#`),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m("%;.Y &;.S &;.M &;.G &;.A &;.; &;.5 &;./ &;.) &;.# &;6/& 8!:! )"),m(`%;/G#;'/>$;/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%;/' 8!:!! )"),m(`%;!/5#;!/,$;!/#$+#)(#'#("'#&'#`),m("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:! )"),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;9/N#%2:""6:7;/,#;9/#$+")("'#&'#." &"/'$8":" )("'#&'#`),m(`%;:.c &%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#/& 8!:! )`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;." &"/>#;@/5$;M/,$;?/#$+$)($'#(#'#("'#&'#`),m(`%%;6/Y#$%;./,#;6/#$+")("'#&'#06*%;./,#;6/#$+")("'#&'#&/#$+")("'#&'#.# &;H/' 8!:!! )`),m(";.) &;.# &;"),m(`%3""5!7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m(`%3""5'7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%2""67/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($'#(#'#("'#&'#." &"/'$8":" )("'#&'#`),m(`%;6/J#%;</,#;/#$+")("'#&'#." &"/)$8":""! )("'#&'#`),m(";6.) &;T.# &;H"),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3""5&7.G &3""5'7.; &3""5$7./ &3""5%7.# &;6/& 8!:! )`),m(";.# &;"),m(`%3""5(7/M#;</D$3""5(7./ &3""5(7.# &;6/#$+#)(#'#("'#&'#`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/& 8!:! )"),m(`%;/k#;;/b$;/Y$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.# &;"),m('3""5$7.S &3""5%7.G &3""5%7.; &3""5%7./ &3""5+7.# &;'),m(`3""5'7./ &3""5)7.# &;`),m(";6.# &;"),m(`%3""5"7/,#;6/#$+")("'#&'#`),m(";.# &;6"),m(`%;6/5#;</,$;/#$+#)(#'#("'#&'#`),m(";6.# &;H"),m(`%;/5#;./,$;/#$+#)(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/' 8!:!! )"),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(`%%;7/e#$%2J""6J7K/,#;7/#$+")("'#&'#0<*%2J""6J7K/,#;7/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(";.# &;"),m(`%3""5#7/:#;</1$;6/($8#:#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/' 8!:!! )"),m(`%$;0#*;&/x#;@/o$;M/f$;?/]$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8%:% )(%'#($'#(#'#("'#&'#`),m(";"),m(`%3""5&7/k#;./b$;/Y$$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#.# &;`),m(`%;6/k#;./b$;/Y$$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(`%;6/;#;</2$;6.# &;H/#$+#)(#'#("'#&'#`),m(";.G &;.A &;.; &;.5 &;./ &;.) &;.# &;"),m(`%3""5%7/5#;</,$;/#$+#)(#'#("'#&'#`),m("%;I/' 8!:!! )"),m(`%3""5&7/#;</$;D/$;/|$$%$;'/&#0#*;'&&&#/,#;/#$+")("'#&'#0C*%$;'/&#0#*;'&&&#/,#;/#$+")("'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#("'#&'#`),m(";t.# &;w"),m(`%3""5%7/5#;</,$;/#$+#)(#'#("'#&'#`),m("%;I/' 8!:!! )"),m(`%3""5&7/:#;</1$;I/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/]#;</T$%3""5$7/& 8!:! ).4 &%3""5%7/& 8!:! )/#$+#)(#'#("'#&'#`),m(`%3""5)7/R#;</I$3""5#7./ &3""5(7.# &;6/($8#:#! )(#'#("'#&'#`),m(`%3""5#7/#;</$;D/$%;/e#$%2D""6D7E/,#;/#$+")("'#&'#0<*%2D""6D7E/,#;/#$+")("'#&'#&/#$+")("'#&'#/,$;E/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3""5(7./ &3""5$7.# &;6/' 8!:!! )`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/G#;./>$;/5$;./,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%;/]#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;L.O &;.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#'#("'#&'#/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m("%;/& 8!:! )"),m(`%3""5(7/:#;</1$;6/($8#:#! )(#'#("'#&'#.g &%3""5&7/:#;</1$;6/($8#:#! )(#'#("'#&'#.: &%3""5*7/& 8!:! ).# &;`),m(`%%;6/k#$%;A/2#;6/)$8":""$ )("'#&'#0<*%;A/2#;6/)$8":""$ )("'#&'#&/)$8":""! )("'#&'#." &"/' 8!:!! )`),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3""5&7.; &3""5'7./ &3""5*7.# &;6/& 8!:! )`),m(`%3""5&7/:#;</1$;/($8#:#! )(#'#("'#&'#.} &%3""5'7/:#;</1$;/($8#:#! )(#'#("'#&'#.P &%3""5+7/:#;</1$;/($8#:#! )(#'#("'#&'#.# &;`),m(`3""5+7.k &3""5)7._ &3""5(7.S &3""5'7.G &3""5&7.; &3""5*7./ &3""5)7.# &;6`),m(';1." &"'),m(`%%;6/k#$%;A/2#;6/)$8":""$ )("'#&'#0<*%;A/2#;6/)$8":""$ )("'#&'#&/)$8":""! )("'#&'#." &"/' 8!:!! )`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(";.# &;"),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/k#;./b$;/Y$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.; &;.5 &;./ &;.) &;.# &;"),m(`%3""5#7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/:#;</1$;T/($8#:#! )(#'#("'#&'#`),m(`%3""5(7/F#;</=$;\\.) &;Y.# &;X/($8#:#! )(#'#("'#&'#`),m(`%3""5&7/:#;</1$;6/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/A#;</8$$;!0#*;!&/($8#:#! )(#'#("'#&'#`),m(`%;/G#;;/>$;6/5$;;/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3""5#7.# &;6/' 8!:!! )`),m(`%3""5#7.G &3""5#7.; &3""5#7./ &3""5$7.# &;6/' 8!:!! )`),m(`%;/D#%;C/,#;/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:! )"),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:!! )`),m(`%%;!/?#;!." &"/1$;!." &"/#$+#)(#'#("'#&'#/' 8!:!! )`),m(";"),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(";.# &;"),m(`%2""67/L#;</C$2""67.) &2""67/($8#:#! )(#'#("'#&'#`),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(`%;6/5#;0/,$;/#$+#)(#'#("'#&'#`),m("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),m("$;%0#*;%&"),m(`%;/;#28""6879/,$;/#$+#)(#'#("'#&'#`),m(`%3""5%7.) &3""5$7/' 8!:!! )`),m(`%;/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;\\.) &;X.# &;/' 8!:!! )"),m(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),m('2L""6L7M. &2B""6B7C. &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),m(`%;/b#28""6879/S$;/J$%2""67/,#;/#$+")("'#&'#." &"/#$+$)($'#(#'#("'#&'#`),m(`%3""5%7.) &3""5$7/' 8!:!! )`),m(`%3""5#7.6 &3""5#7.* &$;+0#*;+&/' 8!:!! )`),m(`%;/#2F""6F7G/x$;/o$2F""6F7G/\`$;/W$2F""6F7G/H$;/?$2F""6F7G/0$;/'$8):) )()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#("'#&'#`),m(`%;/,#;/#$+")("'#&'#`),m(`%;/5#;/,$;/#$+#)(#'#("'#&'#`),m(`%;q/T#$;m0#*;m&/D$%; /,#;/#$+")("'#&'#." &"/#$+#)(#'#("'#&'#`),m(`%2""67.) &2""67/w#;0/n$;/e$$%;B/2#;.# &;/#$+")("'#&'#0<*%;B/2#;.# &;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.# &;L"),m(`%2""67/5#;</,$;/#$+#)(#'#("'#&'#`),m(`%;D/S#;,/J$2:""6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#("'#&'#`)];let l=0,c=0;const u=[{line:1,column:1}];let d,h=0,f=[],g=0;if(t.startRule!==void 0){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');s=i[t.startRule]}function y(){return e.substring(c,l)}function E(){return b(c,l)}function p(A,P){return{type:"literal",text:A,ignoreCase:P}}function v(A,P,B){return{type:"class",parts:A,inverted:P,ignoreCase:B}}function C(A){let P,B=u[A];if(B)return B;for(P=A-1;!u[P];)P--;for(B=u[P],B={line:B.line,column:B.column};P<A;)e.charCodeAt(P)===10?(B.line++,B.column=1):B.column++,P++;return u[A]=B,B}function b(A,P){const B=C(A),N=C(P);return{source:n,start:{offset:A,line:B.line,column:B.column},end:{offset:P,line:N.line,column:N.column}}}function k(A){l<h||(l>h&&(h=l,f=[]),f.push(A))}function m(A){return A.split("").map(P=>P.charCodeAt(0)-32)}if(t.data={},d=function A(P){const B=a[P];let N=0;const z=[];let O=B.length;const F=[],M=[];let $;for(;;){for(;N<O;)switch(B[N]){case 0:M.push(o[B[N+1]]),N+=2;break;case 1:M.push(void 0),N++;break;case 2:M.push(null),N++;break;case 3:M.push(r),N++;break;case 4:M.push([]),N++;break;case 5:M.push(l),N++;break;case 6:M.pop(),N++;break;case 7:l=M.pop(),N++;break;case 8:M.length-=B[N+1],N+=2;break;case 9:M.splice(-2,1),N++;break;case 10:M[M.length-2].push(M.pop()),N++;break;case 11:M.push(M.splice(M.length-B[N+1],B[N+1])),N+=2;break;case 12:M.push(e.substring(M.pop(),l)),N++;break;case 13:F.push(O),z.push(N+3+B[N+1]+B[N+2]),M[M.length-1]?(O=N+3+B[N+1],N+=3):(O=N+3+B[N+1]+B[N+2],N+=3+B[N+1]);break;case 14:F.push(O),z.push(N+3+B[N+1]+B[N+2]),M[M.length-1]===r?(O=N+3+B[N+1],N+=3):(O=N+3+B[N+1]+B[N+2],N+=3+B[N+1]);break;case 15:F.push(O),z.push(N+3+B[N+1]+B[N+2]),M[M.length-1]!==r?(O=N+3+B[N+1],N+=3):(O=N+3+B[N+1]+B[N+2],N+=3+B[N+1]);break;case 16:M[M.length-1]!==r?(F.push(O),z.push(N),O=N+2+B[N+1],N+=2):N+=2+B[N+1];break;case 17:F.push(O),z.push(N+3+B[N+1]+B[N+2]),e.length>l?(O=N+3+B[N+1],N+=3):(O=N+3+B[N+1]+B[N+2],N+=3+B[N+1]);break;case 18:F.push(O),z.push(N+4+B[N+2]+B[N+3]),e.substr(l,o[B[N+1]].length)===o[B[N+1]]?(O=N+4+B[N+2],N+=4):(O=N+4+B[N+2]+B[N+3],N+=4+B[N+2]);break;case 19:F.push(O),z.push(N+4+B[N+2]+B[N+3]),e.substr(l,o[B[N+1]].length).toLowerCase()===o[B[N+1]]?(O=N+4+B[N+2],N+=4):(O=N+4+B[N+2]+B[N+3],N+=4+B[N+2]);break;case 20:F.push(O),z.push(N+4+B[N+2]+B[N+3]),o[B[N+1]].test(e.charAt(l))?(O=N+4+B[N+2],N+=4):(O=N+4+B[N+2]+B[N+3],N+=4+B[N+2]);break;case 21:M.push(e.substr(l,B[N+1])),l+=B[N+1],N+=2;break;case 22:M.push(o[B[N+1]]),l+=o[B[N+1]].length,N+=2;break;case 23:M.push(r),g===0&&k(o[B[N+1]]),N+=2;break;case 24:c=M[M.length-1-B[N+1]],N+=2;break;case 25:c=l,N++;break;case 26:$=B.slice(N+4,N+4+B[N+3]).map(function(q){return M[M.length-1-q]}),M.splice(M.length-B[N+2],B[N+2],o[B[N+1]].apply(null,$)),N+=4+B[N+3];break;case 27:M.push(A(B[N+1])),N+=2;break;case 28:g++,N++;break;case 29:g--,N++;break;default:throw new Error("Invalid opcode: "+B[N]+".")}if(!(F.length>0))break;O=F.pop(),N=z.pop()}return M[0]}(s),d!==r&&l===e.length)return d;throw d!==r&&l<e.length&&k({type:"end"}),R=f,_=h<e.length?e.charAt(h):null,H=h<e.length?b(h,h+1):b(h,h),new va(va.buildMessage(R,_),R,_,H);var R,_,H};var zt;(function(e){e.parse=function(t,r){const n={startRule:r};try{IN(t,n)}catch{n.data=-1}return n.data},e.nameAddrHeaderParse=function(t){const r=e.parse(t,"Name_Addr_Header");return r!==-1?r:void 0},e.URIParse=function(t){const r=e.parse(t,"SIP_URI");return r!==-1?r:void 0}})(zt=zt||(zt={}));const AN={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"};function ro(e,t=32){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*t).toString(t);return r}function _h(e){return AN[e]||""}function xh(){return ro(10)}function ri(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length;let i="";for(let s=0;s<n;s++)s!==0&&(i+="-"),i+=r[s].charAt(0).toUpperCase()+r[s].substring(1);return t[i]&&(i=t[i]),i}function uc(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}class kb{constructor(){this.headers={}}addHeader(t,r){const n={raw:r};t=ri(t),this.headers[t]?this.headers[t].push(n):this.headers[t]=[n]}getHeader(t){const r=this.headers[ri(t)];if(r)return r[0]?r[0].raw:void 0}getHeaders(t){const r=this.headers[ri(t)],n=[];if(!r)return[];for(const i of r)n.push(i.raw);return n}hasHeader(t){return!!this.headers[ri(t)]}parseHeader(t,r=0){if(t=ri(t),!this.headers[t]||r>=this.headers[t].length)return;const n=this.headers[t][r],i=n.raw;if(n.parsed)return n.parsed;const s=zt.parse(i,t.replace(/-/g,"_"));return s===-1?void this.headers[t].splice(r,1):(n.parsed=s,s)}s(t,r=0){return this.parseHeader(t,r)}setHeader(t,r){this.headers[ri(t)]=[{raw:r}]}toString(){return this.data}}class Ea extends kb{constructor(){super()}}class Ns extends kb{constructor(){super()}}class ao{constructor(t,r,n,i,s,o,a){this.headers={},this.extraHeaders=[],this.options=ao.getDefaultOptions(),s&&(this.options=Object.assign(Object.assign({},this.options),s),this.options.optionTags&&this.options.optionTags.length&&(this.options.optionTags=this.options.optionTags.slice()),this.options.routeSet&&this.options.routeSet.length&&(this.options.routeSet=this.options.routeSet.slice())),o&&o.length&&(this.extraHeaders=o.slice()),a&&(this.body={body:a.content,contentType:a.contentType}),this.method=t,this.ruri=r.clone(),this.fromURI=n.clone(),this.fromTag=this.options.fromTag?this.options.fromTag:xh(),this.from=ao.makeNameAddrHeader(this.fromURI,this.options.fromDisplayName,this.fromTag),this.toURI=i.clone(),this.toTag=this.options.toTag,this.to=ao.makeNameAddrHeader(this.toURI,this.options.toDisplayName,this.toTag),this.callId=this.options.callId?this.options.callId:this.options.callIdPrefix+ro(15),this.cseq=this.options.cseq,this.setHeader("route",this.options.routeSet),this.setHeader("via",""),this.setHeader("to",this.to.toString()),this.setHeader("from",this.from.toString()),this.setHeader("cseq",this.cseq+" "+this.method),this.setHeader("call-id",this.callId),this.setHeader("max-forwards","70")}static getDefaultOptions(){return{callId:"",callIdPrefix:"",cseq:1,toDisplayName:"",toTag:"",fromDisplayName:"",fromTag:"",forceRport:!1,hackViaTcp:!1,optionTags:["outbound"],routeSet:[],userAgentString:"sip.js",viaHost:""}}static makeNameAddrHeader(t,r,n){const i={};return n&&(i.tag=n),new Or(t,r,i)}getHeader(t){const r=this.headers[ri(t)];if(r){if(r[0])return r[0]}else{const n=new RegExp("^\\s*"+t+"\\s*:","i");for(const i of this.extraHeaders)if(n.test(i))return i.substring(i.indexOf(":")+1).trim()}}getHeaders(t){const r=[],n=this.headers[ri(t)];if(n)for(const i of n)r.push(i);else{const i=new RegExp("^\\s*"+t+"\\s*:","i");for(const s of this.extraHeaders)i.test(s)&&r.push(s.substring(s.indexOf(":")+1).trim())}return r}hasHeader(t){if(this.headers[ri(t)])return!0;{const r=new RegExp("^\\s*"+t+"\\s*:","i");for(const n of this.extraHeaders)if(r.test(n))return!0}return!1}setHeader(t,r){this.headers[ri(t)]=r instanceof Array?r:[r]}setViaHeader(t,r){this.options.hackViaTcp&&(r="TCP");let n="SIP/2.0/"+r;n+=" "+this.options.viaHost+";branch="+t,this.options.forceRport&&(n+=";rport"),this.setHeader("via",n),this.branch=t}toString(){let t="";t+=this.method+" "+this.ruri.toRaw()+` SIP/2.0\r
`;for(const r in this.headers)if(this.headers[r])for(const n of this.headers[r])t+=r+": "+n+`\r
`;for(const r of this.extraHeaders)t+=r.trim()+`\r
`;return t+="Supported: "+this.options.optionTags.join(", ")+`\r
`,t+="User-Agent: "+this.options.userAgentString+`\r
`,this.body?typeof this.body=="string"?(t+="Content-Length: "+uc(this.body)+`\r
\r
`,t+=this.body):this.body.body&&this.body.contentType?(t+="Content-Type: "+this.body.contentType+`\r
`,t+="Content-Length: "+uc(this.body.body)+`\r
\r
`,t+=this.body.body):t+=`Content-Length: 0\r
\r
`:t+=`Content-Length: 0\r
\r
`,t}}function _b(e){return e==="application/sdp"?"session":"render"}function Ld(e){const t=typeof e=="string"?e:e.body,r=typeof e=="string"?"application/sdp":e.contentType;return{contentDisposition:_b(r),contentType:r,content:t}}function xb(e){return!(!e||typeof e.content!="string"||typeof e.contentType!="string"||e.contentDisposition!==void 0)||typeof e.contentDisposition=="string"}function Ul(e){let t,r,n;if(e instanceof Ea&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,r=e.parseHeader("Content-Type"),n=e.body}if(e instanceof Ns&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,r=e.parseHeader("Content-Type"),n=e.body}if(e instanceof ao&&e.body)if(t=e.getHeader("Content-Disposition"),r=e.getHeader("Content-Type"),typeof e.body=="string"){if(!r)throw new Error("Header content type header does not equal body content type.");n=e.body}else{if(r&&r!==e.body.contentType)throw new Error("Header content type header does not equal body content type.");r=e.body.contentType,n=e.body.body}if(xb(e)&&(t=e.contentDisposition,r=e.contentType,n=e.content),n){if(r&&!t&&(t=_b(r)),!t)throw new Error("Content disposition undefined.");if(!r)throw new Error("Content type undefined.");return{contentDisposition:t,contentType:r,content:n}}}var gn,pe;(function(e){e.Initial="Initial",e.Early="Early",e.AckWait="AckWait",e.Confirmed="Confirmed",e.Terminated="Terminated"})(gn=gn||(gn={})),function(e){e.Initial="Initial",e.HaveLocalOffer="HaveLocalOffer",e.HaveRemoteOffer="HaveRemoteOffer",e.Stable="Stable",e.Closed="Closed"}(pe=pe||(pe={}));const RN=500,kN=5e3,tr={T1:RN,T2:4e3,T4:kN,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4};class us extends Io{constructor(t){super(t||"Transaction state error.")}}var Se;(function(e){e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK"})(Se=Se||(Se={}));const gs=[Se.ACK,Se.BYE,Se.CANCEL,Se.INFO,Se.INVITE,Se.MESSAGE,Se.NOTIFY,Se.OPTIONS,Se.PRACK,Se.REFER,Se.REGISTER,Se.SUBSCRIBE];class Nb{constructor(t){this.incomingMessageRequest=t}get request(){return this.incomingMessageRequest.message}accept(t){return this.incomingMessageRequest.accept(t),Promise.resolve()}reject(t){return this.incomingMessageRequest.reject(t),Promise.resolve()}}class Ng{constructor(t){this.incomingNotifyRequest=t}get request(){return this.incomingNotifyRequest.message}accept(t){return this.incomingNotifyRequest.accept(t),Promise.resolve()}reject(t){return this.incomingNotifyRequest.reject(t),Promise.resolve()}}class _N{constructor(t,r){this.incomingReferRequest=t,this.session=r}get referTo(){const t=this.incomingReferRequest.message.parseHeader("refer-to");if(!(t instanceof Or))throw new Error("Failed to parse Refer-To header.");return t}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){const t=this.referTo.uri.getHeader("replaces");return t instanceof Array?t[0]:t}get request(){return this.incomingReferRequest.message}accept(t={statusCode:202}){return this.incomingReferRequest.accept(t),Promise.resolve()}reject(t){return this.incomingReferRequest.reject(t),Promise.resolve()}makeInviter(t){if(this.inviter)return this.inviter;const r=this.referTo.uri.clone();r.clearHeaders();const n=((t=t||{}).extraHeaders||[]).slice(),i=this.replaces;i&&n.push("Replaces: "+decodeURIComponent(i));const s=this.referredBy;return s&&n.push("Referred-By: "+s),t.extraHeaders=n,this.inviter=this.session.userAgent._makeInviter(r,t),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}var X,mn;(function(e){e.Initial="Initial",e.Establishing="Establishing",e.Established="Established",e.Terminating="Terminating",e.Terminated="Terminated"})(X=X||(X={}));class dc{constructor(t,r={}){this.pendingReinvite=!1,this.pendingReinviteAck=!1,this._state=X.Initial,this.delegate=r.delegate,this._stateEventEmitter=new cc,this._userAgent=t}dispose(){switch(this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`),delete this.userAgent._sessions[this.id],this._sessionDescriptionHandler&&this._sessionDescriptionHandler.close(),this.state){case X.Initial:case X.Establishing:break;case X.Established:return new Promise(t=>{this._bye({onAccept:()=>t(),onRedirect:()=>t(),onReject:()=>t()})});case X.Terminating:case X.Terminated:break;default:throw new Error("Unknown state.")}return Promise.resolve()}get assertedIdentity(){return this._assertedIdentity}get dialog(){return this._dialog}get id(){return this._id}get replacee(){return this._replacee}get sessionDescriptionHandler(){return this._sessionDescriptionHandler}get sessionDescriptionHandlerFactory(){return this.userAgent.configuration.sessionDescriptionHandlerFactory}get sessionDescriptionHandlerModifiers(){return this._sessionDescriptionHandlerModifiers||[]}set sessionDescriptionHandlerModifiers(t){this._sessionDescriptionHandlerModifiers=t.slice()}get sessionDescriptionHandlerOptions(){return this._sessionDescriptionHandlerOptions||{}}set sessionDescriptionHandlerOptions(t){this._sessionDescriptionHandlerOptions=Object.assign({},t)}get sessionDescriptionHandlerModifiersReInvite(){return this._sessionDescriptionHandlerModifiersReInvite||[]}set sessionDescriptionHandlerModifiersReInvite(t){this._sessionDescriptionHandlerModifiersReInvite=t.slice()}get sessionDescriptionHandlerOptionsReInvite(){return this._sessionDescriptionHandlerOptionsReInvite||{}}set sessionDescriptionHandlerOptionsReInvite(t){this._sessionDescriptionHandlerOptionsReInvite=Object.assign({},t)}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get userAgent(){return this._userAgent}bye(t={}){let r="Session.bye() may only be called if established session.";switch(this.state){case X.Initial:typeof this.cancel=="function"?(r+=" However Inviter.invite() has not yet been called.",r+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(r+=" However Invitation.accept() has not yet been called.",r+=" Perhaps you should have called Invitation.reject()?");break;case X.Establishing:typeof this.cancel=="function"?(r+=" However a dialog does not yet exist.",r+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(r+=" However Invitation.accept() has not yet been called (or not yet resolved).",r+=" Perhaps you should have called Invitation.reject()?");break;case X.Established:{const n=t.requestDelegate,i=this.copyRequestOptions(t.requestOptions);return this._bye(n,i)}case X.Terminating:r+=" However this session is already terminating.",typeof this.cancel=="function"?r+=" Perhaps you have already called Inviter.cancel()?":typeof this.reject=="function"&&(r+=" Perhaps you have already called Session.bye()?");break;case X.Terminated:r+=" However this session is already terminated.";break;default:throw new Error("Unknown state")}return this.logger.error(r),Promise.reject(new Error(`Invalid session state ${this.state}`))}info(t={}){if(this.state!==X.Established)return this.logger.error("Session.info() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const r=t.requestDelegate,n=this.copyRequestOptions(t.requestOptions);return this._info(r,n)}invite(t={}){if(this.logger.log("Session.invite"),this.state!==X.Established)return Promise.reject(new Error(`Invalid session state ${this.state}`));if(this.pendingReinvite)return Promise.reject(new xg("Reinvite in progress. Please wait until complete, then try again."));this.pendingReinvite=!0,t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiersReInvite=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptionsReInvite=t.sessionDescriptionHandlerOptions);const r={onAccept:s=>{const o=Ul(s.message);if(!o)return this.logger.error("Received 2xx response to re-INVITE without a session description"),this.ackAndBye(s,400,"Missing session description"),this.stateTransition(X.Terminated),void(this.pendingReinvite=!1);if(t.withoutSdp){const a={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setOfferAndGetAnswer(o,a).then(l=>{s.ack({body:l})}).catch(l=>{this.logger.error("Failed to handle offer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state===X.Terminated?s.ack():(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(X.Terminated))}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}else{const a={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setAnswer(o,a).then(()=>{s.ack()}).catch(l=>{this.logger.error("Failed to handle answer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state!==X.Terminated?(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(X.Terminated)):s.ack()}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}},onProgress:s=>{},onRedirect:s=>{},onReject:s=>{this.logger.warn("Received a non-2xx response to re-INVITE"),this.pendingReinvite=!1,t.withoutSdp?t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s):this.rollbackOffer().catch(o=>{if(this.logger.error("Failed to rollback offer on non-2xx response to re-INVITE"),this.logger.error(o.message),this.state!==X.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const a=[];a.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:a}),this.stateTransition(X.Terminated)}}).then(()=>{t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s)})},onTrying:s=>{}},n=t.requestOptions||{};if(n.extraHeaders=(n.extraHeaders||[]).slice(),n.extraHeaders.push("Allow: "+gs.toString()),n.extraHeaders.push("Contact: "+this._contact),t.withoutSdp){if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return Promise.resolve(this.dialog.invite(r,n))}const i={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};return this.getOffer(i).then(s=>{if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return n.body=s,this.dialog.invite(r,n)}).catch(s=>{throw this.logger.error(s.message),this.logger.error("Failed to send re-INVITE"),this.pendingReinvite=!1,s})}message(t={}){if(this.state!==X.Established)return this.logger.error("Session.message() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const r=t.requestDelegate,n=this.copyRequestOptions(t.requestOptions);return this._message(r,n)}refer(t,r={}){if(this.state!==X.Established)return this.logger.error("Session.refer() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));if(t instanceof dc&&!t.dialog)return this.logger.error("Session.refer() may only be called with session which is established. You are perhaps attempting to attended transfer to a target for which there is not dialog yet established. Perhaps you are attempting a 'semi-attended' tansfer? Regardless, this is not supported. The recommended approached is to check to see if the target Session is in the Established state before calling refer(); if the state is not Established you may proceed by falling back using a URI as the target (blind transfer)."),Promise.reject(new Error(`Invalid session state ${this.state}`));const n=r.requestDelegate,i=this.copyRequestOptions(r.requestOptions);return i.extraHeaders=i.extraHeaders?i.extraHeaders.concat(this.referExtraHeaders(this.referToString(t))):this.referExtraHeaders(this.referToString(t)),this._refer(r.onNotify,n,i)}_bye(t,r){if(!this.dialog)return Promise.reject(new Error("Session dialog undefined."));const n=this.dialog;switch(n.sessionState){case gn.Initial:case gn.Early:throw new Error(`Invalid dialog state ${n.sessionState}`);case gn.AckWait:return this.stateTransition(X.Terminating),new Promise(i=>{n.delegate={onAck:()=>{const s=n.bye(t,r);return this.stateTransition(X.Terminated),i(s),Promise.resolve()},onAckTimeout:()=>{const s=n.bye(t,r);this.stateTransition(X.Terminated),i(s)}}});case gn.Confirmed:{const i=n.bye(t,r);return this.stateTransition(X.Terminated),Promise.resolve(i)}case gn.Terminated:throw new Error(`Invalid dialog state ${n.sessionState}`);default:throw new Error("Unrecognized state.")}}_info(t,r){return this.dialog?Promise.resolve(this.dialog.info(t,r)):Promise.reject(new Error("Session dialog undefined."))}_message(t,r){return this.dialog?Promise.resolve(this.dialog.message(t,r)):Promise.reject(new Error("Session dialog undefined."))}_refer(t,r,n){return this.dialog?(this.onNotify=t,Promise.resolve(this.dialog.refer(r,n))):Promise.reject(new Error("Session dialog undefined."))}ackAndBye(t,r,n){t.ack();const i=[];r&&i.push("Reason: "+this.getReasonHeaderValue(r,n)),t.session.bye(void 0,{extraHeaders:i})}onAckRequest(t){if(this.logger.log("Session.onAckRequest"),this.state!==X.Established&&this.state!==X.Terminating)return this.logger.error(`ACK received while in state ${this.state}, dropping request`),Promise.resolve();const r=this.dialog;if(!r)throw new Error("Dialog undefined.");const n={sessionDescriptionHandlerOptions:this.pendingReinviteAck?this.sessionDescriptionHandlerOptionsReInvite:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.pendingReinviteAck?this._sessionDescriptionHandlerModifiersReInvite:this._sessionDescriptionHandlerModifiers};if(this.delegate&&this.delegate.onAck){const i=new SN(t);this.delegate.onAck(i)}switch(this.pendingReinviteAck=!1,r.signalingState){case pe.Initial:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.Stable:{const i=Ul(t.message);return i?i.contentDisposition==="render"?(this._renderbody=i.content,this._rendertype=i.contentType,Promise.resolve()):i.contentDisposition!=="session"?Promise.resolve():this.setAnswer(i,n).catch(s=>{this.logger.error(s.message);const o=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];r.bye(void 0,{extraHeaders:o}),this.stateTransition(X.Terminated)}):Promise.resolve()}case pe.HaveLocalOffer:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.HaveRemoteOffer:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.Closed:default:throw new Error(`Invalid signaling state ${r.signalingState}.`)}}onByeRequest(t){if(this.logger.log("Session.onByeRequest"),this.state===X.Established){if(this.delegate&&this.delegate.onBye){const r=new wN(t);this.delegate.onBye(r)}else t.accept();this.stateTransition(X.Terminated)}else this.logger.error(`BYE received while in state ${this.state}, dropping request`)}onInfoRequest(t){if(this.logger.log("Session.onInfoRequest"),this.state===X.Established)if(this.delegate&&this.delegate.onInfo){const r=new TN(t);this.delegate.onInfo(r)}else t.accept();else this.logger.error(`INFO received while in state ${this.state}, dropping request`)}onInviteRequest(t){if(this.logger.log("Session.onInviteRequest"),this.state!==X.Established)return void this.logger.error(`INVITE received while in state ${this.state}, dropping request`);this.pendingReinviteAck=!0;const r=["Contact: "+this._contact];if(t.message.hasHeader("P-Asserted-Identity")){const i=t.message.getHeader("P-Asserted-Identity");if(!i)throw new Error("Header undefined.");this._assertedIdentity=zt.nameAddrHeaderParse(i)}const n={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.generateResponseOfferAnswerInDialog(n).then(i=>{const s=t.accept({statusCode:200,extraHeaders:r,body:i});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,200)}).catch(i=>{if(this.logger.error(i.message),this.logger.error("Failed to handle to re-INVITE request"),!this.dialog)throw new Error("Dialog undefined.");if(this.logger.error(this.dialog.signalingState),this.dialog.signalingState!==pe.Stable)this.rollbackOffer().then(()=>{const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488)}).catch(s=>{this.logger.error(s.message),this.logger.error("Failed to rollback offer on re-INVITE request");const o=t.reject({statusCode:488});if(this.state!==X.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const a=[];a.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:a}),this.stateTransition(X.Terminated)}this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,o.message,488)});else{const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488)}})}onMessageRequest(t){if(this.logger.log("Session.onMessageRequest"),this.state===X.Established)if(this.delegate&&this.delegate.onMessage){const r=new Nb(t);this.delegate.onMessage(r)}else t.accept();else this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`)}onNotifyRequest(t){if(this.logger.log("Session.onNotifyRequest"),this.state===X.Established)if(this.onNotify){const r=new Ng(t);this.onNotify(r)}else if(this.delegate&&this.delegate.onNotify){const r=new Ng(t);this.delegate.onNotify(r)}else t.accept();else this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`)}onPrackRequest(t){if(this.logger.log("Session.onPrackRequest"),this.state===X.Established)throw new Error("Unimplemented.");this.logger.error(`PRACK received while in state ${this.state}, dropping request`)}onReferRequest(t){if(this.logger.log("Session.onReferRequest"),this.state!==X.Established)return void this.logger.error(`REFER received while in state ${this.state}, dropping request`);if(!t.message.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting."),void t.reject();const r=new _N(t,this);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(r):(this.logger.log("No delegate available to handle REFER, automatically accepting and following."),r.accept().then(()=>r.makeInviter(this._referralInviterOptions).invite()).catch(n=>{this.logger.error(n.message)}))}generateResponseOfferAnswer(t,r){if(this.dialog)return this.generateResponseOfferAnswerInDialog(r);const n=Ul(t.message);return n&&n.contentDisposition==="session"?this.setOfferAndGetAnswer(n,r):this.getOffer(r)}generateResponseOfferAnswerInDialog(t){if(!this.dialog)throw new Error("Dialog undefined.");switch(this.dialog.signalingState){case pe.Initial:return this.getOffer(t);case pe.HaveLocalOffer:return Promise.resolve(void 0);case pe.HaveRemoteOffer:if(!this.dialog.offer)throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);return this.setOfferAndGetAnswer(this.dialog.offer,t);case pe.Stable:return this.state!==X.Established?Promise.resolve(void 0):this.getOffer(t);case pe.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}getOffer(t){const r=this.setupSessionDescriptionHandler(),n=t.sessionDescriptionHandlerOptions,i=t.sessionDescriptionHandlerModifiers;try{return r.getDescription(n,i).then(s=>Ld(s)).catch(s=>{this.logger.error("Session.getOffer: SDH getDescription rejected...");const o=s instanceof Error?s:new Error("Session.getOffer unknown error.");throw this.logger.error(o.message),o})}catch(s){this.logger.error("Session.getOffer: SDH getDescription threw...");const o=s instanceof Error?s:new Error(s);return this.logger.error(o.message),Promise.reject(o)}}rollbackOffer(){const t=this.setupSessionDescriptionHandler();if(t.rollbackDescription===void 0)return Promise.resolve();try{return t.rollbackDescription().catch(r=>{this.logger.error("Session.rollbackOffer: SDH rollbackDescription rejected...");const n=r instanceof Error?r:new Error("Session.rollbackOffer unknown error.");throw this.logger.error(n.message),n})}catch(r){this.logger.error("Session.rollbackOffer: SDH rollbackDescription threw...");const n=r instanceof Error?r:new Error(r);return this.logger.error(n.message),Promise.reject(n)}}setAnswer(t,r){const n=this.setupSessionDescriptionHandler(),i=r.sessionDescriptionHandlerOptions,s=r.sessionDescriptionHandlerModifiers;try{if(!n.hasDescription(t.contentType))return Promise.reject(new _g)}catch(o){this.logger.error("Session.setAnswer: SDH hasDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}try{return n.setDescription(t.content,i,s).catch(o=>{this.logger.error("Session.setAnswer: SDH setDescription rejected...");const a=o instanceof Error?o:new Error("Session.setAnswer unknown error.");throw this.logger.error(a.message),a})}catch(o){this.logger.error("Session.setAnswer: SDH setDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}}setOfferAndGetAnswer(t,r){const n=this.setupSessionDescriptionHandler(),i=r.sessionDescriptionHandlerOptions,s=r.sessionDescriptionHandlerModifiers;try{if(!n.hasDescription(t.contentType))return Promise.reject(new _g)}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH hasDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}try{return n.setDescription(t.content,i,s).then(()=>n.getDescription(i,s)).then(o=>Ld(o)).catch(o=>{this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...");const a=o instanceof Error?o:new Error("Session.setOfferAndGetAnswer unknown error.");throw this.logger.error(a.message),a})}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}}setSessionDescriptionHandler(t){if(this._sessionDescriptionHandler)throw new Error("Session description handler defined.");this._sessionDescriptionHandler=t}setupSessionDescriptionHandler(){var t;return this._sessionDescriptionHandler||(this._sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions),!((t=this.delegate)===null||t===void 0)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler,!1)),this._sessionDescriptionHandler}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case X.Initial:t!==X.Establishing&&t!==X.Established&&t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Establishing:t!==X.Established&&t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Established:t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Terminating:t!==X.Terminated&&r();break;case X.Terminated:r();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Session ${this.id} transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===X.Terminated&&this.dispose()}copyRequestOptions(t={}){return{extraHeaders:t.extraHeaders?t.extraHeaders.slice():void 0,body:t.body?{contentDisposition:t.body.contentDisposition||"render",contentType:t.body.contentType||"text/plain",content:t.body.content||""}:void 0}}getReasonHeaderValue(t,r){const n=t;let i=_h(t);return!i&&r&&(i=r),"SIP;cause="+n+';text="'+i+'"'}referExtraHeaders(t){const r=[];return r.push("Referred-By: <"+this.userAgent.configuration.uri+">"),r.push("Contact: "+this._contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),r.push("Refer-To: "+t),r}referToString(t){let r;if(t instanceof di)r=t.toString();else{if(!t.dialog)throw new Error("Dialog undefined.");const n=t.remoteIdentity.friendlyName,i=t.dialog.remoteTarget.toString(),s=t.dialog.callId,o=t.dialog.remoteTag,a=t.dialog.localTag;r=`"${n}" <${i}?Replaces=${encodeURIComponent(`${s};to-tag=${o};from-tag=${a}`)}>`}return r}}(function(e){e.Required="Required",e.Supported="Supported",e.Unsupported="Unsupported"})(mn=mn||(mn={}));const xN={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0};let NN=class extends dc{constructor(e,t){super(e),this.incomingInviteRequest=t,this.disposed=!1,this.expiresTimer=void 0,this.isCanceled=!1,this.rel100="none",this.rseq=Math.floor(1e4*Math.random()),this.userNoAnswerTimer=void 0,this.waitingForPrack=!1,this.logger=e.getLogger("sip.Invitation");const r=this.incomingInviteRequest.message,n=r.getHeader("require");n&&n.toLowerCase().includes("100rel")&&(this.rel100="required");const i=r.getHeader("supported");if(i&&i.toLowerCase().includes("100rel")&&(this.rel100="supported"),r.toTag=t.toTag,typeof r.toTag!="string")throw new TypeError("toTag should have been a string.");if(this.userNoAnswerTimer=setTimeout(()=>{t.reject({statusCode:480}),this.stateTransition(X.Terminated)},this.userAgent.configuration.noAnswerTimeout?1e3*this.userAgent.configuration.noAnswerTimeout:6e4),r.hasHeader("expires")){const a=1e3*Number(r.getHeader("expires")||0);this.expiresTimer=setTimeout(()=>{this.state===X.Initial&&(t.reject({statusCode:487}),this.stateTransition(X.Terminated))},a)}const s=this.request.getHeader("P-Asserted-Identity");s&&(this._assertedIdentity=zt.nameAddrHeaderParse(s)),this._contact=this.userAgent.contact.toString();const o=r.parseHeader("Content-Disposition");o&&o.type==="render"&&(this._renderbody=r.body,this._rendertype=r.getHeader("Content-Type")),this._id=r.callId+r.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.expiresTimer&&(clearTimeout(this.expiresTimer),this.expiresTimer=void 0),this.userNoAnswerTimer&&(clearTimeout(this.userNoAnswerTimer),this.userNoAnswerTimer=void 0),this.prackNeverArrived(),this.state){case X.Initial:case X.Establishing:return this.reject().then(()=>super.dispose());case X.Established:case X.Terminating:case X.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get autoSendAnInitialProvisionalResponse(){return this.rel100!=="required"&&this.userAgent.configuration.sendInitialProvisionalResponse}get body(){return this.incomingInviteRequest.message.body}get localIdentity(){return this.request.to}get remoteIdentity(){return this.request.from}get request(){return this.incomingInviteRequest.message}accept(e={}){if(this.logger.log("Invitation.accept"),this.state!==X.Initial){const t=new Error(`Invalid session state ${this.state}`);return this.logger.error(t.message),Promise.reject(t)}return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.stateTransition(X.Establishing),this.sendAccept(e).then(({message:t,session:r})=>{r.delegate={onAck:n=>this.onAckRequest(n),onAckTimeout:()=>this.onAckTimeout(),onBye:n=>this.onByeRequest(n),onInfo:n=>this.onInfoRequest(n),onInvite:n=>this.onInviteRequest(n),onMessage:n=>this.onMessageRequest(n),onNotify:n=>this.onNotifyRequest(n),onPrack:n=>this.onPrackRequest(n),onRefer:n=>this.onReferRequest(n)},this._dialog=r,this.stateTransition(X.Established),this._replacee&&this._replacee._bye()}).catch(t=>this.handleResponseError(t))}progress(e={}){if(this.logger.log("Invitation.progress"),this.state!==X.Initial){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}const t=e.statusCode||180;if(t<100||t>199)throw new TypeError("Invalid statusCode: "+t);return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.waitingForPrack?(this.logger.warn("Unexpected call for progress while waiting for prack, ignoring"),Promise.resolve()):e.statusCode===100?this.sendProgressTrying().then(()=>{}).catch(r=>this.handleResponseError(r)):this.rel100==="required"||this.rel100==="supported"&&e.rel100||this.rel100==="supported"&&this.userAgent.configuration.sipExtension100rel===mn.Required?this.sendProgressReliableWaitForPrack(e).then(()=>{}).catch(r=>this.handleResponseError(r)):this.sendProgress(e).then(()=>{}).catch(r=>this.handleResponseError(r))}reject(e={}){if(this.logger.log("Invitation.reject"),this.state!==X.Initial&&this.state!==X.Establishing){const s=new Error(`Invalid session state ${this.state}`);return this.logger.error(s.message),Promise.reject(s)}const t=e.statusCode||480,r=e.reasonPhrase?e.reasonPhrase:_h(t),n=e.extraHeaders||[];if(t<300||t>699)throw new TypeError("Invalid statusCode: "+t);const i=e.body?Ld(e.body):void 0;return t<400?this.incomingInviteRequest.redirect([],{statusCode:t,reasonPhrase:r,extraHeaders:n,body:i}):this.incomingInviteRequest.reject({statusCode:t,reasonPhrase:r,extraHeaders:n,body:i}),this.stateTransition(X.Terminated),Promise.resolve()}_onCancel(e){if(this.logger.log("Invitation._onCancel"),this.state===X.Initial||this.state===X.Establishing){if(this.delegate&&this.delegate.onCancel){const t=new bN(e);this.delegate.onCancel(t)}this.isCanceled=!0,this.incomingInviteRequest.reject({statusCode:487}),this.stateTransition(X.Terminated)}else this.logger.error(`CANCEL received while in state ${this.state}, dropping request`)}handlePrackOfferAnswer(e){if(!this.dialog)throw new Error("Dialog undefined.");const t=Ul(e.message);if(!t||t.contentDisposition!=="session")return Promise.resolve(void 0);const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers};switch(this.dialog.signalingState){case pe.Initial:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case pe.Stable:return this.setAnswer(t,r).then(()=>{});case pe.HaveLocalOffer:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case pe.HaveRemoteOffer:return this.setOfferAndGetAnswer(t,r);case pe.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}handleResponseError(e){let t=480;if(e instanceof Error?this.logger.error(e.message):this.logger.error(e),e instanceof _g?(this.logger.error("A session description handler occurred while sending response (content type unsupported"),t=415):e instanceof CN?this.logger.error("A session description handler occurred while sending response"):e instanceof Qf?this.logger.error("Session ended before response could be formulated and sent (while waiting for PRACK)"):e instanceof us&&this.logger.error("Session changed state before response could be formulated and sent"),this.state===X.Initial||this.state===X.Establishing)try{this.incomingInviteRequest.reject({statusCode:t}),this.stateTransition(X.Terminated)}catch(r){throw this.logger.error("An error occurred attempting to reject the request while handling another error"),r}if(!this.isCanceled)throw e;this.logger.warn("An error occurred while attempting to formulate and send a response to an incoming INVITE. However a CANCEL was received and processed while doing so which can (and often does) result in errors occurring as the session terminates in the meantime. Said error is being ignored.")}onAckTimeout(){if(this.logger.log("Invitation.onAckTimeout"),!this.dialog)throw new Error("Dialog undefined.");this.logger.log("No ACK received for an extended period of time, terminating session"),this.dialog.bye(),this.stateTransition(X.Terminated)}sendAccept(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.extraHeaders||[];return this.waitingForPrack?this.waitForArrivalOfPrack().then(()=>clearTimeout(this.userNoAnswerTimer)).then(()=>this.generateResponseOfferAnswer(this.incomingInviteRequest,t)).then(n=>this.incomingInviteRequest.accept({statusCode:200,body:n,extraHeaders:r})):(clearTimeout(this.userNoAnswerTimer),this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(n=>this.incomingInviteRequest.accept({statusCode:200,body:n,extraHeaders:r})))}sendProgress(e={}){const t=e.statusCode||180,r=e.reasonPhrase,n=(e.extraHeaders||[]).slice(),i=e.body?Ld(e.body):void 0;if(t===183&&!i)return this.sendProgressWithSDP(e);try{const s=this.incomingInviteRequest.progress({statusCode:t,reasonPhrase:r,extraHeaders:n,body:i});return this._dialog=s.session,Promise.resolve(s)}catch(s){return Promise.reject(s)}}sendProgressWithSDP(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,n=e.reasonPhrase,i=(e.extraHeaders||[]).slice();return this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(s=>this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s})).then(s=>(this._dialog=s.session,s))}sendProgressReliable(e={}){return e.extraHeaders=(e.extraHeaders||[]).slice(),e.extraHeaders.push("Require: 100rel"),e.extraHeaders.push("RSeq: "+Math.floor(1e4*Math.random())),this.sendProgressWithSDP(e)}sendProgressReliableWaitForPrack(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,n=e.reasonPhrase,i=(e.extraHeaders||[]).slice();let s;return i.push("Require: 100rel"),i.push("RSeq: "+this.rseq++),new Promise((o,a)=>{this.waitingForPrack=!0,this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(l=>(s=l,this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s}))).then(l=>{let c,u;this._dialog=l.session,l.session.delegate={onPrack:y=>{c=y,clearTimeout(d),clearTimeout(g),this.waitingForPrack&&(this.waitingForPrack=!1,this.handlePrackOfferAnswer(c).then(E=>{try{u=c.accept({statusCode:200,body:E}),this.prackArrived(),o({prackRequest:c,prackResponse:u,progressResponse:l})}catch(p){a(p)}}).catch(E=>a(E)))}};const d=setTimeout(()=>{this.waitingForPrack&&(this.waitingForPrack=!1,this.logger.warn("No PRACK received, rejecting INVITE."),clearTimeout(g),this.reject({statusCode:504}).then(()=>a(new Qf)).catch(y=>a(y)))},64*tr.T1),h=()=>{try{this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s})}catch(y){return this.waitingForPrack=!1,void a(y)}g=setTimeout(h,f*=2)};let f=tr.T1,g=setTimeout(h,f)}).catch(l=>{this.waitingForPrack=!1,a(l)})})}sendProgressTrying(){try{const e=this.incomingInviteRequest.trying();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}waitForArrivalOfPrack(){if(this.waitingForPrackPromise)throw new Error("Already waiting for PRACK");return this.waitingForPrackPromise=new Promise((e,t)=>{this.waitingForPrackResolve=e,this.waitingForPrackReject=t}),this.waitingForPrackPromise}prackArrived(){this.waitingForPrackResolve&&this.waitingForPrackResolve(),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}prackNeverArrived(){this.waitingForPrackReject&&this.waitingForPrackReject(new Qf),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}},Db=class extends dc{constructor(e,t,r={}){super(e,r),this.disposed=!1,this.earlyMedia=!1,this.earlyMediaSessionDescriptionHandlers=new Map,this.isCanceled=!1,this.inviteWithoutSdp=!1,this.logger=e.getLogger("sip.Inviter"),this.earlyMedia=r.earlyMedia!==void 0?r.earlyMedia:this.earlyMedia,this.fromTag=xh(),this.inviteWithoutSdp=r.inviteWithoutSdp!==void 0?r.inviteWithoutSdp:this.inviteWithoutSdp;const n=Object.assign({},r);n.params=Object.assign({},r.params);const i=r.anonymous||!1,s=e.contact.toString({anonymous:i,outbound:i?!e.contact.tempGruu:!e.contact.pubGruu});i&&e.configuration.uri&&(n.params.fromDisplayName="Anonymous",n.params.fromUri="sip:anonymous@anonymous.invalid");let o=e.userAgentCore.configuration.aor;if(n.params.fromUri&&(o=typeof n.params.fromUri=="string"?zt.URIParse(n.params.fromUri):n.params.fromUri),!o)throw new TypeError("Invalid from URI: "+n.params.fromUri);let a=t;if(n.params.toUri&&(a=typeof n.params.toUri=="string"?zt.URIParse(n.params.toUri):n.params.toUri),!a)throw new TypeError("Invalid to URI: "+n.params.toUri);const l=Object.assign({},n.params);l.fromTag=this.fromTag;const c=(n.extraHeaders||[]).slice();i&&e.configuration.uri&&(c.push("P-Preferred-Identity: "+e.configuration.uri.toString()),c.push("Privacy: id")),c.push("Contact: "+s),c.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),e.configuration.sipExtension100rel===mn.Required&&c.push("Require: 100rel"),e.configuration.sipExtensionReplaces===mn.Required&&c.push("Require: replaces"),n.extraHeaders=c,this.outgoingRequestMessage=e.userAgentCore.makeOutgoingRequestMessage(Se.INVITE,t,o,a,l,c,void 0),this._contact=s,this._referralInviterOptions=n,this._renderbody=r.renderbody,this._rendertype=r.rendertype,r.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=r.sessionDescriptionHandlerModifiers),r.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=r.sessionDescriptionHandlerOptions),r.sessionDescriptionHandlerModifiersReInvite&&(this.sessionDescriptionHandlerModifiersReInvite=r.sessionDescriptionHandlerModifiersReInvite),r.sessionDescriptionHandlerOptionsReInvite&&(this.sessionDescriptionHandlerOptionsReInvite=r.sessionDescriptionHandlerOptionsReInvite),this._id=this.outgoingRequestMessage.callId+this.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.disposeEarlyMedia(),this.state){case X.Initial:case X.Establishing:return this.cancel().then(()=>super.dispose());case X.Established:case X.Terminating:case X.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get body(){return this.outgoingRequestMessage.body}get localIdentity(){return this.outgoingRequestMessage.from}get remoteIdentity(){return this.outgoingRequestMessage.to}get request(){return this.outgoingRequestMessage}cancel(e={}){if(this.logger.log("Inviter.cancel"),this.state!==X.Initial&&this.state!==X.Establishing){const t=new Error(`Invalid session state ${this.state}`);return this.logger.error(t.message),Promise.reject(t)}if(this.isCanceled=!0,this.stateTransition(X.Terminating),this.outgoingInviteRequest){let t;e.statusCode&&e.reasonPhrase&&(t=function(r,n){if(r&&r<200||r>699)throw new TypeError("Invalid statusCode: "+r);if(r)return"SIP;cause="+r+';text="'+(_h(r)||n)+'"'}(e.statusCode,e.reasonPhrase)),this.outgoingInviteRequest.cancel(t,e)}else this.logger.warn("Canceled session before INVITE was sent"),this.stateTransition(X.Terminated);return Promise.resolve()}invite(e={}){if(this.logger.log("Inviter.invite"),this.state!==X.Initial)return super.invite(e);if(e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),e.withoutSdp||this.inviteWithoutSdp)return this._renderbody&&this._rendertype&&(this.outgoingRequestMessage.body={contentType:this._rendertype,body:this._renderbody}),this.stateTransition(X.Establishing),Promise.resolve(this.sendInvite(e));const t={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.getOffer(t).then(r=>(this.outgoingRequestMessage.body={body:r.content,contentType:r.contentType},this.stateTransition(X.Establishing),this.sendInvite(e))).catch(r=>{throw this.logger.log(r.message),this.state!==X.Terminated&&this.stateTransition(X.Terminated),r})}sendInvite(e={}){return this.outgoingInviteRequest=this.userAgent.userAgentCore.invite(this.outgoingRequestMessage,{onAccept:t=>this.dialog?(this.logger.log("Additional confirmed dialog, sending ACK and BYE"),void this.ackAndBye(t)):this.isCanceled?(this.logger.log("Canceled session accepted, sending ACK and BYE"),this.ackAndBye(t),void this.stateTransition(X.Terminated)):(this.notifyReferer(t),void this.onAccept(t).then(()=>{this.disposeEarlyMedia()}).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})),onProgress:t=>{this.isCanceled||(this.notifyReferer(t),this.onProgress(t).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)}))},onRedirect:t=>{this.notifyReferer(t),this.onRedirect(t),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t)},onReject:t=>{this.notifyReferer(t),this.onReject(t),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t)},onTrying:t=>{this.notifyReferer(t),this.onTrying(t),e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}}),this.outgoingInviteRequest}disposeEarlyMedia(){this.earlyMediaSessionDescriptionHandlers.forEach(e=>{e.close()}),this.earlyMediaSessionDescriptionHandlers.clear()}notifyReferer(e){if(!this._referred)return;if(!(this._referred instanceof dc))throw new Error("Referred session not instance of session");if(!this._referred.dialog)return;if(!e.message.statusCode)throw new Error("Status code undefined.");if(!e.message.reasonPhrase)throw new Error("Reason phrase undefined.");const t=`SIP/2.0 ${e.message.statusCode} ${e.message.reasonPhrase}`.trim();this._referred.dialog.notify(void 0,{extraHeaders:["Event: refer","Subscription-State: terminated"],body:{contentDisposition:"render",contentType:"message/sipfrag",content:t}}).delegate={onReject:()=>{this._referred=void 0}}}onAccept(e){if(this.logger.log("Inviter.onAccept"),this.state!==X.Establishing)return this.logger.error(`Accept received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));const t=e.message,r=e.session;switch(t.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=zt.nameAddrHeaderParse(t.getHeader("P-Asserted-Identity"))),r.delegate={onAck:n=>this.onAckRequest(n),onBye:n=>this.onByeRequest(n),onInfo:n=>this.onInfoRequest(n),onInvite:n=>this.onInviteRequest(n),onMessage:n=>this.onMessageRequest(n),onNotify:n=>this.onNotifyRequest(n),onPrack:n=>this.onPrackRequest(n),onRefer:n=>this.onReferRequest(n)},this._dialog=r,r.signalingState){case pe.Initial:case pe.HaveLocalOffer:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(e,400,"Missing session description"),this.stateTransition(X.Terminated),Promise.reject(new Error("Bad Media Description"));case pe.HaveRemoteOffer:{if(!this._dialog.offer)throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);const n={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setOfferAndGetAnswer(this._dialog.offer,n).then(i=>{e.ack({body:i}),this.stateTransition(X.Established)}).catch(i=>{throw this.ackAndBye(e,488,"Invalid session description"),this.stateTransition(X.Terminated),i})}case pe.Stable:{if(this.earlyMediaSessionDescriptionHandlers.size>0){const s=this.earlyMediaSessionDescriptionHandlers.get(r.id);if(!s)throw new Error("Session description handler undefined.");return this.setSessionDescriptionHandler(s),this.earlyMediaSessionDescriptionHandlers.delete(r.id),e.ack(),this.stateTransition(X.Established),Promise.resolve()}if(this.earlyMediaDialog){if(this.earlyMediaDialog!==r){this.earlyMedia&&this.logger.error("You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly the end point which accepted the INVITE (confirmed dialog) does not match the end point with which early media has been setup (early dialog) and thus this session is unable to proceed. In accordance with the SIP specifications, the SIP servers your end point is connected to determine if an INVITE forks and the forking behavior of those servers cannot be controlled by this library. If you wish to use early media with this library you must configure those servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow this library to function with any INVITE requests which do fork.");const s=new Error("Early media dialog does not equal confirmed dialog, terminating session");return this.logger.error(s.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(X.Terminated),Promise.reject(s)}return e.ack(),this.stateTransition(X.Established),Promise.resolve()}const n=r.answer;if(!n)throw new Error("Answer is undefined.");const i={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(n,i).then(()=>{let s;this._renderbody&&this._rendertype&&(s={body:{contentDisposition:"render",contentType:this._rendertype,content:this._renderbody}}),e.ack(s),this.stateTransition(X.Established)}).catch(s=>{throw this.logger.error(s.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(X.Terminated),s})}case pe.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onProgress(e){var t;if(this.logger.log("Inviter.onProgress"),this.state!==X.Establishing)return this.logger.error(`Progress received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));if(!this.outgoingInviteRequest)throw new Error("Outgoing INVITE request undefined.");const r=e.message,n=e.session;r.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=zt.nameAddrHeaderParse(r.getHeader("P-Asserted-Identity")));const i=r.getHeader("require"),s=r.getHeader("rseq"),o=!!(i&&i.includes("100rel")&&s&&Number(s)),a=[];switch(o&&a.push("RAck: "+r.getHeader("rseq")+" "+r.getHeader("cseq")),n.signalingState){case pe.Initial:return o&&(this.logger.warn("First reliable provisional response received MUST contain an offer when INVITE does not contain an offer."),e.prack({extraHeaders:a})),Promise.resolve();case pe.HaveLocalOffer:return o&&e.prack({extraHeaders:a}),Promise.resolve();case pe.HaveRemoteOffer:if(!o)return this.logger.warn("Non-reliable provisional response MUST NOT contain an initial offer, discarding response."),Promise.resolve();{const l=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions||{});return!((t=this.delegate)===null||t===void 0)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(l,!0),this.earlyMediaSessionDescriptionHandlers.set(n.id,l),l.setDescription(r.body,this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers).then(()=>l.getDescription(this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers)).then(c=>{const u={contentDisposition:"session",contentType:c.contentType,content:c.body};e.prack({extraHeaders:a,body:u})}).catch(c=>{throw this.stateTransition(X.Terminated),c})}case pe.Stable:if(o&&e.prack({extraHeaders:a}),this.earlyMedia&&!this.earlyMediaDialog){this.earlyMediaDialog=n;const l=n.answer;if(!l)throw new Error("Answer is undefined.");const c={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(l,c).catch(u=>{throw this.stateTransition(X.Terminated),u})}return Promise.resolve();case pe.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onRedirect(e){this.logger.log("Inviter.onRedirect"),this.state===X.Establishing||this.state===X.Terminating?this.stateTransition(X.Terminated):this.logger.error(`Redirect received while in state ${this.state}, dropping response`)}onReject(e){this.logger.log("Inviter.onReject"),this.state===X.Establishing||this.state===X.Terminating?this.stateTransition(X.Terminated):this.logger.error(`Reject received while in state ${this.state}, dropping response`)}onTrying(e){this.logger.log("Inviter.onTrying"),this.state===X.Establishing||this.logger.error(`Trying received while in state ${this.state}, dropping response`)}};var it,lt,De,cr,er;(function(e){e.Initial="Initial",e.Registered="Registered",e.Unregistered="Unregistered",e.Terminated="Terminated"})(it=it||(it={}));class ni{constructor(t,r={}){this.disposed=!1,this._contacts=[],this._retryAfter=void 0,this._state=it.Initial,this._waiting=!1,this._stateEventEmitter=new cc,this._waitingEventEmitter=new cc,this.userAgent=t;const n=t.configuration.uri.clone();if(n.user=void 0,this.options=Object.assign(Object.assign(Object.assign({},ni.defaultOptions()),{registrar:n}),ni.stripUndefinedProperties(r)),this.options.extraContactHeaderParams=(this.options.extraContactHeaderParams||[]).slice(),this.options.extraHeaders=(this.options.extraHeaders||[]).slice(),!this.options.registrar)throw new Error("Registrar undefined.");if(this.options.registrar=this.options.registrar.clone(),this.options.regId&&!this.options.instanceId?this.options.instanceId=this.userAgent.instanceId:!this.options.regId&&this.options.instanceId&&(this.options.regId=1),this.options.instanceId&&zt.parse(this.options.instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");if(this.options.regId&&this.options.regId<0)throw new Error("Invalid regId.");const i=this.options.registrar,s=this.options.params&&this.options.params.fromUri||t.userAgentCore.configuration.aor,o=this.options.params&&this.options.params.toUri||t.configuration.uri,a=this.options.params||{},l=(r.extraHeaders||[]).slice();if(this.request=t.userAgentCore.makeOutgoingRequestMessage(Se.REGISTER,i,s,o,a,l,void 0),this.expires=this.options.expires||ni.defaultExpires,this.expires<0)throw new Error("Invalid expires.");if(this.refreshFrequency=this.options.refreshFrequency||ni.defaultRefreshFrequency,this.refreshFrequency<50||this.refreshFrequency>99)throw new Error("Invalid refresh frequency. The value represents a percentage of the expiration time and should be between 50 and 99.");this.logger=t.getLogger("sip.Registerer"),this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(c=>{const u=this.options[c];c==="registrar"?this.logger.log(" "+c+": "+u):this.logger.log(" "+c+": "+JSON.stringify(u))})),this.id=this.request.callId+this.request.from.parameters.tag,this.userAgent._registerers[this.id]=this}static defaultOptions(){return{expires:ni.defaultExpires,extraContactHeaderParams:[],extraHeaders:[],logConfiguration:!0,instanceId:"",params:{},regId:0,registrar:new di("sip","anonymous","anonymous.invalid"),refreshFrequency:ni.defaultRefreshFrequency}}static stripUndefinedProperties(t){return Object.keys(t).reduce((r,n)=>(t[n]!==void 0&&(r[n]=t[n]),r),{})}get contacts(){return this._contacts.slice()}get retryAfter(){return this._retryAfter}get state(){return this._state}get stateChange(){return this._stateEventEmitter}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Registerer ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._registerers[this.id],new Promise(t=>{const r=()=>{if(!this.waiting&&this._state===it.Registered)return this.stateChange.addListener(()=>{this.terminated(),t()},{once:!0}),void this.unregister();this.terminated(),t()};this.waiting?this.waitingChange.addListener(()=>{r()},{once:!0}):r()}))}register(t={}){if(this.state===it.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new xg("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}t.requestOptions&&(this.options=Object.assign(Object.assign({},this.options),t.requestOptions));const r=(this.options.extraHeaders||[]).slice();r.push("Contact: "+this.generateContactHeader(this.expires)),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.request.extraHeaders=r,this.waitingToggle(!0);const n=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{let s;i.message.hasHeader("expires")&&(s=Number(i.message.getHeader("expires"))),this._contacts=i.message.getHeaders("contact");let o,a=this._contacts.length;if(!a)return this.logger.error("No Contact header in response to REGISTER, dropping response."),void this.unregistered();for(;a--;){if(o=i.message.parseHeader("contact",a),!o)throw new Error("Contact undefined");if(this.userAgent.contact.pubGruu&&p2(o.uri,this.userAgent.contact.pubGruu)){s=Number(o.getParam("expires"));break}if(this.userAgent.configuration.contactName===""){if(o.uri.user===this.userAgent.contact.uri.user){s=Number(o.getParam("expires"));break}}else if(p2(o.uri,this.userAgent.contact.uri)){s=Number(o.getParam("expires"));break}o=void 0}if(o===void 0)return this.logger.error("No Contact header pointing to us, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(s===void 0)return this.logger.error("Contact pointing to us is missing expires parameter, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(o.hasParam("temp-gruu")){const l=o.getParam("temp-gruu");l&&(this.userAgent.contact.tempGruu=zt.URIParse(l.replace(/"/g,"")))}if(o.hasParam("pub-gruu")){const l=o.getParam("pub-gruu");l&&(this.userAgent.contact.pubGruu=zt.URIParse(l.replace(/"/g,"")))}this.registered(s),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Redirect received. Not supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{if(i.message.statusCode===423)return i.message.hasHeader("min-expires")?(this.expires=Number(i.message.getHeader("min-expires")),this.waitingToggle(!1),void this.register()):(this.logger.error("423 response received for REGISTER without Min-Expires, dropping response"),this.unregistered(),void this.waitingToggle(!1));this.logger.warn(`Failed to register, status code ${i.message.statusCode}`);let s=NaN;if(i.message.statusCode===500||i.message.statusCode===503){const o=i.message.getHeader("retry-after");o&&(s=Number.parseInt(o,void 0))}this._retryAfter=isNaN(s)?void 0:s,this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this._retryAfter=void 0,this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(n)}unregister(t={}){if(this.state===it.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed&&this.state!==it.Registered)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new xg("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}this._state===it.Registered||t.all||this.logger.warn("Not currently registered, but sending an unregister anyway.");const r=(t.requestOptions&&t.requestOptions.extraHeaders||[]).slice();this.request.extraHeaders=r,t.all?(r.push("Contact: *"),r.push("Expires: 0")):r.push("Contact: "+this.generateContactHeader(0)),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.waitingToggle(!0);const n=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{this._contacts=i.message.getHeaders("contact"),this.unregistered(),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Unregister redirected. Not currently supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{this.logger.error(`Unregister rejected with status code ${i.message.statusCode}`),this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(n)}clearTimers(){this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.registrationExpiredTimer!==void 0&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0)}generateContactHeader(t){let r=this.userAgent.contact.toString({register:!0});return this.options.regId&&this.options.instanceId&&(r+=";reg-id="+this.options.regId,r+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(n=>{r+=";"+n}),r+=";expires="+t,r}registered(t){this.clearTimers(),this.registrationTimer=setTimeout(()=>{this.registrationTimer=void 0,this.register()},this.refreshFrequency/100*t*1e3),this.registrationExpiredTimer=setTimeout(()=>{this.logger.warn("Registration expired"),this.unregistered()},1e3*t),this._state!==it.Registered&&this.stateTransition(it.Registered)}unregistered(){this.clearTimers(),this._state!==it.Unregistered&&this.stateTransition(it.Unregistered)}terminated(){this.clearTimers(),this._state!==it.Terminated&&this.stateTransition(it.Terminated)}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case it.Initial:t!==it.Registered&&t!==it.Unregistered&&t!==it.Terminated&&r();break;case it.Registered:t!==it.Unregistered&&t!==it.Terminated&&r();break;case it.Unregistered:t!==it.Registered&&t!==it.Terminated&&r();break;case it.Terminated:r();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Registration transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===it.Terminated&&this.dispose()}get waiting(){return this._waiting}get waitingChange(){return this._waitingEventEmitter}waitingToggle(t){if(this._waiting===t)throw new Error(`Invalid waiting transition from ${this._waiting} to ${t}`);this._waiting=t,this.logger.log(`Waiting toggled to ${this._waiting}`),this._waitingEventEmitter.emit(this._waiting)}waitingWarning(){this.logger.warn("An attempt was made to send a REGISTER request while a prior one was still in progress. RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response from the registrar for the previous one or the previous REGISTER request has timed out. Note that if the transport disconnects, you still must wait for the prior request to time out before sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.")}stateError(){let t=`An attempt was made to send a REGISTER request when the Registerer ${this.state===it.Terminated?"is in 'Terminated' state":"has been disposed"}.`;t+=" The Registerer transitions to 'Terminated' when Registerer.dispose() is called.",t+=" Perhaps you called UserAgent.stop() which dipsoses of all Registerers?",this.logger.error(t)}}ni.defaultExpires=600,ni.defaultRefreshFrequency=99,function(e){e.Initial="Initial",e.NotifyWait="NotifyWait",e.Pending="Pending",e.Active="Active",e.Terminated="Terminated"}(lt=lt||(lt={})),function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Disconnected="Disconnected"}(De=De||(De={})),function(e){e.Started="Started",e.Stopped="Stopped"}(cr=cr||(cr={}));class Ft{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,r=!1){return this.onePassHasher.start().appendStr(t).end(r)}static hashAsciiStr(t,r=!1){return this.onePassHasher.start().appendAsciiStr(t).end(r)}static _hex(t){const r=Ft.hexChars,n=Ft.hexOut;let i,s,o,a;for(a=0;a<4;a+=1)for(s=8*a,i=t[a],o=0;o<8;o+=2)n[s+1+o]=r.charAt(15&i),i>>>=4,n[s+0+o]=r.charAt(15&i),i>>>=4;return n.join("")}static _md5cycle(t,r){let n=t[0],i=t[1],s=t[2],o=t[3];n+=(i&s|~i&o)+r[0]-680876936|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[1]-389564586|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[2]+606105819|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[4]-176418897|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[7]-45705983|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[10]-42063|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[13]-40341101|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,n+=(i&o|s&~o)+r[1]-165796510|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[11]+643717713|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[0]-373897302|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[5]-701558691|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[10]+38016083|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[15]-660478335|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[4]-405537848|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[9]+568446438|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[3]-187363961|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[2]-51403784|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,n+=(i^s^o)+r[5]-378558|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[14]-35309556|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[7]-155497632|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[13]+681279174|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[0]-358537222|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[3]-722521979|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[6]+76029189|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[9]-640364487|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[12]-421815835|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[15]+530742520|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[2]-995338651|0,i=(i<<23|i>>>9)+s|0,n+=(s^(i|~o))+r[0]-198630844|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[5]-57434055|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[10]-1051523|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[15]-30611744|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[4]-145523070|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[2]+718787259|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[9]-343485551|0,i=(i<<21|i>>>11)+s|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=s+t[2]|0,t[3]=o+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Ft.stateIdentity),this}appendStr(t){const r=this._buffer8,n=this._buffer32;let i,s,o=this._bufferLength;for(s=0;s<t.length;s+=1){if(i=t.charCodeAt(s),i<128)r[o++]=i;else if(i<2048)r[o++]=192+(i>>>6),r[o++]=63&i|128;else if(i<55296||i>56319)r[o++]=224+(i>>>12),r[o++]=i>>>6&63|128,r[o++]=63&i|128;else{if(i=1024*(i-55296)+(t.charCodeAt(++s)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=240+(i>>>18),r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=63&i|128}o>=64&&(this._dataLength+=64,Ft._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(t){const r=this._buffer8,n=this._buffer32;let i,s=this._bufferLength,o=0;for(;;){for(i=Math.min(t.length-o,64-s);i--;)r[s++]=t.charCodeAt(o++);if(s<64)break;this._dataLength+=64,Ft._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}appendByteArray(t){const r=this._buffer8,n=this._buffer32;let i,s=this._bufferLength,o=0;for(;;){for(i=Math.min(t.length-o,64-s);i--;)r[s++]=t[o++];if(s<64)break;this._dataLength+=64,Ft._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}getState(){const t=this,r=t._state;return{buffer:String.fromCharCode.apply(null,t._buffer8),buflen:t._bufferLength,length:t._dataLength,state:[r[0],r[1],r[2],r[3]]}}setState(t){const r=t.buffer,n=t.state,i=this._state;let s;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],s=0;s<r.length;s+=1)this._buffer8[s]=r.charCodeAt(s)}end(t=!1){const r=this._bufferLength,n=this._buffer8,i=this._buffer32,s=1+(r>>2);let o;if(this._dataLength+=r,n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,i.set(Ft.buffer32Identity.subarray(s),s),r>55&&(Ft._md5cycle(this._state,i),i.set(Ft.buffer32Identity)),o=8*this._dataLength,o<=4294967295)i[14]=o;else{const a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;const l=parseInt(a[2],16),c=parseInt(a[1],16)||0;i[14]=l,i[15]=c}return Ft._md5cycle(this._state,i),t?this._state:Ft._hex(this._state)}}function Zi(e){return Ft.hashStr(e)}Ft.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),Ft.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ft.hexChars="0123456789abcdef",Ft.hexOut=[],Ft.onePassHasher=new Ft,Ft.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.");class DN{constructor(t,r,n,i){this.logger=t.getLogger("sipjs.digestauthentication"),this.username=n,this.password=i,this.ha1=r,this.nc=0,this.ncHex="00000000"}authenticate(t,r,n){if(this.algorithm=r.algorithm,this.realm=r.realm,this.nonce=r.nonce,this.opaque=r.opaque,this.stale=r.stale,this.algorithm){if(this.algorithm!=="MD5")return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(r.qop)if(r.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(r.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=t.method,this.uri=t.ruri,this.cnonce=ro(12),this.nc+=1,this.updateNcHex(),this.nc===4294967296&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(n),!0}toString(){const t=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return t.push("algorithm="+this.algorithm),t.push('username="'+this.username+'"'),t.push('realm="'+this.realm+'"'),t.push('nonce="'+this.nonce+'"'),t.push('uri="'+this.uri+'"'),t.push('response="'+this.response+'"'),this.opaque&&t.push('opaque="'+this.opaque+'"'),this.qop&&(t.push("qop="+this.qop),t.push('cnonce="'+this.cnonce+'"'),t.push("nc="+this.ncHex)),"Digest "+t.join(", ")}updateNcHex(){const t=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-t.length)+t}calculateResponse(t){let r,n;r=this.ha1,r!==""&&r!==void 0||(r=Zi(this.username+":"+this.realm+":"+this.password)),this.qop==="auth"?(n=Zi(this.method+":"+this.uri),this.response=Zi(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):this.qop==="auth-int"?(n=Zi(this.method+":"+this.uri+":"+Zi(t||"")),this.response=Zi(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):this.qop===void 0&&(n=Zi(this.method+":"+this.uri),this.response=Zi(r+":"+this.nonce+":"+n))}}(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"})(er=er||(er={}));let g2=class{constructor(e,t,r){this.logger=e,this.category=t,this.label=r}error(e){this.genericLog(er.error,e)}warn(e){this.genericLog(er.warn,e)}log(e){this.genericLog(er.log,e)}debug(e){this.genericLog(er.debug,e)}genericLog(e,t){this.logger.genericLog(e,this.category,this.label,t)}get level(){return this.logger.level}set level(e){this.logger.level=e}};class PN{constructor(){this.builtinEnabled=!0,this._level=er.log,this.loggers={},this.logger=this.getLogger("sip:loggerfactory")}get level(){return this._level}set level(t){t>=0&&t<=3?this._level=t:t>3?this._level=3:er.hasOwnProperty(t)?this._level=t:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(t))}get connector(){return this._connector}set connector(t){t?typeof t=="function"?this._connector=t:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(t)):this._connector=void 0}getLogger(t,r){if(r&&this.level===3)return new g2(this,t,r);if(this.loggers[t])return this.loggers[t];{const n=new g2(this,t);return this.loggers[t]=n,n}}genericLog(t,r,n,i){this.level>=t&&this.builtinEnabled&&this.print(t,r,n,i),this.connector&&this.connector(er[t],r,n,i)}print(t,r,n,i){if(typeof i=="string"){const s=[new Date,r];n&&s.push(n),i=s.concat(i).join(" | ")}switch(t){case er.error:console.error(i);break;case er.warn:console.warn(i);break;case er.log:console.log(i);break;case er.debug:console.debug(i)}}}var Wu,G;function Pb(e,t){const r=`\r
`;if(t.statusCode<100||t.statusCode>699)throw new TypeError("Invalid statusCode: "+t.statusCode);const n=t.reasonPhrase?t.reasonPhrase:_h(t.statusCode);let i="SIP/2.0 "+t.statusCode+" "+n+r;t.statusCode>=100&&t.statusCode,t.statusCode;const s="From: "+e.getHeader("From")+r,o="Call-ID: "+e.callId+r,a="CSeq: "+e.cseq+" "+e.method+r,l=e.getHeaders("via").reduce((f,g)=>f+"Via: "+g+r,"");let c="To: "+e.getHeader("to");if(t.statusCode>100&&!e.parseHeader("to").hasParam("tag")){let f=t.toTag;f||(f=xh()),c+=";tag="+f}c+=r;let u="";t.supported&&(u="Supported: "+t.supported.join(", ")+r);let d="";t.userAgent&&(d="User-Agent: "+t.userAgent+r);let h="";return t.extraHeaders&&(h=t.extraHeaders.reduce((f,g)=>f+g.trim()+r,"")),i+=l,i+=s,i+=c,i+=a,i+=o,i+=u,i+=d,i+=h,t.body?(i+="Content-Type: "+t.body.contentType+r,i+="Content-Length: "+uc(t.body.content)+r+r,i+=t.body.content):i+=`Content-Length: 0\r
\r
`,{message:i}}(function(e){function t(n,i){let s=i,o=0,a=0;if(n.substring(s,s+2).match(/(^\r\n)/))return-2;for(;o===0;){if(a=n.indexOf(`\r
`,s),a===-1)return a;!n.substring(a+2,a+4).match(/(^\r\n)/)&&n.charAt(a+2).match(/(^\s+)/)?s=a+2:o=a}return o}function r(n,i,s,o){const a=i.indexOf(":",s),l=i.substring(s,a).trim(),c=i.substring(a+1,o).trim();let u;switch(l.toLowerCase()){case"via":case"v":n.addHeader("via",c),n.getHeaders("via").length===1?(u=n.parseHeader("Via"),u&&(n.via=u,n.viaBranch=u.branch)):u=0;break;case"from":case"f":n.setHeader("from",c),u=n.parseHeader("from"),u&&(n.from=u,n.fromTag=u.getParam("tag"));break;case"to":case"t":n.setHeader("to",c),u=n.parseHeader("to"),u&&(n.to=u,n.toTag=u.getParam("tag"));break;case"record-route":if(u=zt.parse(c,"Record_Route"),u===-1){u=void 0;break}if(!(u instanceof Array)){u=void 0;break}u.forEach(d=>{n.addHeader("record-route",c.substring(d.position,d.offset)),n.headers["Record-Route"][n.getHeaders("record-route").length-1].parsed=d.parsed});break;case"call-id":case"i":n.setHeader("call-id",c),u=n.parseHeader("call-id"),u&&(n.callId=c);break;case"contact":case"m":if(u=zt.parse(c,"Contact"),u===-1){u=void 0;break}if(!(u instanceof Array)){u=void 0;break}u.forEach(d=>{n.addHeader("contact",c.substring(d.position,d.offset)),n.headers.Contact[n.getHeaders("contact").length-1].parsed=d.parsed});break;case"content-length":case"l":n.setHeader("content-length",c),u=n.parseHeader("content-length");break;case"content-type":case"c":n.setHeader("content-type",c),u=n.parseHeader("content-type");break;case"cseq":n.setHeader("cseq",c),u=n.parseHeader("cseq"),u&&(n.cseq=u.value),n instanceof Ns&&(n.method=u.method);break;case"max-forwards":n.setHeader("max-forwards",c),u=n.parseHeader("max-forwards");break;case"www-authenticate":n.setHeader("www-authenticate",c),u=n.parseHeader("www-authenticate");break;case"proxy-authenticate":n.setHeader("proxy-authenticate",c),u=n.parseHeader("proxy-authenticate");break;case"refer-to":case"r":n.setHeader("refer-to",c),u=n.parseHeader("refer-to"),u&&(n.referTo=u);break;default:n.addHeader(l.toLowerCase(),c),u=0}return u!==void 0||{error:"error parsing header '"+l+"'"}}e.getHeader=t,e.parseHeader=r,e.parseMessage=function(n,i){let s=0,o=n.indexOf(`\r
`);if(o===-1)return void i.warn("no CRLF found, not a SIP message, discarded");const a=n.substring(0,o),l=zt.parse(a,"Request_Response");let c,u;if(l!==-1){for(l.status_code?(c=new Ns,c.statusCode=l.status_code,c.reasonPhrase=l.reason_phrase):(c=new Ea,c.method=l.method,c.ruri=l.uri),c.data=n,s=o+2;;){if(o=t(n,s),o===-2){u=s+2;break}if(o===-1)return void i.error("malformed message");const d=r(c,n,s,o);if(d&&d!==!0)return void i.error(d.error);s=o+2}return c.hasHeader("content-length")?c.body=n.substr(u,Number(c.getHeader("content-length"))):c.body=n.substring(u),c}i.warn('error parsing first line of SIP message: "'+a+'"')}})(Wu=Wu||(Wu={}));class Zf extends Io{constructor(t){super(t||"Unspecified transport error.")}}class Bb{constructor(t,r,n,i,s){this._transport=t,this._user=r,this._id=n,this._state=i,this.listeners=new Array,this.logger=r.loggerFactory.getLogger(s,n),this.logger.debug(`Constructing ${this.typeToString()} with id ${this.id}.`)}dispose(){this.logger.debug(`Destroyed ${this.typeToString()} with id ${this.id}.`)}get id(){return this._id}get kind(){throw new Error("Invalid kind.")}get state(){return this._state}get transport(){return this._transport}addStateChangeListener(t,r){const n=()=>{this.removeStateChangeListener(n),t()};(r==null?void 0:r.once)===!0?this.listeners.push(n):this.listeners.push(t)}notifyStateChangeListeners(){this.listeners.slice().forEach(t=>t())}removeStateChangeListener(t){this.listeners=this.listeners.filter(r=>r!==t)}logTransportError(t,r){this.logger.error(t.message),this.logger.error(`Transport error occurred in ${this.typeToString()} with id ${this.id}.`),this.logger.error(r)}send(t){return this.transport.send(t).catch(r=>{if(r instanceof Zf)throw this.onTransportError(r),r;let n;throw n=r&&typeof r.message=="string"?new Zf(r.message):new Zf,this.onTransportError(n),n})}setState(t){this.logger.debug(`State change to "${t}" on ${this.typeToString()} with id ${this.id}.`),this._state=t,this._user.onStateChange&&this._user.onStateChange(t),this.notifyStateChangeListeners()}typeToString(){return"UnknownType"}}class $b extends Bb{constructor(t,r,n,i,s){super(r,n,t.viaBranch,i,s),this._request=t,this.user=n}get request(){return this._request}}(function(e){e.Accepted="Accepted",e.Calling="Calling",e.Completed="Completed",e.Confirmed="Confirmed",e.Proceeding="Proceeding",e.Terminated="Terminated",e.Trying="Trying"})(G=G||(G={}));class Mr extends $b{constructor(t,r,n){super(t,r,n,G.Proceeding,"sip.transaction.ist")}dispose(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),super.dispose()}get kind(){return"ist"}receiveRequest(t){switch(this.state){case G.Proceeding:if(t.method===Se.INVITE)return void(this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of provisional response.")}));break;case G.Accepted:if(t.method===Se.INVITE)return;break;case G.Completed:if(t.method===Se.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");return void this.send(this.lastFinalResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of final response.")})}if(t.method===Se.ACK)return void this.stateTransition(G.Confirmed);break;case G.Confirmed:case G.Terminated:if(t.method===Se.INVITE||t.method===Se.ACK)return;break;default:throw new Error(`Invalid state ${this.state}`)}const r=`INVITE server transaction received unexpected ${t.method} request while in state ${this.state}.`;this.logger.warn(r)}receiveResponse(t,r){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);switch(this.state){case G.Proceeding:if(t>=100&&t<=199)return this.lastProvisionalResponse=r,t>100&&this.startProgressExtensionTimer(),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 1xx response.")});if(t>=200&&t<=299)return this.lastFinalResponse=r,this.stateTransition(G.Accepted),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});if(t>=300&&t<=699)return this.lastFinalResponse=r,this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send non-2xx final response.")});break;case G.Accepted:if(t>=200&&t<=299)return void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});break;case G.Completed:case G.Confirmed:case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(n),new Error(n)}retransmitAcceptedResponse(){this.state===G.Accepted&&this.lastFinalResponse&&this.send(this.lastFinalResponse).catch(t=>{this.logTransportError(t,"Failed to send 2xx response.")})}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t)}typeToString(){return"INVITE server transaction"}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Proceeding:r();break;case G.Accepted:case G.Completed:this.state!==G.Proceeding&&r();break;case G.Confirmed:this.state!==G.Completed&&r();break;case G.Terminated:this.state!==G.Accepted&&this.state!==G.Completed&&this.state!==G.Confirmed&&r();break;default:r()}this.stopProgressExtensionTimer(),t===G.Accepted&&(this.L=setTimeout(()=>this.timerL(),tr.TIMER_L)),t===G.Completed&&(this.H=setTimeout(()=>this.timerH(),tr.TIMER_H)),t===G.Confirmed&&(this.I=setTimeout(()=>this.timerI(),tr.TIMER_I)),t===G.Terminated&&this.dispose(),this.setState(t)}startProgressExtensionTimer(){this.progressExtensionTimer===void 0&&(this.progressExtensionTimer=setInterval(()=>{if(this.logger.debug(`Progress extension timer expired for INVITE server transaction ${this.id}.`),!this.lastProvisionalResponse)throw new Error("Last provisional response undefined.");this.send(this.lastProvisionalResponse).catch(t=>{this.logTransportError(t,"Failed to send retransmission of provisional response.")})},tr.PROVISIONAL_RESPONSE_INTERVAL))}stopProgressExtensionTimer(){this.progressExtensionTimer!==void 0&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)}timerG(){}timerH(){this.logger.debug(`Timer H expired for INVITE server transaction ${this.id}.`),this.state===G.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition(G.Terminated))}timerI(){this.logger.debug(`Timer I expired for INVITE server transaction ${this.id}.`),this.stateTransition(G.Terminated)}timerL(){this.logger.debug(`Timer L expired for INVITE server transaction ${this.id}.`),this.state===G.Accepted&&this.stateTransition(G.Terminated)}}class Nh extends Bb{constructor(t,r,n,i,s){super(r,n,Nh.makeId(t),i,s),this._request=t,this.user=n,t.setViaHeader(this.id,r.protocol)}static makeId(t){if(t.method==="CANCEL"){if(!t.branch)throw new Error("Outgoing CANCEL request without a branch.");return t.branch}return"z9hG4bK"+Math.floor(1e7*Math.random())}get request(){return this._request}onRequestTimeout(){this.user.onRequestTimeout&&this.user.onRequestTimeout()}}class tn extends Nh{constructor(t,r,n){super(t,r,n,G.Trying,"sip.transaction.nict"),this.F=setTimeout(()=>this.timerF(),tr.TIMER_F),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),super.dispose()}get kind(){return"nict"}receiveResponse(t){const r=t.statusCode;if(!r||r<100||r>699)throw new Error(`Invalid status code ${r}`);switch(this.state){case G.Trying:if(r>=100&&r<=199)return this.stateTransition(G.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=699)return this.stateTransition(G.Completed),r===408?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Proceeding:if(r>=100&&r<=199&&this.user.receiveResponse)return this.user.receiveResponse(t);if(r>=200&&r<=699)return this.stateTransition(G.Completed),r===408?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Completed:case G.Terminated:return;default:throw new Error(`Invalid state ${this.state}`)}const n=`Non-INVITE client transaction received unexpected ${r} response while in state ${this.state}.`;this.logger.warn(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"non-INVITE client transaction"}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Trying:n();break;case G.Proceeding:this.state!==G.Trying&&n();break;case G.Completed:this.state!==G.Trying&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Trying&&this.state!==G.Proceeding&&this.state!==G.Completed&&(r||n());break;default:n()}t===G.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(()=>this.timerK(),tr.TIMER_K)),t===G.Terminated&&this.dispose(),this.setState(t)}timerF(){this.logger.debug(`Timer F expired for non-INVITE client transaction ${this.id}.`),this.state!==G.Trying&&this.state!==G.Proceeding||(this.onRequestTimeout(),this.stateTransition(G.Terminated))}timerK(){this.state===G.Completed&&this.stateTransition(G.Terminated)}}class La{constructor(t,r){this.core=t,this.dialogState=r,this.core.dialogs.set(this.id,this)}static initialDialogStateForUserAgentClient(t,r){const n=r.getHeaders("record-route").reverse(),i=r.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const s=i.uri,o=t.cseq,a=t.callId,l=t.fromTag,c=r.toTag;if(!a)throw new Error("Call id undefined.");if(!l)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");const u=t.from.uri,d=t.to.uri;if(!r.statusCode)throw new Error("Incoming response status code undefined.");return{id:a+l+c,early:r.statusCode<200,callId:a,localTag:l,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:void 0,localURI:u,remoteURI:d,remoteTarget:s,routeSet:n,secure:!1}}static initialDialogStateForUserAgentServer(t,r,n=!1){const i=t.getHeaders("record-route"),s=t.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const o=s.uri,a=t.cseq,l=t.callId,c=r,u=t.fromTag,d=t.from.uri;return{id:l+c+u,early:n,callId:l,localTag:c,remoteTag:u,localSequenceNumber:void 0,remoteSequenceNumber:a,localURI:t.to.uri,remoteURI:d,remoteTarget:o,routeSet:i,secure:!1}}dispose(){this.core.dialogs.delete(this.id)}get id(){return this.dialogState.id}get early(){return this.dialogState.early}get callId(){return this.dialogState.callId}get localTag(){return this.dialogState.localTag}get remoteTag(){return this.dialogState.remoteTag}get localSequenceNumber(){return this.dialogState.localSequenceNumber}get remoteSequenceNumber(){return this.dialogState.remoteSequenceNumber}get localURI(){return this.dialogState.localURI}get remoteURI(){return this.dialogState.remoteURI}get remoteTarget(){return this.dialogState.remoteTarget}get routeSet(){return this.dialogState.routeSet}get secure(){return this.dialogState.secure}get userAgentCore(){return this.core}confirm(){this.dialogState.early=!1}receiveRequest(t){if(t.method!==Se.ACK){if(this.remoteSequenceNumber){if(t.cseq<=this.remoteSequenceNumber)throw new Error("Out of sequence in dialog request. Did you forget to call sequenceGuard()?");this.dialogState.remoteSequenceNumber=t.cseq}this.remoteSequenceNumber||(this.dialogState.remoteSequenceNumber=t.cseq)}}recomputeRouteSet(t){this.dialogState.routeSet=t.getHeaders("record-route").reverse()}createOutgoingRequestMessage(t,r){const n=this.remoteURI,i=this.remoteTag,s=this.localURI,o=this.localTag,a=this.callId;let l;l=r&&r.cseq?r.cseq:this.dialogState.localSequenceNumber?this.dialogState.localSequenceNumber+=1:this.dialogState.localSequenceNumber=1;const c=this.remoteTarget,u=this.routeSet,d=r&&r.extraHeaders,h=r&&r.body;return this.userAgentCore.makeOutgoingRequestMessage(t,c,s,n,{callId:a,cseq:l,fromTag:o,toTag:i,routeSet:u},d,h)}incrementLocalSequenceNumber(){if(!this.dialogState.localSequenceNumber)throw new Error("Local sequence number undefined.");this.dialogState.localSequenceNumber+=1}sequenceGuard(t){return t.method===Se.ACK||!(this.remoteSequenceNumber&&t.cseq<=this.remoteSequenceNumber)||(this.core.replyStateless(t,{statusCode:500}),!1)}}class ms extends Nh{constructor(t,r,n){super(t,r,n,G.Calling,"sip.transaction.ict"),this.ackRetransmissionCache=new Map,this.B=setTimeout(()=>this.timerB(),tr.TIMER_B),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),super.dispose()}get kind(){return"ict"}ackResponse(t){const r=t.toTag;if(!r)throw new Error("To tag undefined.");const n="z9hG4bK"+Math.floor(1e7*Math.random());t.setViaHeader(n,this.transport.protocol),this.ackRetransmissionCache.set(r,t),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send ACK to 2xx response.")})}receiveResponse(t){const r=t.statusCode;if(!r||r<100||r>699)throw new Error(`Invalid status code ${r}`);switch(this.state){case G.Calling:if(r>=100&&r<=199)return this.stateTransition(G.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(G.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=300&&r<=699)return this.stateTransition(G.Completed),this.ack(t),void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Proceeding:if(r>=100&&r<=199)return void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(G.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=300&&r<=699)return this.stateTransition(G.Completed),this.ack(t),void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Accepted:if(r>=200&&r<=299){if(!this.ackRetransmissionCache.has(t.toTag))return this.ackRetransmissionCache.set(t.toTag,void 0),void(this.user.receiveResponse&&this.user.receiveResponse(t));const i=this.ackRetransmissionCache.get(t.toTag);return i?void this.send(i.toString()).catch(s=>{this.logTransportError(s,"Failed to send retransmission of ACK to 2xx response.")}):void 0}break;case G.Completed:if(r>=300&&r<=699)return void this.ack(t);break;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`Received unexpected ${r} response while in state ${this.state}.`;this.logger.warn(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"INVITE client transaction"}ack(t){const r=this.request.ruri,n=this.request.callId,i=this.request.cseq,s=this.request.getHeader("from"),o=t.getHeader("to"),a=this.request.getHeader("via"),l=this.request.getHeader("route");if(!s)throw new Error("From undefined.");if(!o)throw new Error("To undefined.");if(!a)throw new Error("Via undefined.");let c=`ACK ${r} SIP/2.0\r
`;l&&(c+=`Route: ${l}\r
`),c+=`Via: ${a}\r
`,c+=`To: ${o}\r
`,c+=`From: ${s}\r
`,c+=`Call-ID: ${n}\r
`,c+=`CSeq: ${i} ACK\r
`,c+=`Max-Forwards: 70\r
`,c+=`Content-Length: 0\r
\r
`,this.send(c).catch(u=>{this.logTransportError(u,"Failed to send ACK to non-2xx response.")})}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Calling:n();break;case G.Proceeding:this.state!==G.Calling&&n();break;case G.Accepted:case G.Completed:this.state!==G.Calling&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Calling&&this.state!==G.Accepted&&this.state!==G.Completed&&(r||n());break;default:n()}this.B&&(clearTimeout(this.B),this.B=void 0),G.Proceeding,t===G.Completed&&(this.D=setTimeout(()=>this.timerD(),tr.TIMER_D)),t===G.Accepted&&(this.M=setTimeout(()=>this.timerM(),tr.TIMER_M)),t===G.Terminated&&this.dispose(),this.setState(t)}timerA(){}timerB(){this.logger.debug(`Timer B expired for INVITE client transaction ${this.id}.`),this.state===G.Calling&&(this.onRequestTimeout(),this.stateTransition(G.Terminated))}timerD(){this.logger.debug(`Timer D expired for INVITE client transaction ${this.id}.`),this.state===G.Completed&&this.stateTransition(G.Terminated)}timerM(){this.logger.debug(`Timer M expired for INVITE client transaction ${this.id}.`),this.state===G.Accepted&&this.stateTransition(G.Terminated)}}class Sr{constructor(t,r,n,i){this.transactionConstructor=t,this.core=r,this.message=n,this.delegate=i,this.challenged=!1,this.stale=!1,this.logger=this.loggerFactory.getLogger("sip.user-agent-client"),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}cancel(t,r={}){if(!this.transaction)throw new Error("Transaction undefined.");if(!this.message.to)throw new Error("To undefined.");if(!this.message.from)throw new Error("From undefined.");const n=this.core.makeOutgoingRequestMessage(Se.CANCEL,this.message.ruri,this.message.from.uri,this.message.to.uri,{toTag:this.message.toTag,fromTag:this.message.fromTag,callId:this.message.callId,cseq:this.message.cseq},r.extraHeaders);return n.branch=this.message.branch,this.message.headers.Route&&(n.headers.Route=this.message.headers.Route),t&&n.setHeader("Reason",t),this.transaction.state===G.Proceeding?new Sr(tn,this.core,n):this.transaction.addStateChangeListener(()=>{this.transaction&&this.transaction.state===G.Proceeding&&new Sr(tn,this.core,n)},{once:!0}),n}authenticationGuard(t,r){const n=t.statusCode;if(!n)throw new Error("Response status code undefined.");if(n!==401&&n!==407)return!0;let i,s;if(n===401?(i=t.parseHeader("www-authenticate"),s="authorization"):(i=t.parseHeader("proxy-authenticate"),s="proxy-authorization"),!i)return this.logger.warn(n+" with wrong or missing challenge, cannot authenticate"),!0;if(this.challenged&&(this.stale||i.stale!==!0))return this.logger.warn(n+" apparently in authentication loop, cannot authenticate"),!0;if(!this.credentials&&(this.credentials=this.core.configuration.authenticationFactory(),!this.credentials))return this.logger.warn("Unable to obtain credentials, cannot authenticate"),!0;if(!this.credentials.authenticate(this.message,i))return!0;this.challenged=!0,i.stale&&(this.stale=!0);let o=this.message.cseq+=1;return r&&r.localSequenceNumber&&(r.incrementLocalSequenceNumber(),o=this.message.cseq=r.localSequenceNumber),this.message.setHeader("cseq",o+" "+this.message.method),this.message.setHeader(s,this.credentials.toString()),this.init(),!1}onRequestTimeout(){this.logger.warn("User agent client request timed out. Generating internal 408 Request Timeout.");const t=new Ns;t.statusCode=408,t.reasonPhrase="Request Timeout",this.receiveResponse(t)}onTransportError(t){this.logger.error(t.message),this.logger.error("User agent client request transport error. Generating internal 503 Service Unavailable.");const r=new Ns;r.statusCode=503,r.reasonPhrase="Service Unavailable",this.receiveResponse(r)}receiveResponse(t){if(!this.authenticationGuard(t))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(r):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t});break;case/^2[0-9]{2}$/.test(r):this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t});break;case/^3[0-9]{2}$/.test(r):this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(r):this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${r}`)}}init(){const t={loggerFactory:this.loggerFactory,onRequestTimeout:()=>this.onRequestTimeout(),onStateChange:i=>{i===G.Terminated&&(this.core.userAgentClients.delete(n),r===this._transaction&&this.dispose())},onTransportError:i=>this.onTransportError(i),receiveResponse:i=>this.receiveResponse(i)},r=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=r;const n=r.id+r.request.method;this.core.userAgentClients.set(n,this)}}class BN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.BYE,n);super(tn,t.userAgentCore,i,r),t.dispose()}}class Wr extends $b{constructor(t,r,n){super(t,r,n,G.Trying,"sip.transaction.nist")}dispose(){this.J&&(clearTimeout(this.J),this.J=void 0),super.dispose()}get kind(){return"nist"}receiveRequest(t){switch(this.state){case G.Trying:break;case G.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of provisional response.")});break;case G.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of final response.")});break;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}}receiveResponse(t,r){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);if(t>100&&t<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case G.Trying:if(this.lastResponse=r,t>=100&&t<200)return this.stateTransition(G.Proceeding),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send provisional response.")});if(t>=200&&t<=699)return this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case G.Proceeding:if(this.lastResponse=r,t>=200&&t<=699)return this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case G.Completed:return;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`Non-INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(n),new Error(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"non-INVITE server transaction"}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Trying:n();break;case G.Proceeding:this.state!==G.Trying&&n();break;case G.Completed:this.state!==G.Trying&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Proceeding&&this.state!==G.Completed&&(r||n());break;default:n()}t===G.Completed&&(this.J=setTimeout(()=>this.timerJ(),tr.TIMER_J)),t===G.Terminated&&this.dispose(),this.setState(t)}timerJ(){this.logger.debug(`Timer J expired for NON-INVITE server transaction ${this.id}.`),this.state===G.Completed&&this.stateTransition(G.Terminated)}}class mi{constructor(t,r,n,i){this.transactionConstructor=t,this.core=r,this.message=n,this.delegate=i,this.logger=this.loggerFactory.getLogger("sip.user-agent-server"),this.toTag=n.toTag?n.toTag:xh(),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}accept(t={statusCode:200}){if(!this.acceptable)throw new us(`${this.message.method} not acceptable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<200||r>299)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}progress(t={statusCode:180}){if(!this.progressable)throw new us(`${this.message.method} not progressable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<101||r>199)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}redirect(t,r={statusCode:302}){if(!this.redirectable)throw new us(`${this.message.method} not redirectable in state ${this.transaction.state}.`);const n=r.statusCode;if(n<300||n>399)throw new TypeError(`Invalid statusCode: ${n}`);const i=new Array;return t.forEach(s=>i.push(`Contact: ${s.toString()}`)),r.extraHeaders=(r.extraHeaders||[]).concat(i),this.reply(r)}reject(t={statusCode:480}){if(!this.rejectable)throw new us(`${this.message.method} not rejectable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<400||r>699)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}trying(t){if(!this.tryingable)throw new us(`${this.message.method} not tryingable in state ${this.transaction.state}.`);return this.reply({statusCode:100})}receiveCancel(t){this.delegate&&this.delegate.onCancel&&this.delegate.onCancel(t)}get acceptable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding||this.transaction.state===G.Accepted;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get progressable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return!1;throw new Error("Unknown transaction type.")}get redirectable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get rejectable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get tryingable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying;throw new Error("Unknown transaction type.")}reply(t){t.toTag||t.statusCode===100||(t.toTag=this.toTag),t.userAgent=t.userAgent||this.core.configuration.userAgentHeaderFieldValue,t.supported=t.supported||this.core.configuration.supportedOptionTagsResponse;const r=Pb(this.message,t);return this.transaction.receiveResponse(t.statusCode,r.message),r}init(){const t={loggerFactory:this.loggerFactory,onStateChange:i=>{i===G.Terminated&&(this.core.userAgentServers.delete(n),this.dispose())},onTransportError:i=>{this.logger.error(i.message),this.delegate&&this.delegate.onTransportError?this.delegate.onTransportError(i):this.logger.error("User agent server response transport error.")}},r=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=r;const n=r.id;this.core.userAgentServers.set(r.id,this)}}class $N extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n)}}class LN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.INFO,n);super(tn,t.userAgentCore,i,r)}}class ON extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n)}}class Lb extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class Ob extends mi{constructor(t,r,n){super(Wr,t,r,n)}}class MN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.NOTIFY,n);super(tn,t.userAgentCore,i,r)}}class Od extends mi{constructor(t,r,n){const i=t.userAgentCore!==void 0?t.userAgentCore:t;super(Wr,i,r,n)}}class UN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.PRACK,n);super(tn,t.userAgentCore,i,r),t.signalingStateTransition(i)}}class HN extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n),t.signalingStateTransition(r),this.dialog=t}accept(t={statusCode:200}){return t.body&&this.dialog.signalingStateTransition(t.body),super.accept(t)}}class FN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.INVITE,n);super(ms,t.userAgentCore,i,r),this.delegate=r,t.signalingStateTransition(i),t.reinviteUserAgentClient=this,this.dialog=t}receiveResponse(t){if(!this.authenticationGuard(t,this.dialog))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(r):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:this.dialog,prack:n=>{throw new Error("Unimplemented.")}});break;case/^2[0-9]{2}$/.test(r):this.dialog.signalingStateTransition(t),this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t,session:this.dialog,ack:n=>this.dialog.ack(n)});break;case/^3[0-9]{2}$/.test(r):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(r):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${r}`)}}}class jN extends mi{constructor(t,r,n){super(Mr,t.userAgentCore,r,n),t.reinviteUserAgentServer=this,this.dialog=t}accept(t={statusCode:200}){t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(this.dialog.routeSet.map(s=>`Record-Route: ${s}`));const r=super.accept(t),n=this.dialog,i=Object.assign(Object.assign({},r),{session:n});return t.body&&this.dialog.signalingStateTransition(t.body),this.dialog.reConfirm(),i}progress(t={statusCode:180}){const r=super.progress(t),n=this.dialog,i=Object.assign(Object.assign({},r),{session:n});return t.body&&this.dialog.signalingStateTransition(t.body),i}redirect(t,r={statusCode:302}){throw this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,new Error("Unimplemented.")}reject(t={statusCode:488}){return this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,super.reject(t)}}class VN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.REFER,n);super(tn,t.userAgentCore,i,r)}}class Mb extends mi{constructor(t,r,n){const i=t.userAgentCore!==void 0?t.userAgentCore:t;super(Wr,i,r,n)}}class Md extends La{constructor(t,r,n,i){super(r,n),this.initialTransaction=t,this._signalingState=pe.Initial,this.ackWait=!1,this.ackProcessing=!1,this.delegate=i,t instanceof Mr&&(this.ackWait=!0),this.early||this.start2xxRetransmissionTimer(),this.signalingStateTransition(t.request),this.logger=r.loggerFactory.getLogger("sip.invite-dialog"),this.logger.log(`INVITE dialog ${this.id} constructed`)}dispose(){super.dispose(),this._signalingState=pe.Closed,this._offer=void 0,this._answer=void 0,this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.logger.log(`INVITE dialog ${this.id} destroyed`)}get sessionState(){return this.early?gn.Early:this.ackWait?gn.AckWait:this._signalingState===pe.Closed?gn.Terminated:gn.Confirmed}get signalingState(){return this._signalingState}get offer(){return this._offer}get answer(){return this._answer}confirm(){this.early&&this.start2xxRetransmissionTimer(),super.confirm()}reConfirm(){this.reinviteUserAgentServer&&this.startReInvite2xxRetransmissionTimer()}ack(t={}){let r;if(this.logger.log(`INVITE dialog ${this.id} sending ACK request`),this.reinviteUserAgentClient){if(!(this.reinviteUserAgentClient.transaction instanceof ms))throw new Error("Transaction not instance of InviteClientTransaction.");r=this.reinviteUserAgentClient.transaction,this.reinviteUserAgentClient=void 0}else{if(!(this.initialTransaction instanceof ms))throw new Error("Initial transaction not instance of InviteClientTransaction.");r=this.initialTransaction}const n=this.createOutgoingRequestMessage(Se.ACK,{cseq:r.request.cseq,extraHeaders:t.extraHeaders,body:t.body});return r.ackResponse(n),this.signalingStateTransition(n),{message:n}}bye(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending BYE request`),this.initialTransaction instanceof Mr){if(this.early)throw new Error("UAS MUST NOT send a BYE on early dialogs.");if(this.ackWait&&this.initialTransaction.state!==G.Terminated)throw new Error("UAS MUST NOT send a BYE on a confirmed dialog until it has received an ACK for its 2xx response or until the server transaction times out.")}return new BN(this,t,r)}info(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending INFO request`),this.early)throw new Error("Dialog not confirmed.");return new LN(this,t,r)}invite(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending INVITE request`),this.early)throw new Error("Dialog not confirmed.");if(this.reinviteUserAgentClient)throw new Error("There is an ongoing re-INVITE client transaction.");if(this.reinviteUserAgentServer)throw new Error("There is an ongoing re-INVITE server transaction.");return new FN(this,t,r)}message(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending MESSAGE request`),this.early)throw new Error("Dialog not confirmed.");const n=this.createOutgoingRequestMessage(Se.MESSAGE,r);return new Lb(this.core,n,t)}notify(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending NOTIFY request`),this.early)throw new Error("Dialog not confirmed.");return new MN(this,t,r)}prack(t,r){return this.logger.log(`INVITE dialog ${this.id} sending PRACK request`),new UN(this,t,r)}refer(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending REFER request`),this.early)throw new Error("Dialog not confirmed.");return new VN(this,t,r)}receiveRequest(t){if(this.logger.log(`INVITE dialog ${this.id} received ${t.method} request`),t.method!==Se.ACK)if(this.sequenceGuard(t)){if(super.receiveRequest(t),t.method===Se.INVITE){const r=()=>{const i=this.ackWait?"waiting for initial ACK":"processing initial ACK";this.logger.warn(`INVITE dialog ${this.id} received re-INVITE while ${i}`),this.logger.warn("RFC 5407 suggests the following to avoid this race condition...  Note: Implementation issues are outside the scope of this document, but the following tip is provided for avoiding race conditions of this type.  The caller can delay sending re-INVITE F6 for some period of time (2 seconds, perhaps), after which the caller can reasonably assume that its ACK has been received.  Implementors can decouple the actions of the user (e.g., pressing the hold button) from the actions of the protocol (the sending of re-INVITE F6), so that the UA can behave like this.  In this case, it is the implementor's choice as to how long to wait.  In most cases, such an implementation may be useful to prevent the type of race condition shown in this section. This document expresses no preference about whether or not they should wait for an ACK to be delivered.  After considering the impact on user experience, implementors should decide whether or not to wait for a while, because the user experience depends on the implementation and has no direct bearing on protocol behavior.")},n=[`Retry-After: ${Math.floor(10*Math.random())+1}`];if(this.ackProcessing)return this.core.replyStateless(t,{statusCode:500,extraHeaders:n}),void r();if(this.ackWait&&this.signalingState!==pe.Stable)return this.core.replyStateless(t,{statusCode:500,extraHeaders:n}),void r();if(this.reinviteUserAgentServer)return void this.core.replyStateless(t,{statusCode:500,extraHeaders:n});if(this.reinviteUserAgentClient)return void this.core.replyStateless(t,{statusCode:491})}if(t.method===Se.INVITE){const r=t.parseHeader("contact");if(!r)throw new Error("Contact undefined.");if(!(r instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");this.dialogState.remoteTarget=r.uri}switch(t.method){case Se.BYE:{const r=new $N(this,t);this.delegate&&this.delegate.onBye?this.delegate.onBye(r):r.accept(),this.dispose()}break;case Se.INFO:{const r=new ON(this,t);this.delegate&&this.delegate.onInfo?this.delegate.onInfo(r):r.reject({statusCode:469,extraHeaders:["Recv-Info:"]})}break;case Se.INVITE:{const r=new jN(this,t);this.signalingStateTransition(t),this.delegate&&this.delegate.onInvite?this.delegate.onInvite(r):r.reject({statusCode:488})}break;case Se.MESSAGE:{const r=new Ob(this.core,t);this.delegate&&this.delegate.onMessage?this.delegate.onMessage(r):r.accept()}break;case Se.NOTIFY:{const r=new Od(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(r):r.accept()}break;case Se.PRACK:{const r=new HN(this,t);this.delegate&&this.delegate.onPrack?this.delegate.onPrack(r):r.accept()}break;case Se.REFER:{const r=new Mb(this,t);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(r):r.reject()}break;default:this.logger.log(`INVITE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501})}}else this.logger.log(`INVITE dialog ${this.id} rejected out of order ${t.method} request.`);else{if(this.ackWait){if(this.initialTransaction instanceof ms)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);if(this.initialTransaction.request.cseq!==t.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);this.ackWait=!1}else{if(!this.reinviteUserAgentServer)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);if(this.reinviteUserAgentServer.transaction.request.cseq!==t.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);this.reinviteUserAgentServer=void 0}if(this.signalingStateTransition(t),this.delegate&&this.delegate.onAck){const r=this.delegate.onAck({message:t});r instanceof Promise&&(this.ackProcessing=!0,r.then(()=>this.ackProcessing=!1).catch(()=>this.ackProcessing=!1))}}}reliableSequenceGuard(t){const r=t.statusCode;if(!r)throw new Error("Status code undefined");if(r>100&&r<200){const n=t.getHeader("require"),i=t.getHeader("rseq"),s=n&&n.includes("100rel")&&i?Number(i):void 0;if(s){if(this.rseq&&this.rseq+1!==s)return!1;this.rseq=this.rseq?this.rseq+1:s}}return!0}signalingStateRollback(){this._signalingState!==pe.HaveLocalOffer&&this.signalingState!==pe.HaveRemoteOffer||this._rollbackOffer&&this._rollbackAnswer&&(this._signalingState=pe.Stable,this._offer=this._rollbackOffer,this._answer=this._rollbackAnswer)}signalingStateTransition(t){const r=Ul(t);if(r&&r.contentDisposition==="session"){if(this._signalingState===pe.Stable&&(this._rollbackOffer=this._offer,this._rollbackAnswer=this._answer),t instanceof Ea)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveRemoteOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.HaveRemoteOffer:case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof Ns)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveRemoteOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.HaveRemoteOffer:case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof ao)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveLocalOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:break;case pe.HaveRemoteOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(xb(t))switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveLocalOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:break;case pe.HaveRemoteOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}}}start2xxRetransmissionTimer(){if(this.initialTransaction instanceof Mr){const t=this.initialTransaction;let r=tr.T1;const n=()=>{this.ackWait?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),r=Math.min(2*r,tr.T2),this.invite2xxTimer=setTimeout(n,r)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(n,r);const i=()=>{t.state===G.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.ackWait&&(this.delegate&&this.delegate.onAckTimeout?this.delegate.onAckTimeout():this.bye()))};t.addStateChangeListener(i)}}startReInvite2xxRetransmissionTimer(){if(this.reinviteUserAgentServer&&this.reinviteUserAgentServer.transaction instanceof Mr){const t=this.reinviteUserAgentServer.transaction;let r=tr.T1;const n=()=>{this.reinviteUserAgentServer?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),r=Math.min(2*r,tr.T2),this.invite2xxTimer=setTimeout(n,r)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(n,r);const i=()=>{t.state===G.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.reinviteUserAgentServer)};t.addStateChangeListener(i)}}}class qN extends Sr{constructor(t,r,n){super(ms,t,r,n),this.confirmedDialogAcks=new Map,this.confirmedDialogs=new Map,this.earlyDialogs=new Map,this.delegate=n}dispose(){this.earlyDialogs.forEach(t=>t.dispose()),this.earlyDialogs.clear(),super.dispose()}onTransportError(t){if(this.transaction.state===G.Calling)return super.onTransportError(t);this.logger.error(t.message),this.logger.error("User agent client request transport error while sending ACK.")}receiveResponse(t){if(!this.authenticationGuard(t))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):return void(this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t}));case/^1[0-9]{2}$/.test(r):{if(!t.toTag)return void this.logger.warn("Non-100 1xx INVITE response received without a to tag, dropping.");if(!t.parseHeader("contact"))return void this.logger.error("Non-100 1xx INVITE response received without a Contact header field, dropping.");const n=La.initialDialogStateForUserAgentClient(this.message,t);let i=this.earlyDialogs.get(n.id);if(!i){const o=this.transaction;if(!(o instanceof ms))throw new Error("Transaction not instance of InviteClientTransaction.");i=new Md(o,this.core,n),this.earlyDialogs.set(i.id,i)}if(!i.reliableSequenceGuard(t))return void this.logger.warn("1xx INVITE reliable response received out of order or is a retransmission, dropping.");i.signalingState!==pe.Initial&&i.signalingState!==pe.HaveLocalOffer||i.signalingStateTransition(t);const s=i;this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:s,prack:o=>s.prack(void 0,o)})}return;case/^2[0-9]{2}$/.test(r):{if(!t.toTag)return void this.logger.error("2xx INVITE response received without a to tag, dropping.");if(!t.parseHeader("contact"))return void this.logger.error("2xx INVITE response received without a Contact header field, dropping.");const n=La.initialDialogStateForUserAgentClient(this.message,t);let i=this.confirmedDialogs.get(n.id);if(i){const o=this.confirmedDialogAcks.get(n.id);if(o){const a=this.transaction;if(!(a instanceof ms))throw new Error("Client transaction not instance of InviteClientTransaction.");a.ackResponse(o.message)}return}if(i=this.earlyDialogs.get(n.id),i)i.confirm(),i.recomputeRouteSet(t),this.earlyDialogs.delete(i.id),this.confirmedDialogs.set(i.id,i);else{const o=this.transaction;if(!(o instanceof ms))throw new Error("Transaction not instance of InviteClientTransaction.");i=new Md(o,this.core,n),this.confirmedDialogs.set(i.id,i)}i.signalingState!==pe.Initial&&i.signalingState!==pe.HaveLocalOffer||i.signalingStateTransition(t);const s=i;if(this.delegate&&this.delegate.onAccept)this.delegate.onAccept({message:t,session:s,ack:o=>{const a=s.ack(o);return this.confirmedDialogAcks.set(s.id,a),a}});else{const o=s.ack();this.confirmedDialogAcks.set(s.id,o)}}return;case/^3[0-9]{2}$/.test(r):return this.earlyDialogs.forEach(n=>n.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t}));case/^[4-6][0-9]{2}$/.test(r):return this.earlyDialogs.forEach(n=>n.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t}));default:throw new Error(`Invalid status code ${r}`)}}}class Jf extends mi{constructor(t,r,n){super(Mr,t,r,n),this.core=t}dispose(){this.earlyDialog&&this.earlyDialog.dispose(),super.dispose()}accept(t={statusCode:200}){if(!this.acceptable)throw new us(`${this.message.method} not acceptable in state ${this.transaction.state}.`);if(!this.confirmedDialog)if(this.earlyDialog)this.earlyDialog.confirm(),this.confirmedDialog=this.earlyDialog,this.earlyDialog=void 0;else{const l=this.transaction;if(!(l instanceof Mr))throw new Error("Transaction not instance of InviteClientTransaction.");const c=La.initialDialogStateForUserAgentServer(this.message,this.toTag);this.confirmedDialog=new Md(l,this.core,c)}const r=this.message.getHeaders("record-route").map(l=>`Record-Route: ${l}`),n=`Contact: ${this.core.configuration.contact.toString()}`,i="Allow: "+gs.toString();if(!t.body){if(this.confirmedDialog.signalingState===pe.Stable)t.body=this.confirmedDialog.answer;else if(this.confirmedDialog.signalingState===pe.Initial||this.confirmedDialog.signalingState===pe.HaveRemoteOffer)throw new Error("Response must have a body.")}t.statusCode=t.statusCode||200,t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(r),t.extraHeaders.push(i),t.extraHeaders.push(n);const s=super.accept(t),o=this.confirmedDialog,a=Object.assign(Object.assign({},s),{session:o});return t.body&&this.confirmedDialog.signalingState!==pe.Stable&&this.confirmedDialog.signalingStateTransition(t.body),a}progress(t={statusCode:180}){if(!this.progressable)throw new us(`${this.message.method} not progressable in state ${this.transaction.state}.`);if(!this.earlyDialog){const a=this.transaction;if(!(a instanceof Mr))throw new Error("Transaction not instance of InviteClientTransaction.");const l=La.initialDialogStateForUserAgentServer(this.message,this.toTag,!0);this.earlyDialog=new Md(a,this.core,l)}const r=this.message.getHeaders("record-route").map(a=>`Record-Route: ${a}`),n=`Contact: ${this.core.configuration.contact}`;t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(r),t.extraHeaders.push(n);const i=super.progress(t),s=this.earlyDialog,o=Object.assign(Object.assign({},i),{session:s});return t.body&&this.earlyDialog.signalingState!==pe.Stable&&this.earlyDialog.signalingStateTransition(t.body),o}redirect(t,r={statusCode:302}){return super.redirect(t,r)}reject(t={statusCode:486}){return super.reject(t)}}class zN extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class KN extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class GN extends mi{constructor(t,r,n){super(Wr,t,r,n),this.core=t}}class WN extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(Se.SUBSCRIBE,n);super(tn,t.userAgentCore,i,r),this.dialog=t}waitNotifyStop(){}receiveResponse(t){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const r=t.getHeader("Expires");if(r){const n=Number(r);this.dialog.subscriptionExpires>n&&(this.dialog.subscriptionExpires=n)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE")}t.statusCode&&t.statusCode>=400&&t.statusCode<700&&[404,405,410,416,480,481,482,483,484,485,489,501,604].includes(t.statusCode)&&this.dialog.terminate(),super.receiveResponse(t)}}class m2 extends La{constructor(t,r,n,i,s,o){super(i,s),this.delegate=o,this._autoRefresh=!1,this._subscriptionEvent=t,this._subscriptionExpires=r,this._subscriptionExpiresInitial=r,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this._subscriptionState=n,this.logger=i.loggerFactory.getLogger("sip.subscribe-dialog"),this.logger.log(`SUBSCRIBE dialog ${this.id} constructed`)}static initialDialogStateForSubscription(t,r){const n=r.getHeaders("record-route"),i=r.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const s=i.uri,o=t.cseq,a=t.callId,l=t.fromTag,c=r.fromTag;if(!a)throw new Error("Call id undefined.");if(!l)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");return{id:a+l+c,early:!1,callId:a,localTag:l,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:void 0,localURI:t.from.uri,remoteURI:t.to.uri,remoteTarget:s,routeSet:n,secure:!1}}dispose(){super.dispose(),this.N&&(clearTimeout(this.N),this.N=void 0),this.refreshTimerClear(),this.logger.log(`SUBSCRIBE dialog ${this.id} destroyed`)}get autoRefresh(){return this._autoRefresh}set autoRefresh(t){this._autoRefresh=!0,this.refreshTimerSet()}get subscriptionEvent(){return this._subscriptionEvent}get subscriptionExpires(){const t=Math.floor(Date.now()/1e3)-this._subscriptionExpiresLastSet,r=this._subscriptionExpires-t;return Math.max(r,0)}set subscriptionExpires(t){if(t<0)throw new Error("Expires must be greater than or equal to zero.");if(this._subscriptionExpires=t,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this.autoRefresh){const r=this.subscriptionRefresh;(r===void 0||r>=t)&&this.refreshTimerSet()}}get subscriptionExpiresInitial(){return this._subscriptionExpiresInitial}get subscriptionRefresh(){if(this._subscriptionRefresh===void 0||this._subscriptionRefreshLastSet===void 0)return;const t=Math.floor(Date.now()/1e3)-this._subscriptionRefreshLastSet,r=this._subscriptionRefresh-t;return Math.max(r,0)}get subscriptionState(){return this._subscriptionState}receiveRequest(t){this.logger.log(`SUBSCRIBE dialog ${this.id} received ${t.method} request`),this.sequenceGuard(t)?(super.receiveRequest(t),t.method===Se.NOTIFY?this.onNotify(t):(this.logger.log(`SUBSCRIBE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501}))):this.logger.log(`SUBSCRIBE dialog ${this.id} rejected out of order ${t.method} request.`)}refresh(){const t="Allow: "+gs.toString(),r={};return r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push(t),r.extraHeaders.push("Event: "+this.subscriptionEvent),r.extraHeaders.push("Expires: "+this.subscriptionExpiresInitial),r.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,r)}subscribe(t,r={}){var n;if(this.subscriptionState!==lt.Pending&&this.subscriptionState!==lt.Active)throw new Error(`Invalid state ${this.subscriptionState}. May only re-subscribe while in state "pending" or "active".`);this.logger.log(`SUBSCRIBE dialog ${this.id} sending SUBSCRIBE request`);const i=new WN(this,t,r);return this.N&&(clearTimeout(this.N),this.N=void 0),!((n=r.extraHeaders)===null||n===void 0)&&n.includes("Expires: 0")||(this.N=setTimeout(()=>this.timerN(),tr.TIMER_N)),i}terminate(){this.stateTransition(lt.Terminated),this.onTerminated()}unsubscribe(){const t="Allow: "+gs.toString(),r={};return r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push(t),r.extraHeaders.push("Event: "+this.subscriptionEvent),r.extraHeaders.push("Expires: 0"),r.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,r)}onNotify(t){const r=t.parseHeader("Event").event;if(!r||r!==this.subscriptionEvent)return void this.core.replyStateless(t,{statusCode:489});this.N&&(clearTimeout(this.N),this.N=void 0);const n=t.parseHeader("Subscription-State");if(!n||!n.state)return void this.core.replyStateless(t,{statusCode:489});const i=n.state,s=n.expires?Math.max(n.expires,0):void 0;switch(i){case"pending":this.stateTransition(lt.Pending,s);break;case"active":this.stateTransition(lt.Active,s);break;case"terminated":this.stateTransition(lt.Terminated,s);break;default:this.logger.warn("Unrecognized subscription state.")}const o=new Od(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(o):o.accept()}onRefresh(t){this.delegate&&this.delegate.onRefresh&&this.delegate.onRefresh(t)}onTerminated(){this.delegate&&this.delegate.onTerminated&&this.delegate.onTerminated()}refreshTimerClear(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=void 0)}refreshTimerSet(){if(this.refreshTimerClear(),this.autoRefresh&&this.subscriptionExpires>0){const t=900*this.subscriptionExpires;this._subscriptionRefresh=Math.floor(t/1e3),this._subscriptionRefreshLastSet=Math.floor(Date.now()/1e3),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this.onRefresh(this.refresh())},t)}}stateTransition(t,r){const n=()=>{this.logger.warn(`Invalid subscription state transition from ${this.subscriptionState} to ${t}`)};switch(t){case lt.Initial:case lt.NotifyWait:return void n();case lt.Pending:if(this.subscriptionState!==lt.NotifyWait&&this.subscriptionState!==lt.Pending)return void n();break;case lt.Active:case lt.Terminated:if(this.subscriptionState!==lt.NotifyWait&&this.subscriptionState!==lt.Pending&&this.subscriptionState!==lt.Active)return void n();break;default:return void n()}t===lt.Pending&&r&&(this.subscriptionExpires=r),t===lt.Active&&r&&(this.subscriptionExpires=r),t===lt.Terminated&&this.dispose(),this._subscriptionState=t}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE dialog. Timed out waiting for NOTIFY."),this.subscriptionState!==lt.Terminated&&(this.stateTransition(lt.Terminated),this.onTerminated())}}class YN extends Sr{constructor(t,r,n){const i=r.getHeader("Event");if(!i)throw new Error("Event undefined");const s=r.getHeader("Expires");if(!s)throw new Error("Expires undefined");super(tn,t,r,n),this.delegate=n,this.subscriberId=r.callId+r.fromTag+i,this.subscriptionExpiresRequested=this.subscriptionExpires=Number(s),this.subscriptionEvent=i,this.subscriptionState=lt.NotifyWait,this.waitNotifyStart()}dispose(){super.dispose()}onNotify(t){const r=t.message.parseHeader("Event").event;if(!r||r!==this.subscriptionEvent)return this.logger.warn("Failed to parse event."),void t.reject({statusCode:489});const n=t.message.parseHeader("Subscription-State");if(!n||!n.state)return this.logger.warn("Failed to parse subscription state."),void t.reject({statusCode:489});const i=n.state;switch(i){case"pending":case"active":case"terminated":break;default:return this.logger.warn(`Invalid subscription state ${i}`),void t.reject({statusCode:489})}if(i!=="terminated"&&!t.message.parseHeader("contact"))return this.logger.warn("Failed to parse contact."),void t.reject({statusCode:489});if(this.dialog)throw new Error("Dialog already created. This implementation only supports install of single subscriptions.");switch(this.waitNotifyStop(),this.subscriptionExpires=n.expires?Math.min(this.subscriptionExpires,Math.max(n.expires,0)):this.subscriptionExpires,i){case"pending":this.subscriptionState=lt.Pending;break;case"active":this.subscriptionState=lt.Active;break;case"terminated":this.subscriptionState=lt.Terminated;break;default:throw new Error(`Unrecognized state ${i}.`)}if(this.subscriptionState!==lt.Terminated){const s=m2.initialDialogStateForSubscription(this.message,t.message);this.dialog=new m2(this.subscriptionEvent,this.subscriptionExpires,this.subscriptionState,this.core,s)}if(this.delegate&&this.delegate.onNotify){const s=t,o=this.dialog;this.delegate.onNotify({request:s,subscription:o})}else t.accept()}waitNotifyStart(){this.N||(this.core.subscribers.set(this.subscriberId,this),this.N=setTimeout(()=>this.timerN(),tr.TIMER_N))}waitNotifyStop(){this.N&&(this.core.subscribers.delete(this.subscriberId),clearTimeout(this.N),this.N=void 0)}receiveResponse(t){if(this.authenticationGuard(t)){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const r=t.getHeader("Expires");if(r){const n=Number(r);n>this.subscriptionExpiresRequested&&this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),n<this.subscriptionExpires&&(this.subscriptionExpires=n)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");this.dialog&&this.dialog.subscriptionExpires>this.subscriptionExpires&&(this.dialog.subscriptionExpires=this.subscriptionExpires)}t.statusCode&&t.statusCode>=300&&t.statusCode<700&&this.waitNotifyStop(),super.receiveResponse(t)}}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE user agent client. Timed out waiting for NOTIFY."),this.waitNotifyStop(),this.delegate&&this.delegate.onNotifyTimeout&&this.delegate.onNotifyTimeout()}}class QN extends mi{constructor(t,r,n){super(Wr,t,r,n),this.core=t}}const y2=["application/sdp","application/dtmf-relay"];class XN{constructor(t,r={}){this.userAgentClients=new Map,this.userAgentServers=new Map,this.configuration=t,this.delegate=r,this.dialogs=new Map,this.subscribers=new Map,this.logger=t.loggerFactory.getLogger("sip.user-agent-core")}dispose(){this.reset()}reset(){this.dialogs.forEach(t=>t.dispose()),this.dialogs.clear(),this.subscribers.forEach(t=>t.dispose()),this.subscribers.clear(),this.userAgentClients.forEach(t=>t.dispose()),this.userAgentClients.clear(),this.userAgentServers.forEach(t=>t.dispose()),this.userAgentServers.clear()}get loggerFactory(){return this.configuration.loggerFactory}get transport(){const t=this.configuration.transportAccessor();if(!t)throw new Error("Transport undefined.");return t}invite(t,r){return new qN(this,t,r)}message(t,r){return new Lb(this,t,r)}publish(t,r){return new zN(this,t,r)}register(t,r){return new KN(this,t,r)}subscribe(t,r){return new YN(this,t,r)}request(t,r){return new Sr(tn,this,t,r)}makeOutgoingRequestMessage(t,r,n,i,s,o,a){const l=this.configuration.sipjsId,c=this.configuration.displayName,u=this.configuration.viaForceRport,d=this.configuration.hackViaTcp,h=this.configuration.supportedOptionTags.slice();t===Se.REGISTER&&h.push("path","gruu"),t===Se.INVITE&&(this.configuration.contact.pubGruu||this.configuration.contact.tempGruu)&&h.push("gruu");const f={callIdPrefix:l,forceRport:u,fromDisplayName:c,hackViaTcp:d,optionTags:h,routeSet:this.configuration.routeSet,userAgentString:this.configuration.userAgentHeaderFieldValue,viaHost:this.configuration.viaHost},g=Object.assign(Object.assign({},f),s);return new ao(t,r,n,i,g,o,a)}receiveIncomingRequestFromTransport(t){this.receiveRequestFromTransport(t)}receiveIncomingResponseFromTransport(t){this.receiveResponseFromTransport(t)}replyStateless(t,r){const n=this.configuration.userAgentHeaderFieldValue,i=this.configuration.supportedOptionTagsResponse;r=Object.assign(Object.assign({},r),{userAgent:n,supported:i});const s=Pb(t,r);return this.transport.send(s.message).catch(o=>{o instanceof Error&&this.logger.error(o.message),this.logger.error(`Transport error occurred sending stateless reply to ${t.method} request.`)}),s}receiveRequestFromTransport(t){const r=t.viaBranch,n=this.userAgentServers.get(r);t.method===Se.ACK&&n&&n.transaction.state===G.Accepted&&n instanceof Jf?this.logger.warn(`Discarding out of dialog ACK after 2xx response sent on transaction ${r}.`):t.method!==Se.CANCEL?n?n.transaction.receiveRequest(t):this.receiveRequest(t):n?(this.replyStateless(t,{statusCode:200}),n.transaction instanceof Mr&&n.transaction.state===G.Proceeding&&n instanceof Jf&&n.receiveCancel(t)):this.replyStateless(t,{statusCode:481})}receiveRequest(t){if(!gs.includes(t.method)){const i="Allow: "+gs.toString();return void this.replyStateless(t,{statusCode:405,extraHeaders:[i]})}if(!t.ruri)throw new Error("Request-URI undefined.");if(t.ruri.scheme!=="sip")return void this.replyStateless(t,{statusCode:416});const r=t.ruri,n=i=>!!i&&i.user===r.user;if(!n(this.configuration.aor)&&!(n(this.configuration.contact.uri)||n(this.configuration.contact.pubGruu)||n(this.configuration.contact.tempGruu)))return this.logger.warn("Request-URI does not point to us."),void(t.method!==Se.ACK&&this.replyStateless(t,{statusCode:404}));if(t.method!==Se.INVITE||t.hasHeader("Contact")){if(!t.toTag){const i=t.viaBranch;if(!this.userAgentServers.has(i)&&Array.from(this.userAgentServers.values()).some(s=>s.transaction.request.fromTag===t.fromTag&&s.transaction.request.callId===t.callId&&s.transaction.request.cseq===t.cseq))return void this.replyStateless(t,{statusCode:482})}t.toTag?this.receiveInsideDialogRequest(t):this.receiveOutsideDialogRequest(t)}else this.replyStateless(t,{statusCode:400,reasonPhrase:"Missing Contact Header"})}receiveInsideDialogRequest(t){if(t.method===Se.NOTIFY){const i=t.parseHeader("Event");if(!i||!i.event)return void this.replyStateless(t,{statusCode:489});const s=t.callId+t.toTag+i.event,o=this.subscribers.get(s);if(o){const a=new Od(this,t);return void o.onNotify(a)}}const r=t.callId+t.toTag+t.fromTag,n=this.dialogs.get(r);if(n){if(t.method===Se.OPTIONS){const i="Allow: "+gs.toString(),s="Accept: "+y2.toString();return void this.replyStateless(t,{statusCode:200,extraHeaders:[i,s]})}n.receiveRequest(t)}else t.method!==Se.ACK&&this.replyStateless(t,{statusCode:481})}receiveOutsideDialogRequest(t){switch(t.method){case Se.ACK:break;case Se.BYE:this.replyStateless(t,{statusCode:481});break;case Se.CANCEL:throw new Error(`Unexpected out of dialog request method ${t.method}.`);case Se.INFO:this.replyStateless(t,{statusCode:405});break;case Se.INVITE:{const r=new Jf(this,t);this.delegate.onInvite?this.delegate.onInvite(r):r.reject()}break;case Se.MESSAGE:{const r=new Ob(this,t);this.delegate.onMessage?this.delegate.onMessage(r):r.accept()}break;case Se.NOTIFY:{const r=new Od(this,t);this.delegate.onNotify?this.delegate.onNotify(r):r.reject({statusCode:405})}break;case Se.OPTIONS:{const r="Allow: "+gs.toString(),n="Accept: "+y2.toString();this.replyStateless(t,{statusCode:200,extraHeaders:[r,n]})}break;case Se.REFER:{const r=new Mb(this,t);this.delegate.onRefer?this.delegate.onRefer(r):r.reject({statusCode:405})}break;case Se.REGISTER:{const r=new GN(this,t);this.delegate.onRegister?this.delegate.onRegister(r):r.reject({statusCode:405})}break;case Se.SUBSCRIBE:{const r=new QN(this,t);this.delegate.onSubscribe?this.delegate.onSubscribe(r):r.reject({statusCode:480})}break;default:throw new Error(`Unexpected out of dialog request method ${t.method}.`)}}receiveResponseFromTransport(t){if(t.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response, dropping");const r=t.viaBranch+t.method,n=this.userAgentClients.get(r);n?n.transaction.receiveResponse(t):this.logger.warn(`Discarding unmatched ${t.statusCode} response to ${t.method} ${r}.`)}}class wi{constructor(t,r,n){t.debug("SessionDescriptionHandler.constructor"),this.logger=t,this.mediaStreamFactory=r,this.sessionDescriptionHandlerConfiguration=n,this._localMediaStream=new MediaStream,this._remoteMediaStream=new MediaStream,this._peerConnection=new RTCPeerConnection(n==null?void 0:n.peerConnectionConfiguration),this.initPeerConnectionEventHandlers()}get localMediaStream(){return this._localMediaStream}get remoteMediaStream(){return this._remoteMediaStream}get dataChannel(){return this._dataChannel}get peerConnection(){return this._peerConnection}get peerConnectionDelegate(){return this._peerConnectionDelegate}set peerConnectionDelegate(t){this._peerConnectionDelegate=t}static dispatchAddTrackEvent(t,r){t.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:r}))}static dispatchRemoveTrackEvent(t,r){t.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:r}))}close(){this.logger.debug("SessionDescriptionHandler.close"),this._peerConnection!==void 0&&(this._peerConnection.getReceivers().forEach(t=>{t.track&&t.track.stop()}),this._peerConnection.getSenders().forEach(t=>{t.track&&t.track.stop()}),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}enableReceiverTracks(t){const r=this.peerConnection;if(!r)throw new Error("Peer connection closed.");r.getReceivers().forEach(n=>{n.track&&(n.track.enabled=t)})}enableSenderTracks(t){const r=this.peerConnection;if(!r)throw new Error("Peer connection closed.");r.getSenders().forEach(n=>{n.track&&(n.track.enabled=t)})}getDescription(t,r){var n,i;if(this.logger.debug("SessionDescriptionHandler.getDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=t==null?void 0:t.onDataChannel;const s=(n=t==null?void 0:t.offerOptions)===null||n===void 0?void 0:n.iceRestart,o=(t==null?void 0:t.iceGatheringTimeout)===void 0?(i=this.sessionDescriptionHandlerConfiguration)===null||i===void 0?void 0:i.iceGatheringTimeout:t==null?void 0:t.iceGatheringTimeout;return this.getLocalMediaStream(t).then(()=>this.updateDirection(t)).then(()=>this.createDataChannel(t)).then(()=>this.createLocalOfferOrAnswer(t)).then(a=>this.applyModifiers(a,r)).then(a=>this.setLocalSessionDescription(a)).then(()=>this.waitForIceGatheringComplete(s,o)).then(()=>this.getLocalSessionDescription()).then(a=>({body:a.sdp,contentType:"application/sdp"})).catch(a=>{throw this.logger.error("SessionDescriptionHandler.getDescription failed - "+a),a})}hasDescription(t){return this.logger.debug("SessionDescriptionHandler.hasDescription"),t==="application/sdp"}iceGatheringComplete(){this.logger.debug("SessionDescriptionHandler.iceGatheringComplete"),this.iceGatheringCompleteTimeoutId!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - clearing timeout"),clearTimeout(this.iceGatheringCompleteTimeoutId),this.iceGatheringCompleteTimeoutId=void 0),this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - resolving promise"),this.iceGatheringCompleteResolve&&this.iceGatheringCompleteResolve(),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0)}sendDtmf(t,r){if(this.logger.debug("SessionDescriptionHandler.sendDtmf"),this._peerConnection===void 0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - peer connection closed"),!1;const n=this._peerConnection.getSenders();if(n.length===0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no senders"),!1;const i=n[0].dtmf;if(!i)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no DTMF sender"),!1;const s=r==null?void 0:r.duration,o=r==null?void 0:r.interToneGap;try{i.insertDTMF(t,s,o)}catch(a){return this.logger.error(a.toString()),!1}return this.logger.log("SessionDescriptionHandler.sendDtmf sent via RTP: "+t.toString()),!0}setDescription(t,r,n){if(this.logger.debug("SessionDescriptionHandler.setDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=r==null?void 0:r.onDataChannel;const i=this._peerConnection.signalingState==="have-local-offer"?"answer":"offer";return this.getLocalMediaStream(r).then(()=>this.applyModifiers({sdp:t,type:i},n)).then(s=>this.setRemoteSessionDescription(s)).catch(s=>{throw this.logger.error("SessionDescriptionHandler.setDescription failed - "+s),s})}applyModifiers(t,r){return this.logger.debug("SessionDescriptionHandler.applyModifiers"),r&&r.length!==0?r.reduce((n,i)=>n.then(i),Promise.resolve(t)).then(n=>{if(this.logger.debug("SessionDescriptionHandler.applyModifiers - modified sdp"),!n.sdp||!n.type)throw new Error("Invalid SDP.");return{sdp:n.sdp,type:n.type}}):Promise.resolve(t)}createDataChannel(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));if((t==null?void 0:t.dataChannel)!==!0||this._dataChannel)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.createDataChannel - creating data channel");try{return this._dataChannel=this._peerConnection.createDataChannel((t==null?void 0:t.dataChannelLabel)||"",t==null?void 0:t.dataChannelOptions),this.onDataChannel&&this.onDataChannel(this._dataChannel),Promise.resolve()}catch(r){return Promise.reject(r)}case"have-remote-offer":return Promise.resolve();default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}createLocalOfferOrAnswer(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP offer"),this._peerConnection.createOffer(t==null?void 0:t.offerOptions);case"have-remote-offer":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP answer"),this._peerConnection.createAnswer(t==null?void 0:t.answerOptions);default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}getLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.getLocalMediaStream"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));let r=Object.assign({},t==null?void 0:t.constraints);if(this.localMediaStreamConstraints){if(r.audio=r.audio||this.localMediaStreamConstraints.audio,r.video=r.video||this.localMediaStreamConstraints.video,JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(r.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(r.video))return Promise.resolve()}else r.audio===void 0&&r.video===void 0&&(r={audio:!0});return this.localMediaStreamConstraints=r,this.mediaStreamFactory(r,this,t).then(n=>this.setLocalMediaStream(n))}setLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const r=this._peerConnection,n=this._localMediaStream,i=[],s=l=>{const c=l.kind;if(c!=="audio"&&c!=="video")throw new Error(`Unknown new track kind ${c}.`);const u=r.getSenders().find(d=>d.track&&d.track.kind===c);u?i.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${c} track`),d()}).then(()=>u.replaceTrack(l).then(()=>{const d=n.getTracks().find(h=>h.kind===c);d&&(d.stop(),n.removeTrack(d),wi.dispatchRemoveTrackEvent(n,d)),n.addTrack(l),wi.dispatchAddTrackEvent(n,l)}).catch(d=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${c} track`),d}))):i.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${c} track`),d()}).then(()=>{try{r.addTrack(l,n)}catch(d){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${c} track`),d}n.addTrack(l),wi.dispatchAddTrackEvent(n,l)}))},o=t.getAudioTracks();o.length&&s(o[0]);const a=t.getVideoTracks();return a.length&&s(a[0]),i.reduce((l,c)=>l.then(()=>c),Promise.resolve())}getLocalSessionDescription(){if(this.logger.debug("SessionDescriptionHandler.getLocalSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const t=this._peerConnection.localDescription;return t?Promise.resolve(t):Promise.reject(new Error("Failed to get local session description"))}setLocalSessionDescription(t){return this.logger.debug("SessionDescriptionHandler.setLocalSessionDescription"),this._peerConnection===void 0?Promise.reject(new Error("Peer connection closed.")):this._peerConnection.setLocalDescription(t)}setRemoteSessionDescription(t){if(this.logger.debug("SessionDescriptionHandler.setRemoteSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const r=t.sdp;let n;switch(this._peerConnection.signalingState){case"stable":n="offer";break;case"have-local-offer":n="answer";break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return r?this._peerConnection.setRemoteDescription({sdp:r,type:n}):(this.logger.error("SessionDescriptionHandler.setRemoteSessionDescription failed - cannot set null sdp"),Promise.reject(new Error("SDP is undefined")))}setRemoteTrack(t){this.logger.debug("SessionDescriptionHandler.setRemoteTrack");const r=this._remoteMediaStream;r.getTrackById(t.id)?this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - have remote ${t.kind} track`):t.kind==="audio"?(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),r.getAudioTracks().forEach(n=>{n.stop(),r.removeTrack(n),wi.dispatchRemoveTrackEvent(r,n)}),r.addTrack(t),wi.dispatchAddTrackEvent(r,t)):t.kind==="video"&&(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),r.getVideoTracks().forEach(n=>{n.stop(),r.removeTrack(n),wi.dispatchRemoveTrackEvent(r,n)}),r.addTrack(t),wi.dispatchAddTrackEvent(r,t))}updateDirection(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");{const r=n=>{switch(n){case"inactive":case"recvonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendonly":case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(n=>{if(n.direction){const i=r(n.direction);n.direction!==i&&(n.direction=i)}})}break;case"have-remote-offer":this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");{const r=(()=>{const i=this._peerConnection.remoteDescription;if(!i)throw new Error("Failed to read remote offer");const s=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(i.sdp);if(s)switch(s[0]){case`a=inactive\r
`:return"inactive";case`a=recvonly\r
`:return"recvonly";case`a=sendonly\r
`:return"sendonly";case`a=sendrecv\r
`:return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),n=(()=>{switch(r){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(i=>{i.direction&&i.direction!=="stopped"&&i.direction!==n&&(i.direction=n)})}break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return Promise.resolve()}waitForIceGatheringComplete(t=!1,r=0){return this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete"),this._peerConnection===void 0?Promise.reject("Peer connection closed."):t||this._peerConnection.iceGatheringState!=="complete"?(this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - rejecting prior waiting promise"),this.iceGatheringCompleteReject&&this.iceGatheringCompleteReject(new Error("Promise superseded.")),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0),this.iceGatheringCompletePromise=new Promise((n,i)=>{this.iceGatheringCompleteResolve=n,this.iceGatheringCompleteReject=i,r>0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout in "+r),this.iceGatheringCompleteTimeoutId=setTimeout(()=>{this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout"),this.iceGatheringComplete()},r))}),this.iceGatheringCompletePromise):(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - already complete"),Promise.resolve())}initPeerConnectionEventHandlers(){if(this.logger.debug("SessionDescriptionHandler.initPeerConnectionEventHandlers"),!this._peerConnection)throw new Error("Peer connection undefined.");const t=this._peerConnection;t.onconnectionstatechange=r=>{var n;const i=t.connectionState;this.logger.debug(`SessionDescriptionHandler.onconnectionstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onconnectionstatechange&&this._peerConnectionDelegate.onconnectionstatechange(r)},t.ondatachannel=r=>{var n;this.logger.debug("SessionDescriptionHandler.ondatachannel"),this._dataChannel=r.channel,this.onDataChannel&&this.onDataChannel(this._dataChannel),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.ondatachannel&&this._peerConnectionDelegate.ondatachannel(r)},t.onicecandidate=r=>{var n;this.logger.debug("SessionDescriptionHandler.onicecandidate"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicecandidate&&this._peerConnectionDelegate.onicecandidate(r)},t.onicecandidateerror=r=>{var n;this.logger.debug("SessionDescriptionHandler.onicecandidateerror"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicecandidateerror&&this._peerConnectionDelegate.onicecandidateerror(r)},t.oniceconnectionstatechange=r=>{var n;const i=t.iceConnectionState;this.logger.debug(`SessionDescriptionHandler.oniceconnectionstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.oniceconnectionstatechange&&this._peerConnectionDelegate.oniceconnectionstatechange(r)},t.onicegatheringstatechange=r=>{var n;const i=t.iceGatheringState;this.logger.debug(`SessionDescriptionHandler.onicegatheringstatechange ${i}`),i==="complete"&&this.iceGatheringComplete(),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicegatheringstatechange&&this._peerConnectionDelegate.onicegatheringstatechange(r)},t.onnegotiationneeded=r=>{var n;this.logger.debug("SessionDescriptionHandler.onnegotiationneeded"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onnegotiationneeded&&this._peerConnectionDelegate.onnegotiationneeded(r)},t.onsignalingstatechange=r=>{var n;const i=t.signalingState;this.logger.debug(`SessionDescriptionHandler.onsignalingstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onsignalingstatechange&&this._peerConnectionDelegate.onsignalingstatechange(r)},t.ontrack=r=>{var n;const i=r.track.kind,s=r.track.enabled?"enabled":"disabled";this.logger.debug(`SessionDescriptionHandler.ontrack ${i} ${s}`),this.setRemoteTrack(r.track),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.ontrack&&this._peerConnectionDelegate.ontrack(r)}}}function ZN(e){return(t,r)=>{e===void 0&&(e=s=>s.audio||s.video?navigator.mediaDevices===void 0?Promise.reject(new Error("Media devices not available in insecure contexts.")):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,s):Promise.resolve(new MediaStream));const n={iceGatheringTimeout:(r==null?void 0:r.iceGatheringTimeout)!==void 0?r==null?void 0:r.iceGatheringTimeout:5e3,peerConnectionConfiguration:Object.assign(Object.assign({},{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"}),r==null?void 0:r.peerConnectionConfiguration)},i=t.userAgent.getLogger("sip.SessionDescriptionHandler");return new wi(i,e,n)}}class Dh{constructor(t,r){if(this._state=De.Disconnected,this.transitioningState=!1,this._stateEventEmitter=new cc,this.logger=t,r){const s=r,o=s==null?void 0:s.wsServers,a=s==null?void 0:s.maxReconnectionAttempts;o!==void 0&&this.logger.warn('The transport option "wsServers" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),a!==void 0&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),o&&!r.server&&(typeof o=="string"&&(r.server=o),o instanceof Array&&(r.server=o[0]))}this.configuration=Object.assign(Object.assign({},Dh.defaultOptions),r);const n=this.configuration.server,i=zt.parse(n,"absoluteURI");if(i===-1)throw this.logger.error(`Invalid WebSocket Server URL "${n}"`),new Error("Invalid WebSocket Server URL");if(!["wss","ws","udp"].includes(i.scheme))throw this.logger.error(`Invalid scheme in WebSocket Server URL "${n}"`),new Error("Invalid scheme in WebSocket Server URL");this._protocol=i.scheme.toUpperCase()}dispose(){return this.disconnect()}get protocol(){return this._protocol}get server(){return this.configuration.server}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get ws(){return this._ws}connect(){return this._connect()}disconnect(){return this._disconnect()}isConnected(){return this.state===De.Connected}send(t){return this._send(t)}_connect(){switch(this.logger.log(`Connecting ${this.server}`),this.state){case De.Connecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Connecting));if(!this.connectPromise)throw new Error("Connect promise must be defined.");return this.connectPromise;case De.Connected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Connecting));if(this.connectPromise)throw new Error("Connect promise must not be defined.");return Promise.resolve();case De.Disconnecting:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(De.Connecting)}catch(r){if(r instanceof gl)return Promise.reject(r);throw r}break;case De.Disconnected:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(De.Connecting)}catch(r){if(r instanceof gl)return Promise.reject(r);throw r}break;default:throw new Error("Unknown state")}let t;try{t=new WebSocket(this.server,"sip"),t.binaryType="arraybuffer",t.addEventListener("close",r=>this.onWebSocketClose(r,t)),t.addEventListener("error",r=>this.onWebSocketError(r,t)),t.addEventListener("open",r=>this.onWebSocketOpen(r,t)),t.addEventListener("message",r=>this.onWebSocketMessage(r,t)),this._ws=t}catch(r){return this._ws=void 0,this.logger.error("WebSocket construction failed."),this.logger.error(r.toString()),new Promise((n,i)=>{this.connectResolve=n,this.connectReject=i,this.transitionState(De.Disconnected,r)})}return this.connectPromise=new Promise((r,n)=>{this.connectResolve=r,this.connectReject=n,this.connectTimeout=setTimeout(()=>{this.logger.warn("Connect timed out. Exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s."),t.close(1e3)},1e3*this.configuration.connectionTimeout)}),this.connectPromise}_disconnect(){switch(this.logger.log(`Disconnecting ${this.server}`),this.state){case De.Connecting:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(De.Disconnecting)}catch(r){if(r instanceof gl)return Promise.reject(r);throw r}break;case De.Connected:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(De.Disconnecting)}catch(r){if(r instanceof gl)return Promise.reject(r);throw r}break;case De.Disconnecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Disconnecting));if(!this.disconnectPromise)throw new Error("Disconnect promise must be defined.");return this.disconnectPromise;case De.Disconnected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Disconnecting));if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");return Promise.resolve();default:throw new Error("Unknown state")}if(!this._ws)throw new Error("WebSocket must be defined.");const t=this._ws;return this.disconnectPromise=new Promise((r,n)=>{this.disconnectResolve=r,this.disconnectReject=n;try{t.close(1e3)}catch(i){throw this.logger.error("WebSocket close failed."),this.logger.error(i.toString()),i}}),this.disconnectPromise}_send(t){if(this.configuration.traceSip===!0&&this.logger.log(`Sending WebSocket message:

`+t+`
`),this._state!==De.Connected)return Promise.reject(new Error("Not connected."));if(!this._ws)throw new Error("WebSocket undefined.");try{this._ws.send(t)}catch(r){return r instanceof Error?Promise.reject(r):Promise.reject(new Error("WebSocket send failed."))}return Promise.resolve()}onWebSocketClose(t,r){if(r!==this._ws)return;const n=`WebSocket closed ${this.server} (code: ${t.code})`,i=this.disconnectPromise?void 0:new Error(n);i&&this.logger.warn("WebSocket closed unexpectedly"),this.logger.log(n),this._ws=void 0,this.transitionState(De.Disconnected,i)}onWebSocketError(t,r){r===this._ws&&this.logger.error("WebSocket error occurred.")}onWebSocketMessage(t,r){if(r!==this._ws)return;const n=t.data;let i;if(/^(\r\n)+$/.test(n))return this.clearKeepAliveTimeout(),void(this.configuration.traceSip===!0&&this.logger.log("Received WebSocket message with CRLF Keep Alive response"));if(n){if(typeof n!="string"){try{i=new TextDecoder().decode(new Uint8Array(n))}catch(s){return this.logger.error(s.toString()),void this.logger.error("Received WebSocket binary message failed to be converted into string, message discarded")}this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket binary message:

`+i+`
`)}else i=n,this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket text message:

`+i+`
`);if(this.state===De.Connected){if(this.onMessage)try{this.onMessage(i)}catch(s){throw this.logger.error(s.toString()),this.logger.error("Exception thrown by onMessage callback"),s}}else this.logger.warn("Received message while not connected, discarding...")}else this.logger.warn("Received empty message, discarding...")}onWebSocketOpen(t,r){r===this._ws&&this._state===De.Connecting&&(this.logger.log(`WebSocket opened ${this.server}`),this.transitionState(De.Connected))}transitionLoopDetectedError(t){let r="A state transition loop has been detected.";return r+=` An attempt to transition from ${this._state} to ${t} before the prior transition completed.`,r+=" Perhaps you are synchronously calling connect() or disconnect() from a callback or state change handler?",this.logger.error(r),new gl("Loop detected.")}transitionState(t,r){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};if(this.transitioningState)throw this.transitionLoopDetectedError(t);switch(this.transitioningState=!0,this._state){case De.Connecting:t!==De.Connected&&t!==De.Disconnecting&&t!==De.Disconnected&&n();break;case De.Connected:t!==De.Disconnecting&&t!==De.Disconnected&&n();break;case De.Disconnecting:t!==De.Connecting&&t!==De.Disconnected&&n();break;case De.Disconnected:t!==De.Connecting&&n();break;default:throw new Error("Unknown state.")}const i=this._state;this._state=t;const s=this.connectResolve,o=this.connectReject;i===De.Connecting&&(this.connectPromise=void 0,this.connectResolve=void 0,this.connectReject=void 0);const a=this.disconnectResolve,l=this.disconnectReject;if(i===De.Disconnecting&&(this.disconnectPromise=void 0,this.disconnectResolve=void 0,this.disconnectReject=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.logger.log(`Transitioned from ${i} to ${this._state}`),this._stateEventEmitter.emit(this._state),t===De.Connected&&(this.startSendingKeepAlives(),this.onConnect))try{this.onConnect()}catch(c){throw this.logger.error(c.toString()),this.logger.error("Exception thrown by onConnect callback"),c}if(i===De.Connected&&(this.stopSendingKeepAlives(),this.onDisconnect))try{r?this.onDisconnect(r):this.onDisconnect()}catch(c){throw this.logger.error(c.toString()),this.logger.error("Exception thrown by onDisconnect callback"),c}if(i===De.Connecting){if(!s)throw new Error("Connect resolve undefined.");if(!o)throw new Error("Connect reject undefined.");t===De.Connected?s():o(r||new Error("Connect aborted."))}if(i===De.Disconnecting){if(!a)throw new Error("Disconnect resolve undefined.");if(!l)throw new Error("Disconnect reject undefined.");t===De.Disconnected?a():l(r||new Error("Disconnect aborted."))}this.transitioningState=!1}clearKeepAliveTimeout(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0}sendKeepAlive(){return this.keepAliveDebounceTimeout?Promise.resolve():(this.keepAliveDebounceTimeout=setTimeout(()=>{this.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send(`\r
\r
`))}startSendingKeepAlives(){this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(()=>{this.sendKeepAlive(),this.startSendingKeepAlives()},(t=>{const r=.8*t;return 1e3*(Math.random()*(t-r)+r)})(this.configuration.keepAliveInterval)))}stopSendingKeepAlives(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0}}Dh.defaultOptions={server:"",connectionTimeout:5,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!0};class As{constructor(t={}){if(this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this._state=cr.Stopped,this._stateEventEmitter=new cc,this.delegate=t.delegate,this.options=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},As.defaultOptions()),{sipjsId:ro(5)}),{uri:new di("sip","anonymous."+ro(6),"anonymous.invalid")}),{viaHost:ro(12)+".invalid"}),As.stripUndefinedProperties(t)),this.options.hackIpInContact)if(typeof this.options.hackIpInContact=="boolean"&&this.options.hackIpInContact){const i=Math.floor(Math.random()*254+1);this.options.viaHost="192.0.2."+i}else this.options.hackIpInContact&&(this.options.viaHost=this.options.hackIpInContact);switch(this.loggerFactory=new PN,this.logger=this.loggerFactory.getLogger("sip.UserAgent"),this.loggerFactory.builtinEnabled=this.options.logBuiltinEnabled,this.loggerFactory.connector=this.options.logConnector,this.options.logLevel){case"error":this.loggerFactory.level=er.error;break;case"warn":this.loggerFactory.level=er.warn;break;case"log":this.loggerFactory.level=er.log;break;case"debug":this.loggerFactory.level=er.debug}if(this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(r=>{const n=this.options[r];switch(r){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log(" "+r+": "+n);break;case"authorizationPassword":this.logger.log(" "+r+": NOT SHOWN");break;case"transportConstructor":this.logger.log(" "+r+": "+n.name);break;default:this.logger.log(" "+r+": "+JSON.stringify(n))}})),this.options.transportOptions){const r=this.options.transportOptions,n=r.maxReconnectionAttempts,i=r.reconnectionTimeout;n!==void 0&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),i!==void 0&&this.logger.warn('The transport option "reconnectionTimeout" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),t.reconnectionDelay===void 0&&i!==void 0&&(this.options.reconnectionDelay=i),t.reconnectionAttempts===void 0&&n!==void 0&&(this.options.reconnectionAttempts=n)}if(t.reconnectionDelay!==void 0&&this.logger.warn('The user agent option "reconnectionDelay" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),t.reconnectionAttempts!==void 0&&this.logger.warn('The user agent option "reconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),this._transport=new this.options.transportConstructor(this.getLogger("sip.Transport"),this.options.transportOptions),this.initTransportCallbacks(),this._contact=this.initContact(),this._instanceId=this.options.instanceId?this.options.instanceId:As.newUUID(),zt.parse(this._instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");this._userAgentCore=this.initCore()}static makeURI(t){return zt.URIParse(t)}static defaultOptions(){return{allowLegacyNotifications:!1,authorizationHa1:"",authorizationPassword:"",authorizationUsername:"",delegate:{},contactName:"",contactParams:{transport:"ws"},displayName:"",forceRport:!1,gracefulShutdown:!0,hackAllowUnregisteredOptionTags:!1,hackIpInContact:!1,hackViaTcp:!1,instanceId:"",instanceIdAlwaysAdded:!1,logBuiltinEnabled:!0,logConfiguration:!0,logConnector:()=>{},logLevel:"log",noAnswerTimeout:60,preloadedRouteSet:[],reconnectionAttempts:0,reconnectionDelay:4,sendInitialProvisionalResponse:!0,sessionDescriptionHandlerFactory:ZN(),sessionDescriptionHandlerFactoryOptions:{},sipExtension100rel:mn.Unsupported,sipExtensionReplaces:mn.Unsupported,sipExtensionExtraSupported:[],sipjsId:"",transportConstructor:Dh,transportOptions:{},uri:new di("sip","anonymous","anonymous.invalid"),userAgentString:"SIP.js/0.21.1",viaHost:""}}static newUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.floor(16*Math.random());return(t==="x"?r:r%4+8).toString(16)})}static stripUndefinedProperties(t){return Object.keys(t).reduce((r,n)=>(t[n]!==void 0&&(r[n]=t[n]),r),{})}get configuration(){return this.options}get contact(){return this._contact}get instanceId(){return this._instanceId}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get transport(){return this._transport}get userAgentCore(){return this._userAgentCore}getLogger(t,r){return this.loggerFactory.getLogger(t,r)}getLoggerFactory(){return this.loggerFactory}isConnected(){return this.transport.isConnected()}reconnect(){return this.state===cr.Stopped?Promise.reject(new Error("User agent stopped.")):Promise.resolve().then(()=>this.transport.connect())}start(){return this.state===cr.Started?(this.logger.warn("User agent already started"),Promise.resolve()):(this.logger.log(`Starting ${this.configuration.uri}`),this.transitionState(cr.Started),this.transport.connect())}async stop(){if(this.state===cr.Stopped)return this.logger.warn("User agent already stopped"),Promise.resolve();if(this.logger.log(`Stopping ${this.configuration.uri}`),!this.options.gracefulShutdown)return this.logger.log("Dispose of transport"),this.transport.dispose().catch(a=>{throw this.logger.error(a.message),a}),this.logger.log("Dispose of core"),this.userAgentCore.dispose(),this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this.transitionState(cr.Stopped),Promise.resolve();const t=Object.assign({},this._publishers),r=Object.assign({},this._registerers),n=Object.assign({},this._sessions),i=Object.assign({},this._subscriptions),s=this.transport,o=this.userAgentCore;this.logger.log("Dispose of registerers");for(const a in r)r[a]&&await r[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._registerers[a],l});this.logger.log("Dispose of sessions");for(const a in n)n[a]&&await n[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._sessions[a],l});this.logger.log("Dispose of subscriptions");for(const a in i)i[a]&&await i[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._subscriptions[a],l});this.logger.log("Dispose of publishers");for(const a in t)t[a]&&await t[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._publishers[a],l});this.logger.log("Dispose of transport"),await s.dispose().catch(a=>{throw this.logger.error(a.message),a}),this.logger.log("Dispose of core"),o.dispose(),this.transitionState(cr.Stopped)}_makeInviter(t,r){return new Db(this,t,r)}attemptReconnection(t=1){const r=this.options.reconnectionAttempts,n=this.options.reconnectionDelay;t>r?this.logger.log("Maximum reconnection attempts reached"):(this.logger.log(`Reconnection attempt ${t} of ${r} - trying`),setTimeout(()=>{this.reconnect().then(()=>{this.logger.log(`Reconnection attempt ${t} of ${r} - succeeded`)}).catch(i=>{this.logger.error(i.message),this.logger.log(`Reconnection attempt ${t} of ${r} - failed`),this.attemptReconnection(++t)})},t===1?0:1e3*n))}initContact(){const t=this.options.contactName!==""?this.options.contactName:ro(8),r=this.options.contactParams;return{pubGruu:void 0,tempGruu:void 0,uri:new di("sip",t,this.options.viaHost,void 0,r),toString:(n={})=>{const i=n.anonymous||!1,s=n.outbound||!1,o=n.register||!1;let a="<";return a+=i?this.contact.tempGruu||`sip:anonymous@anonymous.invalid;transport=${r.transport?r.transport:"ws"}`:o?this.contact.uri:this.contact.pubGruu||this.contact.uri,s&&(a+=";ob"),a+=">",this.options.instanceIdAlwaysAdded&&(a+=';+sip.instance="<urn:uuid:'+this._instanceId+'>"'),a}}}initCore(){let t=[];t.push("outbound"),this.options.sipExtension100rel===mn.Supported&&t.push("100rel"),this.options.sipExtensionReplaces===mn.Supported&&t.push("replaces"),this.options.sipExtensionExtraSupported&&t.push(...this.options.sipExtensionExtraSupported),this.options.hackAllowUnregisteredOptionTags||(t=t.filter(i=>xN[i])),t=Array.from(new Set(t));const r=t.slice();(this.contact.pubGruu||this.contact.tempGruu)&&r.push("gruu");const n={aor:this.options.uri,contact:this.contact,displayName:this.options.displayName,loggerFactory:this.loggerFactory,hackViaTcp:this.options.hackViaTcp,routeSet:this.options.preloadedRouteSet,supportedOptionTags:t,supportedOptionTagsResponse:r,sipjsId:this.options.sipjsId,userAgentHeaderFieldValue:this.options.userAgentString,viaForceRport:this.options.forceRport,viaHost:this.options.viaHost,authenticationFactory:()=>{const i=this.options.authorizationUsername?this.options.authorizationUsername:this.options.uri.user,s=this.options.authorizationPassword?this.options.authorizationPassword:void 0,o=this.options.authorizationHa1?this.options.authorizationHa1:void 0;return new DN(this.getLoggerFactory(),o,i,s)},transportAccessor:()=>this.transport};return new XN(n,{onInvite:i=>{var s;const o=new NN(this,i);if(i.delegate={onCancel:a=>{o._onCancel(a)},onTransportError:a=>{this.logger.error("A transport error has occurred while handling an incoming INVITE request.")}},i.trying(),this.options.sipExtensionReplaces!==mn.Unsupported){const a=i.message.parseHeader("replaces");if(a){const l=a.call_id;if(typeof l!="string")throw new Error("Type of call id is not string");const c=a.replaces_to_tag;if(typeof c!="string")throw new Error("Type of to tag is not string");const u=a.replaces_from_tag;if(typeof u!="string")throw new Error("type of from tag is not string");const d=l+c+u,h=this.userAgentCore.dialogs.get(d);if(!h)return void o.reject({statusCode:481});if(!h.early&&a.early_only===!0)return void o.reject({statusCode:486});const f=this._sessions[l+u]||this._sessions[l+c]||void 0;if(!f)throw new Error("Session does not exist.");o._replacee=f}}if(!((s=this.delegate)===null||s===void 0)&&s.onInvite)return o.autoSendAnInitialProvisionalResponse?void o.progress().then(()=>{var a;if(((a=this.delegate)===null||a===void 0?void 0:a.onInvite)===void 0)throw new Error("onInvite undefined.");this.delegate.onInvite(o)}):void this.delegate.onInvite(o);o.reject({statusCode:486})},onMessage:i=>{if(this.delegate&&this.delegate.onMessage){const s=new Nb(i);this.delegate.onMessage(s)}else i.accept()},onNotify:i=>{if(this.delegate&&this.delegate.onNotify){const s=new Ng(i);this.delegate.onNotify(s)}else this.options.allowLegacyNotifications?i.accept():i.reject({statusCode:481})},onRefer:i=>{this.logger.warn("Received an out of dialog REFER request"),this.delegate&&this.delegate.onReferRequest?this.delegate.onReferRequest(i):i.reject({statusCode:405})},onRegister:i=>{this.logger.warn("Received an out of dialog REGISTER request"),this.delegate&&this.delegate.onRegisterRequest?this.delegate.onRegisterRequest(i):i.reject({statusCode:405})},onSubscribe:i=>{this.logger.warn("Received an out of dialog SUBSCRIBE request"),this.delegate&&this.delegate.onSubscribeRequest?this.delegate.onSubscribeRequest(i):i.reject({statusCode:405})}})}initTransportCallbacks(){this.transport.onConnect=()=>this.onTransportConnect(),this.transport.onDisconnect=t=>this.onTransportDisconnect(t),this.transport.onMessage=t=>this.onTransportMessage(t)}onTransportConnect(){this.state!==cr.Stopped&&this.delegate&&this.delegate.onConnect&&this.delegate.onConnect()}onTransportDisconnect(t){this.state!==cr.Stopped&&(this.delegate&&this.delegate.onDisconnect&&this.delegate.onDisconnect(t),t&&this.options.reconnectionAttempts>0&&this.attemptReconnection())}onTransportMessage(t){const r=Wu.parseMessage(t,this.getLogger("sip.Parser"));if(!r)return void this.logger.warn("Failed to parse incoming message. Dropping.");if(this.state===cr.Stopped&&r instanceof Ea)return void this.logger.warn(`Received ${r.method} request while stopped. Dropping.`);const n=()=>{const i=["from","to","call_id","cseq","via"];for(const s of i)if(!r.hasHeader(s))return this.logger.warn(`Missing mandatory header field : ${s}.`),!1;return!0};if(r instanceof Ea){if(!n())return void this.logger.warn("Request missing mandatory header field. Dropping.");if(!r.toTag&&r.callId.substr(0,5)===this.options.sipjsId)return void this.userAgentCore.replyStateless(r,{statusCode:482});const i=uc(r.body),s=r.getHeader("content-length");if(s&&i<Number(s))return void this.userAgentCore.replyStateless(r,{statusCode:400})}if(r instanceof Ns){if(!n())return void this.logger.warn("Response missing mandatory header field. Dropping.");if(r.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response. Dropping.");if(r.via.host!==this.options.viaHost||r.via.port!==void 0)return void this.logger.warn("Via sent-by in the response does not match UA Via host value. Dropping.");const i=uc(r.body),s=r.getHeader("content-length");if(s&&i<Number(s))return void this.logger.warn("Message body length is lower than the value in Content-Length header field. Dropping.")}if(r instanceof Ea)this.userAgentCore.receiveIncomingRequestFromTransport(r);else{if(!(r instanceof Ns))throw new Error("Invalid message type.");this.userAgentCore.receiveIncomingResponseFromTransport(r)}}transitionState(t,r){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case cr.Started:t!==cr.Stopped&&n();break;case cr.Stopped:t!==cr.Started&&n();break;default:throw new Error("Unknown state.")}this.logger.log(`Transitioned from ${this._state} to ${t}`),this._state=t,this._stateEventEmitter.emit(this._state)}}var li,Pt,v2,E2;function Dg(e,t){if(e)return Object.getOwnPropertyDescriptor(e,t)||Dg(Object.getPrototypeOf(e),t)}function Dc(e,t,r){const n=r.filter(i=>Dg(t,i)===void 0);if(n.length>0)throw new Error(`Implementation is not complete, missing properties: ${n.join(", ")}`);return Object.freeze(r.reduce((i,s)=>{const o=Dg(t,s);return"value"in o?(typeof o.value=="function"?i[s]=o.value.bind(t):i[s]=o.value,i):Object.defineProperty(i,s,{get:o.get.bind(t)})},e))}function Ub(){return new(window.AudioContext||window.webkitAudioContext)}function ep(e,t,r){return e<t?t:e>r?r:e}(function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DYING="dying",e.RECOVERING="recovering",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected"})(li||(li={})),function(e){e.TRYING="trying",e.RINGING="ringing",e.ACTIVE="active",e.ON_HOLD="on_hold",e.TERMINATED="terminated"}(Pt||(Pt={})),function(e){e.AVAILABLE="available",e.TRYING="trying",e.PROCEEDING="proceeding",e.EARLY="early",e.RINGING="ringing",e.CONFIRMED="confirmed",e.BUSY="busy",e.TERMINATED="terminated"}(v2||(v2={})),function(e){e[e.ONCE=0]="ONCE",e[e.BURST=1]="BURST"}(E2||(E2={}));const JN="Audio"in window&&"setSinkId"in new window.Audio,Tl=navigator.userAgent.toLowerCase();Tl.indexOf("safari")!==-1&&Tl.indexOf("chrome"),Tl.indexOf("firefox")!==-1&&Tl.indexOf("chrome");Tl.indexOf("chrome");class Ca{static getLevelIdx(t){const r=Ca.levels[t];return r===void 0?0:r}constructor(t,r){this.level="info",this.level=t,r&&(this.connector=r)}error(t,r){this.log("error",t,r)}warn(t,r){this.log("warn",t,r)}info(t,r){this.log("info",t,r)}debug(t,r){this.log("debug",t,r)}verbose(t,r){this.log("verbose",t,r)}log(t,r,n){const i=Ca.getLevelIdx(t),s=Ca.getLevelIdx(this.level);this.connector&&i>=s&&this.connector({level:t,message:r,context:n})}}Ca.levels={error:4,warn:3,info:2,verbose:1,debug:0};const Hl=new Ca("info"),C2=new class extends ot{constructor(){super(...arguments),this.allDevices=[],this.timer=void 0,this.hadPermission=!1}init(){this.update(),navigator.mediaDevices.ondevicechange=()=>{this.update()}}get devices(){return this.allDevices}get inputs(){return this.allDevices.filter(e=>e.kind==="audioinput")}get outputs(){return this.allDevices.filter(e=>e.kind==="audiooutput")}checkPermission(){return ft(this,void 0,void 0,function*(){const e=yield navigator.mediaDevices.enumerateDevices();return!(!e.length||!e[0].label)})}requestPermission(){return ft(this,void 0,void 0,function*(){if(this.requestPermissionPromise)return this.requestPermissionPromise;try{const{state:e}=yield navigator.permissions.query({name:"microphone"});if(e==="granted")return}catch(e){console.error("permissions query mic not supported in firefox, doing fallback",e)}return this.requestPermissionPromise=new Promise((e,t)=>ft(this,void 0,void 0,function*(){try{const r=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.hadPermission||(this.timer&&window.clearTimeout(this.timer),yield this.update()),this.closeStream(r),e()}catch(r){t(r)}finally{delete this.requestPermissionPromise}})),this.requestPermissionPromise})}openInputStream(e){Hl.debug(`Requesting input stream with: audioProcessing=${e.audioProcessing}`,"media");const t=function(n){const i=n.audioProcessing?{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googAudioMirroring:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googEchoCancellation:!0,googHighpassFilter:!0,googNoiseSuppression:!0,googTypingNoiseDetection:!0}:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,googAudioMirroring:!1,googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googHighpassFilter:!1,googNoiseSuppression:!1,googTypingNoiseDetection:!1},s={audio:i,video:!1};return n.id&&(s.audio.deviceId=n.id),Hl.debug(`Using input constraints: ${JSON.stringify(s)}`,"media"),s}(e),r=navigator.mediaDevices.getUserMedia(t);return r.then(n=>{n.getTracks().forEach(i=>{Hl.debug(`Media stream track has settings: ${JSON.stringify(i.getSettings())}`,"media")})}),r}closeStream(e){e.getTracks().forEach(t=>t.stop())}enumerateDevices(){return ft(this,void 0,void 0,function*(){var e;const t=yield(e=navigator.mediaDevices)===null||e===void 0?void 0:e.enumerateDevices();if(t.length&&t[0].label)return t})}update(){return ft(this,void 0,void 0,function*(){const e=yield this.enumerateDevices(),t=e!==void 0;t?(this.hadPermission||this.emit("permissionGranted"),this.updateDevices(e)):this.hadPermission&&(this.emit("permissionRevoked"),this.allDevices=[],this.emit("devicesChanged")),this.hadPermission=t})}updateDevices(e){const t=e.map(o=>{if(o.label)return o.kind==="audioinput"?{id:o.deviceId,name:o.label,kind:"audioinput"}:o.kind==="audiooutput"?{id:o.deviceId,name:o.label,kind:"audiooutput"}:void 0}).filter(o=>o!==void 0),r=new Set(t.map(o=>o==null?void 0:o.id)),n=new Set(this.allDevices.map(o=>o.id));var i,s;s=n,(i=r).size===s.size&&[...i].every(s.has.bind(s))||(this.allDevices=t,this.emit("devicesChanged"))}};class e7{constructor(t){this._timer=[],this.options=t,this._audioContext=Ub(),this._stream=t.stream,this._muted=t.muted||!1}mute(t){this._muted=t}play(){var t,r;this._beepAudioNode=this._audioContext.createOscillator(),this._beepAudioNode.type=((t=this.options)===null||t===void 0?void 0:t.type)||"sine",this._beepAudioNode.frequency.value=((r=this.options)===null||r===void 0?void 0:r.frequency)||450,this._audioNode=this._beepAudioNode.connect(this._audioContext.createMediaStreamDestination()),this._audioNode.stream.getAudioTracks().forEach(n=>{this._track&&this.removeTrack(this._track),n.enabled=!this._muted,this._track=n,this._stream.addTrack(n),this._stream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:n}))}),this._beepAudioNode.start(),this._beepAudioNode.addEventListener("ended",()=>{var n;(n=this._beepAudioNode)===null||n===void 0||n.disconnect()})}stop(){var t;(t=this._beepAudioNode)===null||t===void 0||t.stop()}removeTrack(t){this._stream.getAudioTracks().forEach(r=>{r.id===t.id&&(this._stream.removeTrack(r),this._stream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:r})))})}setSinkId(t){t=t==="default"?"":t,"setSinkId"in AudioContext.prototype?this._audioContext.setSinkId(t||""):"sinkId"in AudioContext.prototype&&(this._audioContext.sinkId=t||"")}loop(t=1500){this.play(),this._timer.push(setTimeout(()=>{this.stop(),this._timer.push(setTimeout(()=>this.loop(t),2*t))},t))}dispose(){var t,r;this._timer.forEach(n=>{clearTimeout(n)}),this._track&&this.removeTrack(this._track),(t=this._beepAudioNode)===null||t===void 0||t.disconnect(),this.stop(),(r=this._source)===null||r===void 0||r.disconnect(),this._track=void 0}}class t7 extends ot{constructor(t,r){super(),this.session=t.session,this.isIncoming=t.isIncoming,this._localStream=new MediaStream,this._remoteStream=new MediaStream,this.media={input:Object.assign({},r.input),output:Object.assign({},r.output)},this.audioOutput=new Audio,this.audioOutput.volume=this.media.output.volume,this.audioOutput.muted=this.media.output.muted,this.audioContext=Ub(),this._toneHelper=new e7({stream:this._remoteStream,muted:this.media.output.muted}),this._remoteStream.addEventListener("addtrack",i=>{this.audioOutput.srcObject===null&&(this.audioOutput.srcObject=this._remoteStream,this.audioOutput.play())}),t.on("terminated",()=>{this.cleanupMedia(),this.stopOutput(),this.stopInput(),this._toneHelper.dispose()}),t.once("progress",i=>{i.statusCode===180?this._toneHelper.loop():i.statusCode===183&&(this.audioOutput.srcObject===null&&t.earlyMedia||this.audioOutput.srcObject===null&&t.remoteStream.active)&&(this.audioOutput.srcObject=t.remoteStream,this.audioOutput.play())}),t.on("accepted",()=>{this._toneHelper.dispose()}),t.on("trackAdd",i=>{i.remoteStream&&i.remoteStream.getAudioTracks().forEach(s=>{this._remoteStream.getAudioTracks().forEach(o=>{this._remoteStream.removeTrack(o),this._remoteStream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:o}))}),this._remoteStream.addTrack(s),this._remoteStream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:s}))}),i.localStream&&this.setInput(this.media.input)});const n=this;this.input={get id(){return n.media.input.id},set id(i){n.setInputDevice(i)},get audioProcessing(){return n.media.input.audioProcessing},set audioProcessing(i){n.setInputAudioProcessing(i)},get volume(){return n.media.input.volume},set volume(i){n.setInputVolume(i)},get muted(){return n.media.input.muted},set muted(i){n.setInputMuted(i)}},this.output={get id(){return n.media.output.id},get audio(){return n.audioOutput},set audio(i){i&&(n.audioOutput=i)},set id(i){n.setOutputDevice(i)},get volume(){return n.media.output.volume},set volume(i){n.setOutputVolume(i)},get muted(){return n.media.output.muted},set muted(i){n.setOutputMuted(i)}}}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}cleanupMedia(){const t=this.session.sessionDescriptionHandler;t==null||t.localMediaStream.getTracks().forEach(r=>{r.stop()})}setInput(t){return ft(this,void 0,void 0,function*(){t===void 0&&(t=this.media.input);const r=t.muted||this.media.input.muted,n=yield C2.openInputStream(t);this.stopInput(),this.inputStream=n;const i=this.audioContext.createMediaStreamSource(n),s=this.audioContext.createGain();t.volume!==void 0?(s.gain.value=t.volume,this.emit("inputVolume",t.volume)):s.gain.value=this.media.input.volume,i.connect(s);const o=this.audioContext.createMediaStreamDestination();s.connect(o);const a=this.session.sessionDescriptionHandler,l=a==null?void 0:a.peerConnection;l&&l.getSenders().forEach((c,u)=>{if(c.track&&c.track.kind==="audio"){const d=o.stream.getAudioTracks().find(h=>h.kind==="audio");d&&(r&&(d.enabled=!1),c.replaceTrack(d).then(()=>{this._localStream.getAudioTracks().forEach(h=>{h&&(h.stop(),this._localStream.removeTrack(h),this._localStream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:h})))}),this._localStream.addTrack(d),this._localStream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:d}))}))}}),this.inputNode=s,this.sourceNode=i,this.media.input=Object.assign(Object.assign({},this.media.input),t)})}stopInput(){var t;if(this.inputStream){C2.closeStream(this.inputStream);try{(t=this.inputNode)===null||t===void 0||t.disconnect()}catch(r){if(!r||r.name!=="InvalidAccessError")throw r;Hl.debug("cannot disconnect input audio node as the input audio node is already disconnected","media")}}}setOutput(t){return ft(this,void 0,void 0,function*(){t===void 0&&(t=this.media.output);const r=t.audio||new Audio;t.volume!==void 0?(r.volume=ep(t.volume,0,1),this.emit("outputVolume",r.volume)):r.volume=this.media.output.volume,t.muted!==void 0?(r.muted=t.muted,this.emit("outputMuted",t.muted)):r.muted=this.media.output.muted,t.id&&(JN?yield r.setSinkId(t.id):console.warn("cannot set output device: setSinkId is not supported","session-media")),this.stopOutput(),this.media.output=Object.assign(Object.assign({},this.media.output),t),this.audioOutput=r,this.audioOutput.srcObject=this._remoteStream,yield this.audioOutput.play()})}stopOutput(){this.audioOutput&&this.audioOutput.srcObject instanceof MediaStream&&this.audioOutput.srcObject.getAudioTracks().forEach(t=>{this.audioOutput.srcObject.removeTrack(t)})}dispose(){this.stopInput(),this.stopOutput(),this._toneHelper.dispose()}setOutputDevice(t){this.setOutput(Object.assign({},this.media.output,{id:t}))}freeze(){return Dc({},this,["input","output","on","once","setOutput","setInput","removeListener","removeAllListeners","localStream","remoteStream"])}setOutputVolume(t){this.audioOutput&&(this.audioOutput.volume=ep(t,0,1)),this.media.output.volume=ep(t,0,1),this.emit("outputVolume",this.media.output.volume)}setInputDevice(t){this.setInput(Object.assign({},this.media.input,{id:t}))}setInputAudioProcessing(t){Hl.debug(`setting audioProcessing to: ${t}`,"media"),this.setInput(Object.assign({},this.media.input,{audioProcessing:t}))}setInputVolume(t){this.inputNode&&(this.inputNode.gain.value=t),this.media.input.volume=t,this.emit("inputVolume",t)}setInputMuted(t){this.session.sessionDescriptionHandler.enableSenderTracks(!t),this.media.input.muted=t,this.emit("inputMuted",t)}setOutputMuted(t){this.session.sessionDescriptionHandler.enableReceiverTracks(!t),this._remoteStream.getAudioTracks().forEach(r=>{r.enabled=!t}),this._toneHelper.mute(t),this.media.output.muted=t,this.emit("outputMuted",t)}}const r7={480:"temporarily_unavailable",484:"address_incomplete",486:"busy",487:"request_terminated"};class Hb extends ot{constructor({session:t,media:r,isIncoming:n,earlyMedia:i=!1}){super(),this.status=Pt.TRYING,this.holdState=!1,this.isMute=!1,this.duration=0,this.setupMedia=(s,{enableSender:o=!1,enableReceiver:a=!0})=>{s.remoteMediaStream&&a&&this.emit("trackAdd",{remoteStream:s.remoteMediaStream}),s.localMediaStream.active&&o&&this.emit("trackAdd",{localStream:s.localMediaStream})},this.session=t,this._media=new t7(this,r),this.isIncoming=n||!1,this.id=t.request.callId,this.remoteIdentity=this.extractRemoteIdentity(),this.isMute=!1,this._earlyMedia=i,this._media.on("inputMuted",s=>{this.emit("mute",s,"input")}),this._media.on("outputMuted",s=>{this.emit("mute",s,"output")}),this.session.stateChange.addListener(s=>ft(this,void 0,void 0,function*(){switch(s){case X.Establishing:!n&&this._earlyMedia&&this.setupMedia(this.session.sessionDescriptionHandler,{enableReceiver:!0});break;case X.Established:this.setupMedia(this.session.sessionDescriptionHandler,{enableSender:!0,enableReceiver:!0}),this.status=Pt.ACTIVE,this.emit("established"),this.emit("statusUpdate",{id:this.id,status:this.status}),this.interval=setInterval(()=>{this.emit("duration",++this.duration)},1e3);break;case X.Terminated:this.emit("terminated",{id:this.id}),this.status=Pt.TERMINATED,this.emit("statusUpdate",{id:this.id,status:this.status}),this.duration=0,this.interval&&clearInterval(this.interval),this.session.dispose(),this._media.dispose()}}))}get autoAnswer(){const t=this.session.request.headers["Call-Info"];return!(!t||!t[0])&&t[0].raw.includes("answer-after=0")}dispose(){this.session.dispose(),this._media.dispose()}get media(){return this._media.freeze()}get phoneNumber(){return this.isIncoming?this.remoteIdentity.phoneNumber:this.session.request.to.uri.user||""}accept(){throw new Error("Should be implemented in superclass")}reject(t){throw new Error("Should be implemented in superclass")}accepted(){throw new Error("Should be implemented in superclass")}cancel(){throw new Error("Should be implemented in superclass")}terminate(){return this.bye()}terminated(){return new Promise(t=>{this.session.stateChange.addListener(r=>{r===X.Terminated&&t(this.cancelled?this.cancelled.reason:void 0)})})}makeInviteOptions({onAccept:t,onReject:r,onProgress:n,onTrying:i}){return{requestDelegate:{onAccept:()=>{this.remoteIdentity=this.extractRemoteIdentity(),this.emit("remoteIdentityUpdate",this,this.remoteIdentity),this.emit("accepted"),t({accepted:!0})},onReject:({message:s})=>{r({accepted:!1,rejectCode:s.statusCode,rejectCause:s.statusCode?r7[s.statusCode]:void 0,rejectPhrase:s.reasonPhrase})},onProgress:({message:s})=>{this.emit("progress",s),this.status=Pt.RINGING,this.emit("statusUpdate",{id:this.id,status:this.status}),n()},onTrying:()=>{i()}}}}extractRemoteIdentity(){let t=this.session.remoteIdentity.uri.user||"",r="";return this.session.assertedIdentity&&(t=this.session.assertedIdentity.uri.user||"",r=this.session.assertedIdentity.displayName||""),{phoneNumber:t,displayName:r}}hold(){return this.setHoldState(!0)}unhold(){return this.setHoldState(!1)}reinvite(){return ft(this,void 0,void 0,function*(){const t={requestDelegate:{onAccept:()=>{},onReject:()=>{}}};this.session.sessionDescriptionHandlerOptionsReInvite={dataChannel:!0};try{return yield this.session.invite(t),!0}catch{return!1}})}setHoldState(t){return ft(this,void 0,void 0,function*(){const r={hold:t},n={requestDelegate:{onAccept:()=>{this.status=t?Pt.ON_HOLD:Pt.ACTIVE,this.emit("statusUpdate",{id:this.id,status:this.status})},onReject:()=>{this.status=Pt.ACTIVE,this.emit("statusUpdate",{id:this.id,status:this.status})}}};this.session.sessionDescriptionHandlerOptionsReInvite=r;try{return yield this.session.invite(n),!0}catch{return!1}})}mute(){if(this.status===Pt.ACTIVE||this.status===Pt.ON_HOLD){const t=this.session.sessionDescriptionHandler.peerConnection;t&&t.getSenders().forEach(r=>{r.track&&(r.track.enabled=!1)}),this.isMute=!0,this.emit("mute",!0,"input")}}get localStream(){var t;const r=(t=this.session)===null||t===void 0?void 0:t.sessionDescriptionHandler;return r==null?void 0:r.localMediaStream}get remoteStream(){const t=this.session.sessionDescriptionHandler;return t==null?void 0:t.remoteMediaStream}get earlyMedia(){return this._earlyMedia}unmute(){if(this.status===Pt.ACTIVE||this.status===Pt.ON_HOLD){const t=this.session.sessionDescriptionHandler.peerConnection;t&&t.getSenders().forEach(r=>{r.track&&(r.track.enabled=!0)}),this.isMute=!1,this.emit("mute",!1,"input")}}blindTransfer(t){return ft(this,void 0,void 0,function*(){const r=As.makeURI(t);return r?this.transfer(r).then(n=>(n&&this.bye(),Promise.resolve(n))):Promise.resolve(!1)})}attendedTransfer(t){return ft(this,void 0,void 0,function*(){return this.transfer(t.session).then(r=>(r&&this.bye(),Promise.resolve(r)))})}transfer(t){return ft(this,void 0,void 0,function*(){return function(r,n){const{milliseconds:i,fallback:s,message:o,customTimers:a={setTimeout,clearTimeout}}=n;let l;const c=new Promise((u,d)=>{if(typeof i!="number"||Math.sign(i)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${i}\``);if(n.signal){const{signal:f}=n;f.aborted&&d(f2(f)),f.addEventListener("abort",()=>{d(f2(f))})}if(i===Number.POSITIVE_INFINITY)return void r.then(u,d);const h=new vN;l=a.setTimeout.call(void 0,()=>{if(s)try{u(s())}catch(f){d(f)}else typeof r.cancel=="function"&&r.cancel(),o===!1?u():o instanceof Error?d(o):(h.message=o??`Promise timed out after ${i} milliseconds`,d(h))},i),(async()=>{try{u(await r)}catch(f){d(f)}})()}).finally(()=>{c.clear()});return c.clear=()=>{a.clearTimeout.call(void 0,l),l=void 0},c}(this.isTransferredPromise(t),{milliseconds:2e4,fallback:()=>Promise.resolve(!0)})})}isTransferredPromise(t){return ft(this,void 0,void 0,function*(){return new Promise(r=>{this.session.refer(t).then(n=>{n.delegate={onAccept:()=>{r(!0)},onReject:()=>{r(!1)}}})})})}rebuildSessionDescriptionHandler(){this.session._sessionDescriptionHandler=void 0,this.session.setupSessionDescriptionHandler()}bye(){return this.session.bye()}dtmf(t,r){var n;return((n=this.session.sessionDescriptionHandler)===null||n===void 0?void 0:n.sendDtmf(t,r))||!1}freeze(){return Dc({},this,["holdState","id","isIncoming","phoneNumber","remoteIdentity","mute","unmute","autoAnswer","status","accept","accepted","attendedTransfer","blindTransfer","bye","dtmf","freeze","hold","cancel","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","cancel","tried","localStream","remoteStream"])}}class n7 extends Hb{constructor(t){super(t),this.session=t.session,this.triedPromise=new Promise(r=>{this.progressedPromise=new Promise(n=>{this.acceptedPromise=new Promise((i,s)=>{this.inviteOptions=this.makeInviteOptions({onAccept:i,onReject:i,onProgress:n,onTrying:r})})})})}progressed(){return this.progressedPromise}tried(){return this.triedPromise}accepted(){return this.acceptedPromise}invite(t){return ft(this,void 0,void 0,function*(){return this.session.invite(Object.assign(Object.assign({},t),this.inviteOptions)).then(r=>r)})}accept(){return ft(this,void 0,void 0,function*(){throw new Error("Cannot accept an outgoing call.")})}reject(){return ft(this,void 0,void 0,function*(){throw new Error("Cannot reject an outgoing call.")})}cancel(t){return this.session.cancel(t)}freeze(){return Dc({},this,["holdState","id","media","isIncoming","status","phoneNumber","remoteIdentity","accept","accepted","mute","unmute","attendedTransfer","blindTransfer","cancel","bye","dtmf","freeze","hold","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","localStream","remoteStream"])}}class i7 extends Hb{constructor(t){super(t),this.session=t.session,this.status=Pt.RINGING,this.emit("statusUpdate",{id:this.id,status:this.status})}accept(){return ft(this,void 0,void 0,function*(){return this.session.accept().then(()=>{this.session.delegate={onInvite:()=>{}}})})}reject(t){return ft(this,void 0,void 0,function*(){return this.session.reject(t)})}tried(){return ft(this,void 0,void 0,function*(){throw new Error("Not applicable for incoming calls.")})}cancel(){return ft(this,void 0,void 0,function*(){throw new Error("Cannot cancel an incoming call.")})}freeze(){return Dc({},this,["holdState","id","isIncoming","media","status","phoneNumber","remoteIdentity","autoAnswer","accept","mute","unmute","accepted","attendedTransfer","blindTransfer","bye","dtmf","freeze","hold","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","localStream","remoteStream"])}}class s7 extends ot{constructor(t){super(),this.sessions={},this.connected=!1,this.reconnectionAttempts=100,this.reconnectionDelay=4,this.attemptingReconnection=!1,this.shouldBeConnected=!0,this._clientUrl="https://sdk-api.optimaccs.com",this.attemptReconnection=(r=1)=>{this.shouldBeConnected&&(this.attemptingReconnection||r>this.reconnectionAttempts||(this.attemptingReconnection=!0,setTimeout(()=>{var n;this.shouldBeConnected?(n=this.uaFactory)===null||n===void 0||n.reconnect().then(()=>{console.log("reconnect attempt"),this.attemptingReconnection=!1}).catch(i=>{this.attemptingReconnection=!1,this.attemptReconnection(++r)}):this.attemptingReconnection=!1},r===1?0:1e3*this.reconnectionDelay)))},this.options=t,this.defaultMedia=t.media||{input:{id:void 0,audioProcessing:!0,muted:!1,volume:1},output:{id:void 0,muted:!1,volume:1}}}get account(){var t,r,n;return{name:(t=this.uaFactory)===null||t===void 0?void 0:t.configuration.displayName,user:(r=this.uaFactory)===null||r===void 0?void 0:r.configuration.authorizationUsername,uri:(n=this.uaFactory)===null||n===void 0?void 0:n.configuration.uri}}withToken(t){return ft(this,void 0,void 0,function*(){try{const r=yield fetch(`${this._clientUrl}/api/extension`,{method:"GET",headers:{Authorization:`Bearer ${t.token}`,Accept:"application/json"}});if(r.ok){const n=(yield r.json()).data;return Promise.resolve(n)}return Promise.reject("Failed to get token")}catch(r){return Promise.reject(r)}})}setupListener(){if(this.uaFactory){const t=this;this.uaFactory.delegate={onConnect(){var r;(r=t.registererFactory)===null||r===void 0||r.register()},onDisconnect(r){var n;try{(n=t.registererFactory)===null||n===void 0||n.unregister()}catch{}r&&t.attemptReconnection()},onRegister(r){},onInvite(r){const n=new i7({session:r,isIncoming:!0,media:t.defaultMedia});t.addSession(n),n.on("terminated",({id:i})=>{n.id===i&&t.removeSession(n)}),t.emit("invite",n.freeze())}},this.uaFactory.transport.stateChange.addListener(r=>{switch(r){case De.Connecting:this.emit("status",li.CONNECTING);break;case De.Disconnected:this.emit("status",li.DISCONNECTED);break;case De.Disconnecting:this.emit("status",li.DISCONNECTING)}})}}withCredential(t){var r,n;const i=new As({uri:As.makeURI(t.account.uri),authorizationUsername:t.account.user,authorizationPassword:t.account.password,sipExtension100rel:mn.Supported,transportOptions:{server:((r=t.transport)===null||r===void 0?void 0:r.wsServers)||"wss://demo-voip.optimaccs.com:8089/ws"},displayName:t.account.name,logBuiltinEnabled:!1,forceRport:!0,userAgentString:t.userAgentString,sessionDescriptionHandlerFactoryOptions:{iceGatheringTimeout:500,peerConnectionConfiguration:{iceServers:((n=t.transport)===null||n===void 0?void 0:n.iceServers)||[{urls:"stun:stun.l.google.com:19302"}]}}});return this.reconnectionAttempts=t.reconnectionAttempts||this.reconnectionAttempts,this.reconnectionDelay=t.reconnectionDelay||this.reconnectionDelay,{uaFactory:i,registererFactory:new ni(i)}}isConnected(){return this.connected}init(){return ft(this,void 0,void 0,function*(){const t=this.options;return new Promise((r,n)=>{switch(t.type){case"credential":{const{uaFactory:i,registererFactory:s}=this.withCredential(t);this.uaFactory=i,this.registererFactory=s,this.setupListener(),r()}break;case"token":this.withToken(t).then(i=>{const s=JSON.parse(Uo.util.decode64(i.password||"")),o=Uo.md.md5.create().update(i.number).digest().toHex(),a=Uo.cipher.createDecipher("AES-CBC",o),l=Uo.util.decode64(s.value);a.start({iv:Uo.util.decode64(s.iv)}),a.update(Uo.util.createBuffer(l)),a.finish();const{uaFactory:c,registererFactory:u}=this.withCredential({type:"credential",account:{name:i.number,uri:i.uri,password:a.output.data,user:i.number},transport:{wsServers:i.ws}});this.uaFactory=c,this.registererFactory=u,this.setupListener(),r()}).catch(n)}})})}connect(){return ft(this,void 0,void 0,function*(){var t;return(t=this.uaFactory)===null||t===void 0||t.start(),new Promise((r,n)=>{var i;(i=this.registererFactory)===null||i===void 0||i.stateChange.addListener(s=>{switch(s){case it.Initial:break;case it.Terminated:this.emit("status",li.DYING);break;case it.Registered:this.connected=!0,this.emit("status",li.CONNECTED),r(!0);break;case it.Unregistered:this.connected=!1,n()}})})})}reconfigure(t){return ft(this,void 0,void 0,function*(){yield this.disconnect(),this.defaultMedia=t.media||{input:{id:void 0,audioProcessing:!0,muted:!1,volume:1},output:{id:void 0,muted:!1,volume:1}},this.options=t,yield this.init().then(()=>{this.connect()})})}disconnect(){return this.clearSessions(),new Promise(t=>ft(this,void 0,void 0,function*(){var r;yield(r=this.uaFactory)===null||r===void 0?void 0:r.stop(),t()}))}close(){return this.clearSessions(),new Promise(t=>ft(this,void 0,void 0,function*(){var r;yield(r=this.uaFactory)===null||r===void 0?void 0:r.stop(),t()}))}getSession(t){const r=this.sessions[t];return r?r.freeze():null}addSession(t){this.sessions[t.id]=t,this.emit("sessionAdded",{id:t.id})}removeSession(t){t.dispose(),this.sessions[t.id],delete this.sessions[t.id],this.emit("sessionRemoved",{id:t.id})}getSessions(){return Object.values(this.sessions).map(t=>t.freeze())}clearSessions(){Object.values(this.sessions).forEach(t=>{this.removeSession(t)})}attendedTransfer(t,r){const n=this.sessions[t.id];if(!n)return Promise.reject("Session A not found");const i=this.sessions[r.id];return i?n.attendedTransfer(i):Promise.reject("Session B not found")}invite(t,r){return ft(this,void 0,void 0,function*(){const n=As.makeURI(t);if(!n)throw new Error("invalid uri");if(!this.isConnected())throw new Error("current status is disconnected. cannot invite");if(!this.uaFactory)throw new Error("Invalid user agent instance");const i=Object.assign({earlyMedia:!0},r),s=new Db(this.uaFactory,n,i),o=new n7({session:s,isIncoming:!1,media:this.defaultMedia,earlyMedia:i.earlyMedia});return o.invite(r).then(()=>{this.addSession(o)}),o.on("terminated",()=>{this.removeSession(o)}),o.freeze()})}}const o7=function(e){return Dc(this,new s7(e),["attendedTransfer","connect","defaultMedia","disconnect","getSession","getSessions","invite","isConnected","on","init","once","reconfigure","removeAllListeners","removeListener","account"])},Fb=S.createContext({instance:()=>Promise.resolve()}),a7=({children:e})=>{const[t,r]=S.useState(),n=s=>{const o=new o7(s);return r(o),Promise.resolve(o)},i=s=>F8.openConfirmModal({title:"New Incoming Call",children:te.jsxs(te.Fragment,{children:["New Incoming call from ",s.remoteIdentity.phoneNumber]}),labels:{confirm:"Accept",cancel:"Reject"},onCancel:()=>s.reject(),onConfirm:()=>s.accept()});return S.useEffect(()=>{const s=o=>{i(o)};return t&&t.on("invite",s),()=>{t==null||t.removeListener("invite",s)}},[t]),te.jsx(Fb.Provider,{value:{instance:n,client:t},children:e})},Pc=()=>x.useContext(Fb),jb=()=>{const{client:e}=Pc(),[t,r]=S.useState({isConnected:!1,state:li.DISCONNECTED});return S.useEffect(()=>{const n=i=>{switch(i){case li.CONNECTED:r({isConnected:!0,state:i});break;default:r({isConnected:!1,state:i});break}};return e&&e.on("status",n),()=>{e&&e.removeListener("status",n)}},[e]),t},l7=()=>{const e=Ww({initialValues:{type:"token",token:"",user:"",name:"",password:"",uri:"",ws:""}}),{instance:t,client:r}=Pc(),{isConnected:n}=jb();return te.jsx(we,{maw:340,mx:"auto",children:te.jsxs("form",{onSubmit:e.onSubmit(i=>{t({type:i.type,token:i.token,account:{user:i.user,uri:i.uri,name:i.name,password:i.password},transport:{wsServers:i.ws},media:{input:{id:void 0,volume:.8,audioProcessing:!0,muted:!1},output:{id:void 0,volume:.5,muted:!1}}}).then(s=>{s&&s.init().then(()=>{s.connect()})})}),children:[te.jsx(oc,{label:"Auth type",data:[{label:"Token",value:"token"},{label:"Credential",value:"credential"}],...e.getInputProps("type")}),e.values.type==="token"?te.jsx(Ti,{label:"Token",placeholder:"Your token",...e.getInputProps("token")}):te.jsxs(te.Fragment,{children:[te.jsx(Ti,{label:"Ws server",placeholder:"wss://your-sip-provider.tld:8089/ws",...e.getInputProps("ws")}),te.jsx(Ti,{label:"Uri",placeholder:"sip:201002@your-sip-provider.tld",...e.getInputProps("uri")}),te.jsx(Ti,{label:"Name",placeholder:"example: 201002",...e.getInputProps("name")}),te.jsx(Ti,{label:"User",placeholder:"example: 201002",...e.getInputProps("user")}),te.jsx(m0,{autoComplete:"new-password",label:"Password",...e.getInputProps("password")})]}),te.jsxs($i,{children:[te.jsx(Li,{type:"submit",mt:"md",disabled:n,children:"Register"}),te.jsx(Li,{disabled:!n,variant:"default",mt:"md",onClick:()=>r==null?void 0:r.disconnect(),children:"Unregister"})]})]})})},c7=()=>{const{isConnected:e,state:t}=jb();return te.jsx(Rc,{color:e?"green":"gray",children:t})};var Vb={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(I2,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",g="date",y="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(z){var O=["th","st","nd","rd"],F=z%100;return"["+z+(O[(F-20)%10]||O[F]||O[0])+"]"}},C=function(z,O,F){var M=String(z);return!M||M.length>=O?z:""+Array(O+1-M.length).join(F)+z},b={s:C,z:function(z){var O=-z.utcOffset(),F=Math.abs(O),M=Math.floor(F/60),$=F%60;return(O<=0?"+":"-")+C(M,2,"0")+":"+C($,2,"0")},m:function z(O,F){if(O.date()<F.date())return-z(F,O);var M=12*(F.year()-O.year())+(F.month()-O.month()),$=O.clone().add(M,d),q=F-$<0,W=O.clone().add(M+(q?-1:1),d);return+(-(M+(F-$)/(q?$-W:W-$))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:d,y:f,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:h}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},k="en",m={};m[k]=v;var R="$isDayjsObject",_=function(z){return z instanceof B||!(!z||!z[R])},H=function z(O,F,M){var $;if(!O)return k;if(typeof O=="string"){var q=O.toLowerCase();m[q]&&($=q),F&&(m[q]=F,$=q);var W=O.split("-");if(!$&&W.length>1)return z(W[0])}else{var ie=O.name;m[ie]=O,$=ie}return!M&&$&&(k=$),$||!M&&k},A=function(z,O){if(_(z))return z.clone();var F=typeof O=="object"?O:{};return F.date=z,F.args=arguments,new B(F)},P=b;P.l=H,P.i=_,P.w=function(z,O){return A(z,{locale:O.$L,utc:O.$u,x:O.$x,$offset:O.$offset})};var B=function(){function z(F){this.$L=H(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[R]=!0}var O=z.prototype;return O.parse=function(F){this.$d=function(M){var $=M.date,q=M.utc;if($===null)return new Date(NaN);if(P.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var W=$.match(E);if(W){var ie=W[2]-1||0,ae=(W[7]||"0").substring(0,3);return q?new Date(Date.UTC(W[1],ie,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)):new Date(W[1],ie,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)}}return new Date($)}(F),this.init()},O.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},O.$utils=function(){return P},O.isValid=function(){return this.$d.toString()!==y},O.isSame=function(F,M){var $=A(F);return this.startOf(M)<=$&&$<=this.endOf(M)},O.isAfter=function(F,M){return A(F)<this.startOf(M)},O.isBefore=function(F,M){return this.endOf(M)<A(F)},O.$g=function(F,M,$){return P.u(F)?this[M]:this.set($,F)},O.unix=function(){return Math.floor(this.valueOf()/1e3)},O.valueOf=function(){return this.$d.getTime()},O.startOf=function(F,M){var $=this,q=!!P.u(M)||M,W=P.p(F),ie=function(Ue,$e){var ke=P.w($.$u?Date.UTC($.$y,$e,Ue):new Date($.$y,$e,Ue),$);return q?ke:ke.endOf(c)},ae=function(Ue,$e){return P.w($.toDate()[Ue].apply($.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice($e)),$)},ve=this.$W,Ee=this.$M,Ie=this.$D,Re="set"+(this.$u?"UTC":"");switch(W){case f:return q?ie(1,0):ie(31,11);case d:return q?ie(1,Ee):ie(0,Ee+1);case u:var Ae=this.$locale().weekStart||0,Fe=(ve<Ae?ve+7:ve)-Ae;return ie(q?Ie-Fe:Ie+(6-Fe),Ee);case c:case g:return ae(Re+"Hours",0);case l:return ae(Re+"Minutes",1);case a:return ae(Re+"Seconds",2);case o:return ae(Re+"Milliseconds",3);default:return this.clone()}},O.endOf=function(F){return this.startOf(F,!1)},O.$set=function(F,M){var $,q=P.p(F),W="set"+(this.$u?"UTC":""),ie=($={},$[c]=W+"Date",$[g]=W+"Date",$[d]=W+"Month",$[f]=W+"FullYear",$[l]=W+"Hours",$[a]=W+"Minutes",$[o]=W+"Seconds",$[s]=W+"Milliseconds",$)[q],ae=q===c?this.$D+(M-this.$W):M;if(q===d||q===f){var ve=this.clone().set(g,1);ve.$d[ie](ae),ve.init(),this.$d=ve.set(g,Math.min(this.$D,ve.daysInMonth())).$d}else ie&&this.$d[ie](ae);return this.init(),this},O.set=function(F,M){return this.clone().$set(F,M)},O.get=function(F){return this[P.p(F)]()},O.add=function(F,M){var $,q=this;F=Number(F);var W=P.p(M),ie=function(Ee){var Ie=A(q);return P.w(Ie.date(Ie.date()+Math.round(Ee*F)),q)};if(W===d)return this.set(d,this.$M+F);if(W===f)return this.set(f,this.$y+F);if(W===c)return ie(1);if(W===u)return ie(7);var ae=($={},$[a]=n,$[l]=i,$[o]=r,$)[W]||1,ve=this.$d.getTime()+F*ae;return P.w(ve,this)},O.subtract=function(F,M){return this.add(-1*F,M)},O.format=function(F){var M=this,$=this.$locale();if(!this.isValid())return $.invalidDate||y;var q=F||"YYYY-MM-DDTHH:mm:ssZ",W=P.z(this),ie=this.$H,ae=this.$m,ve=this.$M,Ee=$.weekdays,Ie=$.months,Re=$.meridiem,Ae=function($e,ke,Y,de){return $e&&($e[ke]||$e(M,q))||Y[ke].slice(0,de)},Fe=function($e){return P.s(ie%12||12,$e,"0")},Ue=Re||function($e,ke,Y){var de=$e<12?"AM":"PM";return Y?de.toLowerCase():de};return q.replace(p,function($e,ke){return ke||function(Y){switch(Y){case"YY":return String(M.$y).slice(-2);case"YYYY":return P.s(M.$y,4,"0");case"M":return ve+1;case"MM":return P.s(ve+1,2,"0");case"MMM":return Ae($.monthsShort,ve,Ie,3);case"MMMM":return Ae(Ie,ve);case"D":return M.$D;case"DD":return P.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return Ae($.weekdaysMin,M.$W,Ee,2);case"ddd":return Ae($.weekdaysShort,M.$W,Ee,3);case"dddd":return Ee[M.$W];case"H":return String(ie);case"HH":return P.s(ie,2,"0");case"h":return Fe(1);case"hh":return Fe(2);case"a":return Ue(ie,ae,!0);case"A":return Ue(ie,ae,!1);case"m":return String(ae);case"mm":return P.s(ae,2,"0");case"s":return String(M.$s);case"ss":return P.s(M.$s,2,"0");case"SSS":return P.s(M.$ms,3,"0");case"Z":return W}return null}($e)||W.replace(":","")})},O.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},O.diff=function(F,M,$){var q,W=this,ie=P.p(M),ae=A(F),ve=(ae.utcOffset()-this.utcOffset())*n,Ee=this-ae,Ie=function(){return P.m(W,ae)};switch(ie){case f:q=Ie()/12;break;case d:q=Ie();break;case h:q=Ie()/3;break;case u:q=(Ee-ve)/6048e5;break;case c:q=(Ee-ve)/864e5;break;case l:q=Ee/i;break;case a:q=Ee/n;break;case o:q=Ee/r;break;default:q=Ee}return $?q:P.a(q)},O.daysInMonth=function(){return this.endOf(d).$D},O.$locale=function(){return m[this.$L]},O.locale=function(F,M){if(!F)return this.$L;var $=this.clone(),q=H(F,M,!0);return q&&($.$L=q),$},O.clone=function(){return P.w(this.$d,this)},O.toDate=function(){return new Date(this.valueOf())},O.toJSON=function(){return this.isValid()?this.toISOString():null},O.toISOString=function(){return this.$d.toISOString()},O.toString=function(){return this.$d.toUTCString()},z}(),N=B.prototype;return A.prototype=N,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",g]].forEach(function(z){N[z[1]]=function(O){return this.$g(O,z[0],z[1])}}),A.extend=function(z,O){return z.$i||(z(O,B,A),z.$i=!0),A},A.locale=H,A.isDayjs=_,A.unix=function(z){return A(1e3*z)},A.en=m[k],A.Ls=m,A.p={},A})})(Vb);var u7=Vb.exports;const qb=hc(u7);var zb={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(I2,function(){var r,n,i=1e3,s=6e4,o=36e5,a=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2628e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:c,months:u,days:a,hours:o,minutes:s,seconds:i,milliseconds:1,weeks:6048e5},f=function(m){return m instanceof b},g=function(m,R,_){return new b(m,_,R.$l)},y=function(m){return n.p(m)+"s"},E=function(m){return m<0},p=function(m){return E(m)?Math.ceil(m):Math.floor(m)},v=function(m){return Math.abs(m)},C=function(m,R){return m?E(m)?{negative:!0,format:""+v(m)+R}:{negative:!1,format:""+m+R}:{negative:!1,format:""}},b=function(){function m(_,H,A){var P=this;if(this.$d={},this.$l=A,_===void 0&&(this.$ms=0,this.parseFromMilliseconds()),H)return g(_*h[y(H)],this);if(typeof _=="number")return this.$ms=_,this.parseFromMilliseconds(),this;if(typeof _=="object")return Object.keys(_).forEach(function(z){P.$d[y(z)]=_[z]}),this.calMilliseconds(),this;if(typeof _=="string"){var B=_.match(d);if(B){var N=B.slice(2).map(function(z){return z!=null?Number(z):0});return this.$d.years=N[0],this.$d.months=N[1],this.$d.weeks=N[2],this.$d.days=N[3],this.$d.hours=N[4],this.$d.minutes=N[5],this.$d.seconds=N[6],this.calMilliseconds(),this}}return this}var R=m.prototype;return R.calMilliseconds=function(){var _=this;this.$ms=Object.keys(this.$d).reduce(function(H,A){return H+(_.$d[A]||0)*h[A]},0)},R.parseFromMilliseconds=function(){var _=this.$ms;this.$d.years=p(_/c),_%=c,this.$d.months=p(_/u),_%=u,this.$d.days=p(_/a),_%=a,this.$d.hours=p(_/o),_%=o,this.$d.minutes=p(_/s),_%=s,this.$d.seconds=p(_/i),_%=i,this.$d.milliseconds=_},R.toISOString=function(){var _=C(this.$d.years,"Y"),H=C(this.$d.months,"M"),A=+this.$d.days||0;this.$d.weeks&&(A+=7*this.$d.weeks);var P=C(A,"D"),B=C(this.$d.hours,"H"),N=C(this.$d.minutes,"M"),z=this.$d.seconds||0;this.$d.milliseconds&&(z+=this.$d.milliseconds/1e3,z=Math.round(1e3*z)/1e3);var O=C(z,"S"),F=_.negative||H.negative||P.negative||B.negative||N.negative||O.negative,M=B.format||N.format||O.format?"T":"",$=(F?"-":"")+"P"+_.format+H.format+P.format+M+B.format+N.format+O.format;return $==="P"||$==="-P"?"P0D":$},R.toJSON=function(){return this.toISOString()},R.format=function(_){var H=_||"YYYY-MM-DDTHH:mm:ss",A={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return H.replace(l,function(P,B){return B||String(A[P])})},R.as=function(_){return this.$ms/h[y(_)]},R.get=function(_){var H=this.$ms,A=y(_);return A==="milliseconds"?H%=1e3:H=A==="weeks"?p(H/h[A]):this.$d[A],H||0},R.add=function(_,H,A){var P;return P=H?_*h[y(H)]:f(_)?_.$ms:g(_,this).$ms,g(this.$ms+P*(A?-1:1),this)},R.subtract=function(_,H){return this.add(_,H,!0)},R.locale=function(_){var H=this.clone();return H.$l=_,H},R.clone=function(){return g(this.$ms,this)},R.humanize=function(_){return r().add(this.$ms,"ms").locale(this.$l).fromNow(!_)},R.valueOf=function(){return this.asMilliseconds()},R.milliseconds=function(){return this.get("milliseconds")},R.asMilliseconds=function(){return this.as("milliseconds")},R.seconds=function(){return this.get("seconds")},R.asSeconds=function(){return this.as("seconds")},R.minutes=function(){return this.get("minutes")},R.asMinutes=function(){return this.as("minutes")},R.hours=function(){return this.get("hours")},R.asHours=function(){return this.as("hours")},R.days=function(){return this.get("days")},R.asDays=function(){return this.as("days")},R.weeks=function(){return this.get("weeks")},R.asWeeks=function(){return this.as("weeks")},R.months=function(){return this.get("months")},R.asMonths=function(){return this.as("months")},R.years=function(){return this.get("years")},R.asYears=function(){return this.as("years")},m}(),k=function(m,R,_){return m.add(R.years()*_,"y").add(R.months()*_,"M").add(R.days()*_,"d").add(R.hours()*_,"h").add(R.minutes()*_,"m").add(R.seconds()*_,"s").add(R.milliseconds()*_,"ms")};return function(m,R,_){r=_,n=_().$utils(),_.duration=function(P,B){var N=_.locale();return g(P,{$l:N},B)},_.isDuration=f;var H=R.prototype.add,A=R.prototype.subtract;R.prototype.add=function(P,B){return f(P)?k(this,P,1):H.bind(this)(P,B)},R.prototype.subtract=function(P,B){return f(P)?k(this,P,-1):A.bind(this)(P,B)}}})})(zb);var d7=zb.exports;const h7=hc(d7);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f7={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=(e,t,r,n)=>{const i=S.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:l,children:c,...u},d)=>S.createElement("svg",{ref:d,...f7[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...u},[...n.map(([h,f])=>S.createElement(h,f)),...Array.isArray(c)?c:[c]]));return i.displayName=`${r}`,i};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p7=Vi("outline","dialpad","IconDialpad",[["path",{d:"M4 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-0"}],["path",{d:"M18 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-1"}],["path",{d:"M11 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-2"}],["path",{d:"M4 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-3"}],["path",{d:"M18 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-4"}],["path",{d:"M11 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-5"}],["path",{d:"M11 17h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g7=Vi("outline","microphone-off","IconMicrophoneOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1",key:"svg-1"}],["path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85",key:"svg-2"}],["path",{d:"M8 21l8 0",key:"svg-3"}],["path",{d:"M12 17l0 4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kb=Vi("outline","microphone","IconMicrophone",[["path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M5 10a7 7 0 0 0 14 0",key:"svg-1"}],["path",{d:"M8 21l8 0",key:"svg-2"}],["path",{d:"M12 17l0 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m7=Vi("outline","phone-call","IconPhoneCall",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M15 7a2 2 0 0 1 2 2",key:"svg-1"}],["path",{d:"M15 3a6 6 0 0 1 6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y7=Vi("outline","phone-pause","IconPhonePause",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M20 3l0 4",key:"svg-1"}],["path",{d:"M16 3l0 4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v7=Vi("outline","phone-x","IconPhoneX",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M16 4l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E7=Vi("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C7=Vi("outline","volume-off","IconVolumeOff",[["path",{d:"M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464",key:"svg-0"}],["path",{d:"M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615",key:"svg-1"}],["path",{d:"M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gb=Vi("outline","volume","IconVolume",[["path",{d:"M15 8a5 5 0 0 1 0 8",key:"svg-0"}],["path",{d:"M17.7 5a9 9 0 0 1 0 14",key:"svg-1"}],["path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5",key:"svg-2"}]]);const S7=()=>{const{client:e}=Pc(),[t,r]=S.useState([]);return S.useEffect(()=>{const n=()=>{if(e){const s=e.getSessions();s.forEach(o=>{var a;o.on("statusUpdate",()=>r(e.getSessions())),o.on("mute",()=>r(e.getSessions())),(a=o.localStream)==null||a.addEventListener("addtrack",()=>r(e.getSessions()))}),r(s)}},i=()=>{e&&r(e.getSessions())};return e&&(e.on("sessionAdded",n),e.on("sessionRemoved",i)),()=>{e&&(e.removeListener("sessionAdded",n),e.removeListener("sessionRemoved",i))}},[e]),t},w7=e=>{const[t,r]=S.useState(0);return S.useEffect(()=>{const n=i=>{r(i)};return e.on("duration",n),()=>{e.removeListener("duration",n)}},[]),t},b7=e=>{const[t,r]=S.useState(e.media.input.muted),[n,i]=S.useState(e.media.output.muted),[s,o]=S.useState(e.media.output.volume),[a,l]=S.useState(e.media.input.volume);return S.useEffect(()=>(e.media.on("outputMuted",i),e.media.on("inputMuted",r),e.media.on("outputVolume",o),e.media.on("inputVolume",l),()=>{e.media.removeListener("inputMuted",r),e.media.removeListener("outputMuted",i),e.media.removeListener("outputVolume",o),e.media.removeListener("inputVolume",l)}),[]),{output:{muted:n,volume:s},input:{muted:t,volume:a}}};function T7(){const[e,t]=S.useState([]);return S.useEffect(()=>{var n;const r=()=>{var i;return(i=navigator.mediaDevices)==null?void 0:i.enumerateDevices().then(s=>t(s))};return(n=navigator.mediaDevices)==null||n.addEventListener("devicechange",r),r(),()=>{var i;(i=navigator.mediaDevices)==null||i.removeEventListener("devicechange",r)}},[]),{audioInputDevices:e.filter(r=>r.kind==="audioinput"),videoInputDevices:e.filter(r=>r.kind==="videoinput"),audioOutputDevices:e.filter(r=>r.kind==="audiooutput")}}class I7{constructor(t,r,n){Os(this,"audio",null);Os(this,"canvas",null);Os(this,"canvasContext",null);Os(this,"analyser",null);Os(this,"animationFrame",0);Os(this,"color","#efefef");this.animationFrame=0,this.audio=t,n&&(this.color=n),this.canvas=r,this.canvas&&(this.canvasContext=this.canvas.getContext("2d"))}init(){const t=new(window.AudioContext||window.webkitAudioContext);this.analyser=t.createAnalyser(),this.analyser.fftSize=512,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85,this.audio&&t.createMediaStreamSource(this.audio).connect(this.analyser)}play(){this.analyser||this.init(),this.animate()}pause(){cancelAnimationFrame(this.animationFrame)}animate(){this.animationFrame=requestAnimationFrame(()=>this.animate()),this.onFrame()}onFrame(){if(this.analyser&&this.canvasContext&&this.canvas){const t=new Uint8Array(this.analyser.frequencyBinCount),r=this.canvasContext.createLinearGradient(0,0,0,this.canvas.height||64);r.addColorStop(0,this.color),r.addColorStop(1,this.color),this.analyser.getByteFrequencyData(t),this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height);const n=this.canvas.width/t.length*10;let i=0,s=0;const o=2;for(let a=0;a<t.length;a++)this.canvasContext.fillStyle=r,i=t[a]/(this.canvas.height-20),this.canvasContext.beginPath(),this.canvasContext.roundRect(s,this.canvas.height/2,n,i,[0,0,3,3]),this.canvasContext.fill(),this.canvasContext.fillRect(s,this.canvas.height/2,n,1),this.canvasContext.beginPath(),this.canvasContext.roundRect(s,this.canvas.height/2-i,n,i,[3,3,0,0]),this.canvasContext.fill(),s+=n+o}}}const S2=({mediaStream:e,type:t})=>{const r=x.useRef(null),[n,i]=x.useState(),o=fi().colors.gray[4];return S.useEffect(()=>{const a=()=>{if(e&&r.current){const c=new I7(e,r.current,o);i(c),c.play()}},l=()=>{e&&i(c=>{c==null||c.pause()})};return e&&(e.addEventListener("addtrack",a),e.addEventListener("removetrack",l)),()=>{e==null||e.removeEventListener("addtrack",a),e==null||e.removeEventListener("removetrack",l)}},[e]),S.useEffect(()=>()=>{n==null||n.pause()},[n]),te.jsxs($i,{gap:5,children:[t==="local"?te.jsx(Kb,{size:16,color:o}):te.jsx(Gb,{size:16,color:o}),te.jsx("canvas",{ref:r,width:50,height:35})]})};qb.extend(h7);const A7=({session:e})=>{const t=w7(e);return te.jsx(te.Fragment,{children:qb.duration(t*1e3).format("mm:ss")})},R7=({session:e})=>{const t=Ww({initialValues:{dtmf:""}});return te.jsxs($i,{children:[te.jsx(Ti,{size:"xs",placeholder:"send dtmf example: 1",...t.getInputProps("dtmf")}),te.jsx(Li,{size:"xs",onClick:()=>{e.dtmf(t.values.dtmf)},children:"Send"})]})},w2=({session:e,media:t="output"})=>{const{output:{muted:r,volume:n},input:{muted:i,volume:s}}=b7(e);return te.jsxs(we,{children:[te.jsx(y0,{min:0,max:1,step:.025,label:o=>`${o*100} %`,value:t==="output"?n:s,onChange:o=>{t==="output"?e.media.output.volume=o:t==="input"&&(e.media.input.volume=o)}}),te.jsx(ph,{size:"xs",mt:"xs",checked:t==="input"?i:r,label:t==="input"?"Mute mic":"Mute speaker",onChange:o=>{t==="input"&&(e.media.input.muted=o.currentTarget.checked),t==="output"&&(e.media.output.muted=o.currentTarget.checked)}})]})},k7=({session:e})=>{const t=T7();return te.jsxs(we,{children:[te.jsx(oc,{label:"Input device",size:"xs",onChange:async r=>{e.media.input.id=r||void 0},value:e.media.input.id,data:t.audioInputDevices.map(r=>({label:r.label,value:r.deviceId}))}),te.jsx(oc,{label:"Output device",size:"xs",onChange:async r=>{e.media.setOutput({id:r||void 0,audio:new Audio})},value:e.media.output.id,data:t.audioOutputDevices.map(r=>({label:r.label,value:r.deviceId}))})]})},_7=()=>{const e=S7();return te.jsx(ct.ScrollContainer,{minWidth:500,children:te.jsxs(ct,{verticalSpacing:"sm",children:[te.jsx(ct.Thead,{children:te.jsxs(ct.Tr,{children:[te.jsx(ct.Th,{children:"Phone Number"}),te.jsx(ct.Th,{children:"Source"}),te.jsx(ct.Th,{children:"Status"}),te.jsx(ct.Th,{children:"Visual"}),te.jsx(ct.Th,{children:"Duration"}),te.jsx(ct.Th,{children:"Action"})]})}),te.jsx(ct.Tbody,{children:e.map(t=>te.jsxs(ct.Tr,{children:[te.jsx(ct.Td,{children:t.remoteIdentity.phoneNumber}),te.jsx(ct.Td,{children:t.isIncoming?"Incoming":"Outgoing"}),te.jsx(ct.Td,{children:te.jsx(Rc,{color:"gray",variant:"light",children:t.status})}),te.jsx(ct.Td,{children:te.jsxs($i,{children:[te.jsx(S2,{mediaStream:t.media.localStream,type:"local"}),te.jsx(S2,{mediaStream:t.media.remoteStream,type:"remote"})]})}),te.jsx(ct.Td,{children:te.jsx(A7,{session:t})}),te.jsxs(ct.Td,{children:[te.jsxs(Ht,{width:350,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ei,{variant:"outline",radius:"lg",children:te.jsx(E7,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(k7,{session:t})})]})," ",te.jsxs(Ht,{width:300,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ei,{variant:"outline",radius:"lg",children:te.jsx(p7,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(R7,{session:t})})]})," ",te.jsxs(Ht,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ei,{variant:"outline",radius:"lg",children:t.media.output.muted?te.jsx(C7,{size:15}):te.jsx(Gb,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(w2,{session:t,media:"output"})})]})," ",te.jsxs(Ht,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ei,{color:"blue",radius:"lg",variant:"outline",disabled:t.status===Pt.RINGING,children:t.media.input.muted?te.jsx(g7,{size:15}):te.jsx(Kb,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(w2,{session:t,media:"input"})})]})," ",te.jsx(ei,{color:"blue",radius:"lg",variant:"outline",disabled:t.status===Pt.RINGING,onClick:()=>t.status!==Pt.ON_HOLD?t.hold():t.unhold(),children:t.status===Pt.ON_HOLD?te.jsx(m7,{size:15}):te.jsx(y7,{size:15})})," ",te.jsx(ei,{size:"lg",color:"red",radius:"lg",onClick:()=>{t.status===Pt.RINGING&&!t.isIncoming?t.cancel():t.status===Pt.ACTIVE||t.status===Pt.ON_HOLD?t.bye():t.isIncoming&&t.status===Pt.RINGING&&t.reject()},children:te.jsx(v7,{size:15})})]})]},t.id))})]})})},x7=()=>{const{client:e}=Pc(),[t,r]=S.useState();return S.useEffect(()=>{const n=i=>{switch(i){case li.CONNECTED:r(e==null?void 0:e.account);break;default:r(void 0);break}};return e&&e.on("status",n),()=>{e&&e.removeListener("status",n)}},[e]),t};function b2(){const{client:e}=Pc(),t=x7(),r=S.useRef(null);return te.jsxs(f0,{mt:"lg",size:"lg",children:[te.jsx(Ad,{order:4,children:"Example demo sdk"}),te.jsxs(ga,{mt:"md",children:[te.jsx(ga.Col,{span:3,children:te.jsx(l7,{})}),te.jsxs(ga.Col,{span:9,children:[te.jsxs($i,{children:[te.jsx(Id,{children:"Status"}),te.jsx(c7,{}),te.jsx(Id,{children:"Account: "}),te.jsx(Rc,{color:"gray",children:(t==null?void 0:t.user)||"No user connected"})]}),te.jsxs($i,{mt:"md",children:[te.jsx(Ti,{ref:r,placeholder:"sip:number@domain.com"}),te.jsx(Li,{onClick:()=>{r.current&&(e==null||e.invite(r.current.value,{earlyMedia:!0}).then(()=>{}))},children:"Dial"})]}),te.jsx(Ad,{order:4,mt:"md",mb:"md",children:"Sessions"}),te.jsx(_7,{})]})]})]})}const N7=Zk([{path:"/",element:te.jsx(b2,{})},{path:"/webphone-sdk-demo",element:te.jsx(b2,{})}]);function D7(){return te.jsx(a_,{router:N7})}const P7={};function B7(){return te.jsx(a7,{children:te.jsx(cS,{theme:P7,children:te.jsx(q8,{children:te.jsx(D7,{})})})})}tp.createRoot(document.getElementById("root")).render(te.jsx(B7,{}));
