var RT=Object.defineProperty;var AT=(e,t,r)=>t in e?RT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Us=(e,t,r)=>(AT(e,typeof t!="symbol"?t+"":t,r),r);function K2(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var G2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ic(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var W2={exports:{}},Jd={},Y2={exports:{}},Ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=Symbol.for("react.element"),kT=Symbol.for("react.portal"),xT=Symbol.for("react.fragment"),NT=Symbol.for("react.strict_mode"),_T=Symbol.for("react.profiler"),DT=Symbol.for("react.provider"),PT=Symbol.for("react.context"),BT=Symbol.for("react.forward_ref"),$T=Symbol.for("react.suspense"),LT=Symbol.for("react.memo"),OT=Symbol.for("react.lazy"),rv=Symbol.iterator;function MT(e){return e===null||typeof e!="object"?null:(e=rv&&e[rv]||e["@@iterator"],typeof e=="function"?e:null)}var Q2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X2=Object.assign,Z2={};function Ya(e,t,r){this.props=e,this.context=t,this.refs=Z2,this.updater=r||Q2}Ya.prototype.isReactComponent={};Ya.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ya.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function J2(){}J2.prototype=Ya.prototype;function Qg(e,t,r){this.props=e,this.context=t,this.refs=Z2,this.updater=r||Q2}var Xg=Qg.prototype=new J2;Xg.constructor=Qg;X2(Xg,Ya.prototype);Xg.isPureReactComponent=!0;var nv=Array.isArray,eE=Object.prototype.hasOwnProperty,Zg={current:null},tE={key:!0,ref:!0,__self:!0,__source:!0};function rE(e,t,r){var n,i={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)eE.call(t,n)&&!tE.hasOwnProperty(n)&&(i[n]=t[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Rc,type:e,key:s,ref:o,props:i,_owner:Zg.current}}function UT(e,t){return{$$typeof:Rc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rc}function HT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var iv=/\/+/g;function Xh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?HT(""+e.key):t.toString(36)}function Hu(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Rc:case kT:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+Xh(o,0):n,nv(i)?(r="",e!=null&&(r=e.replace(iv,"$&/")+"/"),Hu(i,t,r,"",function(c){return c})):i!=null&&(Jg(i)&&(i=UT(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(iv,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",nv(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+Xh(s,a);o+=Hu(s,t,r,l,i)}else if(l=MT(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+Xh(s,a++),o+=Hu(s,t,r,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(e,t,r){if(e==null)return e;var n=[],i=0;return Hu(e,n,"","",function(s){return t.call(r,s,i++)}),n}function FT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Nr={current:null},Fu={transition:null},jT={ReactCurrentDispatcher:Nr,ReactCurrentBatchConfig:Fu,ReactCurrentOwner:Zg};Ye.Children={map:Qc,forEach:function(e,t,r){Qc(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qc(e,function(){t++}),t},toArray:function(e){return Qc(e,function(t){return t})||[]},only:function(e){if(!Jg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ye.Component=Ya;Ye.Fragment=xT;Ye.Profiler=_T;Ye.PureComponent=Qg;Ye.StrictMode=NT;Ye.Suspense=$T;Ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;Ye.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=X2({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Zg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)eE.call(t,l)&&!tE.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:Rc,type:e.type,key:i,ref:s,props:n,_owner:o}};Ye.createContext=function(e){return e={$$typeof:PT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DT,_context:e},e.Consumer=e};Ye.createElement=rE;Ye.createFactory=function(e){var t=rE.bind(null,e);return t.type=e,t};Ye.createRef=function(){return{current:null}};Ye.forwardRef=function(e){return{$$typeof:BT,render:e}};Ye.isValidElement=Jg;Ye.lazy=function(e){return{$$typeof:OT,_payload:{_status:-1,_result:e},_init:FT}};Ye.memo=function(e,t){return{$$typeof:LT,type:e,compare:t===void 0?null:t}};Ye.startTransition=function(e){var t=Fu.transition;Fu.transition={};try{e()}finally{Fu.transition=t}};Ye.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ye.useCallback=function(e,t){return Nr.current.useCallback(e,t)};Ye.useContext=function(e){return Nr.current.useContext(e)};Ye.useDebugValue=function(){};Ye.useDeferredValue=function(e){return Nr.current.useDeferredValue(e)};Ye.useEffect=function(e,t){return Nr.current.useEffect(e,t)};Ye.useId=function(){return Nr.current.useId()};Ye.useImperativeHandle=function(e,t,r){return Nr.current.useImperativeHandle(e,t,r)};Ye.useInsertionEffect=function(e,t){return Nr.current.useInsertionEffect(e,t)};Ye.useLayoutEffect=function(e,t){return Nr.current.useLayoutEffect(e,t)};Ye.useMemo=function(e,t){return Nr.current.useMemo(e,t)};Ye.useReducer=function(e,t,r){return Nr.current.useReducer(e,t,r)};Ye.useRef=function(e){return Nr.current.useRef(e)};Ye.useState=function(e){return Nr.current.useState(e)};Ye.useSyncExternalStore=function(e,t,r){return Nr.current.useSyncExternalStore(e,t,r)};Ye.useTransition=function(){return Nr.current.useTransition()};Ye.version="18.2.0";Y2.exports=Ye;var S=Y2.exports;const A=Ic(S),em=K2({__proto__:null,default:A},[S]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VT=S,qT=Symbol.for("react.element"),zT=Symbol.for("react.fragment"),KT=Object.prototype.hasOwnProperty,GT=VT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WT={key:!0,ref:!0,__self:!0,__source:!0};function nE(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)KT.call(t,n)&&!WT.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:qT,type:e,key:s,ref:o,props:i,_owner:GT.current}}Jd.Fragment=zT;Jd.jsx=nE;Jd.jsxs=nE;W2.exports=Jd;var te=W2.exports,gp={},iE={exports:{}},rn={},sE={exports:{}},oE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,z){var W=$.length;$.push(z);e:for(;0<W;){var ie=W-1>>>1,ae=$[ie];if(0<i(ae,z))$[ie]=z,$[W]=ae,W=ie;else break e}}function r($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var z=$[0],W=$.pop();if(W!==z){$[0]=W;e:for(var ie=0,ae=$.length,Ee=ae>>>1;ie<Ee;){var Ce=2*(ie+1)-1,Ie=$[Ce],Ae=Ce+1,Re=$[Ae];if(0>i(Ie,W))Ae<ae&&0>i(Re,Ie)?($[ie]=Re,$[Ae]=W,ie=Ae):($[ie]=Ie,$[Ce]=W,ie=Ce);else if(Ae<ae&&0>i(Re,W))$[ie]=Re,$[Ae]=W,ie=Ae;else break e}}return z}function i($,z){var W=$.sortIndex-z.sortIndex;return W!==0?W:$.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,g=!1,v=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C($){for(var z=r(c);z!==null;){if(z.callback===null)n(c);else if(z.startTime<=$)n(c),z.sortIndex=z.expirationTime,t(l,z);else break;z=r(c)}}function b($){if(v=!1,C($),!g)if(r(l)!==null)g=!0,F(x);else{var z=r(c);z!==null&&M(b,z.startTime-$)}}function x($,z){g=!1,v&&(v=!1,p(N),N=-1),f=!0;var W=h;try{for(C(z),d=r(l);d!==null&&(!(d.expirationTime>z)||$&&!P());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,h=d.priorityLevel;var ae=ie(d.expirationTime<=z);z=e.unstable_now(),typeof ae=="function"?d.callback=ae:d===r(l)&&n(l),C(z)}else n(l);d=r(l)}if(d!==null)var Ee=!0;else{var Ce=r(c);Ce!==null&&M(b,Ce.startTime-z),Ee=!1}return Ee}finally{d=null,h=W,f=!1}}var m=!1,k=null,N=-1,H=5,R=-1;function P(){return!(e.unstable_now()-R<H)}function B(){if(k!==null){var $=e.unstable_now();R=$;var z=!0;try{z=k(!0,$)}finally{z?_():(m=!1,k=null)}}else m=!1}var _;if(typeof y=="function")_=function(){y(B)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,L=q.port2;q.port1.onmessage=B,_=function(){L.postMessage(null)}}else _=function(){E(B,0)};function F($){k=$,m||(m=!0,_())}function M($,z){N=E(function(){$(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||f||(g=!0,F(x))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var W=h;h=z;try{return $()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,z){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var W=h;h=$;try{return z()}finally{h=W}},e.unstable_scheduleCallback=function($,z,W){var ie=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ie+W:ie):W=ie,$){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=W+ae,$={id:u++,callback:z,priorityLevel:$,startTime:W,expirationTime:ae,sortIndex:-1},W>ie?($.sortIndex=W,t(c,$),r(l)===null&&$===r(c)&&(v?(p(N),N=-1):v=!0,M(b,W-ie))):($.sortIndex=ae,t(l,$),g||f||(g=!0,F(x))),$},e.unstable_shouldYield=P,e.unstable_wrapCallback=function($){var z=h;return function(){var W=h;h=z;try{return $.apply(this,arguments)}finally{h=W}}}})(oE);sE.exports=oE;var YT=sE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE=S,en=YT;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lE=new Set,ec={};function bo(e,t){Ba(e,t),Ba(e+"Capture",t)}function Ba(e,t){for(ec[e]=t,e=0;e<t.length;e++)lE.add(t[e])}var Ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,QT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sv={},ov={};function XT(e){return mp.call(ov,e)?!0:mp.call(sv,e)?!1:QT.test(e)?ov[e]=!0:(sv[e]=!0,!1)}function ZT(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JT(e,t,r,n){if(t===null||typeof t>"u"||ZT(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _r(e,t,r,n,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var fr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){fr[e]=new _r(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];fr[t]=new _r(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){fr[e]=new _r(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){fr[e]=new _r(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){fr[e]=new _r(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){fr[e]=new _r(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){fr[e]=new _r(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){fr[e]=new _r(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){fr[e]=new _r(e,5,!1,e.toLowerCase(),null,!1,!1)});var tm=/[\-:]([a-z])/g;function rm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tm,rm);fr[t]=new _r(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tm,rm);fr[t]=new _r(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tm,rm);fr[t]=new _r(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){fr[e]=new _r(e,1,!1,e.toLowerCase(),null,!1,!1)});fr.xlinkHref=new _r("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){fr[e]=new _r(e,1,!1,e.toLowerCase(),null,!0,!0)});function nm(e,t,r,n){var i=fr.hasOwnProperty(t)?fr[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JT(t,r,i,n)&&(r=null),n||i===null?XT(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Oi=aE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),ta=Symbol.for("react.portal"),ra=Symbol.for("react.fragment"),im=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),cE=Symbol.for("react.provider"),uE=Symbol.for("react.context"),sm=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),om=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),dE=Symbol.for("react.offscreen"),av=Symbol.iterator;function ol(e){return e===null||typeof e!="object"?null:(e=av&&e[av]||e["@@iterator"],typeof e=="function"?e:null)}var Nt=Object.assign,Zh;function xl(e){if(Zh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Zh=t&&t[1]||""}return`
`+Zh+e}var Jh=!1;function ef(e,t){if(!e||Jh)return"";Jh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xl(e):""}function e6(e){switch(e.tag){case 5:return xl(e.type);case 16:return xl("Lazy");case 13:return xl("Suspense");case 19:return xl("SuspenseList");case 0:case 2:case 15:return e=ef(e.type,!1),e;case 11:return e=ef(e.type.render,!1),e;case 1:return e=ef(e.type,!0),e;default:return""}}function Cp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ra:return"Fragment";case ta:return"Portal";case vp:return"Profiler";case im:return"StrictMode";case yp:return"Suspense";case Ep:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case uE:return(e.displayName||"Context")+".Consumer";case cE:return(e._context.displayName||"Context")+".Provider";case sm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case om:return t=e.displayName||null,t!==null?t:Cp(e.type)||"Memo";case os:t=e._payload,e=e._init;try{return Cp(e(t))}catch{}}return null}function t6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cp(t);case 8:return t===im?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function hE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function r6(e){var t=hE(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zc(e){e._valueTracker||(e._valueTracker=r6(e))}function fE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=hE(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ld(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Sp(e,t){var r=t.checked;return Nt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=xs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pE(e,t){t=t.checked,t!=null&&nm(e,"checked",t,!1)}function wp(e,t){pE(e,t);var r=xs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bp(e,t.type,r):t.hasOwnProperty("defaultValue")&&bp(e,t.type,xs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function bp(e,t,r){(t!=="number"||ld(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Nl=Array.isArray;function Ea(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+xs(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Tp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return Nt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(oe(92));if(Nl(r)){if(1<r.length)throw Error(oe(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:xs(r)}}function gE(e,t){var r=xs(t.value),n=xs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function dv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function mE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ip(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?mE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jc,vE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jc.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function tc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n6=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(e){n6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ul[t]=Ul[e]})});function yE(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ul.hasOwnProperty(e)&&Ul[e]?(""+t).trim():t+"px"}function EE(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=yE(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var i6=Nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rp(e,t){if(t){if(i6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function Ap(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kp=null;function am(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xp=null,Ca=null,Sa=null;function hv(e){if(e=xc(e)){if(typeof xp!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=ih(t),xp(e.stateNode,e.type,t))}}function CE(e){Ca?Sa?Sa.push(e):Sa=[e]:Ca=e}function SE(){if(Ca){var e=Ca,t=Sa;if(Sa=Ca=null,hv(e),t)for(e=0;e<t.length;e++)hv(t[e])}}function wE(e,t){return e(t)}function bE(){}var tf=!1;function TE(e,t,r){if(tf)return e(t,r);tf=!0;try{return wE(e,t,r)}finally{tf=!1,(Ca!==null||Sa!==null)&&(bE(),SE())}}function rc(e,t){var r=e.stateNode;if(r===null)return null;var n=ih(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(oe(231,t,typeof r));return r}var Np=!1;if(Ni)try{var al={};Object.defineProperty(al,"passive",{get:function(){Np=!0}}),window.addEventListener("test",al,al),window.removeEventListener("test",al,al)}catch{Np=!1}function s6(e,t,r,n,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Hl=!1,cd=null,ud=!1,_p=null,o6={onError:function(e){Hl=!0,cd=e}};function a6(e,t,r,n,i,s,o,a,l){Hl=!1,cd=null,s6.apply(o6,arguments)}function l6(e,t,r,n,i,s,o,a,l){if(a6.apply(this,arguments),Hl){if(Hl){var c=cd;Hl=!1,cd=null}else throw Error(oe(198));ud||(ud=!0,_p=c)}}function To(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function IE(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fv(e){if(To(e)!==e)throw Error(oe(188))}function c6(e){var t=e.alternate;if(!t){if(t=To(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return fv(i),e;if(s===n)return fv(i),t;s=s.sibling}throw Error(oe(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(r.alternate!==n)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?e:t}function RE(e){return e=c6(e),e!==null?AE(e):null}function AE(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=AE(e);if(t!==null)return t;e=e.sibling}return null}var kE=en.unstable_scheduleCallback,pv=en.unstable_cancelCallback,u6=en.unstable_shouldYield,d6=en.unstable_requestPaint,Ot=en.unstable_now,h6=en.unstable_getCurrentPriorityLevel,lm=en.unstable_ImmediatePriority,xE=en.unstable_UserBlockingPriority,dd=en.unstable_NormalPriority,f6=en.unstable_LowPriority,NE=en.unstable_IdlePriority,eh=null,ui=null;function p6(e){if(ui&&typeof ui.onCommitFiberRoot=="function")try{ui.onCommitFiberRoot(eh,e,void 0,(e.current.flags&128)===128)}catch{}}var Un=Math.clz32?Math.clz32:v6,g6=Math.log,m6=Math.LN2;function v6(e){return e>>>=0,e===0?32:31-(g6(e)/m6|0)|0}var eu=64,tu=4194304;function _l(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hd(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=_l(a):(s&=o,s!==0&&(n=_l(s)))}else o=r&~i,o!==0?n=_l(o):s!==0&&(n=_l(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Un(t),i=1<<r,n|=e[r],t&=~i;return n}function y6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E6(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Un(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=y6(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Dp(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function _E(){var e=eu;return eu<<=1,!(eu&4194240)&&(eu=64),e}function rf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ac(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Un(t),e[t]=r}function C6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-Un(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function cm(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Un(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var dt=0;function DE(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var PE,um,BE,$E,LE,Pp=!1,ru=[],Es=null,Cs=null,Ss=null,nc=new Map,ic=new Map,cs=[],S6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gv(e,t){switch(e){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ss=null;break;case"pointerover":case"pointerout":nc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(t.pointerId)}}function ll(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=xc(t),t!==null&&um(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function w6(e,t,r,n,i){switch(t){case"focusin":return Es=ll(Es,e,t,r,n,i),!0;case"dragenter":return Cs=ll(Cs,e,t,r,n,i),!0;case"mouseover":return Ss=ll(Ss,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return nc.set(s,ll(nc.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,ic.set(s,ll(ic.get(s)||null,e,t,r,n,i)),!0}return!1}function OE(e){var t=Js(e.target);if(t!==null){var r=To(t);if(r!==null){if(t=r.tag,t===13){if(t=IE(r),t!==null){e.blockedOn=t,LE(e.priority,function(){BE(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ju(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);kp=n,r.target.dispatchEvent(n),kp=null}else return t=xc(r),t!==null&&um(t),e.blockedOn=r,!1;t.shift()}return!0}function mv(e,t,r){ju(e)&&r.delete(t)}function b6(){Pp=!1,Es!==null&&ju(Es)&&(Es=null),Cs!==null&&ju(Cs)&&(Cs=null),Ss!==null&&ju(Ss)&&(Ss=null),nc.forEach(mv),ic.forEach(mv)}function cl(e,t){e.blockedOn===t&&(e.blockedOn=null,Pp||(Pp=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,b6)))}function sc(e){function t(i){return cl(i,e)}if(0<ru.length){cl(ru[0],e);for(var r=1;r<ru.length;r++){var n=ru[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Es!==null&&cl(Es,e),Cs!==null&&cl(Cs,e),Ss!==null&&cl(Ss,e),nc.forEach(t),ic.forEach(t),r=0;r<cs.length;r++)n=cs[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<cs.length&&(r=cs[0],r.blockedOn===null);)OE(r),r.blockedOn===null&&cs.shift()}var wa=Oi.ReactCurrentBatchConfig,fd=!0;function T6(e,t,r,n){var i=dt,s=wa.transition;wa.transition=null;try{dt=1,dm(e,t,r,n)}finally{dt=i,wa.transition=s}}function I6(e,t,r,n){var i=dt,s=wa.transition;wa.transition=null;try{dt=4,dm(e,t,r,n)}finally{dt=i,wa.transition=s}}function dm(e,t,r,n){if(fd){var i=Bp(e,t,r,n);if(i===null)ff(e,t,n,pd,r),gv(e,n);else if(w6(i,e,t,r,n))n.stopPropagation();else if(gv(e,n),t&4&&-1<S6.indexOf(e)){for(;i!==null;){var s=xc(i);if(s!==null&&PE(s),s=Bp(e,t,r,n),s===null&&ff(e,t,n,pd,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else ff(e,t,n,null,r)}}var pd=null;function Bp(e,t,r,n){if(pd=null,e=am(n),e=Js(e),e!==null)if(t=To(e),t===null)e=null;else if(r=t.tag,r===13){if(e=IE(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return pd=e,null}function ME(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(h6()){case lm:return 1;case xE:return 4;case dd:case f6:return 16;case NE:return 536870912;default:return 16}default:return 16}}var fs=null,hm=null,Vu=null;function UE(){if(Vu)return Vu;var e,t=hm,r=t.length,n,i="value"in fs?fs.value:fs.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[s-n];n++);return Vu=i.slice(e,1<n?1-n:void 0)}function qu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function nu(){return!0}function vv(){return!1}function nn(e){function t(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?nu:vv,this.isPropagationStopped=vv,this}return Nt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),t}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fm=nn(Qa),kc=Nt({},Qa,{view:0,detail:0}),R6=nn(kc),nf,sf,ul,th=Nt({},kc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ul&&(ul&&e.type==="mousemove"?(nf=e.screenX-ul.screenX,sf=e.screenY-ul.screenY):sf=nf=0,ul=e),nf)},movementY:function(e){return"movementY"in e?e.movementY:sf}}),yv=nn(th),A6=Nt({},th,{dataTransfer:0}),k6=nn(A6),x6=Nt({},kc,{relatedTarget:0}),of=nn(x6),N6=Nt({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),_6=nn(N6),D6=Nt({},Qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),P6=nn(D6),B6=Nt({},Qa,{data:0}),Ev=nn(B6),$6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function M6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=O6[e])?!!t[e]:!1}function pm(){return M6}var U6=Nt({},kc,{key:function(e){if(e.key){var t=$6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?L6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pm,charCode:function(e){return e.type==="keypress"?qu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),H6=nn(U6),F6=Nt({},th,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cv=nn(F6),j6=Nt({},kc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pm}),V6=nn(j6),q6=Nt({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),z6=nn(q6),K6=Nt({},th,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),G6=nn(K6),W6=[9,13,27,32],gm=Ni&&"CompositionEvent"in window,Fl=null;Ni&&"documentMode"in document&&(Fl=document.documentMode);var Y6=Ni&&"TextEvent"in window&&!Fl,HE=Ni&&(!gm||Fl&&8<Fl&&11>=Fl),Sv=" ",wv=!1;function FE(e,t){switch(e){case"keyup":return W6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jE(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var na=!1;function Q6(e,t){switch(e){case"compositionend":return jE(t);case"keypress":return t.which!==32?null:(wv=!0,Sv);case"textInput":return e=t.data,e===Sv&&wv?null:e;default:return null}}function X6(e,t){if(na)return e==="compositionend"||!gm&&FE(e,t)?(e=UE(),Vu=hm=fs=null,na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return HE&&t.locale!=="ko"?null:t.data;default:return null}}var Z6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Z6[e.type]:t==="textarea"}function VE(e,t,r,n){CE(n),t=gd(t,"onChange"),0<t.length&&(r=new fm("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var jl=null,oc=null;function J6(e){eC(e,0)}function rh(e){var t=oa(e);if(fE(t))return e}function e3(e,t){if(e==="change")return t}var qE=!1;if(Ni){var af;if(Ni){var lf="oninput"in document;if(!lf){var Tv=document.createElement("div");Tv.setAttribute("oninput","return;"),lf=typeof Tv.oninput=="function"}af=lf}else af=!1;qE=af&&(!document.documentMode||9<document.documentMode)}function Iv(){jl&&(jl.detachEvent("onpropertychange",zE),oc=jl=null)}function zE(e){if(e.propertyName==="value"&&rh(oc)){var t=[];VE(t,oc,e,am(e)),TE(J6,t)}}function t3(e,t,r){e==="focusin"?(Iv(),jl=t,oc=r,jl.attachEvent("onpropertychange",zE)):e==="focusout"&&Iv()}function r3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rh(oc)}function n3(e,t){if(e==="click")return rh(t)}function i3(e,t){if(e==="input"||e==="change")return rh(t)}function s3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fn=typeof Object.is=="function"?Object.is:s3;function ac(e,t){if(Fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!mp.call(t,i)||!Fn(e[i],t[i]))return!1}return!0}function Rv(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Av(e,t){var r=Rv(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Rv(r)}}function KE(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?KE(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function GE(){for(var e=window,t=ld();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ld(e.document)}return t}function mm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function o3(e){var t=GE(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&KE(r.ownerDocument.documentElement,r)){if(n!==null&&mm(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=Av(r,s);var o=Av(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var a3=Ni&&"documentMode"in document&&11>=document.documentMode,ia=null,$p=null,Vl=null,Lp=!1;function kv(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lp||ia==null||ia!==ld(n)||(n=ia,"selectionStart"in n&&mm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Vl&&ac(Vl,n)||(Vl=n,n=gd($p,"onSelect"),0<n.length&&(t=new fm("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ia)))}function iu(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var sa={animationend:iu("Animation","AnimationEnd"),animationiteration:iu("Animation","AnimationIteration"),animationstart:iu("Animation","AnimationStart"),transitionend:iu("Transition","TransitionEnd")},cf={},WE={};Ni&&(WE=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function nh(e){if(cf[e])return cf[e];if(!sa[e])return e;var t=sa[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in WE)return cf[e]=t[r];return e}var YE=nh("animationend"),QE=nh("animationiteration"),XE=nh("animationstart"),ZE=nh("transitionend"),JE=new Map,xv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bs(e,t){JE.set(e,t),bo(t,[e])}for(var uf=0;uf<xv.length;uf++){var df=xv[uf],l3=df.toLowerCase(),c3=df[0].toUpperCase()+df.slice(1);Bs(l3,"on"+c3)}Bs(YE,"onAnimationEnd");Bs(QE,"onAnimationIteration");Bs(XE,"onAnimationStart");Bs("dblclick","onDoubleClick");Bs("focusin","onFocus");Bs("focusout","onBlur");Bs(ZE,"onTransitionEnd");Ba("onMouseEnter",["mouseout","mouseover"]);Ba("onMouseLeave",["mouseout","mouseover"]);Ba("onPointerEnter",["pointerout","pointerover"]);Ba("onPointerLeave",["pointerout","pointerover"]);bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dl));function Nv(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,l6(n,t,void 0,e),e.currentTarget=null}function eC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Nv(i,a,c),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Nv(i,a,c),s=l}}}if(ud)throw e=_p,ud=!1,_p=null,e}function St(e,t){var r=t[Fp];r===void 0&&(r=t[Fp]=new Set);var n=e+"__bubble";r.has(n)||(tC(t,e,2,!1),r.add(n))}function hf(e,t,r){var n=0;t&&(n|=4),tC(r,e,n,t)}var su="_reactListening"+Math.random().toString(36).slice(2);function lc(e){if(!e[su]){e[su]=!0,lE.forEach(function(r){r!=="selectionchange"&&(u3.has(r)||hf(r,!1,e),hf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[su]||(t[su]=!0,hf("selectionchange",!1,t))}}function tC(e,t,r,n){switch(ME(t)){case 1:var i=T6;break;case 4:i=I6;break;default:i=dm}r=i.bind(null,t,r,e),i=void 0,!Np||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function ff(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Js(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}TE(function(){var c=s,u=am(r),d=[];e:{var h=JE.get(e);if(h!==void 0){var f=fm,g=e;switch(e){case"keypress":if(qu(r)===0)break e;case"keydown":case"keyup":f=H6;break;case"focusin":g="focus",f=of;break;case"focusout":g="blur",f=of;break;case"beforeblur":case"afterblur":f=of;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=yv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=k6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=V6;break;case YE:case QE:case XE:f=_6;break;case ZE:f=z6;break;case"scroll":f=R6;break;case"wheel":f=G6;break;case"copy":case"cut":case"paste":f=P6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Cv}var v=(t&4)!==0,E=!v&&e==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var y=c,C;y!==null;){C=y;var b=C.stateNode;if(C.tag===5&&b!==null&&(C=b,p!==null&&(b=rc(y,p),b!=null&&v.push(cc(y,b,C)))),E)break;y=y.return}0<v.length&&(h=new f(h,g,null,r,u),d.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&r!==kp&&(g=r.relatedTarget||r.fromElement)&&(Js(g)||g[_i]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=r.relatedTarget||r.toElement,f=c,g=g?Js(g):null,g!==null&&(E=To(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=c),f!==g)){if(v=yv,b="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(v=Cv,b="onPointerLeave",p="onPointerEnter",y="pointer"),E=f==null?h:oa(f),C=g==null?h:oa(g),h=new v(b,y+"leave",f,r,u),h.target=E,h.relatedTarget=C,b=null,Js(u)===c&&(v=new v(p,y+"enter",g,r,u),v.target=C,v.relatedTarget=E,b=v),E=b,f&&g)t:{for(v=f,p=g,y=0,C=v;C;C=Mo(C))y++;for(C=0,b=p;b;b=Mo(b))C++;for(;0<y-C;)v=Mo(v),y--;for(;0<C-y;)p=Mo(p),C--;for(;y--;){if(v===p||p!==null&&v===p.alternate)break t;v=Mo(v),p=Mo(p)}v=null}else v=null;f!==null&&_v(d,h,f,v,!1),g!==null&&E!==null&&_v(d,E,g,v,!0)}}e:{if(h=c?oa(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var x=e3;else if(bv(h))if(qE)x=i3;else{x=r3;var m=t3}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=n3);if(x&&(x=x(e,c))){VE(d,x,r,u);break e}m&&m(e,h,c),e==="focusout"&&(m=h._wrapperState)&&m.controlled&&h.type==="number"&&bp(h,"number",h.value)}switch(m=c?oa(c):window,e){case"focusin":(bv(m)||m.contentEditable==="true")&&(ia=m,$p=c,Vl=null);break;case"focusout":Vl=$p=ia=null;break;case"mousedown":Lp=!0;break;case"contextmenu":case"mouseup":case"dragend":Lp=!1,kv(d,r,u);break;case"selectionchange":if(a3)break;case"keydown":case"keyup":kv(d,r,u)}var k;if(gm)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else na?FE(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(HE&&r.locale!=="ko"&&(na||N!=="onCompositionStart"?N==="onCompositionEnd"&&na&&(k=UE()):(fs=u,hm="value"in fs?fs.value:fs.textContent,na=!0)),m=gd(c,N),0<m.length&&(N=new Ev(N,e,null,r,u),d.push({event:N,listeners:m}),k?N.data=k:(k=jE(r),k!==null&&(N.data=k)))),(k=Y6?Q6(e,r):X6(e,r))&&(c=gd(c,"onBeforeInput"),0<c.length&&(u=new Ev("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:c}),u.data=k))}eC(d,t)})}function cc(e,t,r){return{instance:e,listener:t,currentTarget:r}}function gd(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rc(e,r),s!=null&&n.unshift(cc(e,s,i)),s=rc(e,t),s!=null&&n.push(cc(e,s,i))),e=e.return}return n}function Mo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _v(e,t,r,n,i){for(var s=t._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&c!==null&&(a=c,i?(l=rc(r,s),l!=null&&o.unshift(cc(r,l,a))):i||(l=rc(r,s),l!=null&&o.push(cc(r,l,a)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var d3=/\r\n?/g,h3=/\u0000|\uFFFD/g;function Dv(e){return(typeof e=="string"?e:""+e).replace(d3,`
`).replace(h3,"")}function ou(e,t,r){if(t=Dv(t),Dv(e)!==t&&r)throw Error(oe(425))}function md(){}var Op=null,Mp=null;function Up(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Hp=typeof setTimeout=="function"?setTimeout:void 0,f3=typeof clearTimeout=="function"?clearTimeout:void 0,Pv=typeof Promise=="function"?Promise:void 0,p3=typeof queueMicrotask=="function"?queueMicrotask:typeof Pv<"u"?function(e){return Pv.resolve(null).then(e).catch(g3)}:Hp;function g3(e){setTimeout(function(){throw e})}function pf(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),sc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);sc(t)}function ws(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Xa=Math.random().toString(36).slice(2),si="__reactFiber$"+Xa,uc="__reactProps$"+Xa,_i="__reactContainer$"+Xa,Fp="__reactEvents$"+Xa,m3="__reactListeners$"+Xa,v3="__reactHandles$"+Xa;function Js(e){var t=e[si];if(t)return t;for(var r=e.parentNode;r;){if(t=r[_i]||r[si]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bv(e);e!==null;){if(r=e[si])return r;e=Bv(e)}return t}e=r,r=e.parentNode}return null}function xc(e){return e=e[si]||e[_i],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function ih(e){return e[uc]||null}var jp=[],aa=-1;function $s(e){return{current:e}}function Tt(e){0>aa||(e.current=jp[aa],jp[aa]=null,aa--)}function Et(e,t){aa++,jp[aa]=e.current,e.current=t}var Ns={},Cr=$s(Ns),Hr=$s(!1),po=Ns;function $a(e,t){var r=e.type.contextTypes;if(!r)return Ns;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fr(e){return e=e.childContextTypes,e!=null}function vd(){Tt(Hr),Tt(Cr)}function $v(e,t,r){if(Cr.current!==Ns)throw Error(oe(168));Et(Cr,t),Et(Hr,r)}function rC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(oe(108,t6(e)||"Unknown",i));return Nt({},r,n)}function yd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ns,po=Cr.current,Et(Cr,e),Et(Hr,Hr.current),!0}function Lv(e,t,r){var n=e.stateNode;if(!n)throw Error(oe(169));r?(e=rC(e,t,po),n.__reactInternalMemoizedMergedChildContext=e,Tt(Hr),Tt(Cr),Et(Cr,e)):Tt(Hr),Et(Hr,r)}var bi=null,sh=!1,gf=!1;function nC(e){bi===null?bi=[e]:bi.push(e)}function y3(e){sh=!0,nC(e)}function Ls(){if(!gf&&bi!==null){gf=!0;var e=0,t=dt;try{var r=bi;for(dt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}bi=null,sh=!1}catch(i){throw bi!==null&&(bi=bi.slice(e+1)),kE(lm,Ls),i}finally{dt=t,gf=!1}}return null}var la=[],ca=0,Ed=null,Cd=0,fn=[],pn=0,go=null,Ii=1,Ri="";function zs(e,t){la[ca++]=Cd,la[ca++]=Ed,Ed=e,Cd=t}function iC(e,t,r){fn[pn++]=Ii,fn[pn++]=Ri,fn[pn++]=go,go=e;var n=Ii;e=Ri;var i=32-Un(n)-1;n&=~(1<<i),r+=1;var s=32-Un(t)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Ii=1<<32-Un(t)+i|r<<i|n,Ri=s+e}else Ii=1<<s|r<<i|n,Ri=e}function vm(e){e.return!==null&&(zs(e,1),iC(e,1,0))}function ym(e){for(;e===Ed;)Ed=la[--ca],la[ca]=null,Cd=la[--ca],la[ca]=null;for(;e===go;)go=fn[--pn],fn[pn]=null,Ri=fn[--pn],fn[pn]=null,Ii=fn[--pn],fn[pn]=null}var Xr=null,Yr=null,At=!1,Ln=null;function sC(e,t){var r=vn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ov(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=ws(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xr=e,Yr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=go!==null?{id:Ii,overflow:Ri}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=vn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Xr=e,Yr=null,!0):!1;default:return!1}}function Vp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qp(e){if(At){var t=Yr;if(t){var r=t;if(!Ov(e,t)){if(Vp(e))throw Error(oe(418));t=ws(r.nextSibling);var n=Xr;t&&Ov(e,t)?sC(n,r):(e.flags=e.flags&-4097|2,At=!1,Xr=e)}}else{if(Vp(e))throw Error(oe(418));e.flags=e.flags&-4097|2,At=!1,Xr=e}}}function Mv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xr=e}function au(e){if(e!==Xr)return!1;if(!At)return Mv(e),At=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Up(e.type,e.memoizedProps)),t&&(t=Yr)){if(Vp(e))throw oC(),Error(oe(418));for(;t;)sC(e,t),t=ws(t.nextSibling)}if(Mv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Yr=ws(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Yr=null}}else Yr=Xr?ws(e.stateNode.nextSibling):null;return!0}function oC(){for(var e=Yr;e;)e=ws(e.nextSibling)}function La(){Yr=Xr=null,At=!1}function Em(e){Ln===null?Ln=[e]:Ln.push(e)}var E3=Oi.ReactCurrentBatchConfig;function Pn(e,t){if(e&&e.defaultProps){t=Nt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Sd=$s(null),wd=null,ua=null,Cm=null;function Sm(){Cm=ua=wd=null}function wm(e){var t=Sd.current;Tt(Sd),e._currentValue=t}function zp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function ba(e,t){wd=e,Cm=ua=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ur=!0),e.firstContext=null)}function wn(e){var t=e._currentValue;if(Cm!==e)if(e={context:e,memoizedValue:t,next:null},ua===null){if(wd===null)throw Error(oe(308));ua=e,wd.dependencies={lanes:0,firstContext:e}}else ua=ua.next=e;return t}var eo=null;function bm(e){eo===null?eo=[e]:eo.push(e)}function aC(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,bm(t)):(r.next=i.next,i.next=r),t.interleaved=r,Di(e,n)}function Di(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var as=!1;function Tm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function xi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bs(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,nt&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Di(e,r)}return i=n.interleaved,i===null?(t.next=t,bm(n)):(t.next=i.next,i.next=t),n.interleaved=t,Di(e,r)}function zu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cm(e,r)}}function Uv(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bd(e,t,r,n){var i=e.updateQueue;as=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(h=t,f=r,v.tag){case 1:if(g=v.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=Nt({},d,h);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);vo|=o,e.lanes=o,e.memoizedState=d}}function Hv(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(oe(191,i));i.call(n)}}}var cC=new aE.Component().refs;function Kp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Nt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var oh={isMounted:function(e){return(e=e._reactInternals)?To(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xr(),i=Is(e),s=xi(n,i);s.payload=t,r!=null&&(s.callback=r),t=bs(e,s,i),t!==null&&(Hn(t,e,i,n),zu(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xr(),i=Is(e),s=xi(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=bs(e,s,i),t!==null&&(Hn(t,e,i,n),zu(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xr(),n=Is(e),i=xi(r,n);i.tag=2,t!=null&&(i.callback=t),t=bs(e,i,n),t!==null&&(Hn(t,e,n,r),zu(t,e,n))}};function Fv(e,t,r,n,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!ac(r,n)||!ac(i,s):!0}function uC(e,t,r){var n=!1,i=Ns,s=t.contextType;return typeof s=="object"&&s!==null?s=wn(s):(i=Fr(t)?po:Cr.current,n=t.contextTypes,s=(n=n!=null)?$a(e,i):Ns),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=oh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function jv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&oh.enqueueReplaceState(t,t.state,null)}function Gp(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs=cC,Tm(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=wn(s):(s=Fr(t)?po:Cr.current,i.context=$a(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Kp(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&oh.enqueueReplaceState(i,i.state,null),bd(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function dl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var n=r.stateNode}if(!n)throw Error(oe(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===cC&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,e))}return e}function lu(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vv(e){var t=e._init;return t(e._payload)}function dC(e){function t(p,y){if(e){var C=p.deletions;C===null?(p.deletions=[y],p.flags|=16):C.push(y)}}function r(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function n(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function i(p,y){return p=Rs(p,y),p.index=0,p.sibling=null,p}function s(p,y,C){return p.index=C,e?(C=p.alternate,C!==null?(C=C.index,C<y?(p.flags|=2,y):C):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function a(p,y,C,b){return y===null||y.tag!==6?(y=wf(C,p.mode,b),y.return=p,y):(y=i(y,C),y.return=p,y)}function l(p,y,C,b){var x=C.type;return x===ra?u(p,y,C.props.children,b,C.key):y!==null&&(y.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===os&&Vv(x)===y.type)?(b=i(y,C.props),b.ref=dl(p,y,C),b.return=p,b):(b=Xu(C.type,C.key,C.props,null,p.mode,b),b.ref=dl(p,y,C),b.return=p,b)}function c(p,y,C,b){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=bf(C,p.mode,b),y.return=p,y):(y=i(y,C.children||[]),y.return=p,y)}function u(p,y,C,b,x){return y===null||y.tag!==7?(y=co(C,p.mode,b,x),y.return=p,y):(y=i(y,C),y.return=p,y)}function d(p,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=wf(""+y,p.mode,C),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:return C=Xu(y.type,y.key,y.props,null,p.mode,C),C.ref=dl(p,null,y),C.return=p,C;case ta:return y=bf(y,p.mode,C),y.return=p,y;case os:var b=y._init;return d(p,b(y._payload),C)}if(Nl(y)||ol(y))return y=co(y,p.mode,C,null),y.return=p,y;lu(p,y)}return null}function h(p,y,C,b){var x=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return x!==null?null:a(p,y,""+C,b);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Xc:return C.key===x?l(p,y,C,b):null;case ta:return C.key===x?c(p,y,C,b):null;case os:return x=C._init,h(p,y,x(C._payload),b)}if(Nl(C)||ol(C))return x!==null?null:u(p,y,C,b,null);lu(p,C)}return null}function f(p,y,C,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return p=p.get(C)||null,a(y,p,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Xc:return p=p.get(b.key===null?C:b.key)||null,l(y,p,b,x);case ta:return p=p.get(b.key===null?C:b.key)||null,c(y,p,b,x);case os:var m=b._init;return f(p,y,C,m(b._payload),x)}if(Nl(b)||ol(b))return p=p.get(C)||null,u(y,p,b,x,null);lu(y,b)}return null}function g(p,y,C,b){for(var x=null,m=null,k=y,N=y=0,H=null;k!==null&&N<C.length;N++){k.index>N?(H=k,k=null):H=k.sibling;var R=h(p,k,C[N],b);if(R===null){k===null&&(k=H);break}e&&k&&R.alternate===null&&t(p,k),y=s(R,y,N),m===null?x=R:m.sibling=R,m=R,k=H}if(N===C.length)return r(p,k),At&&zs(p,N),x;if(k===null){for(;N<C.length;N++)k=d(p,C[N],b),k!==null&&(y=s(k,y,N),m===null?x=k:m.sibling=k,m=k);return At&&zs(p,N),x}for(k=n(p,k);N<C.length;N++)H=f(k,p,N,C[N],b),H!==null&&(e&&H.alternate!==null&&k.delete(H.key===null?N:H.key),y=s(H,y,N),m===null?x=H:m.sibling=H,m=H);return e&&k.forEach(function(P){return t(p,P)}),At&&zs(p,N),x}function v(p,y,C,b){var x=ol(C);if(typeof x!="function")throw Error(oe(150));if(C=x.call(C),C==null)throw Error(oe(151));for(var m=x=null,k=y,N=y=0,H=null,R=C.next();k!==null&&!R.done;N++,R=C.next()){k.index>N?(H=k,k=null):H=k.sibling;var P=h(p,k,R.value,b);if(P===null){k===null&&(k=H);break}e&&k&&P.alternate===null&&t(p,k),y=s(P,y,N),m===null?x=P:m.sibling=P,m=P,k=H}if(R.done)return r(p,k),At&&zs(p,N),x;if(k===null){for(;!R.done;N++,R=C.next())R=d(p,R.value,b),R!==null&&(y=s(R,y,N),m===null?x=R:m.sibling=R,m=R);return At&&zs(p,N),x}for(k=n(p,k);!R.done;N++,R=C.next())R=f(k,p,N,R.value,b),R!==null&&(e&&R.alternate!==null&&k.delete(R.key===null?N:R.key),y=s(R,y,N),m===null?x=R:m.sibling=R,m=R);return e&&k.forEach(function(B){return t(p,B)}),At&&zs(p,N),x}function E(p,y,C,b){if(typeof C=="object"&&C!==null&&C.type===ra&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Xc:e:{for(var x=C.key,m=y;m!==null;){if(m.key===x){if(x=C.type,x===ra){if(m.tag===7){r(p,m.sibling),y=i(m,C.props.children),y.return=p,p=y;break e}}else if(m.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===os&&Vv(x)===m.type){r(p,m.sibling),y=i(m,C.props),y.ref=dl(p,m,C),y.return=p,p=y;break e}r(p,m);break}else t(p,m);m=m.sibling}C.type===ra?(y=co(C.props.children,p.mode,b,C.key),y.return=p,p=y):(b=Xu(C.type,C.key,C.props,null,p.mode,b),b.ref=dl(p,y,C),b.return=p,p=b)}return o(p);case ta:e:{for(m=C.key;y!==null;){if(y.key===m)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){r(p,y.sibling),y=i(y,C.children||[]),y.return=p,p=y;break e}else{r(p,y);break}else t(p,y);y=y.sibling}y=bf(C,p.mode,b),y.return=p,p=y}return o(p);case os:return m=C._init,E(p,y,m(C._payload),b)}if(Nl(C))return g(p,y,C,b);if(ol(C))return v(p,y,C,b);lu(p,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(r(p,y.sibling),y=i(y,C),y.return=p,p=y):(r(p,y),y=wf(C,p.mode,b),y.return=p,p=y),o(p)):r(p,y)}return E}var Oa=dC(!0),hC=dC(!1),Nc={},di=$s(Nc),dc=$s(Nc),hc=$s(Nc);function to(e){if(e===Nc)throw Error(oe(174));return e}function Im(e,t){switch(Et(hc,t),Et(dc,e),Et(di,Nc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ip(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ip(t,e)}Tt(di),Et(di,t)}function Ma(){Tt(di),Tt(dc),Tt(hc)}function fC(e){to(hc.current);var t=to(di.current),r=Ip(t,e.type);t!==r&&(Et(dc,e),Et(di,r))}function Rm(e){dc.current===e&&(Tt(di),Tt(dc))}var kt=$s(0);function Td(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mf=[];function Am(){for(var e=0;e<mf.length;e++)mf[e]._workInProgressVersionPrimary=null;mf.length=0}var Ku=Oi.ReactCurrentDispatcher,vf=Oi.ReactCurrentBatchConfig,mo=0,xt=null,Vt=null,Jt=null,Id=!1,ql=!1,fc=0,C3=0;function gr(){throw Error(oe(321))}function km(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Fn(e[r],t[r]))return!1;return!0}function xm(e,t,r,n,i,s){if(mo=s,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ku.current=e===null||e.memoizedState===null?T3:I3,e=r(n,i),ql){s=0;do{if(ql=!1,fc=0,25<=s)throw Error(oe(301));s+=1,Jt=Vt=null,t.updateQueue=null,Ku.current=R3,e=r(n,i)}while(ql)}if(Ku.current=Rd,t=Vt!==null&&Vt.next!==null,mo=0,Jt=Vt=xt=null,Id=!1,t)throw Error(oe(300));return e}function Nm(){var e=fc!==0;return fc=0,e}function Qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?xt.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function bn(){if(Vt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=Jt===null?xt.memoizedState:Jt.next;if(t!==null)Jt=t,Vt=e;else{if(e===null)throw Error(oe(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Jt===null?xt.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function pc(e,t){return typeof t=="function"?t(e):t}function yf(e){var t=bn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=Vt,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((mo&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=n):l=l.next=d,xt.lanes|=u,vo|=u}c=c.next}while(c!==null&&c!==s);l===null?o=n:l.next=a,Fn(n,t.memoizedState)||(Ur=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,xt.lanes|=s,vo|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ef(e){var t=bn(),r=t.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Fn(s,t.memoizedState)||(Ur=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function pC(){}function gC(e,t){var r=xt,n=bn(),i=t(),s=!Fn(n.memoizedState,i);if(s&&(n.memoizedState=i,Ur=!0),n=n.queue,_m(yC.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||Jt!==null&&Jt.memoizedState.tag&1){if(r.flags|=2048,gc(9,vC.bind(null,r,n,i,t),void 0,null),rr===null)throw Error(oe(349));mo&30||mC(r,t,i)}return i}function mC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function vC(e,t,r,n){t.value=r,t.getSnapshot=n,EC(t)&&CC(e)}function yC(e,t,r){return r(function(){EC(t)&&CC(e)})}function EC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Fn(e,r)}catch{return!0}}function CC(e){var t=Di(e,1);t!==null&&Hn(t,e,1,-1)}function qv(e){var t=Qn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pc,lastRenderedState:e},t.queue=e,e=e.dispatch=b3.bind(null,xt,e),[t.memoizedState,e]}function gc(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function SC(){return bn().memoizedState}function Gu(e,t,r,n){var i=Qn();xt.flags|=e,i.memoizedState=gc(1|t,r,void 0,n===void 0?null:n)}function ah(e,t,r,n){var i=bn();n=n===void 0?null:n;var s=void 0;if(Vt!==null){var o=Vt.memoizedState;if(s=o.destroy,n!==null&&km(n,o.deps)){i.memoizedState=gc(t,r,s,n);return}}xt.flags|=e,i.memoizedState=gc(1|t,r,s,n)}function zv(e,t){return Gu(8390656,8,e,t)}function _m(e,t){return ah(2048,8,e,t)}function wC(e,t){return ah(4,2,e,t)}function bC(e,t){return ah(4,4,e,t)}function TC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function IC(e,t,r){return r=r!=null?r.concat([e]):null,ah(4,4,TC.bind(null,t,e),r)}function Dm(){}function RC(e,t){var r=bn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&km(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function AC(e,t){var r=bn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&km(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function kC(e,t,r){return mo&21?(Fn(r,t)||(r=_E(),xt.lanes|=r,vo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ur=!0),e.memoizedState=r)}function S3(e,t){var r=dt;dt=r!==0&&4>r?r:4,e(!0);var n=vf.transition;vf.transition={};try{e(!1),t()}finally{dt=r,vf.transition=n}}function xC(){return bn().memoizedState}function w3(e,t,r){var n=Is(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},NC(e))_C(t,r);else if(r=aC(e,t,r,n),r!==null){var i=xr();Hn(r,e,n,i),DC(r,t,n)}}function b3(e,t,r){var n=Is(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(NC(e))_C(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Fn(a,o)){var l=t.interleaved;l===null?(i.next=i,bm(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=aC(e,t,i,n),r!==null&&(i=xr(),Hn(r,e,n,i),DC(r,t,n))}}function NC(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function _C(e,t){ql=Id=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function DC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cm(e,r)}}var Rd={readContext:wn,useCallback:gr,useContext:gr,useEffect:gr,useImperativeHandle:gr,useInsertionEffect:gr,useLayoutEffect:gr,useMemo:gr,useReducer:gr,useRef:gr,useState:gr,useDebugValue:gr,useDeferredValue:gr,useTransition:gr,useMutableSource:gr,useSyncExternalStore:gr,useId:gr,unstable_isNewReconciler:!1},T3={readContext:wn,useCallback:function(e,t){return Qn().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:zv,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Gu(4194308,4,TC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Gu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Gu(4,2,e,t)},useMemo:function(e,t){var r=Qn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Qn();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=w3.bind(null,xt,e),[n.memoizedState,e]},useRef:function(e){var t=Qn();return e={current:e},t.memoizedState=e},useState:qv,useDebugValue:Dm,useDeferredValue:function(e){return Qn().memoizedState=e},useTransition:function(){var e=qv(!1),t=e[0];return e=S3.bind(null,e[1]),Qn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=xt,i=Qn();if(At){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=t(),rr===null)throw Error(oe(349));mo&30||mC(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,zv(yC.bind(null,n,s,e),[e]),n.flags|=2048,gc(9,vC.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Qn(),t=rr.identifierPrefix;if(At){var r=Ri,n=Ii;r=(n&~(1<<32-Un(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=fc++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=C3++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},I3={readContext:wn,useCallback:RC,useContext:wn,useEffect:_m,useImperativeHandle:IC,useInsertionEffect:wC,useLayoutEffect:bC,useMemo:AC,useReducer:yf,useRef:SC,useState:function(){return yf(pc)},useDebugValue:Dm,useDeferredValue:function(e){var t=bn();return kC(t,Vt.memoizedState,e)},useTransition:function(){var e=yf(pc)[0],t=bn().memoizedState;return[e,t]},useMutableSource:pC,useSyncExternalStore:gC,useId:xC,unstable_isNewReconciler:!1},R3={readContext:wn,useCallback:RC,useContext:wn,useEffect:_m,useImperativeHandle:IC,useInsertionEffect:wC,useLayoutEffect:bC,useMemo:AC,useReducer:Ef,useRef:SC,useState:function(){return Ef(pc)},useDebugValue:Dm,useDeferredValue:function(e){var t=bn();return Vt===null?t.memoizedState=e:kC(t,Vt.memoizedState,e)},useTransition:function(){var e=Ef(pc)[0],t=bn().memoizedState;return[e,t]},useMutableSource:pC,useSyncExternalStore:gC,useId:xC,unstable_isNewReconciler:!1};function Ua(e,t){try{var r="",n=t;do r+=e6(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Cf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var A3=typeof WeakMap=="function"?WeakMap:Map;function PC(e,t,r){r=xi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){kd||(kd=!0,ig=n),Wp(e,t)},r}function BC(e,t,r){r=xi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){Wp(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){Wp(e,t),typeof n!="function"&&(Ts===null?Ts=new Set([this]):Ts.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Kv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new A3;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=F3.bind(null,e,t,r),t.then(e,e))}function Gv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wv(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=xi(-1,1),t.tag=2,bs(r,t,1))),r.lanes|=1),e)}var k3=Oi.ReactCurrentOwner,Ur=!1;function Ar(e,t,r,n){t.child=e===null?hC(t,null,r,n):Oa(t,e.child,r,n)}function Yv(e,t,r,n,i){r=r.render;var s=t.ref;return ba(t,i),n=xm(e,t,r,n,s,i),r=Nm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(At&&r&&vm(t),t.flags|=1,Ar(e,t,n,i),t.child)}function Qv(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!Hm(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,$C(e,t,s,n,i)):(e=Xu(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:ac,r(o,n)&&e.ref===t.ref)return Pi(e,t,i)}return t.flags|=1,e=Rs(s,n),e.ref=t.ref,e.return=t,t.child=e}function $C(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(ac(s,n)&&e.ref===t.ref)if(Ur=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(Ur=!0);else return t.lanes=e.lanes,Pi(e,t,i)}return Yp(e,t,r,n,i)}function LC(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Et(ha,Kr),Kr|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Et(ha,Kr),Kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,Et(ha,Kr),Kr|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Et(ha,Kr),Kr|=n;return Ar(e,t,i,r),t.child}function OC(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Yp(e,t,r,n,i){var s=Fr(r)?po:Cr.current;return s=$a(t,s),ba(t,i),r=xm(e,t,r,n,s,i),n=Nm(),e!==null&&!Ur?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Pi(e,t,i)):(At&&n&&vm(t),t.flags|=1,Ar(e,t,r,i),t.child)}function Xv(e,t,r,n,i){if(Fr(r)){var s=!0;yd(t)}else s=!1;if(ba(t,i),t.stateNode===null)Wu(e,t),uC(t,r,n),Gp(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=wn(c):(c=Fr(r)?po:Cr.current,c=$a(t,c));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==c)&&jv(t,o,n,c),as=!1;var h=t.memoizedState;o.state=h,bd(t,n,o,i),l=t.memoizedState,a!==n||h!==l||Hr.current||as?(typeof u=="function"&&(Kp(t,r,u,n),l=t.memoizedState),(a=as||Fv(t,r,a,n,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=c,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,lC(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Pn(t.type,a),o.props=c,d=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=wn(l):(l=Fr(r)?po:Cr.current,l=$a(t,l));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&jv(t,o,n,l),as=!1,h=t.memoizedState,o.state=h,bd(t,n,o,i);var g=t.memoizedState;a!==d||h!==g||Hr.current||as?(typeof f=="function"&&(Kp(t,r,f,n),g=t.memoizedState),(c=as||Fv(t,r,c,n,h,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=l,n=c):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Qp(e,t,r,n,s,i)}function Qp(e,t,r,n,i,s){OC(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&Lv(t,r,!1),Pi(e,t,s);n=t.stateNode,k3.current=t;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Oa(t,e.child,null,s),t.child=Oa(t,null,a,s)):Ar(e,t,a,s),t.memoizedState=n.state,i&&Lv(t,r,!0),t.child}function MC(e){var t=e.stateNode;t.pendingContext?$v(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$v(e,t.context,!1),Im(e,t.containerInfo)}function Zv(e,t,r,n,i){return La(),Em(i),t.flags|=256,Ar(e,t,r,n),t.child}var Xp={dehydrated:null,treeContext:null,retryLane:0};function Zp(e){return{baseLanes:e,cachePool:null,transitions:null}}function UC(e,t,r){var n=t.pendingProps,i=kt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Et(kt,i&1),e===null)return qp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uh(o,n,0,null),e=co(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Zp(r),t.memoizedState=Xp,e):Pm(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return x3(e,t,o,n,a,i,r);if(s){s=n.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=Rs(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Rs(a,s):(s=co(s,o,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?Zp(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~r,t.memoizedState=Xp,n}return s=e.child,e=s.sibling,n=Rs(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Pm(e,t){return t=uh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cu(e,t,r,n){return n!==null&&Em(n),Oa(t,e.child,null,r),e=Pm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x3(e,t,r,n,i,s,o){if(r)return t.flags&256?(t.flags&=-257,n=Cf(Error(oe(422))),cu(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=uh({mode:"visible",children:n.children},i,0,null),s=co(s,i,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Oa(t,e.child,null,o),t.child.memoizedState=Zp(o),t.memoizedState=Xp,s);if(!(t.mode&1))return cu(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(oe(419)),n=Cf(s,n,void 0),cu(e,t,o,n)}if(a=(o&e.childLanes)!==0,Ur||a){if(n=rr,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Di(e,i),Hn(n,e,i,-1))}return Um(),n=Cf(Error(oe(421))),cu(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=j3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Yr=ws(i.nextSibling),Xr=t,At=!0,Ln=null,e!==null&&(fn[pn++]=Ii,fn[pn++]=Ri,fn[pn++]=go,Ii=e.id,Ri=e.overflow,go=t),t=Pm(t,n.children),t.flags|=4096,t)}function Jv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),zp(e.return,t,r)}function Sf(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function HC(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(Ar(e,t,n.children,r),n=kt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jv(e,r,t);else if(e.tag===19)Jv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Et(kt,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Td(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),Sf(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Td(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}Sf(t,!0,r,null,s);break;case"together":Sf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),vo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,r=Rs(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rs(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function N3(e,t,r){switch(t.tag){case 3:MC(t),La();break;case 5:fC(t);break;case 1:Fr(t.type)&&yd(t);break;case 4:Im(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Et(Sd,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Et(kt,kt.current&1),t.flags|=128,null):r&t.child.childLanes?UC(e,t,r):(Et(kt,kt.current&1),e=Pi(e,t,r),e!==null?e.sibling:null);Et(kt,kt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return HC(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Et(kt,kt.current),n)break;return null;case 22:case 23:return t.lanes=0,LC(e,t,r)}return Pi(e,t,r)}var FC,Jp,jC,VC;FC=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Jp=function(){};jC=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,to(di.current);var s=null;switch(r){case"input":i=Sp(e,i),n=Sp(e,n),s=[];break;case"select":i=Nt({},i,{value:void 0}),n=Nt({},n,{value:void 0}),s=[];break;case"textarea":i=Tp(e,i),n=Tp(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=md)}Rp(r,n);var o;r=null;for(c in i)if(!n.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ec.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in n){var l=n[c];if(a=i!=null?i[c]:void 0,n.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(c,r)),r=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ec.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&St("scroll",e),s||a===l||(s=[])):(s=s||[]).push(c,l))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}};VC=function(e,t,r,n){r!==n&&(t.flags|=4)};function hl(e,t){if(!At)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function mr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function _3(e,t,r){var n=t.pendingProps;switch(ym(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mr(t),null;case 1:return Fr(t.type)&&vd(),mr(t),null;case 3:return n=t.stateNode,Ma(),Tt(Hr),Tt(Cr),Am(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(au(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ln!==null&&(ag(Ln),Ln=null))),Jp(e,t),mr(t),null;case 5:Rm(t);var i=to(hc.current);if(r=t.type,e!==null&&t.stateNode!=null)jC(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(oe(166));return mr(t),null}if(e=to(di.current),au(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[si]=t,n[uc]=s,e=(t.mode&1)!==0,r){case"dialog":St("cancel",n),St("close",n);break;case"iframe":case"object":case"embed":St("load",n);break;case"video":case"audio":for(i=0;i<Dl.length;i++)St(Dl[i],n);break;case"source":St("error",n);break;case"img":case"image":case"link":St("error",n),St("load",n);break;case"details":St("toggle",n);break;case"input":lv(n,s),St("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},St("invalid",n);break;case"textarea":uv(n,s),St("invalid",n)}Rp(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&ou(n.textContent,a,e),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ou(n.textContent,a,e),i=["children",""+a]):ec.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&St("scroll",n)}switch(r){case"input":Zc(n),cv(n,s,!0);break;case"textarea":Zc(n),dv(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=md)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=mE(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[si]=t,e[uc]=n,FC(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ap(r,n),r){case"dialog":St("cancel",e),St("close",e),i=n;break;case"iframe":case"object":case"embed":St("load",e),i=n;break;case"video":case"audio":for(i=0;i<Dl.length;i++)St(Dl[i],e);i=n;break;case"source":St("error",e),i=n;break;case"img":case"image":case"link":St("error",e),St("load",e),i=n;break;case"details":St("toggle",e),i=n;break;case"input":lv(e,n),i=Sp(e,n),St("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Nt({},n,{value:void 0}),St("invalid",e);break;case"textarea":uv(e,n),i=Tp(e,n),St("invalid",e);break;default:i=n}Rp(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?EE(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vE(e,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&tc(e,l):typeof l=="number"&&tc(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ec.hasOwnProperty(s)?l!=null&&s==="onScroll"&&St("scroll",e):l!=null&&nm(e,s,l,o))}switch(r){case"input":Zc(e),cv(e,n,!1);break;case"textarea":Zc(e),dv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+xs(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?Ea(e,!!n.multiple,s,!1):n.defaultValue!=null&&Ea(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=md)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return mr(t),null;case 6:if(e&&t.stateNode!=null)VC(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(oe(166));if(r=to(hc.current),to(di.current),au(t)){if(n=t.stateNode,r=t.memoizedProps,n[si]=t,(s=n.nodeValue!==r)&&(e=Xr,e!==null))switch(e.tag){case 3:ou(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ou(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[si]=t,t.stateNode=n}return mr(t),null;case 13:if(Tt(kt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(At&&Yr!==null&&t.mode&1&&!(t.flags&128))oC(),La(),t.flags|=98560,s=!1;else if(s=au(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(oe(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[si]=t}else La(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;mr(t),s=!1}else Ln!==null&&(ag(Ln),Ln=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||kt.current&1?qt===0&&(qt=3):Um())),t.updateQueue!==null&&(t.flags|=4),mr(t),null);case 4:return Ma(),Jp(e,t),e===null&&lc(t.stateNode.containerInfo),mr(t),null;case 10:return wm(t.type._context),mr(t),null;case 17:return Fr(t.type)&&vd(),mr(t),null;case 19:if(Tt(kt),s=t.memoizedState,s===null)return mr(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)hl(s,!1);else{if(qt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Td(e),o!==null){for(t.flags|=128,hl(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Et(kt,kt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Ot()>Ha&&(t.flags|=128,n=!0,hl(s,!1),t.lanes=4194304)}else{if(!n)if(e=Td(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hl(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!At)return mr(t),null}else 2*Ot()-s.renderingStartTime>Ha&&r!==1073741824&&(t.flags|=128,n=!0,hl(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(r=s.last,r!==null?r.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ot(),t.sibling=null,r=kt.current,Et(kt,n?r&1|2:r&1),t):(mr(t),null);case 22:case 23:return Mm(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Kr&1073741824&&(mr(t),t.subtreeFlags&6&&(t.flags|=8192)):mr(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function D3(e,t){switch(ym(t),t.tag){case 1:return Fr(t.type)&&vd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ma(),Tt(Hr),Tt(Cr),Am(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Rm(t),null;case 13:if(Tt(kt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));La()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Tt(kt),null;case 4:return Ma(),null;case 10:return wm(t.type._context),null;case 22:case 23:return Mm(),null;case 24:return null;default:return null}}var uu=!1,vr=!1,P3=typeof WeakSet=="function"?WeakSet:Set,we=null;function da(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Bt(e,t,n)}else r.current=null}function eg(e,t,r){try{r()}catch(n){Bt(e,t,n)}}var ey=!1;function B3(e,t){if(Op=fd,e=GE(),mm(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=e,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(a=o+i),d!==s||n!==0&&d.nodeType!==3||(l=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===e)break t;if(h===r&&++c===i&&(a=o),h===s&&++u===n&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mp={focusedElem:e,selectionRange:r},fd=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,E=g.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:Pn(t.type,v),E);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(b){Bt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return g=ey,ey=!1,g}function zl(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&eg(t,r,s)}i=i.next}while(i!==n)}}function lh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function tg(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qC(e){var t=e.alternate;t!==null&&(e.alternate=null,qC(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[si],delete t[uc],delete t[Fp],delete t[m3],delete t[v3])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zC(e){return e.tag===5||e.tag===3||e.tag===4}function ty(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zC(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rg(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=md));else if(n!==4&&(e=e.child,e!==null))for(rg(e,t,r),e=e.sibling;e!==null;)rg(e,t,r),e=e.sibling}function ng(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ng(e,t,r),e=e.sibling;e!==null;)ng(e,t,r),e=e.sibling}var ur=null,Bn=!1;function Yi(e,t,r){for(r=r.child;r!==null;)KC(e,t,r),r=r.sibling}function KC(e,t,r){if(ui&&typeof ui.onCommitFiberUnmount=="function")try{ui.onCommitFiberUnmount(eh,r)}catch{}switch(r.tag){case 5:vr||da(r,t);case 6:var n=ur,i=Bn;ur=null,Yi(e,t,r),ur=n,Bn=i,ur!==null&&(Bn?(e=ur,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ur.removeChild(r.stateNode));break;case 18:ur!==null&&(Bn?(e=ur,r=r.stateNode,e.nodeType===8?pf(e.parentNode,r):e.nodeType===1&&pf(e,r),sc(e)):pf(ur,r.stateNode));break;case 4:n=ur,i=Bn,ur=r.stateNode.containerInfo,Bn=!0,Yi(e,t,r),ur=n,Bn=i;break;case 0:case 11:case 14:case 15:if(!vr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eg(r,t,o),i=i.next}while(i!==n)}Yi(e,t,r);break;case 1:if(!vr&&(da(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Bt(r,t,a)}Yi(e,t,r);break;case 21:Yi(e,t,r);break;case 22:r.mode&1?(vr=(n=vr)||r.memoizedState!==null,Yi(e,t,r),vr=n):Yi(e,t,r);break;default:Yi(e,t,r)}}function ry(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new P3),t.forEach(function(n){var i=V3.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function _n(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ur=a.stateNode,Bn=!1;break e;case 3:ur=a.stateNode.containerInfo,Bn=!0;break e;case 4:ur=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(ur===null)throw Error(oe(160));KC(s,o,i),ur=null,Bn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Bt(i,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)GC(t,e),t=t.sibling}function GC(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_n(t,e),zn(e),n&4){try{zl(3,e,e.return),lh(3,e)}catch(v){Bt(e,e.return,v)}try{zl(5,e,e.return)}catch(v){Bt(e,e.return,v)}}break;case 1:_n(t,e),zn(e),n&512&&r!==null&&da(r,r.return);break;case 5:if(_n(t,e),zn(e),n&512&&r!==null&&da(r,r.return),e.flags&32){var i=e.stateNode;try{tc(i,"")}catch(v){Bt(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=r!==null?r.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&pE(i,s),Ap(a,o);var c=Ap(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?EE(i,d):u==="dangerouslySetInnerHTML"?vE(i,d):u==="children"?tc(i,d):nm(i,u,d,c)}switch(a){case"input":wp(i,s);break;case"textarea":gE(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Ea(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Ea(i,!!s.multiple,s.defaultValue,!0):Ea(i,!!s.multiple,s.multiple?[]:"",!1))}i[uc]=s}catch(v){Bt(e,e.return,v)}}break;case 6:if(_n(t,e),zn(e),n&4){if(e.stateNode===null)throw Error(oe(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(v){Bt(e,e.return,v)}}break;case 3:if(_n(t,e),zn(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{sc(t.containerInfo)}catch(v){Bt(e,e.return,v)}break;case 4:_n(t,e),zn(e);break;case 13:_n(t,e),zn(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lm=Ot())),n&4&&ry(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(vr=(c=vr)||u,_n(t,e),vr=c):_n(t,e),zn(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(we=e,u=e.child;u!==null;){for(d=we=u;we!==null;){switch(h=we,f=h.child,h.tag){case 0:case 11:case 14:case 15:zl(4,h,h.return);break;case 1:da(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Bt(n,r,v)}}break;case 5:da(h,h.return);break;case 22:if(h.memoizedState!==null){iy(d);continue}}f!==null?(f.return=h,we=f):iy(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=yE("display",o))}catch(v){Bt(e,e.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Bt(e,e.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_n(t,e),zn(e),n&4&&ry(e);break;case 21:break;default:_n(t,e),zn(e)}}function zn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(zC(r)){var n=r;break e}r=r.return}throw Error(oe(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(tc(i,""),n.flags&=-33);var s=ty(e);ng(e,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=ty(e);rg(e,a,o);break;default:throw Error(oe(161))}}catch(l){Bt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $3(e,t,r){we=e,WC(e)}function WC(e,t,r){for(var n=(e.mode&1)!==0;we!==null;){var i=we,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||uu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||vr;a=uu;var c=vr;if(uu=o,(vr=l)&&!c)for(we=i;we!==null;)o=we,l=o.child,o.tag===22&&o.memoizedState!==null?sy(i):l!==null?(l.return=o,we=l):sy(i);for(;s!==null;)we=s,WC(s),s=s.sibling;we=i,uu=a,vr=c}ny(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,we=s):ny(e)}}function ny(e){for(;we!==null;){var t=we;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vr||lh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vr)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:Pn(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Hv(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Hv(t,o,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&sc(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}vr||t.flags&512&&tg(t)}catch(h){Bt(t,t.return,h)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function iy(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function sy(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{lh(4,t)}catch(l){Bt(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){Bt(t,i,l)}}var s=t.return;try{tg(t)}catch(l){Bt(t,s,l)}break;case 5:var o=t.return;try{tg(t)}catch(l){Bt(t,o,l)}}}catch(l){Bt(t,t.return,l)}if(t===e){we=null;break}var a=t.sibling;if(a!==null){a.return=t.return,we=a;break}we=t.return}}var L3=Math.ceil,Ad=Oi.ReactCurrentDispatcher,Bm=Oi.ReactCurrentOwner,Cn=Oi.ReactCurrentBatchConfig,nt=0,rr=null,jt=null,hr=0,Kr=0,ha=$s(0),qt=0,mc=null,vo=0,ch=0,$m=0,Kl=null,$r=null,Lm=0,Ha=1/0,Ci=null,kd=!1,ig=null,Ts=null,du=!1,ps=null,xd=0,Gl=0,sg=null,Yu=-1,Qu=0;function xr(){return nt&6?Ot():Yu!==-1?Yu:Yu=Ot()}function Is(e){return e.mode&1?nt&2&&hr!==0?hr&-hr:E3.transition!==null?(Qu===0&&(Qu=_E()),Qu):(e=dt,e!==0||(e=window.event,e=e===void 0?16:ME(e.type)),e):1}function Hn(e,t,r,n){if(50<Gl)throw Gl=0,sg=null,Error(oe(185));Ac(e,r,n),(!(nt&2)||e!==rr)&&(e===rr&&(!(nt&2)&&(ch|=r),qt===4&&us(e,hr)),jr(e,n),r===1&&nt===0&&!(t.mode&1)&&(Ha=Ot()+500,sh&&Ls()))}function jr(e,t){var r=e.callbackNode;E6(e,t);var n=hd(e,e===rr?hr:0);if(n===0)r!==null&&pv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&pv(r),t===1)e.tag===0?y3(oy.bind(null,e)):nC(oy.bind(null,e)),p3(function(){!(nt&6)&&Ls()}),r=null;else{switch(DE(n)){case 1:r=lm;break;case 4:r=xE;break;case 16:r=dd;break;case 536870912:r=NE;break;default:r=dd}r=rS(r,YC.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function YC(e,t){if(Yu=-1,Qu=0,nt&6)throw Error(oe(327));var r=e.callbackNode;if(Ta()&&e.callbackNode!==r)return null;var n=hd(e,e===rr?hr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Nd(e,n);else{t=n;var i=nt;nt|=2;var s=XC();(rr!==e||hr!==t)&&(Ci=null,Ha=Ot()+500,lo(e,t));do try{U3();break}catch(a){QC(e,a)}while(!0);Sm(),Ad.current=s,nt=i,jt!==null?t=0:(rr=null,hr=0,t=qt)}if(t!==0){if(t===2&&(i=Dp(e),i!==0&&(n=i,t=og(e,i))),t===1)throw r=mc,lo(e,0),us(e,n),jr(e,Ot()),r;if(t===6)us(e,n);else{if(i=e.current.alternate,!(n&30)&&!O3(i)&&(t=Nd(e,n),t===2&&(s=Dp(e),s!==0&&(n=s,t=og(e,s))),t===1))throw r=mc,lo(e,0),us(e,n),jr(e,Ot()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(oe(345));case 2:Ks(e,$r,Ci);break;case 3:if(us(e,n),(n&130023424)===n&&(t=Lm+500-Ot(),10<t)){if(hd(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Hp(Ks.bind(null,e,$r,Ci),t);break}Ks(e,$r,Ci);break;case 4:if(us(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-Un(n);s=1<<o,o=t[o],o>i&&(i=o),n&=~s}if(n=i,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*L3(n/1960))-n,10<n){e.timeoutHandle=Hp(Ks.bind(null,e,$r,Ci),n);break}Ks(e,$r,Ci);break;case 5:Ks(e,$r,Ci);break;default:throw Error(oe(329))}}}return jr(e,Ot()),e.callbackNode===r?YC.bind(null,e):null}function og(e,t){var r=Kl;return e.current.memoizedState.isDehydrated&&(lo(e,t).flags|=256),e=Nd(e,t),e!==2&&(t=$r,$r=r,t!==null&&ag(t)),e}function ag(e){$r===null?$r=e:$r.push.apply($r,e)}function O3(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Fn(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function us(e,t){for(t&=~$m,t&=~ch,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Un(t),n=1<<r;e[r]=-1,t&=~n}}function oy(e){if(nt&6)throw Error(oe(327));Ta();var t=hd(e,0);if(!(t&1))return jr(e,Ot()),null;var r=Nd(e,t);if(e.tag!==0&&r===2){var n=Dp(e);n!==0&&(t=n,r=og(e,n))}if(r===1)throw r=mc,lo(e,0),us(e,t),jr(e,Ot()),r;if(r===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ks(e,$r,Ci),jr(e,Ot()),null}function Om(e,t){var r=nt;nt|=1;try{return e(t)}finally{nt=r,nt===0&&(Ha=Ot()+500,sh&&Ls())}}function yo(e){ps!==null&&ps.tag===0&&!(nt&6)&&Ta();var t=nt;nt|=1;var r=Cn.transition,n=dt;try{if(Cn.transition=null,dt=1,e)return e()}finally{dt=n,Cn.transition=r,nt=t,!(nt&6)&&Ls()}}function Mm(){Kr=ha.current,Tt(ha)}function lo(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,f3(r)),jt!==null)for(r=jt.return;r!==null;){var n=r;switch(ym(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&vd();break;case 3:Ma(),Tt(Hr),Tt(Cr),Am();break;case 5:Rm(n);break;case 4:Ma();break;case 13:Tt(kt);break;case 19:Tt(kt);break;case 10:wm(n.type._context);break;case 22:case 23:Mm()}r=r.return}if(rr=e,jt=e=Rs(e.current,null),hr=Kr=t,qt=0,mc=null,$m=ch=vo=0,$r=Kl=null,eo!==null){for(t=0;t<eo.length;t++)if(r=eo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}eo=null}return e}function QC(e,t){do{var r=jt;try{if(Sm(),Ku.current=Rd,Id){for(var n=xt.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Id=!1}if(mo=0,Jt=Vt=xt=null,ql=!1,fc=0,Bm.current=null,r===null||r.return===null){qt=1,mc=t,jt=null;break}e:{var s=e,o=r.return,a=r,l=t;if(t=hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Gv(o);if(f!==null){f.flags&=-257,Wv(f,o,a,s,t),f.mode&1&&Kv(s,c,t),t=f,l=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){Kv(s,c,t),Um();break e}l=Error(oe(426))}}else if(At&&a.mode&1){var E=Gv(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Wv(E,o,a,s,t),Em(Ua(l,a));break e}}s=l=Ua(l,a),qt!==4&&(qt=2),Kl===null?Kl=[s]:Kl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var p=PC(s,l,t);Uv(s,p);break e;case 1:a=l;var y=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Ts===null||!Ts.has(C)))){s.flags|=65536,t&=-t,s.lanes|=t;var b=BC(s,a,t);Uv(s,b);break e}}s=s.return}while(s!==null)}JC(r)}catch(x){t=x,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function XC(){var e=Ad.current;return Ad.current=Rd,e===null?Rd:e}function Um(){(qt===0||qt===3||qt===2)&&(qt=4),rr===null||!(vo&268435455)&&!(ch&268435455)||us(rr,hr)}function Nd(e,t){var r=nt;nt|=2;var n=XC();(rr!==e||hr!==t)&&(Ci=null,lo(e,t));do try{M3();break}catch(i){QC(e,i)}while(!0);if(Sm(),nt=r,Ad.current=n,jt!==null)throw Error(oe(261));return rr=null,hr=0,qt}function M3(){for(;jt!==null;)ZC(jt)}function U3(){for(;jt!==null&&!u6();)ZC(jt)}function ZC(e){var t=tS(e.alternate,e,Kr);e.memoizedProps=e.pendingProps,t===null?JC(e):jt=t,Bm.current=null}function JC(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=D3(r,t),r!==null){r.flags&=32767,jt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qt=6,jt=null;return}}else if(r=_3(r,t,Kr),r!==null){jt=r;return}if(t=t.sibling,t!==null){jt=t;return}jt=t=e}while(t!==null);qt===0&&(qt=5)}function Ks(e,t,r){var n=dt,i=Cn.transition;try{Cn.transition=null,dt=1,H3(e,t,r,n)}finally{Cn.transition=i,dt=n}return null}function H3(e,t,r,n){do Ta();while(ps!==null);if(nt&6)throw Error(oe(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(C6(e,s),e===rr&&(jt=rr=null,hr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||du||(du=!0,rS(dd,function(){return Ta(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Cn.transition,Cn.transition=null;var o=dt;dt=1;var a=nt;nt|=4,Bm.current=null,B3(e,r),GC(r,e),o3(Mp),fd=!!Op,Mp=Op=null,e.current=r,$3(r),d6(),nt=a,dt=o,Cn.transition=s}else e.current=r;if(du&&(du=!1,ps=e,xd=i),s=e.pendingLanes,s===0&&(Ts=null),p6(r.stateNode),jr(e,Ot()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(kd)throw kd=!1,e=ig,ig=null,e;return xd&1&&e.tag!==0&&Ta(),s=e.pendingLanes,s&1?e===sg?Gl++:(Gl=0,sg=e):Gl=0,Ls(),null}function Ta(){if(ps!==null){var e=DE(xd),t=Cn.transition,r=dt;try{if(Cn.transition=null,dt=16>e?16:e,ps===null)var n=!1;else{if(e=ps,ps=null,xd=0,nt&6)throw Error(oe(331));var i=nt;for(nt|=4,we=e.current;we!==null;){var s=we,o=s.child;if(we.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(we=c;we!==null;){var u=we;switch(u.tag){case 0:case 11:case 15:zl(8,u,s)}var d=u.child;if(d!==null)d.return=u,we=d;else for(;we!==null;){u=we;var h=u.sibling,f=u.return;if(qC(u),u===c){we=null;break}if(h!==null){h.return=f,we=h;break}we=f}}}var g=s.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var E=v.sibling;v.sibling=null,v=E}while(v!==null)}}we=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,we=o;else e:for(;we!==null;){if(s=we,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,we=p;break e}we=s.return}}var y=e.current;for(we=y;we!==null;){o=we;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,we=C;else e:for(o=y;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:lh(9,a)}}catch(x){Bt(a,a.return,x)}if(a===o){we=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,we=b;break e}we=a.return}}if(nt=i,Ls(),ui&&typeof ui.onPostCommitFiberRoot=="function")try{ui.onPostCommitFiberRoot(eh,e)}catch{}n=!0}return n}finally{dt=r,Cn.transition=t}}return!1}function ay(e,t,r){t=Ua(r,t),t=PC(e,t,1),e=bs(e,t,1),t=xr(),e!==null&&(Ac(e,1,t),jr(e,t))}function Bt(e,t,r){if(e.tag===3)ay(e,e,r);else for(;t!==null;){if(t.tag===3){ay(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ts===null||!Ts.has(n))){e=Ua(r,e),e=BC(t,e,1),t=bs(t,e,1),e=xr(),t!==null&&(Ac(t,1,e),jr(t,e));break}}t=t.return}}function F3(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xr(),e.pingedLanes|=e.suspendedLanes&r,rr===e&&(hr&r)===r&&(qt===4||qt===3&&(hr&130023424)===hr&&500>Ot()-Lm?lo(e,0):$m|=r),jr(e,t)}function eS(e,t){t===0&&(e.mode&1?(t=tu,tu<<=1,!(tu&130023424)&&(tu=4194304)):t=1);var r=xr();e=Di(e,t),e!==null&&(Ac(e,t,r),jr(e,r))}function j3(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),eS(e,r)}function V3(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(oe(314))}n!==null&&n.delete(t),eS(e,r)}var tS;tS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Hr.current)Ur=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ur=!1,N3(e,t,r);Ur=!!(e.flags&131072)}else Ur=!1,At&&t.flags&1048576&&iC(t,Cd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wu(e,t),e=t.pendingProps;var i=$a(t,Cr.current);ba(t,r),i=xm(null,t,n,e,i,r);var s=Nm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fr(n)?(s=!0,yd(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tm(t),i.updater=oh,t.stateNode=i,i._reactInternals=t,Gp(t,n,e,r),t=Qp(null,t,n,!0,s,r)):(t.tag=0,At&&s&&vm(t),Ar(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Wu(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=z3(n),e=Pn(n,e),i){case 0:t=Yp(null,t,n,e,r);break e;case 1:t=Xv(null,t,n,e,r);break e;case 11:t=Yv(null,t,n,e,r);break e;case 14:t=Qv(null,t,n,Pn(n.type,e),r);break e}throw Error(oe(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pn(n,i),Yp(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pn(n,i),Xv(e,t,n,i,r);case 3:e:{if(MC(t),e===null)throw Error(oe(387));n=t.pendingProps,s=t.memoizedState,i=s.element,lC(e,t),bd(t,n,null,r);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Ua(Error(oe(423)),t),t=Zv(e,t,n,r,i);break e}else if(n!==i){i=Ua(Error(oe(424)),t),t=Zv(e,t,n,r,i);break e}else for(Yr=ws(t.stateNode.containerInfo.firstChild),Xr=t,At=!0,Ln=null,r=hC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(La(),n===i){t=Pi(e,t,r);break e}Ar(e,t,n,r)}t=t.child}return t;case 5:return fC(t),e===null&&qp(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Up(n,i)?o=null:s!==null&&Up(n,s)&&(t.flags|=32),OC(e,t),Ar(e,t,o,r),t.child;case 6:return e===null&&qp(t),null;case 13:return UC(e,t,r);case 4:return Im(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Oa(t,null,n,r):Ar(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pn(n,i),Yv(e,t,n,i,r);case 7:return Ar(e,t,t.pendingProps,r),t.child;case 8:return Ar(e,t,t.pendingProps.children,r),t.child;case 12:return Ar(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Et(Sd,n._currentValue),n._currentValue=o,s!==null)if(Fn(s.value,o)){if(s.children===i.children&&!Hr.current){t=Pi(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=xi(-1,r&-r),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),zp(s.return,r,t),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),zp(o,r,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ar(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,ba(t,r),i=wn(i),n=n(i),t.flags|=1,Ar(e,t,n,r),t.child;case 14:return n=t.type,i=Pn(n,t.pendingProps),i=Pn(n.type,i),Qv(e,t,n,i,r);case 15:return $C(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:Pn(n,i),Wu(e,t),t.tag=1,Fr(n)?(e=!0,yd(t)):e=!1,ba(t,r),uC(t,n,i),Gp(t,n,i,r),Qp(null,t,n,!0,e,r);case 19:return HC(e,t,r);case 22:return LC(e,t,r)}throw Error(oe(156,t.tag))};function rS(e,t){return kE(e,t)}function q3(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(e,t,r,n){return new q3(e,t,r,n)}function Hm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function z3(e){if(typeof e=="function")return Hm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===sm)return 11;if(e===om)return 14}return 2}function Rs(e,t){var r=e.alternate;return r===null?(r=vn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Xu(e,t,r,n,i,s){var o=2;if(n=e,typeof e=="function")Hm(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ra:return co(r.children,i,s,t);case im:o=8,i|=8;break;case vp:return e=vn(12,r,t,i|2),e.elementType=vp,e.lanes=s,e;case yp:return e=vn(13,r,t,i),e.elementType=yp,e.lanes=s,e;case Ep:return e=vn(19,r,t,i),e.elementType=Ep,e.lanes=s,e;case dE:return uh(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case cE:o=10;break e;case uE:o=9;break e;case sm:o=11;break e;case om:o=14;break e;case os:o=16,n=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=vn(o,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function co(e,t,r,n){return e=vn(7,e,n,t),e.lanes=r,e}function uh(e,t,r,n){return e=vn(22,e,n,t),e.elementType=dE,e.lanes=r,e.stateNode={isHidden:!1},e}function wf(e,t,r){return e=vn(6,e,null,t),e.lanes=r,e}function bf(e,t,r){return t=vn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function K3(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=rf(0),this.expirationTimes=rf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fm(e,t,r,n,i,s,o,a,l){return e=new K3(e,t,r,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=vn(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tm(s),e}function G3(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function nS(e){if(!e)return Ns;e=e._reactInternals;e:{if(To(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var r=e.type;if(Fr(r))return rC(e,r,t)}return t}function iS(e,t,r,n,i,s,o,a,l){return e=Fm(r,n,!0,e,i,s,o,a,l),e.context=nS(null),r=e.current,n=xr(),i=Is(r),s=xi(n,i),s.callback=t??null,bs(r,s,i),e.current.lanes=i,Ac(e,i,n),jr(e,n),e}function dh(e,t,r,n){var i=t.current,s=xr(),o=Is(i);return r=nS(r),t.context===null?t.context=r:t.pendingContext=r,t=xi(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=bs(i,t,o),e!==null&&(Hn(e,i,o,s),zu(e,i,o)),o}function _d(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ly(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function jm(e,t){ly(e,t),(e=e.alternate)&&ly(e,t)}function W3(){return null}var sS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vm(e){this._internalRoot=e}hh.prototype.render=Vm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));dh(e,t,null,null)};hh.prototype.unmount=Vm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;yo(function(){dh(null,e,null,null)}),t[_i]=null}};function hh(e){this._internalRoot=e}hh.prototype.unstable_scheduleHydration=function(e){if(e){var t=$E();e={blockedOn:null,target:e,priority:t};for(var r=0;r<cs.length&&t!==0&&t<cs[r].priority;r++);cs.splice(r,0,e),r===0&&OE(e)}};function qm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cy(){}function Y3(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var c=_d(o);s.call(c)}}var o=iS(t,n,e,0,null,!1,!1,"",cy);return e._reactRootContainer=o,e[_i]=o.current,lc(e.nodeType===8?e.parentNode:e),yo(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var c=_d(l);a.call(c)}}var l=Fm(e,0,!1,null,null,!1,!1,"",cy);return e._reactRootContainer=l,e[_i]=l.current,lc(e.nodeType===8?e.parentNode:e),yo(function(){dh(t,l,r,n)}),l}function ph(e,t,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=_d(o);a.call(l)}}dh(t,o,e,i)}else o=Y3(r,t,e,i,n);return _d(o)}PE=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_l(t.pendingLanes);r!==0&&(cm(t,r|1),jr(t,Ot()),!(nt&6)&&(Ha=Ot()+500,Ls()))}break;case 13:yo(function(){var n=Di(e,1);if(n!==null){var i=xr();Hn(n,e,1,i)}}),jm(e,1)}};um=function(e){if(e.tag===13){var t=Di(e,134217728);if(t!==null){var r=xr();Hn(t,e,134217728,r)}jm(e,134217728)}};BE=function(e){if(e.tag===13){var t=Is(e),r=Di(e,t);if(r!==null){var n=xr();Hn(r,e,t,n)}jm(e,t)}};$E=function(){return dt};LE=function(e,t){var r=dt;try{return dt=e,t()}finally{dt=r}};xp=function(e,t,r){switch(t){case"input":if(wp(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ih(n);if(!i)throw Error(oe(90));fE(n),wp(n,i)}}}break;case"textarea":gE(e,r);break;case"select":t=r.value,t!=null&&Ea(e,!!r.multiple,t,!1)}};wE=Om;bE=yo;var Q3={usingClientEntryPoint:!1,Events:[xc,oa,ih,CE,SE,Om]},fl={findFiberByHostInstance:Js,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},X3={bundleType:fl.bundleType,version:fl.version,rendererPackageName:fl.rendererPackageName,rendererConfig:fl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=RE(e),e===null?null:e.stateNode},findFiberByHostInstance:fl.findFiberByHostInstance||W3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{eh=hu.inject(X3),ui=hu}catch{}}rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q3;rn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qm(t))throw Error(oe(200));return G3(e,t,null,r)};rn.createRoot=function(e,t){if(!qm(e))throw Error(oe(299));var r=!1,n="",i=sS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Fm(e,1,!1,null,null,r,!1,n,i),e[_i]=t.current,lc(e.nodeType===8?e.parentNode:e),new Vm(t)};rn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=RE(t),e=e===null?null:e.stateNode,e};rn.flushSync=function(e){return yo(e)};rn.hydrate=function(e,t,r){if(!fh(t))throw Error(oe(200));return ph(null,e,t,!0,r)};rn.hydrateRoot=function(e,t,r){if(!qm(e))throw Error(oe(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=sS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=iS(t,null,e,1,r??null,i,!1,s,o),e[_i]=t.current,lc(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new hh(t)};rn.render=function(e,t,r){if(!fh(t))throw Error(oe(200));return ph(null,e,t,!1,r)};rn.unmountComponentAtNode=function(e){if(!fh(e))throw Error(oe(40));return e._reactRootContainer?(yo(function(){ph(null,null,e,!1,function(){e._reactRootContainer=null,e[_i]=null})}),!0):!1};rn.unstable_batchedUpdates=Om;rn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!fh(r))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return ph(e,t,r,!1,n)};rn.version="18.2.0-next-9e3b772b8-20220608";function oS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oS)}catch(e){console.error(e)}}oS(),iE.exports=rn;var _c=iE.exports;const fa=Ic(_c),Z3=K2({__proto__:null,default:fa},[_c]);var uy=_c;gp.createRoot=uy.createRoot,gp.hydrateRoot=uy.hydrateRoot;function Wl(e,t,r){return t===void 0&&r===void 0?e:t!==void 0&&r===void 0?Math.max(e,t):Math.min(t===void 0&&r!==void 0?e:Math.max(e,t),r)}function Ia(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Zs(e){const t=S.useRef(e);return S.useEffect(()=>{t.current=e}),S.useMemo(()=>(...r)=>{var n;return(n=t.current)==null?void 0:n.call(t,...r)},[])}function gh(e,t){const r=Zs(e),n=S.useRef(0);return S.useEffect(()=>()=>window.clearTimeout(n.current),[]),S.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}const dy=["mousedown","touchstart"];function J3(e,t,r){const n=S.useRef();return S.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(r)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";r.every(c=>!!c&&!s.composedPath().includes(c))&&!a&&e()}else n.current&&!n.current.contains(o)&&e()};return(t||dy).forEach(s=>document.addEventListener(s,i)),()=>{(t||dy).forEach(s=>document.removeEventListener(s,i))}},[n,e,r]),n}function eI(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function tI(e,t){return typeof t=="boolean"?t:typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function rI(e,t,{getInitialValueInEffect:r}={getInitialValueInEffect:!0}){const[n,i]=S.useState(r?t:tI(e)),s=S.useRef();return S.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),eI(s.current,o=>i(o.matches))},[e]),n}const Za=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Eo(e,t){const r=S.useRef(!1);S.useEffect(()=>()=>{r.current=!1},[]),S.useEffect(()=>{if(r.current)return e();r.current=!0},t)}function aS({opened:e,shouldReturnFocus:t=!0}){const r=S.useRef(),n=()=>{var i;r.current&&"focus"in r.current&&typeof r.current.focus=="function"&&((i=r.current)==null||i.focus({preventScroll:!0}))};return Eo(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?r.current=document.activeElement:t&&(i=window.setTimeout(n,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),n}function nI(e,t="body > :not(script)"){const r=Ia(),n=Array.from(document.querySelectorAll(t)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",r),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{n.forEach(i=>{!i||r!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const iI=/input|select|textarea|button|object/,lS="a, input, select, textarea, button, object, [tabindex]";function sI(e){return e.style.display==="none"}function oI(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let r=e;for(;r&&!(r===document.body||r.nodeType===11);){if(sI(r))return!1;r=r.parentNode}return!0}function cS(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function lg(e){const t=e.nodeName.toLowerCase(),r=!Number.isNaN(cS(e));return(iI.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||r)&&oI(e)}function uS(e){const t=cS(e);return(Number.isNaN(t)||t>=0)&&lg(e)}function aI(e){return Array.from(e.querySelectorAll(lS)).filter(uS)}function lI(e,t){const r=aI(e);if(!r.length){t.preventDefault();return}const n=r[t.shiftKey?0:r.length-1],i=e.getRootNode();let s=n===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=r.filter(u=>u.getAttribute("type")==="radio"&&u.getAttribute("name")===o.getAttribute("name")).includes(n)),!s)return;t.preventDefault();const l=r[t.shiftKey?r.length-1:0];l&&l.focus()}function cI(e=!0){const t=S.useRef(),r=S.useRef(null),n=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(lS));o=a.find(uS)||a.find(lg)||null,!o&&lg(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=S.useCallback(s=>{if(e){if(s===null){r.current&&(r.current(),r.current=null);return}r.current=nI(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&n(s)}),t.current=s):t.current=null)}},[e]);return S.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const s=o=>{o.key==="Tab"&&t.current&&lI(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),r.current&&r.current()}},[e]),i}const uI=e=>(e+1)%1e6;function dI(){const[,e]=S.useReducer(uI,0);return e}const hI=A.useId||(()=>{});function fI(){const e=hI();return e?`mantine-${e.replace(/:/g,"")}`:""}function Io(e){const t=fI(),[r,n]=S.useState(t);return Za(()=>{n(Ia())},[]),typeof e=="string"?e:typeof window>"u"?t:r}function pI(e,t,r){S.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function dS(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function gI(...e){return t=>{e.forEach(r=>dS(r,t))}}function sn(...e){return S.useCallback(gI(...e),e)}function mI(e,t,r="ltr"){const n=S.useRef(null),i=S.useRef(!1),s=S.useRef(!1),o=S.useRef(0),[a,l]=S.useState(!1);return S.useEffect(()=>{i.current=!0},[]),S.useEffect(()=>{var y,C;const c=({x:b,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&n.current){n.current.style.userSelect="none";const m=n.current.getBoundingClientRect();if(m.width&&m.height){const k=Wl((b-m.left)/m.width,0,1);e({x:r==="ltr"?k:1-k,y:Wl((x-m.top)/m.height,0,1)})}}})},u=()=>{document.addEventListener("mousemove",v),document.addEventListener("mouseup",f),document.addEventListener("touchmove",p),document.addEventListener("touchend",f)},d=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",f),document.removeEventListener("touchmove",p),document.removeEventListener("touchend",f)},h=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),u())},f=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},g=b=>{h(),b.preventDefault(),v(b)},v=b=>c({x:b.clientX,y:b.clientY}),E=b=>{b.cancelable&&b.preventDefault(),h(),p(b)},p=b=>{b.cancelable&&b.preventDefault(),c({x:b.changedTouches[0].clientX,y:b.changedTouches[0].clientY})};return(y=n.current)==null||y.addEventListener("mousedown",g),(C=n.current)==null||C.addEventListener("touchstart",E,{passive:!1}),()=>{n.current&&(n.current.removeEventListener("mousedown",g),n.current.removeEventListener("touchstart",E))}},[r,e]),{ref:n,active:a}}function Co({value:e,defaultValue:t,finalValue:r,onChange:n=()=>{}}){const[i,s]=S.useState(t!==void 0?t:r),o=(a,...l)=>{s(a),n==null||n(a,...l)};return e!==void 0?[e,n,!0]:[i,o,!1]}function zm(e,t){return rI("(prefers-reduced-motion: reduce)",e,t)}function vI(e){let t=e,r=!1;const n=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),n.forEach(s=>s(t))},initialize(i){r||(t=i,r=!0)},subscribe(i){return n.add(i),()=>n.delete(i)}}}function yI(e){return S.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}const EI=()=>vI({notifications:[],queue:[],limit:5}),Ro=EI(),CI=(e=Ro)=>yI(e);function Ja(e,t){const r=e.getState(),n=t([...r.notifications,...r.queue]);e.setState({notifications:n.slice(0,r.limit),queue:n.slice(r.limit),limit:r.limit})}function SI(e,t=Ro){const r=e.id||Ia();return Ja(t,n=>e.id&&n.some(i=>i.id===e.id)?n:[...n,{...e,id:r}]),r}function hS(e,t=Ro){return Ja(t,r=>r.filter(n=>{var i;return n.id===e?((i=n.onClose)==null||i.call(n,n),!1):!0})),e}function wI(e,t=Ro){return Ja(t,r=>r.map(n=>n.id===e.id?{...n,...e}:n)),e.id}function bI(e=Ro){Ja(e,()=>[])}function TI(e=Ro){Ja(e,t=>t.slice(0,e.getState().limit))}const Ao={show:SI,hide:hS,update:wI,clean:bI,cleanQueue:TI,updateState:Ja};function cg(){return cg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cg.apply(this,arguments)}function fS(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ug(e,t){return ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ug(e,t)}function pS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ug(e,t)}const hy={disabled:!1},Dd=A.createContext(null);var II=function(t){return t.scrollTop},Pl="unmounted",Gs="exited",Ws="entering",Qo="entered",dg="exiting",Mi=function(e){pS(t,e);function t(n,i){var s;s=e.call(this,n,i)||this;var o=i,a=o&&!o.isMounting?n.enter:n.appear,l;return s.appearStatus=null,n.in?a?(l=Gs,s.appearStatus=Ws):l=Qo:n.unmountOnExit||n.mountOnEnter?l=Pl:l=Gs,s.state={status:l},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Pl?{status:Gs}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Ws&&o!==Qo&&(s=Ws):(o===Ws||o===Qo)&&(s=dg)}this.updateStatus(!1,s)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},r.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Ws){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:fa.findDOMNode(this);o&&II(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Gs&&this.setState({status:Pl})},r.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[fa.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||hy.disabled){this.safeSetState({status:Qo},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Ws},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:Qo},function(){s.props.onEntered(c,u)})})})},r.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:fa.findDOMNode(this);if(!s||hy.disabled){this.safeSetState({status:Gs},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:dg},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Gs},function(){i.props.onExited(a)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},r.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},r.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:fa.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var i=this.state.status;if(i===Pl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=fS(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return A.createElement(Dd.Provider,{value:null},typeof o=="function"?o(i,a):A.cloneElement(A.Children.only(o),a))},t}(A.Component);Mi.contextType=Dd;Mi.propTypes={};function Uo(){}Mi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Uo,onEntering:Uo,onEntered:Uo,onExit:Uo,onExiting:Uo,onExited:Uo};Mi.UNMOUNTED=Pl;Mi.EXITED=Gs;Mi.ENTERING=Ws;Mi.ENTERED=Qo;Mi.EXITING=dg;const RI=Mi;function AI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Km(e,t){var r=function(s){return t&&S.isValidElement(s)?t(s):s},n=Object.create(null);return e&&S.Children.map(e,function(i){return i}).forEach(function(i){n[i.key]=r(i)}),n}function kI(e,t){e=e||{},t=t||{};function r(u){return u in t?t[u]:e[u]}var n=Object.create(null),i=[];for(var s in e)s in t?i.length&&(n[s]=i,i=[]):i.push(s);var o,a={};for(var l in t){if(n[l])for(o=0;o<n[l].length;o++){var c=n[l][o];a[n[l][o]]=r(c)}a[l]=r(l)}for(o=0;o<i.length;o++)a[i[o]]=r(i[o]);return a}function ro(e,t,r){return r[t]!=null?r[t]:e.props[t]}function xI(e,t){return Km(e.children,function(r){return S.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:ro(r,"appear",e),enter:ro(r,"enter",e),exit:ro(r,"exit",e)})})}function NI(e,t,r){var n=Km(e.children),i=kI(t,n);return Object.keys(i).forEach(function(s){var o=i[s];if(S.isValidElement(o)){var a=s in t,l=s in n,c=t[s],u=S.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=S.cloneElement(o,{onExited:r.bind(null,o),in:!0,exit:ro(o,"exit",e),enter:ro(o,"enter",e)}):!l&&a&&!u?i[s]=S.cloneElement(o,{in:!1}):l&&a&&S.isValidElement(c)&&(i[s]=S.cloneElement(o,{onExited:r.bind(null,o),in:c.props.in,exit:ro(o,"exit",e),enter:ro(o,"enter",e)}))}}),i}var _I=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},DI={component:"div",childFactory:function(t){return t}},Gm=function(e){pS(t,e);function t(n,i){var s;s=e.call(this,n,i)||this;var o=s.handleExited.bind(AI(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?xI(i,a):NI(i,o,a),firstRender:!1}},r.handleExited=function(i,s){var o=Km(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=cg({},a.children);return delete l[i.key],{children:l}}))},r.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=fS(i,["component","childFactory"]),l=this.state.contextValue,c=_I(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?A.createElement(Dd.Provider,{value:l},c):A.createElement(Dd.Provider,{value:l},A.createElement(s,a,c))},t}(A.Component);Gm.propTypes={};Gm.defaultProps=DI;const PI=Gm;var oi=function(){return oi=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},oi.apply(this,arguments)};function gS(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function BI(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,s;n<i;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}var Zu="right-scroll-bar-position",Ju="width-before-scroll-bar",$I="with-scroll-bars-hidden",LI="--removed-body-scroll-bar-size";function Tf(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function OI(e,t){var r=S.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var MI=typeof window<"u"?S.useLayoutEffect:S.useEffect,fy=new WeakMap;function UI(e,t){var r=OI(t||null,function(n){return e.forEach(function(i){return Tf(i,n)})});return MI(function(){var n=fy.get(r);if(n){var i=new Set(n),s=new Set(e),o=r.current;i.forEach(function(a){s.has(a)||Tf(a,null)}),s.forEach(function(a){i.has(a)||Tf(a,o)})}fy.set(r,e)},[e]),r}function HI(e){return e}function FI(e,t){t===void 0&&(t=HI);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(s){var o=t(s,n);return r.push(o),function(){r=r.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(n=!0;r.length;){var o=r;r=[],o.forEach(s)}r={push:function(a){return s(a)},filter:function(){return r}}},assignMedium:function(s){n=!0;var o=[];if(r.length){var a=r;r=[],a.forEach(s),o=r}var l=function(){var u=o;o=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),r={push:function(u){o.push(u),c()},filter:function(u){return o=o.filter(u),r}}}};return i}function jI(e){e===void 0&&(e={});var t=FI(null);return t.options=oi({async:!0,ssr:!1},e),t}var mS=function(e){var t=e.sideCar,r=gS(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return S.createElement(n,oi({},r))};mS.isSideCarExport=!0;function VI(e,t){return e.useMedium(t),mS}var vS=jI(),If=function(){},mh=S.forwardRef(function(e,t){var r=S.useRef(null),n=S.useState({onScrollCapture:If,onWheelCapture:If,onTouchMoveCapture:If}),i=n[0],s=n[1],o=e.forwardProps,a=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,f=e.noIsolation,g=e.inert,v=e.allowPinchZoom,E=e.as,p=E===void 0?"div":E,y=e.gapMode,C=gS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=h,x=UI([r,t]),m=oi(oi({},C),i);return S.createElement(S.Fragment,null,u&&S.createElement(b,{sideCar:vS,removeScrollBar:c,shards:d,noIsolation:f,inert:g,setCallbacks:s,allowPinchZoom:!!v,lockRef:r,gapMode:y}),o?S.cloneElement(S.Children.only(a),oi(oi({},m),{ref:x})):S.createElement(p,oi({},m,{className:l,ref:x}),a))});mh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};mh.classNames={fullWidth:Ju,zeroRight:Zu};var qI=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function zI(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=qI();return t&&e.setAttribute("nonce",t),e}function KI(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function GI(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var WI=function(){var e=0,t=null;return{add:function(r){e==0&&(t=zI())&&(KI(t,r),GI(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},YI=function(){var e=WI();return function(t,r){S.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},yS=function(){var e=YI(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},QI={left:0,top:0,right:0,gap:0},Rf=function(e){return parseInt(e||"",10)||0},XI=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Rf(r),Rf(n),Rf(i)]},ZI=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return QI;var t=XI(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},JI=yS(),Ra="data-scroll-locked",e5=function(e,t,r,n){var i=e.left,s=e.top,o=e.right,a=e.gap;return r===void 0&&(r="margin"),`
  .`.concat($I,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(a,"px ").concat(n,`;
  }
  body[`).concat(Ra,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(a,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Zu,` {
    right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Ju,` {
    margin-right: `).concat(a,"px ").concat(n,`;
  }
  
  .`).concat(Zu," .").concat(Zu,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Ju," .").concat(Ju,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Ra,`] {
    `).concat(LI,": ").concat(a,`px;
  }
`)},py=function(){var e=parseInt(document.body.getAttribute(Ra)||"0",10);return isFinite(e)?e:0},t5=function(){S.useEffect(function(){return document.body.setAttribute(Ra,(py()+1).toString()),function(){var e=py()-1;e<=0?document.body.removeAttribute(Ra):document.body.setAttribute(Ra,e.toString())}},[])},r5=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;t5();var s=S.useMemo(function(){return ZI(i)},[i]);return S.createElement(JI,{styles:e5(s,!t,i,r?"":"!important")})},hg=!1;if(typeof window<"u")try{var fu=Object.defineProperty({},"passive",{get:function(){return hg=!0,!0}});window.addEventListener("test",fu,fu),window.removeEventListener("test",fu,fu)}catch{hg=!1}var Ho=hg?{passive:!1}:!1,n5=function(e){return e.tagName==="TEXTAREA"},ES=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!n5(e)&&r[t]==="visible")},i5=function(e){return ES(e,"overflowY")},s5=function(e){return ES(e,"overflowX")},gy=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=CS(e,n);if(i){var s=SS(e,n),o=s[1],a=s[2];if(o>a)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},o5=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},a5=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},CS=function(e,t){return e==="v"?i5(t):s5(t)},SS=function(e,t){return e==="v"?o5(t):a5(t)},l5=function(e,t){return e==="h"&&t==="rtl"?-1:1},c5=function(e,t,r,n,i){var s=l5(e,window.getComputedStyle(t).direction),o=s*n,a=r.target,l=t.contains(a),c=!1,u=o>0,d=0,h=0;do{var f=SS(e,a),g=f[0],v=f[1],E=f[2],p=v-E-s*g;(g||p)&&CS(e,a)&&(d+=p,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(u&&(i&&Math.abs(d)<1||!i&&o>d)||!u&&(i&&Math.abs(h)<1||!i&&-o>h))&&(c=!0),c},pu=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},my=function(e){return[e.deltaX,e.deltaY]},vy=function(e){return e&&"current"in e?e.current:e},u5=function(e,t){return e[0]===t[0]&&e[1]===t[1]},d5=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},h5=0,Fo=[];function f5(e){var t=S.useRef([]),r=S.useRef([0,0]),n=S.useRef(),i=S.useState(h5++)[0],s=S.useState(yS)[0],o=S.useRef(e);S.useEffect(function(){o.current=e},[e]),S.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var v=BI([e.lockRef.current],(e.shards||[]).map(vy),!0).filter(Boolean);return v.forEach(function(E){return E.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(E){return E.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=S.useCallback(function(v,E){if("touches"in v&&v.touches.length===2)return!o.current.allowPinchZoom;var p=pu(v),y=r.current,C="deltaX"in v?v.deltaX:y[0]-p[0],b="deltaY"in v?v.deltaY:y[1]-p[1],x,m=v.target,k=Math.abs(C)>Math.abs(b)?"h":"v";if("touches"in v&&k==="h"&&m.type==="range")return!1;var N=gy(k,m);if(!N)return!0;if(N?x=k:(x=k==="v"?"h":"v",N=gy(k,m)),!N)return!1;if(!n.current&&"changedTouches"in v&&(C||b)&&(n.current=x),!x)return!0;var H=n.current||x;return c5(H,E,v,H==="h"?C:b,!0)},[]),l=S.useCallback(function(v){var E=v;if(!(!Fo.length||Fo[Fo.length-1]!==s)){var p="deltaY"in E?my(E):pu(E),y=t.current.filter(function(x){return x.name===E.type&&(x.target===E.target||E.target===x.shadowParent)&&u5(x.delta,p)})[0];if(y&&y.should){E.cancelable&&E.preventDefault();return}if(!y){var C=(o.current.shards||[]).map(vy).filter(Boolean).filter(function(x){return x.contains(E.target)}),b=C.length>0?a(E,C[0]):!o.current.noIsolation;b&&E.cancelable&&E.preventDefault()}}},[]),c=S.useCallback(function(v,E,p,y){var C={name:v,delta:E,target:p,should:y,shadowParent:p5(p)};t.current.push(C),setTimeout(function(){t.current=t.current.filter(function(b){return b!==C})},1)},[]),u=S.useCallback(function(v){r.current=pu(v),n.current=void 0},[]),d=S.useCallback(function(v){c(v.type,my(v),v.target,a(v,e.lockRef.current))},[]),h=S.useCallback(function(v){c(v.type,pu(v),v.target,a(v,e.lockRef.current))},[]);S.useEffect(function(){return Fo.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ho),document.addEventListener("touchmove",l,Ho),document.addEventListener("touchstart",u,Ho),function(){Fo=Fo.filter(function(v){return v!==s}),document.removeEventListener("wheel",l,Ho),document.removeEventListener("touchmove",l,Ho),document.removeEventListener("touchstart",u,Ho)}},[]);var f=e.removeScrollBar,g=e.inert;return S.createElement(S.Fragment,null,g?S.createElement(s,{styles:d5(i)}):null,f?S.createElement(r5,{gapMode:e.gapMode}):null)}function p5(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const g5=VI(vS,f5);var wS=S.forwardRef(function(e,t){return S.createElement(mh,oi({},e,{ref:t,sideCar:g5}))});wS.classNames=mh.classNames;const m5=wS;function Er(e){return Object.keys(e)}function Af(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Wm(e,t){const r={...e},n=t;return Af(e)&&Af(t)&&Object.keys(t).forEach(i=>{Af(n[i])&&i in e?r[i]=Wm(r[i],n[i]):r[i]=n[i]}),r}function v5(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function y5(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function fg(e){const t=y5(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function kf(e){return`calc(${e} * var(--mantine-scale))`}function bS(e,{shouldScale:t=!1}={}){function r(n){if(n===0||n==="0")return`0${e}`;if(typeof n=="number"){const i=`${n/16}${e}`;return t?kf(i):i}if(typeof n=="string"){if(n.startsWith("calc(")||n.startsWith("var(")||n.startsWith("clamp("))return n;if(n.includes(" "))return n.split(" ").map(s=>r(s)).join(" ");if(n.includes(e))return t?kf(n):n;const i=n.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?kf(s):s}}return n}return r}const Z=bS("rem",{shouldScale:!0}),yy=bS("em");function Dc(e){return Object.keys(e).reduce((t,r)=>(e[r]!==void 0&&(t[r]=e[r]),t),{})}function TS(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Pc(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==A.Fragment:!1}function Ui(e){const t=S.createContext(null);return[({children:i,value:s})=>A.createElement(t.Provider,{value:s},i),()=>{const i=S.useContext(t);if(i===null)throw new Error(e);return i}]}function E5(e=null){const t=S.createContext(e);return[({children:i,value:s})=>A.createElement(t.Provider,{value:s},i),()=>S.useContext(t)]}const C5={app:100,modal:200,popover:300,overlay:400,max:9999};function ko(e){return C5[e]}const S5=()=>{};function w5(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||S5:r=>{var n;r.key==="Escape"&&(e(r),(n=t.onTrigger)==null||n.call(t))}}function It(e,t="size",r=!0){if(e!==void 0)return TS(e)?r?Z(e):e:`var(--${t}-${e})`}function So(e){return It(e,"mantine-spacing")}function In(e){return e===void 0?"var(--mantine-radius-default)":It(e,"mantine-radius")}function Zr(e){return It(e,"mantine-font-size")}function b5(e){return It(e,"mantine-line-height",!1)}function Ym(e){if(e)return It(e,"mantine-shadow",!1)}function T5(e,t){return e in t.breakpoints?fg(t.breakpoints[e]):fg(e)}function IS(e,t){const r=e.map(n=>({value:n,px:T5(n,t)}));return r.sort((n,i)=>n.px-i.px),r}function Bl(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function I5(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function R5(e){function t(n){const i=Object.keys(n).reduce((s,o)=>(s[`${e}:${o}`]=a=>n[o](a.detail),s),{});Za(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function r(n){return(...i)=>I5(`${e}:${String(n)}`,i[0])}return[t,r]}function RS(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=RS(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pr(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=RS(e))&&(n&&(n+=" "),n+=t);return n}const A5={};function k5(e){const t={};return e.forEach(r=>{Object.entries(r).forEach(([n,i])=>{t[n]?t[n]=pr(t[n],i):t[n]=i})}),t}function vh({theme:e,classNames:t,props:r,stylesCtx:n}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,r,n):o||A5);return k5(s)}function Pd({theme:e,styles:t,props:r,stylesCtx:n}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,r,n)}:{...s,...o},{})}const AS=S.createContext(null);function Bc(){const e=S.useContext(AS);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function x5(){return Bc().cssVariablesResolver}function N5(){return Bc().classNamesPrefix}function Qm(){return Bc().getStyleNonce}function _5(){return Bc().withStaticClasses}function D5(){return Bc().headless}function P5(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function B5(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const r=parseInt(t,16),n=r>>16&255,i=r>>8&255,s=r&255;return{r:n,g:i,b:s,a:1}}function $5(e){const[t,r,n,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:r,b:n,a:i||1}}function L5(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,r=e.match(t);if(!r)return{r:0,g:0,b:0,a:1};const n=parseInt(r[1],10),i=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,o=r[5]?parseFloat(r[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=n/60,c=a*(1-Math.abs(l%2-1)),u=s-a/2;let d,h,f;return l>=0&&l<1?(d=a,h=c,f=0):l>=1&&l<2?(d=c,h=a,f=0):l>=2&&l<3?(d=0,h=a,f=c):l>=3&&l<4?(d=0,h=c,f=a):l>=4&&l<5?(d=c,h=0,f=a):(d=a,h=0,f=c),{r:Math.round((d+u)*255),g:Math.round((h+u)*255),b:Math.round((f+u)*255),a:o||1}}function Xm(e){return P5(e)?B5(e):e.startsWith("rgb")?$5(e):e.startsWith("hsl")?L5(e):{r:0,g:0,b:0,a:1}}function gu(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r,g:n,b:i,a:s}=Xm(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(r)}, ${a(n)}, ${a(i)}, ${s})`}function Bd(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function xf(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function O5(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function M5(e){if(e.startsWith("oklch("))return(O5(e)||0)/100;const{r:t,g:r,b:n}=Xm(e),i=t/255,s=r/255,o=n/255,a=xf(i),l=xf(s),c=xf(o);return .2126*a+.7152*l+.0722*c}function pl(e,t=.179){return e.startsWith("var(")?!1:M5(e)>t}function el({color:e,theme:t,colorScheme:r}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:r==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pl(r==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:r==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:pl(r==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:pl(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[n,i]=e.split("."),s=i?Number(i):void 0,o=n in t.colors;if(o){const a=s!==void 0?t.colors[n][s]:t.colors[n][Bd(t,r||"light")];return{color:n,value:a,shade:s,isThemeColor:o,isLight:pl(a,t.luminanceThreshold),variable:i?`--mantine-color-${n}-${s}`:`--mantine-color-${n}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:pl(e,t.luminanceThreshold),shade:s,variable:void 0}}function Sn(e,t){const r=el({color:e||t.primaryColor,theme:t});return r.variable?`var(${r.variable})`:e}function pg(e,t){const r={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},n=Sn(r.from,t),i=Sn(r.to,t);return`linear-gradient(${r.deg}deg, ${n} 0%, ${i} 100%)`}function kr(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r,g:n,b:i}=Xm(e);return`rgba(${r}, ${n}, ${i}, ${t})`}const U5=({color:e,theme:t,variant:r,gradient:n,autoContrast:i})=>{const s=el({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(r==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Z(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Z(1)} solid transparent`}:{background:e,hover:gu(e,.1),color:a,border:`${Z(1)} solid transparent`}}if(r==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Z(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:kr(a,.1),hover:kr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Z(1)} solid transparent`}}return{background:kr(e,.1),hover:kr(e,.12),color:e,border:`${Z(1)} solid transparent`}}if(r==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Z(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:kr(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Z(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:kr(e,.05),color:e,border:`${Z(1)} solid ${e}`};if(r==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Z(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:kr(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Z(1)} solid transparent`}}return{background:"transparent",hover:kr(e,.12),color:e,border:`${Z(1)} solid transparent`}}return r==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Z(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Z(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Z(1)} solid transparent`}:r==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:gu(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Z(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gu(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Z(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gu(t.white,.01),color:e,border:`${Z(1)} solid transparent`}:r==="gradient"?{background:pg(n,t),hover:pg(n,t),color:"var(--mantine-color-white)",border:"none"}:r==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Z(1)} solid var(--mantine-color-default-border)`}:{}},H5={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Ey="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",Zm={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:H5,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:U5,autoContrast:!1,luminanceThreshold:.3,fontFamily:Ey,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Ey,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Z(34),lineHeight:"1.3"},h2:{fontSize:Z(26),lineHeight:"1.35"},h3:{fontSize:Z(22),lineHeight:"1.4"},h4:{fontSize:Z(18),lineHeight:"1.45"},h5:{fontSize:Z(16),lineHeight:"1.5"},h6:{fontSize:Z(14),lineHeight:"1.5"}}},fontSizes:{xs:Z(12),sm:Z(14),md:Z(16),lg:Z(18),xl:Z(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Z(2),sm:Z(4),md:Z(8),lg:Z(16),xl:Z(32)},spacing:{xs:Z(10),sm:Z(12),md:Z(16),lg:Z(20),xl:Z(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), 0 ${Z(1)} ${Z(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(10)} ${Z(15)} ${Z(-5)}, rgba(0, 0, 0, 0.04) 0 ${Z(7)} ${Z(7)} ${Z(-5)}`,md:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(20)} ${Z(25)} ${Z(-5)}, rgba(0, 0, 0, 0.04) 0 ${Z(10)} ${Z(10)} ${Z(-5)}`,lg:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(28)} ${Z(23)} ${Z(-7)}, rgba(0, 0, 0, 0.04) 0 ${Z(12)} ${Z(12)} ${Z(-7)}`,xl:`0 ${Z(1)} ${Z(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Z(36)} ${Z(28)} ${Z(-7)}, rgba(0, 0, 0, 0.04) 0 ${Z(17)} ${Z(17)} ${Z(-7)}`},other:{},components:{}};function Cy(e){return e==="auto"||e==="dark"||e==="light"}function F5({key:e="mantine-color-scheme-value"}={}){let t;return{get:r=>{if(typeof window>"u")return r;try{const n=window.localStorage.getItem(e);return Cy(n)?n:r}catch{return r}},set:r=>{try{window.localStorage.setItem(e,r)}catch(n){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",n)}},subscribe:r=>{t=n=>{n.storageArea===window.localStorage&&n.key===e&&Cy(n.newValue)&&r(n.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const j5="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Sy="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Nf(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function wy(e){if(!(e.primaryColor in e.colors))throw new Error(j5);if(typeof e.primaryShade=="object"&&(!Nf(e.primaryShade.dark)||!Nf(e.primaryShade.light)))throw new Error(Sy);if(typeof e.primaryShade=="number"&&!Nf(e.primaryShade))throw new Error(Sy)}function V5(e,t){var n;if(!t)return wy(e),e;const r=Wm(e,t);return t.fontFamily&&!((n=t.headings)!=null&&n.fontFamily)&&(r.headings.fontFamily=t.fontFamily),wy(r),r}const Jm=S.createContext(null),q5=()=>S.useContext(Jm)||Zm;function qn(){const e=S.useContext(Jm);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function kS({theme:e,children:t,inherit:r=!0}){const n=q5(),i=S.useMemo(()=>V5(r?n:Zm,e),[e,n,r]);return A.createElement(Jm.Provider,{value:i},t)}kS.displayName="@mantine/core/MantineThemeProvider";function z5(){const e=qn(),t=Qm(),r=Er(e.breakpoints).reduce((n,i)=>{const s=e.breakpoints[i].includes("px"),o=fg(e.breakpoints[i]),a=s?`${o-.1}px`:yy(o-.1),l=s?`${o}px`:yy(o);return`${n}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return A.createElement("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:r}})}function _f(e){return Object.entries(e).map(([t,r])=>`${t}: ${r};`).join("")}function Df(e,t){return(Array.isArray(e)?e:[e]).reduce((n,i)=>`${i}{${n}}`,t)}function K5(e,t){const r=_f(e.variables),n=r?Df(t,r):"",i=_f(e.dark),s=i?Df(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=_f(e.light),a=o?Df(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${n}${s}${a}`}function xS({color:e,theme:t,autoContrast:r}){return(typeof r=="boolean"?r:t.autoContrast)&&el({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function by(e,t){return xS({color:e.colors[e.primaryColor][Bd(e,t)],theme:e,autoContrast:null})}function jo(e,t,r){Er(t).forEach(n=>Object.assign(e,{[`--mantine-${r}-${n}`]:t[n]}))}const NS=e=>{const t=Bd(e,"dark"),r=Bd(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Z(e.defaultRadius),i={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-color-scheme":"light dark","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":by(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${r})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)"},dark:{"--mantine-primary-color-contrast":by(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)"}};jo(i.variables,e.breakpoints,"breakpoint"),jo(i.variables,e.spacing,"spacing"),jo(i.variables,e.fontSizes,"font-size"),jo(i.variables,e.lineHeights,"line-height"),jo(i.variables,e.shadows,"shadow"),jo(i.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((o,a)=>{i.variables[`--mantine-primary-color-${a}`]=`var(--mantine-color-${e.primaryColor}-${a})`}),Er(e.colors).forEach(o=>{e.colors[o].forEach((c,u)=>{i.variables[`--mantine-color-${o}-${u}`]=c});const a=`var(--mantine-color-${o}-${r===9?8:r+1})`,l=`var(--mantine-color-${o}-${t===9?8:t+1})`;i.light["--mantine-color-dimmed"]="var(--mantine-color-gray-6)",i.light[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-filled)`,i.light[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-filled-hover`]=a,i.light[`--mantine-color-${o}-light`]=kr(e.colors[o][r],.1),i.light[`--mantine-color-${o}-light-hover`]=kr(e.colors[o][r],.12),i.light[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${r})`,i.light[`--mantine-color-${o}-outline-hover`]=kr(e.colors[o][r],.05),i.dark["--mantine-color-dimmed"]="var(--mantine-color-dark-2)",i.dark[`--mantine-color-${o}-text`]=`var(--mantine-color-${o}-4)`,i.dark[`--mantine-color-${o}-filled`]=`var(--mantine-color-${o}-${t})`,i.dark[`--mantine-color-${o}-filled-hover`]=l,i.dark[`--mantine-color-${o}-light`]=kr(e.colors[o][Math.max(0,t-2)],.15),i.dark[`--mantine-color-${o}-light-hover`]=kr(e.colors[o][Math.max(0,t-2)],.2),i.dark[`--mantine-color-${o}-light-color`]=`var(--mantine-color-${o}-${Math.max(t-5,0)})`,i.dark[`--mantine-color-${o}-outline`]=`var(--mantine-color-${o}-${Math.max(t-4,0)})`,i.dark[`--mantine-color-${o}-outline-hover`]=kr(e.colors[o][Math.max(t-4,0)],.05)});const s=e.headings.sizes;return Er(s).forEach(o=>{i.variables[`--mantine-${o}-font-size`]=s[o].fontSize,i.variables[`--mantine-${o}-line-height`]=s[o].lineHeight,i.variables[`--mantine-${o}-font-weight`]=s[o].fontWeight||e.headings.fontWeight}),i};function G5({theme:e,generator:t}){const r=NS(e),n=t==null?void 0:t(e);return n?Wm(r,n):r}const Pf=NS(Zm);function W5(e){const t={variables:{},light:{},dark:{}};return Er(e.variables).forEach(r=>{Pf.variables[r]!==e.variables[r]&&(t.variables[r]=e.variables[r])}),Er(e.light).forEach(r=>{Pf.light[r]!==e.light[r]&&(t.light[r]=e.light[r])}),Er(e.dark).forEach(r=>{Pf.dark[r]!==e.dark[r]&&(t.dark[r]=e.dark[r])}),t}function Y5(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function _S({cssVariablesSelector:e,deduplicateCssVariables:t}){const r=qn(),n=Qm(),i=x5(),s=G5({theme:r,generator:i}),o=e===":root"&&t,a=o?W5(s):s,l=K5(a,e);return l?A.createElement("style",{"data-mantine-styles":!0,nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:`${l}${o?"":Y5(e)}`}}):null}_S.displayName="@mantine/CssVariables";function Q5(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Vo(e,t){var n;const r=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(n=t())==null||n.setAttribute("data-mantine-color-scheme",r)}function X5({manager:e,defaultColorScheme:t,getRootElement:r,forceColorScheme:n}){const i=S.useRef(),[s,o]=S.useState(()=>e.get(t)),a=n||s,l=S.useCallback(u=>{n||(Vo(u,r),o(u),e.set(u))},[e.set,a,n]),c=S.useCallback(()=>{o(t),Vo(t,r),e.clear()},[e.clear,t]);return S.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Za(()=>{Vo(e.get(t),r)},[]),S.useEffect(()=>{var d;if(n)return Vo(n,r),()=>{};n===void 0&&Vo(s,r),i.current=window.matchMedia("(prefers-color-scheme: dark)");const u=h=>{s==="auto"&&Vo(h.matches?"dark":"light",r)};return(d=i.current)==null||d.addEventListener("change",u),()=>{var h;return(h=i.current)==null?void 0:h.removeEventListener("change",u)}},[s,n]),{colorScheme:a,setColorScheme:l,clearColorScheme:c}}function Z5({respectReducedMotion:e,getRootElement:t}){Za(()=>{var r;e&&((r=t())==null||r.setAttribute("data-respect-reduced-motion","true"))},[e])}Q5();function DS({theme:e,children:t,getStyleNonce:r,withStaticClasses:n=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:c=F5(),defaultColorScheme:u="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:h,forceColorScheme:f}){const{colorScheme:g,setColorScheme:v,clearColorScheme:E}=X5({defaultColorScheme:u,forceColorScheme:f,manager:c,getRootElement:d});return Z5({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),A.createElement(AS.Provider,{value:{colorScheme:g,setColorScheme:v,clearColorScheme:E,getRootElement:d,classNamesPrefix:l,getStyleNonce:r,cssVariablesResolver:h,cssVariablesSelector:a,withStaticClasses:n}},A.createElement(kS,{theme:e},o&&A.createElement(_S,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&A.createElement(z5,null),t))}DS.displayName="@mantine/core/MantineProvider";function PS({classNames:e,styles:t,props:r,stylesCtx:n}){const i=qn();return{resolvedClassNames:vh({theme:i,classNames:e,props:r,stylesCtx:n||void 0}),resolvedStyles:Pd({theme:i,styles:t,props:r,stylesCtx:n||void 0})}}const J5={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function e4({theme:e,options:t,unstyled:r}){return pr((t==null?void 0:t.focusable)&&!r&&(e.focusClassName||J5[e.focusRing]),(t==null?void 0:t.active)&&!r&&e.activeClassName)}function t4({selector:e,stylesCtx:t,options:r,props:n,theme:i}){return vh({theme:i,classNames:r==null?void 0:r.classNames,props:(r==null?void 0:r.props)||n,stylesCtx:t})[e]}function r4({selector:e,stylesCtx:t,theme:r,classNames:n,props:i}){return vh({theme:r,classNames:n,props:i,stylesCtx:t})[e]}function n4({rootSelector:e,selector:t,className:r}){return e===t?r:void 0}function i4({selector:e,classes:t,unstyled:r}){return r?void 0:t[e]}function s4({themeName:e,classNamesPrefix:t,selector:r,withStaticClass:n}){return n===!1?[]:e.map(i=>`${t}-${i}-${r}`)}function o4({themeName:e,theme:t,selector:r,props:n,stylesCtx:i}){return e.map(s=>{var o,a;return(a=vh({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:n,stylesCtx:i}))==null?void 0:a[r]})}function a4({options:e,classes:t,selector:r,unstyled:n}){return e!=null&&e.variant&&!n?t[`${r}--${e.variant}`]:void 0}function l4({theme:e,options:t,themeName:r,selector:n,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:c,props:u,stylesCtx:d,withStaticClasses:h,headless:f}){return pr(e4({theme:e,options:t,unstyled:a||f}),o4({theme:e,themeName:r,selector:n,props:u,stylesCtx:d}),a4({options:t,classes:o,selector:n,unstyled:a}),r4({selector:n,stylesCtx:d,theme:e,classNames:s,props:u}),t4({selector:n,stylesCtx:d,options:t,props:u,theme:e}),n4({rootSelector:c,selector:n,className:l}),i4({selector:n,classes:o,unstyled:a||f}),h&&!f&&s4({themeName:r,classNamesPrefix:i,selector:n,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function c4({theme:e,themeName:t,props:r,stylesCtx:n,selector:i}){return t.map(s=>{var o;return Pd({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:r,stylesCtx:n})[i]}).reduce((s,o)=>({...s,...o}),{})}function gg({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...gg({style:n,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function u4(e){return e.reduce((t,r)=>(r&&Object.keys(r).forEach(n=>{t[n]={...t[n],...Dc(r[n])}}),t),{})}function d4({vars:e,varsResolver:t,theme:r,props:n,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=u4([a?{}:t==null?void 0:t(r,n,i),...o.map(c=>{var u,d,h;return(h=(d=(u=r.components)==null?void 0:u[c])==null?void 0:d.vars)==null?void 0:h.call(d,r,n,i)}),e==null?void 0:e(r,n,i)]))==null?void 0:l[s]}function h4({theme:e,themeName:t,selector:r,options:n,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:c,varsResolver:u,headless:d}){return{...c4({theme:e,themeName:t,props:i,stylesCtx:s,selector:r}),...Pd({theme:e,styles:a,props:i,stylesCtx:s})[r],...Pd({theme:e,styles:n==null?void 0:n.styles,props:(n==null?void 0:n.props)||i,stylesCtx:s})[r],...d4({theme:e,props:i,stylesCtx:s,vars:c,varsResolver:u,selector:r,themeName:t,headless:d}),...o===r?gg({style:l,theme:e}):null,...gg({style:n==null?void 0:n.style,theme:e})}}function Xe({name:e,classes:t,props:r,stylesCtx:n,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:c,vars:u,varsResolver:d}){const h=qn(),f=N5(),g=_5(),v=D5(),E=(Array.isArray(e)?e:[e]).filter(p=>p);return(p,y)=>({className:l4({theme:h,options:y,themeName:E,selector:p,classNamesPrefix:f,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:r,stylesCtx:n,withStaticClasses:g,headless:v}),style:h4({theme:h,themeName:E,selector:p,options:y,props:r,stylesCtx:n,rootSelector:o,styles:c,style:s,vars:u,varsResolver:d,headless:v})})}function f4(e,t){return typeof e=="boolean"?e:t.autoContrast}function Se(e,t,r){var o;const n=qn(),i=(o=n.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(n):i;return{...t,...s,...Dc(r)}}function Ty(e){return Er(e).reduce((t,r)=>e[r]!==void 0?`${t}${v5(r)}:${e[r]};`:t,"").trim()}function p4({selector:e,styles:t,media:r}){const n=t?Ty(t):"",i=Array.isArray(r)?r.map(s=>`@media${s.query}{${e}{${Ty(s.styles)}}}`):[];return`${n?`${e}{${n}}`:""}${i.join("")}`.trim()}function e0({selector:e,styles:t,media:r}){const n=Qm();return A.createElement("style",{"data-mantine-styles":"inline",nonce:n==null?void 0:n(),dangerouslySetInnerHTML:{__html:p4({selector:e,styles:t,media:r})}})}function $c(e){const{m:t,mx:r,my:n,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:d,py:h,pt:f,pb:g,pl:v,pr:E,pe:p,ps:y,bg:C,c:b,opacity:x,ff:m,fz:k,fw:N,lts:H,ta:R,lh:P,fs:B,tt:_,td:q,w:L,miw:F,maw:M,h:$,mih:z,mah:W,bgsz:ie,bgp:ae,bgr:Ee,bga:Ce,pos:Ie,top:Ae,left:Re,bottom:Fe,right:Ue,inset:Le,display:ke,flex:Y,hiddenFrom:de,visibleFrom:le,lightHidden:ve,darkHidden:et,...ir}=e;return{styleProps:Dc({m:t,mx:r,my:n,mt:i,mb:s,ml:o,mr:a,me:l,ms:c,p:u,px:d,py:h,pt:f,pb:g,pl:v,pr:E,pe:p,ps:y,bg:C,c:b,opacity:x,ff:m,fz:k,fw:N,lts:H,ta:R,lh:P,fs:B,tt:_,td:q,w:L,miw:F,maw:M,h:$,mih:z,mah:W,bgsz:ie,bgp:ae,bgr:Ee,bga:Ce,pos:Ie,top:Ae,left:Re,bottom:Fe,right:Ue,inset:Le,display:ke,flex:Y,hiddenFrom:de,visibleFrom:le,lightHidden:ve,darkHidden:et}),rest:ir}}const g4={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function BS(e,t){const r=el({color:e,theme:t});return r.color==="dimmed"?"var(--mantine-color-dimmed)":r.color==="bright"?"var(--mantine-color-bright)":r.variable?`var(${r.variable})`:r.color}function m4(e,t){const r=el({color:e,theme:t});return r.isThemeColor&&r.shade===void 0?`var(--mantine-color-${r.color}-text)`:BS(e,t)}const Iy={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)"};function v4(e){return typeof e=="string"&&e in Iy?Iy[e]:e}function y4(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="number"||typeof e=="string"?Z(e):e}function E4(e){return e}function C4(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:e}function S4(e){return typeof e=="number"?Z(e):e}function w4(e,t){if(typeof e=="number")return Z(e);if(typeof e=="string"){const r=e.replace("-","");if(!(r in t.spacing))return Z(e);const n=`--mantine-spacing-${r}`;return e.startsWith("-")?`calc(var(${n}) * -1)`:`var(${n})`}return e}const Bf={color:BS,textColor:m4,fontSize:y4,spacing:w4,identity:E4,size:S4,lineHeight:C4,fontFamily:v4};function Ry(e){return e.replace("(min-width: ","").replace("em)","")}function b4({media:e,...t}){const n=Object.keys(e).sort((i,s)=>Number(Ry(i))-Number(Ry(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:n}}function T4(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function I4(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function R4(e){return typeof e=="object"&&e!==null?Er(e).filter(t=>t!=="base"):[]}function A4(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function k4({styleProps:e,data:t,theme:r}){return b4(Er(e).reduce((n,i)=>{if(i==="hiddenFrom"||i==="visibleFrom")return n;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=I4(e[i]);if(!T4(e[i]))return o.forEach(c=>{n.inlineStyles[c]=Bf[s.type](a,r)}),n;n.hasResponsiveStyles=!0;const l=R4(e[i]);return o.forEach(c=>{a&&(n.styles[c]=Bf[s.type](a,r)),l.forEach(u=>{const d=`(min-width: ${r.breakpoints[u]})`;n.media[d]={...n.media[d],[c]:Bf[s.type](A4(e[i],u),r)}})}),n},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function t0(){return`__m__-${S.useId().replace(/:/g,"")}`}function $S(e){return e.startsWith("data-")?e:`data-${e}`}function x4(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return n===void 0||n===""||n===!1||n===null||(t[$S(r)]=e[r]),t},{})}function LS(e){return e?typeof e=="string"?{[$S(e)]:!0}:Array.isArray(e)?[...e].reduce((t,r)=>({...t,...LS(r)}),{}):x4(e):null}function mg(e,t){return Array.isArray(e)?[...e].reduce((r,n)=>({...r,...mg(n,t)}),{}):typeof e=="function"?e(t):e??{}}function N4({theme:e,style:t,vars:r,styleProps:n}){const i=mg(t,e),s=mg(r,e);return{...i,...s,...n}}const OS=S.forwardRef(({component:e,style:t,__vars:r,className:n,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:c,darkHidden:u,renderRoot:d,...h},f)=>{const g=qn(),v=e||"div",{styleProps:E,rest:p}=$c(h),y=t0(),C=k4({styleProps:E,theme:g,data:g4}),b={ref:f,style:N4({theme:g,style:t,vars:r,styleProps:C.inlineStyles}),className:pr(n,{[y]:C.hasResponsiveStyles,"mantine-light-hidden":c,"mantine-dark-hidden":u,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":TS(o)?void 0:o||void 0,...LS(s),...p};return A.createElement(A.Fragment,null,C.hasResponsiveStyles&&A.createElement(e0,{selector:`.${y}`,styles:C.styles,media:C.media}),typeof d=="function"?d(b):A.createElement(v,{...b}))});OS.displayName="@mantine/core/Box";const ye=OS;function MS(e){return e}function $e(e){const t=S.forwardRef(e);return t.extend=MS,t}function pi(e){const t=S.forwardRef(e);return t.extend=MS,t}const _4=S.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function yh(){return S.useContext(_4)}const[D4,Rn]=Ui("ScrollArea.Root component was not found in tree");function Fa(e,t){const r=Zs(t);Za(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}const P4=A.forwardRef((e,t)=>{const{style:r,...n}=e,i=Rn(),[s,o]=A.useState(0),[a,l]=A.useState(0),c=!!(s&&a);return Fa(i.scrollbarX,()=>{var d;const u=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(u),l(u)}),Fa(i.scrollbarY,()=>{var d;const u=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(u),o(u)}),c?A.createElement("div",{...n,ref:t,style:{...r,width:s,height:a}}):null}),B4=A.forwardRef((e,t)=>{const r=Rn(),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?A.createElement(P4,{...e,ref:t}):null}),$4={scrollHideDelay:1e3,type:"hover"},US=S.forwardRef((e,t)=>{const r=Se("ScrollAreaRoot",$4,e),{type:n,scrollHideDelay:i,scrollbars:s,...o}=r,[a,l]=S.useState(null),[c,u]=S.useState(null),[d,h]=S.useState(null),[f,g]=S.useState(null),[v,E]=S.useState(null),[p,y]=S.useState(0),[C,b]=S.useState(0),[x,m]=S.useState(!1),[k,N]=S.useState(!1),H=sn(t,R=>l(R));return A.createElement(D4,{value:{type:n,scrollHideDelay:i,scrollArea:a,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:g,scrollbarXEnabled:x,onScrollbarXEnabledChange:m,scrollbarY:v,onScrollbarYChange:E,scrollbarYEnabled:k,onScrollbarYEnabledChange:N,onCornerWidthChange:y,onCornerHeightChange:b}},A.createElement(ye,{...o,ref:H,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${p}px`,"--sa-corner-height":s!=="xy"?"0px":`${C}px`}}))});US.displayName="@mantine/core/ScrollAreaRoot";function HS(e,t){const r=e/t;return Number.isNaN(r)?0:r}function Eh(e){const t=HS(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function FS(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function L4(e,[t,r]){return Math.min(r,Math.max(t,e))}function Ay(e,t,r="ltr"){const n=Eh(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-n,l=r==="ltr"?[0,o]:[o*-1,0],c=L4(e,l);return FS([0,o],[0,a])(c)}function O4(e,t,r,n="ltr"){const i=Eh(r),s=i/2,o=t||s,a=i-o,l=r.scrollbar.paddingStart+o,c=r.scrollbar.size-r.scrollbar.paddingEnd-a,u=r.content-r.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return FS([l,c],d)(e)}function jS(e,t){return e>0&&e<t}function $d(e){return e?parseInt(e,10):0}function uo(e,t,{checkForDefaultPrevented:r=!0}={}){return n=>{e==null||e(n),(r===!1||!n.defaultPrevented)&&(t==null||t(n))}}const[M4,VS]=Ui("ScrollAreaScrollbar was not found in tree"),qS=S.forwardRef((e,t)=>{const{sizes:r,hasThumb:n,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:c,onResize:u,...d}=e,h=Rn(),[f,g]=A.useState(null),v=sn(t,N=>g(N)),E=A.useRef(null),p=A.useRef(""),{viewport:y}=h,C=r.content-r.viewport,b=Zs(c),x=Zs(a),m=gh(u,10),k=N=>{if(E.current){const H=N.clientX-E.current.left,R=N.clientY-E.current.top;l({x:H,y:R})}};return S.useEffect(()=>{const N=H=>{const R=H.target;(f==null?void 0:f.contains(R))&&b(H,C)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[y,f,C,b]),S.useEffect(x,[r,x]),Fa(f,m),Fa(h.content,m),A.createElement(M4,{value:{scrollbar:f,hasThumb:n,onThumbChange:Zs(i),onThumbPointerUp:Zs(s),onThumbPositionChange:x,onThumbPointerDown:Zs(o)}},A.createElement("div",{...d,ref:v,style:{position:"absolute",...d.style},onPointerDown:uo(e.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),E.current=f.getBoundingClientRect(),p.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",k(N))}),onPointerMove:uo(e.onPointerMove,k),onPointerUp:uo(e.onPointerUp,N=>{const H=N.target;H.hasPointerCapture(N.pointerId)&&H.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=p.current,E.current=null})}))}),U4=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:i,...s}=e,o=Rn(),[a,l]=S.useState(),c=S.useRef(null),u=sn(t,c,o.onScrollbarXChange);return S.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),A.createElement(qS,{"data-orientation":"horizontal",...s,ref:u,sizes:r,style:{...i,"--sa-thumb-width":`${Eh(r)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const f=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(f),jS(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&n({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:$d(a.paddingLeft),paddingEnd:$d(a.paddingRight)}})}})}),H4=S.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,style:i,...s}=e,o=Rn(),[a,l]=A.useState(),c=S.useRef(null),u=sn(t,c,o.onScrollbarYChange);return S.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),A.createElement(qS,{...s,"data-orientation":"vertical",ref:u,sizes:r,style:{"--sa-thumb-height":`${Eh(r)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const f=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(f),jS(f,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&n({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:$d(a.paddingTop),paddingEnd:$d(a.paddingBottom)}})}})}),r0=S.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,{dir:i}=yh(),s=Rn(),o=S.useRef(null),a=S.useRef(0),[l,c]=S.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=HS(l.viewport,l.content),d={...n,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:f=>{o.current=f},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:f=>{a.current=f}},h=(f,g)=>O4(f,a.current,l,g);return r==="horizontal"?A.createElement(U4,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollLeft,g=Ay(f,l,i);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollLeft=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollLeft=h(f,i))}}):r==="vertical"?A.createElement(H4,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const f=s.viewport.scrollTop,g=Ay(f,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:f=>{s.viewport&&(s.viewport.scrollTop=f)},onDragScroll:f=>{s.viewport&&(s.viewport.scrollTop=h(f))}}):null}),zS=S.forwardRef((e,t)=>{const r=Rn(),{forceMount:n,...i}=e,[s,o]=S.useState(!1),a=e.orientation==="horizontal",l=gh(()=>{if(r.viewport){const c=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(a?c:u)}},10);return Fa(r.viewport,l),Fa(r.content,l),n||s?A.createElement(r0,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),F4=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Rn(),[s,o]=S.useState(!1);return S.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const c=()=>{window.clearTimeout(l),o(!0)},u=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",c),a.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",c),a.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),r||s?A.createElement(zS,{"data-state":s?"visible":"hidden",...n,ref:t}):null}),j4=S.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Rn(),s=e.orientation==="horizontal",[o,a]=S.useState("hidden"),l=gh(()=>a("idle"),100);return S.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay]),S.useEffect(()=>{const{viewport:c}=i,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(a("scrolling"),l()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l]),r||o!=="hidden"?A.createElement(r0,{"data-state":o==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:uo(e.onPointerEnter,()=>a("interacting")),onPointerLeave:uo(e.onPointerLeave,()=>a("idle"))}):null}),ky=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Rn(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return A.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?A.createElement(F4,{...n,ref:t,forceMount:r}):i.type==="scroll"?A.createElement(j4,{...n,ref:t,forceMount:r}):i.type==="auto"?A.createElement(zS,{...n,ref:t,forceMount:r}):i.type==="always"?A.createElement(r0,{...n,ref:t}):null});function V4(e,t=()=>{}){let r={left:e.scrollLeft,top:e.scrollTop},n=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=r.left!==s.left,a=r.top!==s.top;(o||a)&&t(),r=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)}const q4=S.forwardRef((e,t)=>{const{style:r,...n}=e,i=Rn(),s=VS(),{onThumbPositionChange:o}=s,a=sn(t,u=>s.onThumbChange(u)),l=S.useRef(),c=gh(()=>{l.current&&(l.current(),l.current=void 0)},100);return S.useEffect(()=>{const{viewport:u}=i;if(u){const d=()=>{if(c(),!l.current){const h=V4(u,o);l.current=h,o()}};return o(),u.addEventListener("scroll",d),()=>u.removeEventListener("scroll",d)}},[i.viewport,c,o]),A.createElement("div",{"data-state":s.hasThumb?"visible":"hidden",...n,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...r},onPointerDownCapture:uo(e.onPointerDownCapture,u=>{const h=u.target.getBoundingClientRect(),f=u.clientX-h.left,g=u.clientY-h.top;s.onThumbPointerDown({x:f,y:g})}),onPointerUp:uo(e.onPointerUp,s.onThumbPointerUp)})}),xy=A.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=VS();return r||i.hasThumb?A.createElement(q4,{ref:t,...n}):null}),KS=S.forwardRef(({children:e,style:t,...r},n)=>{const i=Rn(),s=sn(n,i.onViewportChange);return A.createElement(ye,{...r,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t}},A.createElement("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange},e))});KS.displayName="@mantine/core/ScrollAreaViewport";var n0={root:"m-d57069b5",viewport:"m-c0783ff9",viewportInner:"m-f8f631dd",scrollbar:"m-c44ba933",thumb:"m-d8b5e363",corner:"m-21657268"};const GS={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},z4=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Z(t)}}),tl=$e((e,t)=>{const r=Se("ScrollArea",GS,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:c,type:u,scrollHideDelay:d,viewportProps:h,viewportRef:f,onScrollPositionChange:g,children:v,offsetScrollbars:E,scrollbars:p,...y}=r,[C,b]=S.useState(!1),x=Xe({name:"ScrollArea",props:r,classes:n0,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:z4});return A.createElement(US,{type:u==="never"?"always":u,scrollHideDelay:d,ref:t,scrollbars:p,...x("root"),...y},A.createElement(KS,{...h,...x("viewport",{style:h==null?void 0:h.style}),ref:f,"data-offset-scrollbars":E===!0?"xy":E||void 0,"data-scrollbars":p||void 0,onScroll:typeof g=="function"?({currentTarget:m})=>g({x:m.scrollLeft,y:m.scrollTop}):void 0},v),(p==="xy"||p==="x")&&A.createElement(ky,{...x("scrollbar"),orientation:"horizontal","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},A.createElement(xy,{...x("thumb")})),(p==="xy"||p==="y")&&A.createElement(ky,{...x("scrollbar"),orientation:"vertical","data-hidden":u==="never"||void 0,forceMount:!0,onMouseEnter:()=>b(!0),onMouseLeave:()=>b(!1)},A.createElement(xy,{...x("thumb")})),A.createElement(B4,{...x("corner"),"data-hovered":C||void 0,"data-hidden":u==="never"||void 0}))});tl.displayName="@mantine/core/ScrollArea";const i0=$e((e,t)=>{const{children:r,classNames:n,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:d,unstyled:h,variant:f,viewportProps:g,scrollbars:v,style:E,vars:p,...y}=Se("ScrollAreaAutosize",GS,e);return A.createElement(ye,{...y,ref:t,style:[{display:"flex",overflow:"auto"},E]},A.createElement(ye,{style:{display:"flex",flexDirection:"column",flex:1}},A.createElement(tl,{classNames:n,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:c,viewportRef:u,onScrollPositionChange:d,unstyled:h,variant:f,viewportProps:g,vars:p,scrollbars:v},r)))});tl.classes=n0;i0.displayName="@mantine/core/ScrollAreaAutosize";i0.classes=n0;tl.Autosize=i0;var WS={root:"m-87cf2631"};const K4={__staticSelector:"UnstyledButton"},Lc=pi((e,t)=>{const r=Se("UnstyledButton",K4,e),{className:n,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:c,...u}=r,d=Xe({name:s,props:r,classes:WS,className:n,style:c,classNames:a,styles:l,unstyled:o});return A.createElement(ye,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...u})});Lc.classes=WS;Lc.displayName="@mantine/core/UnstyledButton";var YS={root:"m-515a97f8"};const G4={},s0=$e((e,t)=>{const r=Se("VisuallyHidden",G4,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,...c}=r,u=Xe({name:"VisuallyHidden",classes:YS,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a});return A.createElement(ye,{component:"span",ref:t,...u("root"),...c})});s0.classes=YS;s0.displayName="@mantine/core/VisuallyHidden";var QS={root:"m-1b7284a3"};const W4={},Y4=(e,{radius:t,shadow:r})=>({root:{"--paper-radius":t===void 0?void 0:In(t),"--paper-shadow":Ym(r)}}),o0=pi((e,t)=>{const r=Se("Paper",W4,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:c,radius:u,shadow:d,variant:h,mod:f,...g}=r,v=Xe({name:"Paper",props:r,classes:QS,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:Y4});return A.createElement(ye,{ref:t,mod:[{"data-with-border":l},f],...v("root"),variant:h,...g})});o0.classes=QS;o0.displayName="@mantine/core/Paper";function _s(e){return XS(e)?(e.nodeName||"").toLowerCase():"#document"}function Jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Hi(e){var t;return(t=(XS(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function XS(e){return e instanceof Node||e instanceof Jr(e).Node}function Qr(e){return e instanceof Element||e instanceof Jr(e).Element}function fi(e){return e instanceof HTMLElement||e instanceof Jr(e).HTMLElement}function Ny(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jr(e).ShadowRoot}function Oc(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=Tn(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function Q4(e){return["table","td","th"].includes(_s(e))}function a0(e){const t=l0(),r=Tn(e);return r.transform!=="none"||r.perspective!=="none"||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(r.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(r.contain||"").includes(n))}function X4(e){let t=ja(e);for(;fi(t)&&!Ch(t);){if(a0(t))return t;t=ja(t)}return null}function l0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ch(e){return["html","body","#document"].includes(_s(e))}function Tn(e){return Jr(e).getComputedStyle(e)}function Sh(e){return Qr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function ja(e){if(_s(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Ny(e)&&e.host||Hi(e);return Ny(t)?t.host:t}function ZS(e){const t=ja(e);return Ch(t)?e.ownerDocument?e.ownerDocument.body:e.body:fi(t)&&Oc(t)?t:ZS(t)}function vc(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=ZS(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),o=Jr(i);return s?t.concat(o,o.visualViewport||[],Oc(i)?i:[],o.frameElement&&r?vc(o.frameElement):[]):t.concat(i,vc(i,[],r))}const jn=Math.min,yr=Math.max,Ld=Math.round,mu=Math.floor,Ds=e=>({x:e,y:e}),Z4={left:"right",right:"left",bottom:"top",top:"bottom"},J4={start:"end",end:"start"};function vg(e,t,r){return yr(e,jn(t,r))}function Bi(e,t){return typeof e=="function"?e(t):e}function Vn(e){return e.split("-")[0]}function rl(e){return e.split("-")[1]}function c0(e){return e==="x"?"y":"x"}function u0(e){return e==="y"?"height":"width"}function xo(e){return["top","bottom"].includes(Vn(e))?"y":"x"}function d0(e){return c0(xo(e))}function eR(e,t,r){r===void 0&&(r=!1);const n=rl(e),i=d0(e),s=u0(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Od(o)),[o,Od(o)]}function tR(e){const t=Od(e);return[yg(e),t,yg(t)]}function yg(e){return e.replace(/start|end/g,t=>J4[t])}function rR(e,t,r){const n=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?s:o;default:return[]}}function nR(e,t,r,n){const i=rl(e);let s=rR(Vn(e),r==="start",n);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(yg)))),s}function Od(e){return e.replace(/left|right|bottom|top/g,t=>Z4[t])}function iR(e){return{top:0,right:0,bottom:0,left:0,...e}}function h0(e){return typeof e!="number"?iR(e):{top:e,right:e,bottom:e,left:e}}function Va(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function _y(e,t,r){let{reference:n,floating:i}=e;const s=xo(t),o=d0(t),a=u0(o),l=Vn(t),c=s==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(rl(t)){case"start":f[o]-=h*(r&&c?-1:1);break;case"end":f[o]+=h*(r&&c?-1:1);break}return f}const sR=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:o}=r,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let c=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=_y(c,n,l),h=n,f={},g=0;for(let v=0;v<a.length;v++){const{name:E,fn:p}=a[v],{x:y,y:C,data:b,reset:x}=await p({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:o,elements:{reference:e,floating:t}});u=y??u,d=C??d,f={...f,[E]:{...f[E],...b}},x&&g<=50&&(g++,typeof x=="object"&&(x.placement&&(h=x.placement),x.rects&&(c=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:u,y:d}=_y(c,h,l)),v=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function f0(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Bi(t,e),g=h0(f),E=a[h?d==="floating"?"reference":"floating":d],p=Va(await s.getClippingRect({element:(r=await(s.isElement==null?void 0:s.isElement(E)))==null||r?E:E.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),y=d==="floating"?{...o.floating,x:n,y:i}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),b=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},x=Va(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:y,offsetParent:C,strategy:l}):y);return{top:(p.top-x.top+g.top)/b.y,bottom:(x.bottom-p.bottom+g.bottom)/b.y,left:(p.left-x.left+g.left)/b.x,right:(x.right-p.right+g.right)/b.x}}const oR=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:c,padding:u=0}=Bi(e,t)||{};if(c==null)return{};const d=h0(u),h={x:r,y:n},f=d0(i),g=u0(f),v=await o.getDimensions(c),E=f==="y",p=E?"top":"left",y=E?"bottom":"right",C=E?"clientHeight":"clientWidth",b=s.reference[g]+s.reference[f]-h[f]-s.floating[g],x=h[f]-s.reference[f],m=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c));let k=m?m[C]:0;(!k||!await(o.isElement==null?void 0:o.isElement(m)))&&(k=a.floating[C]||s.floating[g]);const N=b/2-x/2,H=k/2-v[g]/2-1,R=jn(d[p],H),P=jn(d[y],H),B=R,_=k-v[g]-P,q=k/2-v[g]/2+N,L=vg(B,q,_),F=!l.arrow&&rl(i)!=null&&q!==L&&s.reference[g]/2-(q<B?R:P)-v[g]/2<0,M=F?q<B?q-B:q-_:0;return{[f]:h[f]+M,data:{[f]:L,centerOffset:q-L-M,...F&&{alignmentOffset:M}},reset:F}}}),aR=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...E}=Bi(e,t);if((r=s.arrow)!=null&&r.alignmentOffset)return{};const p=Vn(i),y=Vn(a)===a,C=await(l.isRTL==null?void 0:l.isRTL(c.floating)),b=h||(y||!v?[Od(a)]:tR(a));!h&&g!=="none"&&b.push(...nR(a,v,g,C));const x=[a,...b],m=await f0(t,E),k=[];let N=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&k.push(m[p]),d){const B=eR(i,o,C);k.push(m[B[0]],m[B[1]])}if(N=[...N,{placement:i,overflows:k}],!k.every(B=>B<=0)){var H,R;const B=(((H=s.flip)==null?void 0:H.index)||0)+1,_=x[B];if(_)return{data:{index:B,overflows:N},reset:{placement:_}};let q=(R=N.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:R.placement;if(!q)switch(f){case"bestFit":{var P;const L=(P=N.map(F=>[F.placement,F.overflows.filter(M=>M>0).reduce((M,$)=>M+$,0)]).sort((F,M)=>F[1]-M[1])[0])==null?void 0:P[0];L&&(q=L);break}case"initialPlacement":q=a;break}if(i!==q)return{reset:{placement:q}}}return{}}}};function JS(e){const t=jn(...e.map(s=>s.left)),r=jn(...e.map(s=>s.top)),n=yr(...e.map(s=>s.right)),i=yr(...e.map(s=>s.bottom));return{x:t,y:r,width:n-t,height:i-r}}function lR(e){const t=e.slice().sort((i,s)=>i.y-s.y),r=[];let n=null;for(let i=0;i<t.length;i++){const s=t[i];!n||s.y-n.y>n.height/2?r.push([s]):r[r.length-1].push(s),n=s}return r.map(i=>Va(JS(i)))}const cR=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:r,elements:n,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:c}=Bi(e,t),u=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(n.reference))||[]),d=lR(u),h=Va(JS(u)),f=h0(a);function g(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&c!=null)return d.find(E=>l>E.left-f.left&&l<E.right+f.right&&c>E.top-f.top&&c<E.bottom+f.bottom)||h;if(d.length>=2){if(xo(r)==="y"){const R=d[0],P=d[d.length-1],B=Vn(r)==="top",_=R.top,q=P.bottom,L=B?R.left:P.left,F=B?R.right:P.right,M=F-L,$=q-_;return{top:_,bottom:q,left:L,right:F,width:M,height:$,x:L,y:_}}const E=Vn(r)==="left",p=yr(...d.map(R=>R.right)),y=jn(...d.map(R=>R.left)),C=d.filter(R=>E?R.left===y:R.right===p),b=C[0].top,x=C[C.length-1].bottom,m=y,k=p,N=k-m,H=x-b;return{top:b,bottom:x,left:m,right:k,width:N,height:H,x:m,y:b}}return h}const v=await s.getElementRects({reference:{getBoundingClientRect:g},floating:n.floating,strategy:o});return i.reference.x!==v.reference.x||i.reference.y!==v.reference.y||i.reference.width!==v.reference.width||i.reference.height!==v.reference.height?{reset:{rects:v}}:{}}}};async function uR(e,t){const{placement:r,platform:n,elements:i}=e,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Vn(r),a=rl(r),l=xo(r)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=Bi(t,e);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const dR=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await uR(t,e);return o===((r=a.offset)==null?void 0:r.placement)&&(n=a.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},hR=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:E=>{let{x:p,y}=E;return{x:p,y}}},...l}=Bi(e,t),c={x:r,y:n},u=await f0(t,l),d=xo(Vn(i)),h=c0(d);let f=c[h],g=c[d];if(s){const E=h==="y"?"top":"left",p=h==="y"?"bottom":"right",y=f+u[E],C=f-u[p];f=vg(y,f,C)}if(o){const E=d==="y"?"top":"left",p=d==="y"?"bottom":"right",y=g+u[E],C=g-u[p];g=vg(y,g,C)}const v=a.fn({...t,[h]:f,[d]:g});return{...v,data:{x:v.x-r,y:v.y-n}}}}},fR=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=Bi(e,t),u={x:r,y:n},d=xo(i),h=c0(d);let f=u[h],g=u[d];const v=Bi(a,t),E=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const C=h==="y"?"height":"width",b=s.reference[h]-s.floating[C]+E.mainAxis,x=s.reference[h]+s.reference[C]-E.mainAxis;f<b?f=b:f>x&&(f=x)}if(c){var p,y;const C=h==="y"?"width":"height",b=["top","left"].includes(Vn(i)),x=s.reference[d]-s.floating[C]+(b&&((p=o.offset)==null?void 0:p[d])||0)+(b?0:E.crossAxis),m=s.reference[d]+s.reference[C]+(b?0:((y=o.offset)==null?void 0:y[d])||0)-(b?E.crossAxis:0);g<x?g=x:g>m&&(g=m)}return{[h]:f,[d]:g}}}},pR=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:r,rects:n,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Bi(e,t),l=await f0(t,a),c=Vn(r),u=rl(r),d=xo(r)==="y",{width:h,height:f}=n.floating;let g,v;c==="top"||c==="bottom"?(g=c,v=u===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(v=c,g=u==="end"?"top":"bottom");const E=f-l[g],p=h-l[v],y=!t.middlewareData.shift;let C=E,b=p;if(d){const m=h-l.left-l.right;b=u||y?jn(p,m):m}else{const m=f-l.top-l.bottom;C=u||y?jn(E,m):m}if(y&&!u){const m=yr(l.left,0),k=yr(l.right,0),N=yr(l.top,0),H=yr(l.bottom,0);d?b=h-2*(m!==0||k!==0?m+k:yr(l.left,l.right)):C=f-2*(N!==0||H!==0?N+H:yr(l.top,l.bottom))}await o({...t,availableWidth:b,availableHeight:C});const x=await i.getDimensions(s.floating);return h!==x.width||f!==x.height?{reset:{rects:!0}}:{}}}};function ew(e){const t=Tn(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=fi(e),s=i?e.offsetWidth:r,o=i?e.offsetHeight:n,a=Ld(r)!==s||Ld(n)!==o;return a&&(r=s,n=o),{width:r,height:n,$:a}}function p0(e){return Qr(e)?e:e.contextElement}function Aa(e){const t=p0(e);if(!fi(t))return Ds(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:s}=ew(t);let o=(s?Ld(r.width):r.width)/n,a=(s?Ld(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const gR=Ds(0);function tw(e){const t=Jr(e);return!l0()||!t.visualViewport?gR:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mR(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Jr(e)?!1:t}function wo(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),s=p0(e);let o=Ds(1);t&&(n?Qr(n)&&(o=Aa(n)):o=Aa(e));const a=mR(s,r,n)?tw(s):Ds(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const h=Jr(s),f=n&&Qr(n)?Jr(n):n;let g=h,v=g.frameElement;for(;v&&n&&f!==g;){const E=Aa(v),p=v.getBoundingClientRect(),y=Tn(v),C=p.left+(v.clientLeft+parseFloat(y.paddingLeft))*E.x,b=p.top+(v.clientTop+parseFloat(y.paddingTop))*E.y;l*=E.x,c*=E.y,u*=E.x,d*=E.y,l+=C,c+=b,g=Jr(v),v=g.frameElement}}return Va({width:u,height:d,x:l,y:c})}const vR=[":popover-open",":modal"];function rw(e){return vR.some(t=>{try{return e.matches(t)}catch{return!1}})}function yR(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const s=i==="fixed",o=Hi(n),a=t?rw(t.floating):!1;if(n===o||a&&s)return r;let l={scrollLeft:0,scrollTop:0},c=Ds(1);const u=Ds(0),d=fi(n);if((d||!d&&!s)&&((_s(n)!=="body"||Oc(o))&&(l=Sh(n)),fi(n))){const h=wo(n);c=Aa(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:r.width*c.x,height:r.height*c.y,x:r.x*c.x-l.scrollLeft*c.x+u.x,y:r.y*c.y-l.scrollTop*c.y+u.y}}function ER(e){return Array.from(e.getClientRects())}function nw(e){return wo(Hi(e)).left+Sh(e).scrollLeft}function CR(e){const t=Hi(e),r=Sh(e),n=e.ownerDocument.body,i=yr(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=yr(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+nw(e);const a=-r.scrollTop;return Tn(n).direction==="rtl"&&(o+=yr(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:o,y:a}}function SR(e,t){const r=Jr(e),n=Hi(e),i=r.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const c=l0();(!c||c&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function wR(e,t){const r=wo(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=fi(e)?Aa(e):Ds(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:o,height:a,x:l,y:c}}function Dy(e,t,r){let n;if(t==="viewport")n=SR(e,r);else if(t==="document")n=CR(Hi(e));else if(Qr(t))n=wR(t,r);else{const i=tw(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return Va(n)}function iw(e,t){const r=ja(e);return r===t||!Qr(r)||Ch(r)?!1:Tn(r).position==="fixed"||iw(r,t)}function bR(e,t){const r=t.get(e);if(r)return r;let n=vc(e,[],!1).filter(a=>Qr(a)&&_s(a)!=="body"),i=null;const s=Tn(e).position==="fixed";let o=s?ja(e):e;for(;Qr(o)&&!Ch(o);){const a=Tn(o),l=a0(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Oc(o)&&!l&&iw(e,o))?n=n.filter(u=>u!==o):i=a,o=ja(o)}return t.set(e,n),n}function TR(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?bR(t,this._c):[].concat(r),n],a=o[0],l=o.reduce((c,u)=>{const d=Dy(t,u,i);return c.top=yr(d.top,c.top),c.right=jn(d.right,c.right),c.bottom=jn(d.bottom,c.bottom),c.left=yr(d.left,c.left),c},Dy(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function IR(e){const{width:t,height:r}=ew(e);return{width:t,height:r}}function RR(e,t,r){const n=fi(t),i=Hi(t),s=r==="fixed",o=wo(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=Ds(0);if(n||!n&&!s)if((_s(t)!=="body"||Oc(i))&&(a=Sh(t)),n){const d=wo(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=nw(i));const c=o.left+a.scrollLeft-l.x,u=o.top+a.scrollTop-l.y;return{x:c,y:u,width:o.width,height:o.height}}function Py(e,t){return!fi(e)||Tn(e).position==="fixed"?null:t?t(e):e.offsetParent}function sw(e,t){const r=Jr(e);if(!fi(e)||rw(e))return r;let n=Py(e,t);for(;n&&Q4(n)&&Tn(n).position==="static";)n=Py(n,t);return n&&(_s(n)==="html"||_s(n)==="body"&&Tn(n).position==="static"&&!a0(n))?r:n||X4(e)||r}const AR=async function(e){const t=this.getOffsetParent||sw,r=this.getDimensions;return{reference:RR(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,...await r(e.floating)}}};function kR(e){return Tn(e).direction==="rtl"}const xR={convertOffsetParentRelativeRectToViewportRelativeRect:yR,getDocumentElement:Hi,getClippingRect:TR,getOffsetParent:sw,getElementRects:AR,getClientRects:ER,getDimensions:IR,getScale:Aa,isElement:Qr,isRTL:kR};function NR(e,t){let r=null,n;const i=Hi(e);function s(){var a;clearTimeout(n),(a=r)==null||a.disconnect(),r=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:c,top:u,width:d,height:h}=e.getBoundingClientRect();if(a||t(),!d||!h)return;const f=mu(u),g=mu(i.clientWidth-(c+d)),v=mu(i.clientHeight-(u+h)),E=mu(c),y={rootMargin:-f+"px "+-g+"px "+-v+"px "+-E+"px",threshold:yr(0,jn(1,l))||1};let C=!0;function b(x){const m=x[0].intersectionRatio;if(m!==l){if(!C)return o();m?o(!1,m):n=setTimeout(()=>{o(!1,1e-7)},100)}C=!1}try{r=new IntersectionObserver(b,{...y,root:i.ownerDocument})}catch{r=new IntersectionObserver(b,y)}r.observe(e)}return o(!0),s}function _R(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=p0(e),u=i||s?[...c?vc(c):[],...vc(t)]:[];u.forEach(p=>{i&&p.addEventListener("scroll",r,{passive:!0}),s&&p.addEventListener("resize",r)});const d=c&&a?NR(c,r):null;let h=-1,f=null;o&&(f=new ResizeObserver(p=>{let[y]=p;y&&y.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=f)==null||C.observe(t)})),r()}),c&&!l&&f.observe(c),f.observe(t));let g,v=l?wo(e):null;l&&E();function E(){const p=wo(e);v&&(p.x!==v.x||p.y!==v.y||p.width!==v.width||p.height!==v.height)&&r(),v=p,g=requestAnimationFrame(E)}return r(),()=>{var p;u.forEach(y=>{i&&y.removeEventListener("scroll",r),s&&y.removeEventListener("resize",r)}),d==null||d(),(p=f)==null||p.disconnect(),f=null,l&&cancelAnimationFrame(g)}}const DR=hR,PR=aR,BR=pR,By=oR,$R=cR,LR=fR,OR=(e,t,r)=>{const n=new Map,i={platform:xR,...r},s={...i.platform,_c:n};return sR(e,t,{...i,platform:s})},MR=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?By({element:n.current,padding:i}).fn(r):{}:n?By({element:n,padding:i}).fn(r):{}}}};var ed=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Md(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Md(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const s=i[n];if(!(s==="_owner"&&e.$$typeof)&&!Md(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ow(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function $y(e,t){const r=ow(e);return Math.round(t*r)/r}function Ly(e){const t=S.useRef(e);return ed(()=>{t.current=e}),t}function UR(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=e,[u,d]=S.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,f]=S.useState(n);Md(h,n)||f(n);const[g,v]=S.useState(null),[E,p]=S.useState(null),y=S.useCallback(M=>{M!==m.current&&(m.current=M,v(M))},[]),C=S.useCallback(M=>{M!==k.current&&(k.current=M,p(M))},[]),b=s||g,x=o||E,m=S.useRef(null),k=S.useRef(null),N=S.useRef(u),H=l!=null,R=Ly(l),P=Ly(i),B=S.useCallback(()=>{if(!m.current||!k.current)return;const M={placement:t,strategy:r,middleware:h};P.current&&(M.platform=P.current),OR(m.current,k.current,M).then($=>{const z={...$,isPositioned:!0};_.current&&!Md(N.current,z)&&(N.current=z,_c.flushSync(()=>{d(z)}))})},[h,t,r,P]);ed(()=>{c===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,d(M=>({...M,isPositioned:!1})))},[c]);const _=S.useRef(!1);ed(()=>(_.current=!0,()=>{_.current=!1}),[]),ed(()=>{if(b&&(m.current=b),x&&(k.current=x),b&&x){if(R.current)return R.current(b,x,B);B()}},[b,x,B,R,H]);const q=S.useMemo(()=>({reference:m,floating:k,setReference:y,setFloating:C}),[y,C]),L=S.useMemo(()=>({reference:b,floating:x}),[b,x]),F=S.useMemo(()=>{const M={position:r,left:0,top:0};if(!L.floating)return M;const $=$y(L.floating,u.x),z=$y(L.floating,u.y);return a?{...M,transform:"translate("+$+"px, "+z+"px)",...ow(L.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:$,top:z}},[r,a,L.floating,u.x,u.y]);return S.useMemo(()=>({...u,update:B,refs:q,elements:L,floatingStyles:F}),[u,B,q,L,F])}const HR=em.useInsertionEffect,FR=HR||(e=>e());function jR(e){const t=S.useRef(()=>{});return FR(()=>{t.current=e}),S.useCallback(function(){for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return t.current==null?void 0:t.current(...n)},[])}var aw=typeof document<"u"?S.useLayoutEffect:S.useEffect;let $f=!1,VR=0;const Oy=()=>"floating-ui-"+VR++;function qR(){const[e,t]=S.useState(()=>$f?Oy():void 0);return aw(()=>{e==null&&t(Oy())},[]),S.useEffect(()=>{$f||($f=!0)},[]),e}const zR=em.useId,KR=zR||qR;function GR(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(i=>i(r))},on(t,r){e.set(t,[...e.get(t)||[],r])},off(t,r){var n;e.set(t,((n=e.get(t))==null?void 0:n.filter(i=>i!==r))||[])}}}const WR=S.createContext(null),YR=S.createContext(null),QR=()=>{var e;return((e=S.useContext(WR))==null?void 0:e.id)||null},XR=()=>S.useContext(YR);function ZR(e){var t;e===void 0&&(e={});const{open:r=!1,onOpenChange:n,nodeId:i}=e,[s,o]=S.useState(null),a=((t=e.elements)==null?void 0:t.reference)||s,l=UR(e),c=XR(),u=QR()!=null,d=jR((x,m,k)=>{x&&(f.current.openEvent=m),g.emit("openchange",{open:x,event:m,reason:k,nested:u}),n==null||n(x,m,k)}),h=S.useRef(null),f=S.useRef({}),g=S.useState(()=>GR())[0],v=KR(),E=S.useCallback(x=>{const m=Qr(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;l.refs.setReference(m)},[l.refs]),p=S.useCallback(x=>{(Qr(x)||x===null)&&(h.current=x,o(x)),(Qr(l.refs.reference.current)||l.refs.reference.current===null||x!==null&&!Qr(x))&&l.refs.setReference(x)},[l.refs]),y=S.useMemo(()=>({...l.refs,setReference:p,setPositionReference:E,domReference:h}),[l.refs,p,E]),C=S.useMemo(()=>({...l.elements,domReference:a}),[l.elements,a]),b=S.useMemo(()=>({...l,refs:y,elements:C,dataRef:f,nodeId:i,floatingId:v,events:g,open:r,onOpenChange:d}),[l,i,v,g,r,d,y,C]);return aw(()=>{const x=c==null?void 0:c.nodesRef.current.find(m=>m.id===i);x&&(x.context=b)}),S.useMemo(()=>({...l,context:b,refs:y,elements:C}),[l,y,C,b])}function JR(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[r,n]=t.split("-"),i=r==="right"?"left":"right";return n===void 0?i:`${i}-${n}`}return t}function My(e,t,r,n){return e==="center"||n==="center"?{top:t}:e==="end"?{bottom:r}:e==="start"?{top:r}:{}}function Uy(e,t,r,n,i){return e==="center"||n==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:r}:e==="start"?{[i==="ltr"?"left":"right"]:r}:{}}const eA={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function tA({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,c="center"]=e.split("-"),u={width:Z(t),height:Z(t),transform:"rotate(45deg)",position:"absolute",[eA[l]]:Z(n)},d=Z(-t/2);return l==="left"?{...u,...My(c,o,r,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...u,...My(c,o,r,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...u,...Uy(c,s,r,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...u,...Uy(c,s,r,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const lw=S.forwardRef(({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...c},u)=>{const{dir:d}=yh();return s?A.createElement("div",{...c,ref:u,style:{...l,...tA({position:e,arrowSize:t,arrowOffset:r,arrowRadius:n,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});lw.displayName="@mantine/core/FloatingArrow";const[rA,cw]=Ui("Popover component was not found in the tree");function wh({children:e,active:t=!0,refProp:r="ref"}){const n=cI(t),i=sn(n,e==null?void 0:e.ref);return Pc(e)?S.cloneElement(e,{[r]:i}):e}function uw(e){return A.createElement(s0,{tabIndex:-1,"data-autofocus":!0,...e})}wh.displayName="@mantine/core/FocusTrap";uw.displayName="@mantine/core/FocusTrapInitialFocus";wh.InitialFocus=uw;function nA(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const iA={},dw=S.forwardRef((e,t)=>{const{children:r,target:n,...i}=Se("Portal",iA,e),[s,o]=S.useState(!1),a=S.useRef(null);return Za(()=>(o(!0),a.current=n?typeof n=="string"?document.querySelector(n):n:nA(i),dS(t,a.current),!n&&a.current&&document.body.appendChild(a.current),()=>{!n&&a.current&&document.body.removeChild(a.current)}),[n]),!s||!a.current?null:_c.createPortal(A.createElement(A.Fragment,null,r),a.current)});dw.displayName="@mantine/core/Portal";function bh({withinPortal:e=!0,children:t,...r}){return e?A.createElement(dw,{...r},t):A.createElement(A.Fragment,null,t)}bh.displayName="@mantine/core/OptionalPortal";const gl=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Z(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),vu={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Z(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Z(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Z(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Z(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...gl("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...gl("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...gl("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...gl("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...gl("top"),common:{transformOrigin:"top right"}}},Hy={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function sA({transition:e,state:t,duration:r,timingFunction:n}){const i={transitionDuration:`${r}ms`,transitionTimingFunction:n};return typeof e=="string"?e in vu?{transitionProperty:vu[e].transitionProperty,...i,...vu[e].common,...vu[e][Hy[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Hy[t]]}}function oA({duration:e,exitDuration:t,timingFunction:r,mounted:n,onEnter:i,onExit:s,onEntered:o,onExited:a}){const l=qn(),c=zm(),u=l.respectReducedMotion?c:!1,[d,h]=S.useState(u?0:e),[f,g]=S.useState(n?"entered":"exited"),v=S.useRef(-1),E=S.useRef(-1),p=y=>{const C=y?i:s,b=y?o:a;window.clearTimeout(v.current);const x=u?0:y?e:t;h(x),x===0?(typeof C=="function"&&C(),typeof b=="function"&&b(),g(y?"entered":"exited")):E.current=requestAnimationFrame(()=>{fa.flushSync(()=>{g(y?"pre-entering":"pre-exiting")}),E.current=requestAnimationFrame(()=>{typeof C=="function"&&C(),g(y?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof b=="function"&&b(),g(y?"entered":"exited")},x)})})};return Eo(()=>{p(n)},[n]),S.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(E.current)},[]),{transitionDuration:d,transitionStatus:f,transitionTimingFunction:r||"ease"}}function No({keepMounted:e,transition:t="fade",duration:r=250,exitDuration:n=r,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:c,onExited:u}){const{transitionDuration:d,transitionStatus:h,transitionTimingFunction:f}=oA({mounted:i,exitDuration:n,duration:r,timingFunction:o,onExit:a,onEntered:l,onEnter:c,onExited:u});return d===0?i?A.createElement(A.Fragment,null,s({})):e?s({display:"none"}):null:h==="exited"?e?s({display:"none"}):null:A.createElement(A.Fragment,null,s(sA({transition:t,duration:d,state:h,timingFunction:f})))}No.displayName="@mantine/core/Transition";var hw={dropdown:"m-38a85659",arrow:"m-a31dc6c1"};const aA={},g0=$e((e,t)=>{var E,p,y,C;const r=Se("PopoverDropdown",aA,e),{className:n,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:c,styles:u,...d}=r,h=cw(),f=aS({opened:h.opened,shouldReturnFocus:h.returnFocus}),g=h.withRoles?{"aria-labelledby":h.getTargetId(),id:h.getDropdownId(),role:"dialog",tabIndex:-1}:{},v=sn(t,h.floating);return h.disabled?null:A.createElement(bh,{...h.portalProps,withinPortal:h.withinPortal},A.createElement(No,{mounted:h.opened,...h.transitionProps,transition:((E=h.transitionProps)==null?void 0:E.transition)||"fade",duration:((p=h.transitionProps)==null?void 0:p.duration)??150,keepMounted:h.keepMounted,exitDuration:typeof((y=h.transitionProps)==null?void 0:y.exitDuration)=="number"?h.transitionProps.exitDuration:(C=h.transitionProps)==null?void 0:C.duration},b=>A.createElement(wh,{active:h.trapFocus},A.createElement(ye,{...g,...d,variant:l,ref:v,onKeyDownCapture:w5(h.onClose,{active:h.closeOnEscape,onTrigger:f,onKeyDown:a}),"data-position":h.placement,...h.getStyles("dropdown",{className:n,props:r,classNames:c,styles:u,style:[{...b,zIndex:h.zIndex,top:h.y??0,left:h.x??0,width:h.width==="target"?void 0:Z(h.width)},i]})},o,A.createElement(lw,{ref:h.arrowRef,arrowX:h.arrowX,arrowY:h.arrowY,visible:h.withArrow,position:h.placement,arrowSize:h.arrowSize,arrowRadius:h.arrowRadius,arrowOffset:h.arrowOffset,arrowPosition:h.arrowPosition,...h.getStyles("arrow",{props:r,classNames:c,styles:u})})))))});g0.classes=hw;g0.displayName="@mantine/core/PopoverDropdown";const lA={refProp:"ref",popupType:"dialog"},fw=$e((e,t)=>{const{children:r,refProp:n,popupType:i,...s}=Se("PopoverTarget",lA,e);if(!Pc(r))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=cw(),l=sn(a.reference,r.ref,t),c=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return S.cloneElement(r,{...o,...c,...a.targetProps,className:pr(a.targetProps.className,o.className,r.props.className),[n]:l,...a.controlled?null:{onClick:a.onToggle}})});fw.displayName="@mantine/core/PopoverTarget";function cA({opened:e,floating:t,position:r,positionDependencies:n}){const[i,s]=S.useState(0);S.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return _R(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,r]),Eo(()=>{t.update()},n),Eo(()=>{s(o=>o+1)},[e])}function uA(e,t){var n,i,s,o;const r=[dR(e.offset)];return(n=e.middlewares)!=null&&n.shift&&r.push(DR({limiter:LR()})),(i=e.middlewares)!=null&&i.flip&&r.push(PR()),(s=e.middlewares)!=null&&s.inline&&r.push($R()),r.push(MR({element:e.arrowRef,padding:e.arrowOffset})),((o=e.middlewares)!=null&&o.size||e.width==="target")&&r.push(BR({apply({rects:a,availableWidth:l,availableHeight:c}){var h,f;const d=((h=t().refs.floating.current)==null?void 0:h.style)??{};(f=e.middlewares)!=null&&f.size&&Object.assign(d,{maxWidth:`${l}px`,maxHeight:`${c}px`}),e.width==="target"&&Object.assign(d,{width:`${a.reference.width}px`})}})),r}function dA(e){const[t,r]=Co({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),n=()=>{var o;t&&((o=e.onClose)==null||o.call(e),r(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),r(!1)):((a=e.onOpen)==null||a.call(e),r(!0))},s=ZR({strategy:e.strategy,placement:e.position,middleware:uA(e,()=>s)});return cA({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Eo(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Eo(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:n,onToggle:i}}const hA={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ko("popover"),__staticSelector:"Popover",width:"max-content"},fA=(e,{radius:t,shadow:r})=>({dropdown:{"--popover-radius":t===void 0?void 0:In(t),"--popover-shadow":Ym(r)}});function Ht(e){var ir,ht,pt,xn,Mt,Ki;const t=Se("Popover",hA,e),{children:r,position:n,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:c,middlewares:u,withArrow:d,arrowSize:h,arrowOffset:f,arrowRadius:g,arrowPosition:v,unstyled:E,classNames:p,styles:y,closeOnClickOutside:C,withinPortal:b,portalProps:x,closeOnEscape:m,clickOutsideEvents:k,trapFocus:N,onClose:H,onOpen:R,onChange:P,zIndex:B,radius:_,shadow:q,id:L,defaultOpened:F,__staticSelector:M,withRoles:$,disabled:z,returnFocus:W,variant:ie,keepMounted:ae,vars:Ee,floatingStrategy:Ce,...Ie}=t,Ae=Xe({name:M,props:t,classes:hw,classNames:p,styles:y,unstyled:E,rootSelector:"dropdown",vars:Ee,varsResolver:fA}),Re=S.useRef(null),[Fe,Ue]=S.useState(null),[Le,ke]=S.useState(null),{dir:Y}=yh(),de=Io(L),le=dA({middlewares:u,width:c,position:JR(Y,n),offset:typeof i=="number"?i+(d?h/2:0):i,arrowRef:Re,arrowOffset:f,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:F,onChange:P,onOpen:R,onClose:H,strategy:Ce});J3(()=>C&&le.onClose(),k,[Fe,Le]);const ve=S.useCallback(on=>{Ue(on),le.floating.refs.setReference(on)},[le.floating.refs.setReference]),et=S.useCallback(on=>{ke(on),le.floating.refs.setFloating(on)},[le.floating.refs.setFloating]);return A.createElement(rA,{value:{returnFocus:W,disabled:z,controlled:le.controlled,reference:ve,floating:et,x:le.floating.x,y:le.floating.y,arrowX:(pt=(ht=(ir=le.floating)==null?void 0:ir.middlewareData)==null?void 0:ht.arrow)==null?void 0:pt.x,arrowY:(Ki=(Mt=(xn=le.floating)==null?void 0:xn.middlewareData)==null?void 0:Mt.arrow)==null?void 0:Ki.y,opened:le.opened,arrowRef:Re,transitionProps:l,width:c,withArrow:d,arrowSize:h,arrowOffset:f,arrowRadius:g,arrowPosition:v,placement:le.floating.placement,trapFocus:N,withinPortal:b,portalProps:x,zIndex:B,radius:_,shadow:q,closeOnEscape:m,onClose:le.onClose,onToggle:le.onToggle,getTargetId:()=>`${de}-target`,getDropdownId:()=>`${de}-dropdown`,withRoles:$,targetProps:Ie,__staticSelector:M,classNames:p,styles:y,unstyled:E,variant:ie,keepMounted:ae,getStyles:Ae}},r)}Ht.Target=fw;Ht.Dropdown=g0;Ht.displayName="@mantine/core/Popover";Ht.extend=e=>e;var On={root:"m-5ae2e3c",barsLoader:"m-7a2bd4cd",bar:"m-870bb79","bars-loader-animation":"m-5d2b3b9d",dotsLoader:"m-4e3f22d7",dot:"m-870c4af","loader-dots-animation":"m-aac34a1",ovalLoader:"m-b34414df","oval-loader-animation":"m-f8e89c4b"};const pA=S.forwardRef(({className:e,...t},r)=>A.createElement(ye,{component:"span",className:pr(On.barsLoader,e),...t,ref:r},A.createElement("span",{className:On.bar}),A.createElement("span",{className:On.bar}),A.createElement("span",{className:On.bar}))),gA=S.forwardRef(({className:e,...t},r)=>A.createElement(ye,{component:"span",className:pr(On.dotsLoader,e),...t,ref:r},A.createElement("span",{className:On.dot}),A.createElement("span",{className:On.dot}),A.createElement("span",{className:On.dot}))),mA=S.forwardRef(({className:e,...t},r)=>A.createElement(ye,{component:"span",className:pr(On.ovalLoader,e),...t,ref:r})),pw={bars:pA,oval:mA,dots:gA},vA={loaders:pw,type:"oval"},yA=(e,{size:t,color:r})=>({root:{"--loader-size":It(t,"loader-size"),"--loader-color":r?Sn(r,e):void 0}}),nl=$e((e,t)=>{const r=Se("Loader",vA,e),{size:n,color:i,type:s,vars:o,className:a,style:l,classNames:c,styles:u,unstyled:d,loaders:h,variant:f,children:g,...v}=r,E=Xe({name:"Loader",props:r,classes:On,className:a,style:l,classNames:c,styles:u,unstyled:d,vars:o,varsResolver:yA});return g?A.createElement(ye,{...E("root"),ref:t,...v},g):A.createElement(ye,{...E("root"),ref:t,component:h[s],variant:f,size:n,...v})});nl.defaultLoaders=pw;nl.classes=On;nl.displayName="@mantine/core/Loader";var Th={root:"m-8d3f4000",icon:"m-8d3afb97",loader:"m-302b9fb1",group:"m-1a0f1b21"};const Fy={orientation:"horizontal"},EA=(e,{borderWidth:t})=>({group:{"--ai-border-width":Z(t)}}),m0=$e((e,t)=>{const r=Se("ActionIconGroup",Fy,e),{className:n,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:d,mod:h,...f}=Se("ActionIconGroup",Fy,e),g=Xe({name:"ActionIconGroup",props:r,classes:Th,className:n,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:EA,rootSelector:"group"});return A.createElement(ye,{...g("group"),ref:t,variant:d,mod:[{"data-orientation":l},h],role:"group",...f})});m0.classes=Th;m0.displayName="@mantine/core/ActionIconGroup";const CA={},SA=(e,{size:t,radius:r,variant:n,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:n||"filled",autoContrast:o});return{root:{"--ai-size":It(t,"ai-size"),"--ai-radius":r===void 0?void 0:In(r),"--ai-bg":s||n?a.background:void 0,"--ai-hover":s||n?a.hover:void 0,"--ai-hover-color":s||n?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||n?a.border:void 0}}},ti=pi((e,t)=>{const r=Se("ActionIcon",CA,e),{className:n,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:c,loaderProps:u,size:d,color:h,radius:f,__staticSelector:g,gradient:v,vars:E,children:p,disabled:y,"data-disabled":C,autoContrast:b,mod:x,...m}=r,k=Xe({name:["ActionIcon",g],props:r,className:n,style:l,classes:Th,classNames:o,styles:a,unstyled:i,vars:E,varsResolver:SA});return A.createElement(Lc,{...k("root",{active:!y&&!c&&!C}),...m,unstyled:i,variant:s,size:d,disabled:y||c,ref:t,mod:[{loading:c,disabled:y||C},x]},A.createElement(No,{mounted:!!c,transition:"slide-down",duration:150},N=>A.createElement(ye,{component:"span",...k("loader",{style:N}),"aria-hidden":!0},A.createElement(nl,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u}))),A.createElement(ye,{component:"span",mod:{loading:c},...k("icon")},p))});ti.classes=Th;ti.displayName="@mantine/core/ActionIcon";ti.Group=m0;const gw=S.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...r},n)=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:n,...r},A.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})));gw.displayName="@mantine/core/CloseIcon";var mw={root:"m-86a44da5","root--subtle":"m-220c80f2"};const wA={variant:"subtle"},bA=(e,{size:t,radius:r,iconSize:n})=>({root:{"--cb-size":It(t,"cb-size"),"--cb-radius":r===void 0?void 0:In(r),"--cb-icon-size":Z(n)}}),Mc=pi((e,t)=>{const r=Se("CloseButton",wA,e),{iconSize:n,children:i,vars:s,radius:o,className:a,classNames:l,style:c,styles:u,unstyled:d,"data-disabled":h,disabled:f,variant:g,icon:v,mod:E,...p}=r,y=Xe({name:"CloseButton",props:r,className:a,style:c,classes:mw,classNames:l,styles:u,unstyled:d,vars:s,varsResolver:bA});return A.createElement(Lc,{ref:t,...p,unstyled:d,variant:g,disabled:f,mod:[{disabled:f||h},E],...y("root",{variant:g,active:!0})},v||A.createElement(gw,null),i)});Mc.classes=mw;Mc.displayName="@mantine/core/CloseButton";function TA(e){return S.Children.toArray(e).filter(Boolean)}var vw={root:"m-4081bf90"};const IA={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},RA=(e,{grow:t,preventGrowOverflow:r,gap:n,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&r?a:void 0,"--group-gap":So(n),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),$i=$e((e,t)=>{const r=Se("Group",IA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,children:l,gap:c,align:u,justify:d,wrap:h,grow:f,preventGrowOverflow:g,vars:v,variant:E,__size:p,mod:y,...C}=r,b=TA(l),x=b.length,m=So(c??"md"),N={childWidth:`calc(${100/x}% - (${m} - ${m} / ${x}))`},H=Xe({name:"Group",props:r,stylesCtx:N,className:i,style:s,classes:vw,classNames:n,styles:o,unstyled:a,vars:v,varsResolver:RA});return A.createElement(ye,{...H("root"),ref:t,variant:E,mod:[{grow:f},y],size:p,...C},b)});$i.classes=vw;$i.displayName="@mantine/core/Group";var yw={root:"m-9814e45f"};const AA={zIndex:ko("modal")},kA=(e,{gradient:t,color:r,backgroundOpacity:n,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(r!==void 0||n!==void 0)&&kr(r||"#000",n??.6)||void 0,"--overlay-filter":i?`blur(${Z(i)})`:void 0,"--overlay-radius":s===void 0?void 0:In(s),"--overlay-z-index":o==null?void 0:o.toString()}}),v0=pi((e,t)=>{const r=Se("Overlay",AA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:c,center:u,children:d,radius:h,zIndex:f,gradient:g,blur:v,color:E,backgroundOpacity:p,mod:y,...C}=r,b=Xe({name:"Overlay",props:r,classes:yw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:kA});return A.createElement(ye,{ref:t,...b("root"),mod:[{center:u,fixed:c},y],...C},d)});v0.classes=yw;v0.displayName="@mantine/core/Overlay";const[xA,Fi]=Ui("ModalBase component was not found in tree");function NA({opened:e,transitionDuration:t}){const[r,n]=S.useState(e),i=S.useRef(),o=zm()?0:t;return S.useEffect(()=>(e?(n(!0),window.clearTimeout(i.current)):o===0?n(!1):i.current=window.setTimeout(()=>n(!1),o),()=>window.clearTimeout(i.current)),[e,o]),r}function _A({id:e,transitionProps:t,opened:r,trapFocus:n,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Io(e),[l,c]=S.useState(!1),[u,d]=S.useState(!1),h=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,f=NA({opened:r,transitionDuration:h});return pI("keydown",g=>{var v;g.key==="Escape"&&i&&((v=g.target)==null?void 0:v.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),aS({opened:r,shouldReturnFocus:n&&o}),{_id:a,titleMounted:l,bodyMounted:u,shouldLockScroll:f,setTitleMounted:c,setBodyMounted:d}}const DA=S.forwardRef(({keepMounted:e,opened:t,onClose:r,id:n,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:c,portalProps:u,lockScroll:d,children:h,zIndex:f,shadow:g,padding:v,__vars:E,unstyled:p,removeScrollProps:y,...C},b)=>{const{_id:x,titleMounted:m,bodyMounted:k,shouldLockScroll:N,setTitleMounted:H,setBodyMounted:R}=_A({id:n,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:r,returnFocus:a});return A.createElement(bh,{...u,withinPortal:c},A.createElement(xA,{value:{opened:t,onClose:r,closeOnClickOutside:l,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:m,bodyMounted:k,setTitleMounted:H,setBodyMounted:R,trapFocus:s,closeOnEscape:o,zIndex:f,unstyled:p}},A.createElement(m5,{enabled:N&&d,...y},A.createElement(ye,{ref:b,...C,__vars:{...E,"--mb-z-index":(f||ko("modal")).toString(),"--mb-shadow":Ym(g),"--mb-padding":So(v)}},h))))});function PA(){const e=Fi();return S.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var qa={title:"m-615af6c9",header:"m-b5489c3c",inner:"m-60c222c7",content:"m-fd1ab0aa",close:"m-606cb269",body:"m-5df29311"};const Ew=S.forwardRef(({className:e,...t},r)=>{const n=PA(),i=Fi();return A.createElement(ye,{ref:r,...t,id:n,className:pr({[qa.body]:!i.unstyled},e)})});Ew.displayName="@mantine/core/ModalBaseBody";const Cw=S.forwardRef(({className:e,onClick:t,...r},n)=>{const i=Fi();return A.createElement(Mc,{ref:n,...r,onClick:s=>{i.onClose(),t==null||t(s)},className:pr({[qa.close]:!i.unstyled},e),unstyled:i.unstyled})});Cw.displayName="@mantine/core/ModalBaseCloseButton";const BA=S.forwardRef(({transitionProps:e,className:t,innerProps:r,onKeyDown:n,style:i,...s},o)=>{const a=Fi();return A.createElement(No,{mounted:a.opened,transition:"pop",...a.transitionProps,...e},l=>A.createElement("div",{...r,className:pr({[qa.inner]:!a.unstyled},r.className)},A.createElement(wh,{active:a.opened&&a.trapFocus},A.createElement(o0,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,l],className:pr({[qa.content]:!a.unstyled},t),unstyled:a.unstyled},s.children))))}),Sw=S.forwardRef(({className:e,...t},r)=>{const n=Fi();return A.createElement(ye,{component:"header",ref:r,className:pr({[qa.header]:!n.unstyled},e),...t})});Sw.displayName="@mantine/core/ModalBaseHeader";const $A={duration:200,timingFunction:"ease",transition:"fade"};function LA(e){const t=Fi();return{...$A,...t.transitionProps,...e}}const ww=S.forwardRef(({onClick:e,transitionProps:t,style:r,...n},i)=>{const s=Fi(),o=LA(t);return A.createElement(No,{mounted:s.opened,...o,transition:"fade"},a=>A.createElement(v0,{ref:i,fixed:!0,style:[r,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...n}))});ww.displayName="@mantine/core/ModalBaseOverlay";function OA(){const e=Fi();return S.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const bw=S.forwardRef(({className:e,...t},r)=>{const n=OA(),i=Fi();return A.createElement(ye,{component:"h2",ref:r,className:pr({[qa.title]:!i.unstyled},e),...t,id:n})});bw.displayName="@mantine/core/ModalBaseTitle";function MA({children:e}){return A.createElement(A.Fragment,null,e)}const[UA,Uc]=E5({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var An={wrapper:"m-6c018570",input:"m-8fb7ebe7",section:"m-82577fc2",placeholder:"m-88bacfd0",root:"m-46b77525",label:"m-8fdc1311",required:"m-78a94662",error:"m-8f816625",description:"m-fe47ce59"};const jy={},HA=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Zr(t)} - ${Z(2)})`}}),Ih=$e((e,t)=>{const r=Se("InputDescription",jy,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:h,...f}=Se("InputDescription",jy,r),g=Uc(),v=Xe({name:["InputWrapper",u],props:r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:HA}),E=d&&(g==null?void 0:g.getStyles)||v;return A.createElement(ye,{component:"p",ref:t,variant:h,size:c,...E("description",g!=null&&g.getStyles?{className:i,style:s}:void 0),...f})});Ih.classes=An;Ih.displayName="@mantine/core/InputDescription";const FA={},jA=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Zr(t)} - ${Z(2)})`}}),Rh=$e((e,t)=>{const r=Se("InputError",FA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,__staticSelector:u,__inheritStyles:d=!0,variant:h,...f}=r,g=Xe({name:["InputWrapper",u],props:r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:jA}),v=Uc(),E=d&&(v==null?void 0:v.getStyles)||g;return A.createElement(ye,{component:"p",ref:t,variant:h,size:c,...E("error",v!=null&&v.getStyles?{className:i,style:s}:void 0),...f})});Rh.classes=An;Rh.displayName="@mantine/core/InputError";const Vy={labelElement:"label"},VA=(e,{size:t})=>({label:{"--input-label-size":Zr(t),"--input-asterisk-color":void 0}}),Ah=$e((e,t)=>{const r=Se("InputLabel",Vy,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:c,size:u,required:d,htmlFor:h,onMouseDown:f,children:g,__staticSelector:v,variant:E,mod:p,...y}=Se("InputLabel",Vy,r),C=Xe({name:["InputWrapper",v],props:r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:VA}),b=Uc(),x=(b==null?void 0:b.getStyles)||C;return A.createElement(ye,{...x("label",b!=null&&b.getStyles?{className:i,style:s}:void 0),component:c,variant:E,size:u,ref:t,htmlFor:c==="label"?h:void 0,mod:[{required:d},p],onMouseDown:m=>{f==null||f(m),!m.defaultPrevented&&m.detail>1&&m.preventDefault()},...y},g,d&&A.createElement("span",{...x("required"),"aria-hidden":!0}," *"))});Ah.classes=An;Ah.displayName="@mantine/core/InputLabel";const qy={},y0=$e((e,t)=>{const r=Se("InputPlaceholder",qy,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:c,variant:u,error:d,mod:h,...f}=Se("InputPlaceholder",qy,r),g=Xe({name:["InputPlaceholder",c],props:r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,rootSelector:"placeholder"});return A.createElement(ye,{...g("placeholder"),mod:[{error:!!d},h],component:"span",variant:u,ref:t,...f})});y0.classes=An;y0.displayName="@mantine/core/InputPlaceholder";function qA(e,{hasDescription:t,hasError:r}){const n=e.findIndex(l=>l==="input"),i=e[n-1],s=e[n+1];return{offsetBottom:t&&s==="description"||r&&s==="error",offsetTop:t&&i==="description"||r&&i==="error"}}const zA={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},KA=(e,{size:t})=>({label:{"--input-label-size":Zr(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Zr(t)} - ${Z(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Zr(t)} - ${Z(2)})`}}),E0=$e((e,t)=>{const r=Se("InputWrapper",zA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,size:c,variant:u,__staticSelector:d,inputContainer:h,inputWrapperOrder:f,label:g,error:v,description:E,labelProps:p,descriptionProps:y,errorProps:C,labelElement:b,children:x,withAsterisk:m,id:k,required:N,__stylesApiProps:H,mod:R,...P}=r,B=Xe({name:["InputWrapper",d],props:H||r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:KA}),_={size:c,variant:u,__staticSelector:d},q=Io(k),L=typeof m=="boolean"?m:N,F=(C==null?void 0:C.id)||`${q}-error`,M=(y==null?void 0:y.id)||`${q}-description`,$=q,z=!!v&&typeof v!="boolean",W=!!E,ie=`${z?F:""} ${W?M:""}`,ae=ie.trim().length>0?ie.trim():void 0,Ee=(p==null?void 0:p.id)||`${q}-label`,Ce=g&&A.createElement(Ah,{key:"label",labelElement:b,id:Ee,htmlFor:$,required:L,..._,...p},g),Ie=W&&A.createElement(Ih,{key:"description",...y,..._,size:(y==null?void 0:y.size)||_.size,id:(y==null?void 0:y.id)||M},E),Ae=A.createElement(A.Fragment,{key:"input"},h(x)),Re=z&&A.createElement(Rh,{...C,..._,size:(C==null?void 0:C.size)||_.size,key:"error",id:(C==null?void 0:C.id)||F},v),Fe=f.map(Ue=>{switch(Ue){case"label":return Ce;case"input":return Ae;case"description":return Ie;case"error":return Re;default:return null}});return A.createElement(UA,{value:{getStyles:B,describedBy:ae,inputId:$,labelId:Ee,...qA(f,{hasDescription:W,hasError:z})}},A.createElement(ye,{ref:t,variant:u,size:c,mod:[{error:!!v},R],...B("root"),...P},Fe))});E0.classes=An;E0.displayName="@mantine/core/InputWrapper";const GA={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},WA=(e,t,r)=>({wrapper:{"--input-margin-top":r.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":r.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":It(t.size,"input-height"),"--input-fz":Zr(t.size),"--input-radius":t.radius===void 0?void 0:In(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Z(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Z(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?It(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),nr=pi((e,t)=>{const r=Se("Input",GA,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:c,__stylesApiProps:u,size:d,wrapperProps:h,error:f,disabled:g,leftSection:v,leftSectionProps:E,leftSectionWidth:p,rightSection:y,rightSectionProps:C,rightSectionWidth:b,rightSectionPointerEvents:x,leftSectionPointerEvents:m,variant:k,vars:N,pointer:H,multiline:R,radius:P,id:B,withAria:_,withErrorStyles:q,mod:L,...F}=r,{styleProps:M,rest:$}=$c(F),z=Uc(),W={offsetBottom:z==null?void 0:z.offsetBottom,offsetTop:z==null?void 0:z.offsetTop},ie=Xe({name:["Input",c],props:u||r,classes:An,className:i,style:s,classNames:n,styles:o,unstyled:a,stylesCtx:W,rootSelector:"wrapper",vars:N,varsResolver:WA}),ae=_?{required:l,disabled:g,"aria-invalid":!!f,"aria-describedby":z==null?void 0:z.describedBy,id:(z==null?void 0:z.inputId)||B}:{};return A.createElement(ye,{...ie("wrapper"),...M,...h,mod:[{error:!!f&&q,pointer:H,disabled:g,multiline:R,"data-with-right-section":!!y,"data-with-left-section":!!v},L],variant:k,size:d},v&&A.createElement("div",{...E,"data-position":"left",...ie("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style})},v),A.createElement(ye,{component:"input",...$,...ae,ref:t,required:l,mod:{disabled:g,error:!!f&&q},variant:k,...ie("input")}),y&&A.createElement("div",{...C,"data-position":"right",...ie("section",{className:C==null?void 0:C.className,style:C==null?void 0:C.style})},y))});nr.classes=An;nr.Wrapper=E0;nr.Label=Ah;nr.Error=Rh;nr.Description=Ih;nr.Placeholder=y0;nr.displayName="@mantine/core/Input";function YA(e,t,r){const n=Se(e,t,r),{label:i,description:s,error:o,required:a,classNames:l,styles:c,className:u,unstyled:d,__staticSelector:h,__stylesApiProps:f,errorProps:g,labelProps:v,descriptionProps:E,wrapperProps:p,id:y,size:C,style:b,inputContainer:x,inputWrapperOrder:m,withAsterisk:k,variant:N,vars:H,mod:R,...P}=n,{styleProps:B,rest:_}=$c(P),q={label:i,description:s,error:o,required:a,classNames:l,className:u,__staticSelector:h,__stylesApiProps:f||n,errorProps:g,labelProps:v,descriptionProps:E,unstyled:d,styles:c,size:C,style:b,inputContainer:x,inputWrapperOrder:m,withAsterisk:k,variant:N,id:y,mod:R,...p};return{..._,classNames:l,styles:c,unstyled:d,wrapperProps:{...q,...B},inputProps:{required:a,classNames:l,styles:c,unstyled:d,size:C,__staticSelector:h,__stylesApiProps:f||n,error:o,variant:N,id:y}}}const QA={__staticSelector:"InputBase",withAria:!0},_o=pi((e,t)=>{const{inputProps:r,wrapperProps:n,...i}=YA("InputBase",QA,e);return A.createElement(nr.Wrapper,{...n},A.createElement(nr,{...r,...i,ref:t}))});_o.classes={...nr.classes,...nr.Wrapper.classes};_o.displayName="@mantine/core/InputBase";var Tw={root:"m-b6d8b162"};function XA(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const ZA={inherit:!1},JA=(e,{variant:t,lineClamp:r,gradient:n,size:i,color:s})=>({root:{"--text-fz":Zr(i),"--text-lh":b5(i),"--text-gradient":t==="gradient"?pg(n,e):void 0,"--text-line-clamp":typeof r=="number"?r.toString():void 0,"--text-color":s?Sn(s,e):void 0}}),Ud=pi((e,t)=>{const r=Se("Text",ZA,e),{lineClamp:n,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:c,vars:u,className:d,style:h,classNames:f,styles:g,unstyled:v,variant:E,mod:p,size:y,...C}=r,b=Xe({name:["Text",c],props:r,classes:Tw,className:d,style:h,classNames:f,styles:g,unstyled:v,vars:u,varsResolver:JA});return A.createElement(ye,{...b("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:E,mod:[{"data-truncate":XA(i),"data-line-clamp":typeof n=="number","data-inline":s,"data-inherit":o},p],size:y,...C})});Ud.classes=Tw;Ud.displayName="@mantine/core/Text";function Iw(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Iw(t))}:e}function e8(e){return e?e.map(t=>Iw(t)):[]}function Rw(e){return e.reduce((t,r)=>"group"in r?{...t,...Rw(r.items)}:(t[r.value]=r,t),{})}var Vr={dropdown:"m-88b62a41",options:"m-b2821a6e",option:"m-92253aa5",search:"m-985517d8",empty:"m-2530cd1d",header:"m-858f94bd",footer:"m-82b967cb",group:"m-254f3e4f",groupLabel:"m-2bb2e9e5",chevron:"m-2943220b",optionsDropdownOption:"m-390b5f4",optionsDropdownCheckIcon:"m-8ee53fc2"};const t8={error:null},r8=(e,{size:t})=>({chevron:{"--combobox-chevron-size":It(t,"combobox-chevron-size")}}),C0=$e((e,t)=>{const r=Se("ComboboxChevron",t8,e),{size:n,error:i,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,mod:d,...h}=r,f=Xe({name:"ComboboxChevron",classes:Vr,props:r,style:s,className:o,classNames:a,styles:l,unstyled:c,vars:u,varsResolver:r8,rootSelector:"chevron"});return A.createElement(ye,{component:"svg",...h,...f("chevron"),size:n,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t},A.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))});C0.classes=Vr;C0.displayName="@mantine/core/ComboboxChevron";const[n8,kn]=Ui("Combobox component was not found in tree"),Aw=S.forwardRef(({size:e,onMouseDown:t,onClick:r,onClear:n,...i},s)=>A.createElement(Mc,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{n(),r==null||r(o)}}));Aw.displayName="@mantine/core/ComboboxClearButton";const i8={},S0=$e((e,t)=>{const{classNames:r,styles:n,className:i,style:s,hidden:o,...a}=Se("ComboboxDropdown",i8,e),l=kn();return A.createElement(Ht.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:r,styles:n})})});S0.classes=Vr;S0.displayName="@mantine/core/ComboboxDropdown";const s8={refProp:"ref"},kw=$e((e,t)=>{const{children:r,refProp:n}=Se("ComboboxDropdownTarget",s8,e);if(kn(),!Pc(r))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return A.createElement(Ht.Target,{ref:t,refProp:n},r)});kw.displayName="@mantine/core/ComboboxDropdownTarget";const o8={},w0=$e((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=Se("ComboboxEmpty",o8,e),l=kn();return A.createElement(ye,{ref:t,...l.getStyles("empty",{className:n,classNames:r,styles:s,style:i}),...a})});w0.classes=Vr;w0.displayName="@mantine/core/ComboboxEmpty";function b0({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:r,withExpandedAttribute:n,targetType:i,autoComplete:s}){const o=kn(),[a,l]=S.useState(null),c=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){const h=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&h!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...r?{"aria-haspopup":"listbox","aria-expanded":n&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:c}}const a8={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},xw=$e((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=Se("ComboboxEventsTarget",a8,e);if(!Pc(r))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=kn(),d=b0({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:l});return S.cloneElement(r,{...d,...c,[n]:sn(t,u.store.targetRef,r==null?void 0:r.ref)})});xw.displayName="@mantine/core/ComboboxEventsTarget";const l8={},T0=$e((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=Se("ComboboxFooter",l8,e),l=kn();return A.createElement(ye,{ref:t,...l.getStyles("footer",{className:n,classNames:r,style:i,styles:s}),...a})});T0.classes=Vr;T0.displayName="@mantine/core/ComboboxFooter";const c8={},I0=$e((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,children:a,label:l,...c}=Se("ComboboxGroup",c8,e),u=kn();return A.createElement(ye,{ref:t,...u.getStyles("group",{className:n,classNames:r,style:i,styles:s}),...c},l&&A.createElement("div",{...u.getStyles("groupLabel",{classNames:r,styles:s})},l),a)});I0.classes=Vr;I0.displayName="@mantine/core/ComboboxGroup";const u8={},R0=$e((e,t)=>{const{classNames:r,className:n,style:i,styles:s,vars:o,...a}=Se("ComboboxHeader",u8,e),l=kn();return A.createElement(ye,{ref:t,...l.getStyles("header",{className:n,classNames:r,style:i,styles:s}),...a})});R0.classes=Vr;R0.displayName="@mantine/core/ComboboxHeader";const d8={},A0=$e((e,t)=>{const r=Se("ComboboxOption",d8,e),{classNames:n,className:i,style:s,styles:o,vars:a,onClick:l,id:c,active:u,onMouseDown:d,onMouseOver:h,disabled:f,selected:g,mod:v,...E}=r,p=kn(),y=S.useId(),C=c||y;return A.createElement(ye,{...p.getStyles("option",{className:i,classNames:n,styles:o,style:s}),...E,ref:t,id:C,mod:["combobox-option",{"combobox-active":u,"combobox-disabled":f,"combobox-selected":g},v],role:"option",onClick:b=>{var x;f?b.preventDefault():((x=p.onOptionSubmit)==null||x.call(p,r.value,r),l==null||l(b))},onMouseDown:b=>{b.preventDefault(),d==null||d(b)},onMouseOver:b=>{p.resetSelectionOnOptionHover&&p.store.resetSelectedOption(),h==null||h(b)}})});A0.classes=Vr;A0.displayName="@mantine/core/ComboboxOption";const h8={},k0=$e((e,t)=>{const r=Se("ComboboxOptions",h8,e),{classNames:n,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:c,...u}=r,d=kn(),h=Io(a);return S.useEffect(()=>{d.store.setListId(h)},[h]),A.createElement(ye,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:n,styles:o}),...u,id:h,role:"listbox","aria-labelledby":c,onMouseDown:f=>{f.preventDefault(),l==null||l(f)}})});k0.classes=Vr;k0.displayName="@mantine/core/ComboboxOptions";const f8={withAriaAttributes:!0,withKeyboardNavigation:!0},x0=$e((e,t)=>{const r=Se("ComboboxSearch",f8,e),{classNames:n,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:c,size:u,...d}=r,h=kn(),f=h.getStyles("search"),g=b0({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:c,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return A.createElement(nr,{ref:sn(t,h.store.searchRef),classNames:[{input:f.className},n],styles:[{input:f.style},i],size:u||h.size,...g,...d,__staticSelector:"Combobox"})});x0.classes=Vr;x0.displayName="@mantine/core/ComboboxSearch";const p8={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Nw=$e((e,t)=>{const{children:r,refProp:n,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...c}=Se("ComboboxTarget",p8,e);if(!Pc(r))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const u=kn(),d=b0({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:r.props.onKeyDown,autoComplete:l}),h=S.cloneElement(r,{...d,...c});return A.createElement(Ht.Target,{ref:sn(t,u.store.targetRef)},h)});Nw.displayName="@mantine/core/ComboboxTarget";function g8(e,t,r){for(let n=e-1;n>=0;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=t.length-1;n>-1;n-=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function m8(e,t,r){for(let n=e+1;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n;if(r){for(let n=0;n<t.length;n+=1)if(!t[n].hasAttribute("data-combobox-disabled"))return n}return e}function v8(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function _w({defaultOpened:e,opened:t,onOpenedChange:r,onDropdownClose:n,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=Co({value:t,defaultValue:e,finalValue:!1,onChange:r}),c=S.useRef(null),u=S.useRef(-1),d=S.useRef(null),h=S.useRef(null),f=S.useRef(-1),g=S.useRef(-1),v=S.useRef(-1),E=S.useCallback((F="unknown")=>{a||(l(!0),i==null||i(F))},[l,i,a]),p=S.useCallback((F="unknown")=>{a&&(l(!1),n==null||n(F))},[l,n,a]),y=S.useCallback((F="unknown")=>{a?p(F):E(F)},[p,E,a]),C=S.useCallback(()=>{const F=document.querySelector(`#${c.current} [data-combobox-selected]`);F==null||F.removeAttribute("data-combobox-selected"),F==null||F.removeAttribute("aria-selected")},[]),b=S.useCallback(F=>{const M=document.getElementById(c.current),$=M==null?void 0:M.querySelectorAll("[data-combobox-option]");if(!$)return null;const z=F>=$.length?0:F<0?$.length-1:F;return u.current=z,$!=null&&$[z]&&!$[z].hasAttribute("data-combobox-disabled")?(C(),$[z].setAttribute("data-combobox-selected","true"),$[z].setAttribute("aria-selected","true"),$[z].scrollIntoView({block:"nearest",behavior:o}),$[z].id):null},[o,C]),x=S.useCallback(()=>{const F=document.querySelector(`#${c.current} [data-combobox-active]`);if(F){const M=document.querySelectorAll(`#${c.current} [data-combobox-option]`),$=Array.from(M).findIndex(z=>z===F);return b($)}return b(0)},[b]),m=S.useCallback(()=>b(m8(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),k=S.useCallback(()=>b(g8(u.current,document.querySelectorAll(`#${c.current} [data-combobox-option]`),s)),[b,s]),N=S.useCallback(()=>b(v8(document.querySelectorAll(`#${c.current} [data-combobox-option]`))),[b]),H=S.useCallback((F="selected",M)=>{v.current=window.setTimeout(()=>{var W;const $=document.querySelectorAll(`#${c.current} [data-combobox-option]`),z=Array.from($).findIndex(ie=>ie.hasAttribute(`data-combobox-${F}`));u.current=z,M!=null&&M.scrollIntoView&&((W=$[z])==null||W.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),R=S.useCallback(()=>{u.current=-1,C()},[C]),P=S.useCallback(()=>{const F=document.querySelectorAll(`#${c.current} [data-combobox-option]`),M=F==null?void 0:F[u.current];M==null||M.click()},[]),B=S.useCallback(F=>{c.current=F},[]),_=S.useCallback(()=>{f.current=window.setTimeout(()=>d.current.focus(),0)},[]),q=S.useCallback(()=>{g.current=window.setTimeout(()=>h.current.focus(),0)},[]),L=S.useCallback(()=>u.current,[]);return S.useEffect(()=>()=>{window.clearTimeout(f.current),window.clearTimeout(g.current),window.clearTimeout(v.current)},[]),{dropdownOpened:a,openDropdown:E,closeDropdown:p,toggleDropdown:y,selectedOptionIndex:u.current,getSelectedOptionIndex:L,selectOption:b,selectFirstOption:N,selectActiveOption:x,selectNextOption:m,selectPreviousOption:k,resetSelectedOption:R,updateSelectedOptionIndex:H,listId:c.current,setListId:B,clickSelectedOption:P,searchRef:d,focusSearchInput:_,targetRef:h,focusTarget:q}}const y8={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},E8=(e,{size:t,dropdownPadding:r})=>({options:{"--combobox-option-fz":Zr(t),"--combobox-option-padding":It(t,"combobox-option-padding")},dropdown:{"--combobox-padding":r===void 0?void 0:Z(r),"--combobox-option-fz":Zr(t),"--combobox-option-padding":It(t,"combobox-option-padding")}});function Ct(e){const t=Se("Combobox",y8,e),{classNames:r,styles:n,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:c,size:u,dropdownPadding:d,resetSelectionOnOptionHover:h,__staticSelector:f,readOnly:g,...v}=t,E=_w(),p=o||E,y=Xe({name:f||"Combobox",classes:Vr,props:t,classNames:r,styles:n,unstyled:i,vars:a,varsResolver:E8}),C=()=>{c==null||c(),p.closeDropdown()};return A.createElement(n8,{value:{getStyles:y,store:p,onOptionSubmit:l,size:u,resetSelectionOnOptionHover:h,readOnly:g}},A.createElement(Ht,{opened:p.dropdownOpened,...v,onClose:C,withRoles:!1,unstyled:i},s))}const C8=e=>e;Ct.extend=C8;Ct.classes=Vr;Ct.displayName="@mantine/core/Combobox";Ct.Target=Nw;Ct.Dropdown=S0;Ct.Options=k0;Ct.Option=A0;Ct.Search=x0;Ct.Empty=w0;Ct.Chevron=C0;Ct.Footer=T0;Ct.Header=R0;Ct.EventsTarget=xw;Ct.DropdownTarget=kw;Ct.Group=I0;Ct.ClearButton=Aw;var Dw={root:"m-5f75b09e",body:"m-5f6e695e",labelWrapper:"m-d3ea56bb",label:"m-8ee546b8",description:"m-328f68c0",error:"m-8e8a99cc"};const S8=Dw,Pw=S.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:r,classNames:n,styles:i,unstyled:s,children:o,label:a,description:l,id:c,disabled:u,error:d,size:h,labelPosition:f="left",bodyElement:g="div",labelElement:v="label",variant:E,style:p,vars:y,mod:C,...b},x)=>{const m=Xe({name:e,props:t,className:r,style:p,classes:Dw,classNames:n,styles:i,unstyled:s});return A.createElement(ye,{...m("root"),ref:x,__vars:{"--label-fz":Zr(h),"--label-lh":It(h,"label-lh")},mod:[{"label-position":f},C],variant:E,size:h,...b},A.createElement(ye,{component:g,htmlFor:g==="label"?c:void 0,...m("body")},o,A.createElement("div",{...m("labelWrapper"),"data-disabled":u||void 0},a&&A.createElement(ye,{component:v,htmlFor:v==="label"?c:void 0,...m("label"),"data-disabled":u||void 0},a),l&&A.createElement(nr.Description,{size:h,__inheritStyles:!1,...m("description")},l),d&&d!=="boolean"&&A.createElement(nr.Error,{size:h,__inheritStyles:!1,...m("error")},d))))});Pw.displayName="@mantine/core/InlineInput";const Bw=S.createContext(null),w8=Bw.Provider,b8=()=>S.useContext(Bw);function T8({children:e,role:t}){const r=Uc();return r?A.createElement("div",{role:t,"aria-labelledby":r.labelId,"aria-describedby":r.describedBy},e):A.createElement(A.Fragment,null,e)}const I8={},N0=$e((e,t)=>{const{value:r,defaultValue:n,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...c}=Se("CheckboxGroup",I8,e),[u,d]=Co({value:r,defaultValue:n,finalValue:[],onChange:i}),h=f=>{const g=f.currentTarget.value;!l&&d(u.includes(g)?u.filter(v=>v!==g):[...u,g])};return A.createElement(w8,{value:{value:u,onChange:h,size:s}},A.createElement(nr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"CheckboxGroup"},A.createElement(T8,{role:"group"},a)))});N0.classes=nr.Wrapper.classes;N0.displayName="@mantine/core/CheckboxGroup";function $w({size:e,style:t,...r}){const n=e!==void 0?{width:Z(e),height:Z(e),...t}:t;return A.createElement("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:n,"aria-hidden":!0,...r},A.createElement("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function R8({indeterminate:e,...t}){return e?A.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t},A.createElement("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})):A.createElement($w,{...t})}var Lw={root:"m-bf2d988c",inner:"m-26062bec",input:"m-26063560",icon:"m-bf295423","input--outline":"m-215c4542"};const A8={labelPosition:"right",icon:R8},k8=(e,{radius:t,color:r,size:n,iconColor:i,variant:s,autoContrast:o})=>{const a=el({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":It(n,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:In(t),"--checkbox-color":s==="outline"?l:Sn(r,e),"--checkbox-icon-color":i?Sn(i,e):f4(o,e)?xS({color:r,theme:e}):void 0}}},kh=$e((e,t)=>{const r=Se("Checkbox",A8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,color:c,label:u,id:d,size:h,radius:f,wrapperProps:g,children:v,checked:E,labelPosition:p,description:y,error:C,disabled:b,variant:x,indeterminate:m,icon:k,rootRef:N,iconColor:H,onChange:R,autoContrast:P,mod:B,..._}=r,q=b8(),L=h||(q==null?void 0:q.size),F=k,M=Xe({name:"Checkbox",props:r,classes:Lw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:k8}),{styleProps:$,rest:z}=$c(_),W=Io(d),ie=q?{checked:q.value.includes(z.value),onChange:ae=>{q.onChange(ae),R==null||R(ae)}}:{};return A.createElement(Pw,{...M("root"),__staticSelector:"Checkbox",__stylesApiProps:r,id:W,size:L,labelPosition:p,label:u,description:y,error:C,disabled:b,classNames:n,styles:o,unstyled:a,"data-checked":ie.checked||E||void 0,variant:x,ref:N,mod:B,...$,...g},A.createElement(ye,{...M("inner"),mod:{"data-label-position":p}},A.createElement(ye,{component:"input",id:W,ref:t,checked:E,disabled:b,mod:{error:!!C,indeterminate:m},...M("input",{focusable:!0,variant:x}),onChange:R,...z,...ie,type:"checkbox"}),A.createElement(F,{indeterminate:m,...M("icon")})))});kh.classes={...Lw,...S8};kh.displayName="@mantine/core/Checkbox";kh.Group=N0;function yc(e){return"group"in e}function Ow({options:e,search:t,limit:r}){const n=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===r)return i;yc(o)&&i.push({group:o.group,items:Ow({options:o.items,search:t,limit:r-i.length})}),yc(o)||o.label.toLowerCase().includes(n)&&i.push(o)}return i}function x8(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Mw(e,t=new Set){if(Array.isArray(e))for(const r of e)if(yc(r))Mw(r.items,t);else{if(typeof r.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof r.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof r.value}`);if(t.has(r.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${r.value}" was provided more than once`);t.add(r.value)}}function N8(e,t){return Array.isArray(e)?e.includes(t):e===t}function Uw({data:e,withCheckIcon:t,value:r,checkIconPosition:n,unstyled:i,renderOption:s}){if(!yc(e)){const a=N8(r,e.value),l=t&&a&&A.createElement($w,{className:Vr.optionsDropdownCheckIcon}),c=A.createElement(A.Fragment,null,n==="left"&&l,A.createElement("span",null,e.label),n==="right"&&l);return A.createElement(Ct.Option,{value:e.value,disabled:e.disabled,className:pr({[Vr.optionsDropdownOption]:!i}),"data-reverse":n==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a},typeof s=="function"?s({option:e,checked:a}):c)}const o=e.items.map(a=>A.createElement(Uw,{data:a,value:r,key:a.value,unstyled:i,withCheckIcon:t,checkIconPosition:n}));return A.createElement(Ct.Group,{label:e.group},o)}function _8({data:e,hidden:t,hiddenWhenEmpty:r,filter:n,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:c=!1,value:u,checkIconPosition:d,nothingFoundMessage:h,unstyled:f,labelId:g,renderOption:v}){Mw(e);const p=typeof i=="string"?(n||Ow)({options:e,search:l?i:"",limit:s??1/0}):e,y=x8(p),C=p.map(b=>A.createElement(Uw,{data:b,key:yc(b)?b.group:b.value,withCheckIcon:c,value:u,checkIconPosition:d,unstyled:f,renderOption:v}));return A.createElement(Ct.Dropdown,{hidden:t||r&&y},A.createElement(Ct.Options,{labelledBy:g},a?A.createElement(tl.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y"},C):C,y&&h&&A.createElement(Ct.Empty,null,h)))}var Hw={root:"m-347db0ec","root--dot":"m-fbd81e3d",label:"m-5add502a",section:"m-91fdda9b"};const D8={},P8=(e,{radius:t,color:r,gradient:n,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":It(s,"badge-height"),"--badge-padding-x":It(s,"badge-padding-x"),"--badge-fz":It(s,"badge-fz"),"--badge-radius":t===void 0?void 0:In(t),"--badge-bg":r||i?a.background:void 0,"--badge-color":r||i?a.color:void 0,"--badge-bd":r||i?a.border:void 0,"--badge-dot-color":i==="dot"?Sn(r,e):void 0}}},Hc=pi((e,t)=>{const r=Se("Badge",D8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,radius:c,color:u,gradient:d,leftSection:h,rightSection:f,children:g,variant:v,fullWidth:E,autoContrast:p,circle:y,mod:C,...b}=r,x=Xe({name:"Badge",props:r,classes:Hw,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:P8});return A.createElement(ye,{variant:v,mod:[{block:E,circle:y},C],...x("root",{variant:v}),ref:t,...b},h&&A.createElement("span",{...x("section"),"data-position":"left"},h),A.createElement("span",{...x("label")},g),f&&A.createElement("span",{...x("section"),"data-position":"right"},f))});Hc.classes=Hw;Hc.displayName="@mantine/core/Badge";var xh={root:"m-77c9d27d",inner:"m-80f1301b",label:"m-811560b9",section:"m-a74036a",loader:"m-a25b86ee",group:"m-80d6d844"};const zy={orientation:"horizontal"},B8=(e,{borderWidth:t})=>({group:{"--button-border-width":Z(t)}}),_0=$e((e,t)=>{const r=Se("ButtonGroup",zy,e),{className:n,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:c,borderWidth:u,variant:d,mod:h,...f}=Se("ButtonGroup",zy,e),g=Xe({name:"ButtonGroup",props:r,classes:xh,className:n,style:i,classNames:s,styles:o,unstyled:a,vars:c,varsResolver:B8,rootSelector:"group"});return A.createElement(ye,{...g("group"),ref:t,variant:d,mod:[{"data-orientation":l},h],role:"group",...f})});_0.classes=xh;_0.displayName="@mantine/core/ButtonGroup";const $8={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Z(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},L8={},O8=(e,{radius:t,color:r,gradient:n,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:r||e.primaryColor,theme:e,gradient:n,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":It(s,"button-height"),"--button-padding-x":It(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Zr(s.replace("compact-","")):Zr(s),"--button-radius":t===void 0?void 0:In(t),"--button-bg":r||i?l.background:void 0,"--button-hover":r||i?l.hover:void 0,"--button-color":l.color,"--button-bd":r||i?l.border:void 0,"--button-hover-color":r||i?l.hoverColor:void 0}}},Li=pi((e,t)=>{const r=Se("Button",L8,e),{style:n,vars:i,className:s,color:o,disabled:a,children:l,leftSection:c,rightSection:u,fullWidth:d,variant:h,radius:f,loading:g,loaderProps:v,gradient:E,classNames:p,styles:y,unstyled:C,"data-disabled":b,autoContrast:x,mod:m,...k}=r,N=Xe({name:"Button",props:r,classes:xh,className:s,style:n,classNames:p,styles:y,unstyled:C,vars:i,varsResolver:O8}),H=!!c,R=!!u;return A.createElement(Lc,{ref:t,...N("root",{active:!a&&!g&&!b}),unstyled:C,variant:h,disabled:a||g,mod:[{disabled:a||b,loading:g,block:d,"with-left-section":H,"with-right-section":R},m],...k},A.createElement(No,{mounted:!!g,transition:$8,duration:150},P=>A.createElement(ye,{component:"span",...N("loader",{style:P}),"aria-hidden":!0},A.createElement(nl,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...v}))),A.createElement("span",{...N("inner")},c&&A.createElement(ye,{component:"span",...N("section"),mod:{position:"left"}},c),A.createElement(ye,{component:"span",mod:{loading:g},...N("label")},l),u&&A.createElement(ye,{component:"span",...N("section"),mod:{position:"right"}},u)))});Li.classes=xh;Li.displayName="@mantine/core/Button";Li.Group=_0;var Fw={root:"m-7485cace"};const M8={},U8=(e,{size:t,fluid:r})=>({root:{"--container-size":r?void 0:It(t,"container-size")}}),D0=$e((e,t)=>{const r=Se("Container",M8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:c,mod:u,...d}=r,h=Xe({name:"Container",classes:Fw,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:U8});return A.createElement(ye,{ref:t,mod:[{fluid:c},u],...h("root"),...d})});D0.classes=Fw;D0.displayName="@mantine/core/Container";const[H8,jw]=Ui("Grid component was not found in tree"),Eg=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Ky=(e,t,r)=>r||e==="auto"?"100%":e==="content"?"unset":Eg(e,t),Gy=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Wy=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function F8({span:e,order:t,offset:r,selector:n}){var h;const i=qn(),s=jw(),a=Bl(e)===void 0?12:Bl(e),l=Dc({"--col-order":(h=Bl(t))==null?void 0:h.toString(),"--col-flex-grow":Gy(a,s.grow),"--col-flex-basis":Eg(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Ky(a,s.columns,s.grow),"--col-offset":Wy(Bl(r),s.columns)}),c=Er(i.breakpoints).reduce((f,g)=>{var v;return f[g]||(f[g]={}),typeof t=="object"&&t[g]!==void 0&&(f[g]["--col-order"]=(v=t[g])==null?void 0:v.toString()),typeof e=="object"&&e[g]!==void 0&&(f[g]["--col-flex-grow"]=Gy(e[g],s.grow),f[g]["--col-flex-basis"]=Eg(e[g],s.columns),f[g]["--col-width"]=e[g]==="content"?"auto":void 0,f[g]["--col-max-width"]=Ky(e[g],s.columns,s.grow)),typeof r=="object"&&r[g]!==void 0&&(f[g]["--col-offset"]=Wy(r[g],s.columns)),f},{}),d=IS(Er(c),i).filter(f=>Er(c[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:c[f.value]}));return A.createElement(e0,{styles:l,media:d,selector:n})}var P0={root:"m-410352e9",inner:"m-dee7bd2f",col:"m-96bdd299"};const j8={span:12},B0=$e((e,t)=>{const r=Se("GridCol",j8,e),{classNames:n,className:i,style:s,styles:o,vars:a,span:l,order:c,offset:u,...d}=r,h=jw(),f=t0();return A.createElement(A.Fragment,null,A.createElement(F8,{selector:`.${f}`,span:l,order:c,offset:u}),A.createElement(ye,{ref:t,...h.getStyles("col",{className:pr(i,f),style:s,classNames:n,styles:o}),...d}))});B0.classes=P0;B0.displayName="@mantine/core/GridCol";function V8({gutter:e,selector:t}){const r=qn(),n=Dc({"--grid-gutter":So(Bl(e))}),i=Er(r.breakpoints).reduce((a,l)=>(a[l]||(a[l]={}),typeof e=="object"&&e[l]!==void 0&&(a[l]["--grid-gutter"]=So(e[l])),a),{}),o=IS(Er(i),r).filter(a=>Er(i[a.value]).length>0).map(a=>({query:`(min-width: ${r.breakpoints[a.value]})`,styles:i[a.value]}));return A.createElement(e0,{styles:n,media:o,selector:t})}const q8={gutter:"md",grow:!1,columns:12},z8=(e,{justify:t,align:r,overflow:n})=>({root:{"--grid-justify":t,"--grid-align":r,"--grid-overflow":n}}),ka=$e((e,t)=>{const r=Se("Grid",q8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,grow:c,gutter:u,columns:d,align:h,justify:f,children:g,...v}=r,E=Xe({name:"Grid",classes:P0,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:z8}),p=t0();return A.createElement(H8,{value:{getStyles:E,grow:c,columns:d}},A.createElement(V8,{selector:`.${p}`,...r}),A.createElement(ye,{ref:t,...E("root",{className:p}),...v},A.createElement("div",{...E("inner")},g)))});ka.classes=P0;ka.displayName="@mantine/core/Grid";ka.Col=B0;const[K8,il]=Ui("Modal component was not found in tree");var ji={root:"m-9df02822",content:"m-54c44539",inner:"m-1f958f16",header:"m-d0e2b9cd"};const G8={},Nh=$e((e,t)=>{const r=Se("ModalBody",G8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=il();return A.createElement(Ew,{ref:t,...c.getStyles("body",{classNames:n,style:s,styles:o,className:i}),...l})});Nh.classes=ji;Nh.displayName="@mantine/core/ModalBody";const W8={},_h=$e((e,t)=>{const r=Se("ModalCloseButton",W8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=il();return A.createElement(Cw,{ref:t,...c.getStyles("close",{classNames:n,style:s,styles:o,className:i}),...l})});_h.classes=ji;_h.displayName="@mantine/core/ModalCloseButton";const Y8={},Dh=$e((e,t)=>{const r=Se("ModalContent",Y8,e),{classNames:n,className:i,style:s,styles:o,vars:a,children:l,...c}=r,u=il(),d=u.scrollAreaComponent||MA;return A.createElement(BA,{...u.getStyles("content",{className:i,style:s,styles:o,classNames:n}),innerProps:u.getStyles("inner",{className:i,style:s,styles:o,classNames:n}),"data-full-screen":u.fullScreen||void 0,ref:t,...c},A.createElement(d,{style:{maxHeight:u.fullScreen?"100dvh":`calc(100dvh - (${Z(u.yOffset)} * 2))`}},l))});Dh.classes=ji;Dh.displayName="@mantine/core/ModalContent";const Q8={},Ph=$e((e,t)=>{const r=Se("ModalHeader",Q8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=il();return A.createElement(Sw,{ref:t,...c.getStyles("header",{classNames:n,style:s,styles:o,className:i}),...l})});Ph.classes=ji;Ph.displayName="@mantine/core/ModalHeader";const X8={},Bh=$e((e,t)=>{const r=Se("ModalOverlay",X8,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=il();return A.createElement(ww,{ref:t,...c.getStyles("overlay",{classNames:n,style:s,styles:o,className:i}),...l})});Bh.classes=ji;Bh.displayName="@mantine/core/ModalOverlay";const Z8={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ko("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},J8=(e,{radius:t,size:r,yOffset:n,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:In(t),"--modal-size":It(r,"modal-size"),"--modal-y-offset":Z(n),"--modal-x-offset":Z(i)}}),$h=$e((e,t)=>{const r=Se("ModalRoot",Z8,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:c,scrollAreaComponent:u,radius:d,fullScreen:h,centered:f,xOffset:g,__staticSelector:v,...E}=r,p=Xe({name:v,classes:ji,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:J8});return A.createElement(K8,{value:{yOffset:c,scrollAreaComponent:u,getStyles:p,fullScreen:h}},A.createElement(DA,{ref:t,...p("root"),"data-full-screen":h||void 0,"data-centered":f||void 0,unstyled:a,...E}))});$h.classes=ji;$h.displayName="@mantine/core/ModalRoot";const ek={},Lh=$e((e,t)=>{const r=Se("ModalTitle",ek,e),{classNames:n,className:i,style:s,styles:o,vars:a,...l}=r,c=il();return A.createElement(bw,{ref:t,...c.getStyles("title",{classNames:n,style:s,styles:o,className:i}),...l})});Lh.classes=ji;Lh.displayName="@mantine/core/ModalTitle";const tk={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ko("modal"),transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0},gi=$e((e,t)=>{const{title:r,withOverlay:n,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...c}=Se("Modal",tk,e),u=!!r||s;return A.createElement($h,{ref:t,radius:l,...c},n&&A.createElement(Bh,{...i}),A.createElement(Dh,{radius:l},u&&A.createElement(Ph,null,r&&A.createElement(Lh,null,r),s&&A.createElement(_h,{...o})),A.createElement(Nh,null,a)))});gi.classes=ji;gi.displayName="@mantine/core/Modal";gi.Root=$h;gi.Overlay=Bh;gi.Content=Dh;gi.Body=Nh;gi.Header=Ph;gi.Title=Lh;gi.CloseButton=_h;var Vw={root:"m-a513464",icon:"m-a4ceffb",loader:"m-b0920b15",body:"m-a49ed24",title:"m-3feedf16",description:"m-3d733a3a",closeButton:"m-919a4d88"};const rk={withCloseButton:!0},nk=(e,{radius:t,color:r})=>({root:{"--notification-radius":t===void 0?void 0:In(t),"--notification-color":r?Sn(r,e):void 0}}),$0=$e((e,t)=>{const r=Se("Notification",rk,e),{className:n,color:i,radius:s,loading:o,withCloseButton:a,withBorder:l,title:c,icon:u,children:d,onClose:h,closeButtonProps:f,classNames:g,style:v,styles:E,unstyled:p,variant:y,vars:C,mod:b,...x}=r,m=Xe({name:"Notification",classes:Vw,props:r,className:n,style:v,classNames:g,styles:E,unstyled:p,vars:C,varsResolver:nk});return A.createElement(ye,{...m("root"),mod:[{"data-with-icon":!!u||o,"data-with-border":l},b],ref:t,variant:y,...x,role:"alert"},u&&!o&&A.createElement("div",{...m("icon")},u),o&&A.createElement(nl,{size:28,color:i,...m("loader")}),A.createElement("div",{...m("body")},c&&A.createElement("div",{...m("title")},c),A.createElement(ye,{...m("description"),mod:{"data-with-title":!!c}},d)),a&&A.createElement(Mc,{iconSize:16,color:"gray",...f,unstyled:p,onClick:h,...m("closeButton")}))});$0.classes=Vw;$0.displayName="@mantine/core/Notification";const ik=({reveal:e})=>A.createElement("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"}},A.createElement("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}));var Cg={root:"m-f61ca620",input:"m-ccf8da4c",innerInput:"m-f2d85dd2",visibilityToggle:"m-b1072d44"};const sk={visibilityToggleIcon:ik},ok=(e,{size:t})=>({root:{"--psi-icon-size":It(t,"psi-icon-size"),"--psi-button-size":It(t,"psi-button-size")}}),L0=$e((e,t)=>{const r=Se("PasswordInput",sk,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,required:c,error:u,leftSection:d,disabled:h,id:f,variant:g,inputContainer:v,description:E,label:p,size:y,errorProps:C,descriptionProps:b,labelProps:x,withAsterisk:m,inputWrapperOrder:k,wrapperProps:N,radius:H,rightSection:R,rightSectionWidth:P,rightSectionPointerEvents:B,leftSectionWidth:_,visible:q,defaultVisible:L,onVisibilityChange:F,visibilityToggleIcon:M,visibilityToggleButtonProps:$,rightSectionProps:z,leftSectionProps:W,leftSectionPointerEvents:ie,mod:ae,...Ee}=r,Ce=Io(f),[Ie,Ae]=Co({value:q,defaultValue:L,finalValue:!1,onChange:F}),Re=()=>Ae(!Ie),Fe=Xe({name:"PasswordInput",classes:Cg,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:ok}),{resolvedClassNames:Ue,resolvedStyles:Le}=PS({classNames:n,styles:o,props:r}),{styleProps:ke,rest:Y}=$c(Ee),de=M,le=A.createElement(ti,{...Fe("visibilityToggle"),disabled:h,radius:H,"aria-hidden":!$,tabIndex:-1,...$,variant:"subtle",color:"gray",unstyled:a,onMouseDown:ve=>{var et;ve.preventDefault(),(et=$==null?void 0:$.onMouseDown)==null||et.call($,ve),Re()},onKeyDown:ve=>{var et;(et=$==null?void 0:$.onKeyDown)==null||et.call($,ve),ve.key===" "&&(ve.preventDefault(),Re())}},A.createElement(de,{reveal:Ie}));return A.createElement(nr.Wrapper,{required:c,id:Ce,label:p,error:u,description:E,size:y,classNames:Ue,styles:Le,__staticSelector:"PasswordInput",errorProps:C,descriptionProps:b,unstyled:a,withAsterisk:m,inputWrapperOrder:k,inputContainer:v,variant:g,labelProps:{...x,htmlFor:Ce},mod:ae,...Fe("root"),...ke,...N},A.createElement(nr,{component:"div",error:u,leftSection:d,size:y,classNames:{...Ue,input:pr(Cg.input,Ue.input)},styles:Le,radius:H,disabled:h,__staticSelector:"PasswordInput",rightSectionWidth:P,rightSection:R??le,variant:g,unstyled:a,leftSectionWidth:_,rightSectionPointerEvents:B||"all",rightSectionProps:z,leftSectionProps:W,leftSectionPointerEvents:ie,withAria:!1},A.createElement("input",{required:c,"data-invalid":!!u||void 0,"data-with-left-section":!!d||void 0,...Fe("innerInput"),disabled:h,id:Ce,ref:t,...Y,autoComplete:Y.autoComplete||"off",type:Ie?"text":"password"})))});L0.classes={..._o.classes,...Cg};L0.displayName="@mantine/core/PasswordInput";const ak={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Ec=$e((e,t)=>{const r=Se("Select",ak,e),{classNames:n,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:c,onDropdownOpen:u,onFocus:d,onBlur:h,onClick:f,onChange:g,data:v,value:E,defaultValue:p,selectFirstOptionOnChange:y,onOptionSubmit:C,comboboxProps:b,readOnly:x,disabled:m,filter:k,limit:N,withScrollArea:H,maxDropdownHeight:R,size:P,searchable:B,rightSection:_,checkIconPosition:q,withCheckIcon:L,nothingFoundMessage:F,name:M,form:$,searchValue:z,defaultSearchValue:W,onSearchChange:ie,allowDeselect:ae,error:Ee,rightSectionPointerEvents:Ce,id:Ie,clearable:Ae,clearButtonProps:Re,hiddenInputProps:Fe,renderOption:Ue,onClear:Le,autoComplete:ke,...Y}=r,de=S.useMemo(()=>e8(v),[v]),le=S.useMemo(()=>Rw(de),[de]),ve=Io(Ie),[et,ir]=Co({value:E,defaultValue:p,finalValue:null,onChange:g}),ht=typeof et=="string"?le[et]:void 0,[pt,xn]=Co({value:z,defaultValue:W,finalValue:ht?ht.label:"",onChange:ie}),Mt=_w({opened:a,defaultOpened:l,onDropdownOpen:()=>{u==null||u(),Mt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{c==null||c(),Mt.resetSelectedOption()}}),{resolvedClassNames:Ki,resolvedStyles:on}=PS({props:r,styles:i,classNames:n});S.useEffect(()=>{y&&Mt.selectFirstOption()},[y,et]),S.useEffect(()=>{E===null&&xn(""),typeof E=="string"&&ht&&xn(ht.label)},[E,ht]);const Nn=Ae&&!!et&&!m&&!x&&A.createElement(Ct.ClearButton,{size:P,...Re,onClear:()=>{ir(null,null),xn(""),Le==null||Le()}});return A.createElement(A.Fragment,null,A.createElement(Ct,{store:Mt,__staticSelector:"Select",classNames:Ki,styles:on,unstyled:s,readOnly:x,onOptionSubmit:Kt=>{C==null||C(Kt);const an=ae&&le[Kt].value===et?null:le[Kt],Os=an?an.value:null;ir(Os,an),xn(typeof Os=="string"&&(an==null?void 0:an.label)||""),Mt.closeDropdown()},size:P,...b},A.createElement(Ct.Target,{targetType:B?"input":"button",autoComplete:ke},A.createElement(_o,{id:ve,ref:t,rightSection:_||Nn||A.createElement(Ct.Chevron,{size:P,error:Ee,unstyled:s}),rightSectionPointerEvents:Ce||(Nn?"all":"none"),...Y,size:P,__staticSelector:"Select",disabled:m,readOnly:x||!B,value:pt,onChange:Kt=>{xn(Kt.currentTarget.value),Mt.openDropdown(),y&&Mt.selectFirstOption()},onFocus:Kt=>{B&&Mt.openDropdown(),d==null||d(Kt)},onBlur:Kt=>{var an;B&&Mt.closeDropdown(),xn(et!=null&&((an=le[et])==null?void 0:an.label)||""),h==null||h(Kt)},onClick:Kt=>{B?Mt.openDropdown():Mt.toggleDropdown(),f==null||f(Kt)},classNames:Ki,styles:on,unstyled:s,pointer:!B,error:Ee})),A.createElement(_8,{data:de,hidden:x||m,filter:k,search:pt,limit:N,hiddenWhenEmpty:!B||!F,withScrollArea:H,maxDropdownHeight:R,filterOptions:B&&(ht==null?void 0:ht.label)!==pt,value:et,checkIconPosition:q,withCheckIcon:L,nothingFoundMessage:F,unstyled:s,labelId:`${ve}-label`,renderOption:Ue})),A.createElement("input",{type:"hidden",name:M,value:et||"",form:$,disabled:m,...Fe}))});Ec.classes={..._o.classes,...Ct.classes};Ec.displayName="@mantine/core/Select";const[lk,Oh]=Ui("SliderProvider was not found in tree"),qw=S.forwardRef(({size:e,disabled:t,variant:r,color:n,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=Oh();return A.createElement(ye,{tabIndex:-1,variant:r,size:e,ref:a,...l("root"),...o})});qw.displayName="@mantine/core/SliderRoot";const zw=S.forwardRef(({max:e,min:t,value:r,position:n,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:c,thumbLabel:u,onFocus:d,onBlur:h,showLabelOnHover:f,isHovered:g,children:v=null,disabled:E},p)=>{const{getStyles:y}=Oh(),[C,b]=S.useState(!1),x=c||s||C||f&&g;return A.createElement(ye,{tabIndex:0,role:"slider","aria-label":u,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":r,ref:p,__vars:{"--slider-thumb-offset":`${n}%`},...y("thumb",{focusable:!0}),mod:{dragging:s,disabled:E},onFocus:()=>{b(!0),typeof d=="function"&&d()},onBlur:()=>{b(!1),typeof h=="function"&&h()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:m=>m.stopPropagation()},v,A.createElement(No,{mounted:i!=null&&!!x,transition:"fade",duration:0,...l},m=>A.createElement("div",{...y("label",{style:m})},i)))});zw.displayName="@mantine/core/SliderThumb";function Kw({value:e,min:t,max:r}){const n=(e-t)/(r-t)*100;return Math.min(Math.max(n,0),100)}function ck({mark:e,offset:t,value:r,inverted:n=!1}){return n?typeof t=="number"&&e.value<=t||e.value>=r:typeof t=="number"?e.value>=t&&e.value<=r:e.value<=r}function Gw({marks:e,min:t,max:r,disabled:n,value:i,offset:s,inverted:o}){const{getStyles:a}=Oh();if(!e)return null;const l=e.map((c,u)=>A.createElement(ye,{...a("markWrapper"),__vars:{"--mark-offset":`${Kw({value:c.value,min:t,max:r})}%`},key:u},A.createElement(ye,{...a("mark"),mod:{filled:ck({mark:c,value:i,offset:s,inverted:o}),disabled:n}}),c.label&&A.createElement("div",{...a("markLabel")},c.label)));return A.createElement("div",null,l)}Gw.displayName="@mantine/core/SliderMarks";function Ww({filled:e,children:t,offset:r,disabled:n,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=Oh();return A.createElement(A.Fragment,null,A.createElement(ye,{...l("trackContainer"),mod:{disabled:n},...o},A.createElement(ye,{...l("track"),mod:{inverted:s,disabled:n}},A.createElement(ye,{mod:{inverted:s,disabled:n},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${r}% - var(--slider-size))`},...l("bar")}),t,A.createElement(Gw,{...a,offset:i,disabled:n,inverted:s}))))}Ww.displayName="@mantine/core/SliderTrack";function uk({value:e,containerWidth:t,min:r,max:n,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(n-r),l=(a!==0?Math.round(a/i)*i:0)+r,c=Math.max(l,r);return s!==void 0?Number(c.toFixed(s)):c}function yu(e,t){return parseFloat(e.toFixed(t))}function dk(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var Yw={root:"m-dd36362e",label:"m-c9357328",thumb:"m-c9a9a60a",trackContainer:"m-a8645c2",track:"m-c9ade57f",bar:"m-38aeed47",markWrapper:"m-b7b0423a",mark:"m-dd33bc19",markLabel:"m-68c77a5b"};const hk={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},fk=(e,{size:t,color:r,thumbSize:n,radius:i})=>({root:{"--slider-size":It(t,"slider-size"),"--slider-color":r?Sn(r,e):void 0,"--slider-radius":i===void 0?void 0:In(i),"--slider-thumb-size":n!==void 0?Z(n):"calc(var(--slider-size) * 2)"}}),O0=$e((e,t)=>{const r=Se("Slider",hk,e),{classNames:n,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:c,max:u,step:d,precision:h,defaultValue:f,name:g,marks:v,label:E,labelTransitionProps:p,labelAlwaysOn:y,thumbLabel:C,showLabelOnHover:b,thumbChildren:x,disabled:m,unstyled:k,scale:N,inverted:H,className:R,style:P,vars:B,hiddenInputProps:_,...q}=r,L=Xe({name:"Slider",props:r,classes:Yw,classNames:n,className:R,styles:i,style:P,vars:B,varsResolver:fk,unstyled:k}),{dir:F}=yh(),[M,$]=S.useState(!1),[z,W]=Co({value:typeof s=="number"?Wl(s,c,u):s,defaultValue:typeof f=="number"?Wl(f,c,u):f,finalValue:Wl(0,c,u),onChange:o}),ie=S.useRef(z),ae=S.useRef(),Ee=S.useRef(),Ce=Kw({value:z,min:c,max:u}),Ie=N(z),Ae=typeof E=="function"?E(Ie):E,Re=h??dk(d),Fe=S.useCallback(({x:Y})=>{if(!m){const de=uk({value:Y,min:c,max:u,step:d,precision:Re});W(de),ie.current=de}},[m,c,u,d,Re,W]),{ref:Ue,active:Le}=mI(Fe,{onScrubEnd:()=>a==null?void 0:a(ie.current)},F),ke=Y=>{var de,le,ve,et,ir,ht;if(!m)switch(Y.key){case"ArrowUp":{Y.preventDefault(),(de=Ee.current)==null||de.focus();const pt=yu(Math.min(Math.max(z+d,c),u),Re);a==null||a(pt),W(pt);break}case"ArrowRight":{Y.preventDefault(),(le=Ee.current)==null||le.focus();const pt=yu(Math.min(Math.max(F==="rtl"?z-d:z+d,c),u),Re);a==null||a(pt),W(pt);break}case"ArrowDown":{Y.preventDefault(),(ve=Ee.current)==null||ve.focus();const pt=yu(Math.min(Math.max(z-d,c),u),Re);a==null||a(pt),W(pt);break}case"ArrowLeft":{Y.preventDefault(),(et=Ee.current)==null||et.focus();const pt=yu(Math.min(Math.max(F==="rtl"?z+d:z-d,c),u),Re);a==null||a(pt),W(pt);break}case"Home":{Y.preventDefault(),(ir=Ee.current)==null||ir.focus(),a==null||a(c),W(c);break}case"End":{Y.preventDefault(),(ht=Ee.current)==null||ht.focus(),a==null||a(u),W(u);break}}};return A.createElement(lk,{value:{getStyles:L}},A.createElement(qw,{...q,ref:sn(t,ae),onKeyDownCapture:ke,onMouseDownCapture:()=>{var Y;return(Y=ae.current)==null?void 0:Y.focus()},size:l,disabled:m},A.createElement(Ww,{inverted:H,offset:0,filled:Ce,marks:v,min:c,max:u,value:Ie,disabled:m,containerProps:{ref:Ue,onMouseEnter:b?()=>$(!0):void 0,onMouseLeave:b?()=>$(!1):void 0}},A.createElement(zw,{max:u,min:c,value:Ie,position:Ce,dragging:Le,label:Ae,ref:Ee,labelTransitionProps:p,labelAlwaysOn:y,thumbLabel:C,showLabelOnHover:b,isHovered:M,disabled:m},x)),A.createElement("input",{type:"hidden",name:g,value:Ie,..._})))});O0.classes=Yw;O0.displayName="@mantine/core/Slider";const[pk,gk]=Ui("Table component was not found in the tree");var Fc={table:"m-b23fa0ef",th:"m-4e7aa4f3",tr:"m-4e7aa4fd",td:"m-4e7aa4ef",tbody:"m-b2404537",thead:"m-b242d975",caption:"m-9e5a3ac7",scrollContainer:"m-a100c15",scrollContainerInner:"m-62259741"};function mk(e,t){if(!t)return;const r={};return t.columnBorder&&e.withColumnBorders&&(r["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(r["data-with-row-border"]=!0),t.striped&&e.striped&&(r["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(r["data-hover"]=!0),t.captionSide&&e.captionSide&&(r["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(r["data-sticky"]=!0),r}function Do(e,t){const r=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,n=$e((i,s)=>{const o=Se(r,{},i),{classNames:a,className:l,style:c,styles:u,...d}=o,h=gk();return A.createElement(ye,{component:e,ref:s,...mk(h,t),...h.getStyles(e,{className:l,classNames:a,style:c,styles:u,props:o}),...d})});return n.displayName=`@mantine/core/${r}`,n.classes=Fc,n}const Sg=Do("th",{columnBorder:!0}),Qw=Do("td",{columnBorder:!0}),td=Do("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Xw=Do("thead",{stickyHeader:!0}),Zw=Do("tbody"),Jw=Do("tfoot"),eb=Do("caption",{captionSide:!0});function M0({data:e}){return A.createElement(A.Fragment,null,e.caption&&A.createElement(eb,null,e.caption),e.head&&A.createElement(Xw,null,A.createElement(td,null,e.head.map((t,r)=>A.createElement(Sg,{key:r},t)))),e.body&&A.createElement(Zw,null,e.body.map((t,r)=>A.createElement(td,{key:r},t.map((n,i)=>A.createElement(Qw,{key:i},n))))),e.foot&&A.createElement(Jw,null,A.createElement(td,null,e.foot.map((t,r)=>A.createElement(Sg,{key:r},t)))))}M0.displayName="@mantine/core/TableDataRenderer";const vk={type:"scrollarea"},yk=(e,{minWidth:t,type:r})=>({scrollContainer:{"--table-min-width":Z(t),"--table-overflow":r==="native"?"auto":void 0}}),U0=$e((e,t)=>{const r=Se("TableScrollContainer",vk,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,children:c,minWidth:u,type:d,...h}=r,f=Xe({name:"TableScrollContainer",classes:Fc,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:yk,rootSelector:"scrollContainer"});return A.createElement(ye,{component:d==="scrollarea"?tl:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...f("scrollContainer"),...h},A.createElement("div",{...f("scrollContainerInner")},c))});U0.classes=Fc;U0.displayName="@mantine/core/TableScrollContainer";const Ek={withRowBorders:!0,verticalSpacing:7},Ck=(e,{layout:t,captionSide:r,horizontalSpacing:n,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:c,stickyHeaderOffset:u,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":r,"--table-horizontal-spacing":So(n),"--table-vertical-spacing":So(i),"--table-border-color":s?Sn(s,e):void 0,"--table-striped-color":l&&o?Sn(o,e):void 0,"--table-highlight-on-hover-color":c&&a?Sn(a,e):void 0,"--table-sticky-header-offset":d?Z(u):void 0}}),ut=$e((e,t)=>{const r=Se("Table",Ek,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:c,verticalSpacing:u,captionSide:d,stripedColor:h,highlightOnHoverColor:f,striped:g,highlightOnHover:v,withColumnBorders:E,withRowBorders:p,withTableBorder:y,borderColor:C,layout:b,variant:x,data:m,children:k,stickyHeader:N,stickyHeaderOffset:H,mod:R,...P}=r,B=Xe({name:"Table",props:r,className:i,style:s,classes:Fc,classNames:n,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:Ck});return A.createElement(pk,{value:{getStyles:B,stickyHeader:N,striped:g===!0?"odd":g||void 0,highlightOnHover:v,withColumnBorders:E,withRowBorders:p,captionSide:d||"bottom"}},A.createElement(ye,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":y},R],...B("table"),...P},k||!!m&&A.createElement(M0,{data:m})))});ut.classes=Fc;ut.displayName="@mantine/core/Table";ut.Td=Qw;ut.Th=Sg;ut.Tr=td;ut.Thead=Xw;ut.Tbody=Zw;ut.Tfoot=Jw;ut.Caption=eb;ut.ScrollContainer=U0;ut.DataRenderer=M0;const Sk={},Ti=$e((e,t)=>{const r=Se("TextInput",Sk,e);return A.createElement(_o,{component:"input",ref:t,...r,__staticSelector:"TextInput"})});Ti.classes=_o.classes;Ti.displayName="@mantine/core/TextInput";const wk=["h1","h2","h3","h4","h5","h6"];function bk(e,t){const r=t!==void 0?t:`h${e}`;return wk.includes(r)?{fontSize:`var(--mantine-${r}-font-size)`,fontWeight:`var(--mantine-${r}-font-weight)`,lineHeight:`var(--mantine-${r}-line-height)`}:{fontSize:Z(r),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var tb={root:"m-8a5d1357"};const Tk={order:1},Ik=(e,{order:t,size:r,lineClamp:n,textWrap:i})=>{const s=bk(t,r);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof n=="number"?n.toString():void 0,"--title-text-wrap":i}}},Hd=$e((e,t)=>{const r=Se("Title",Tk,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,order:l,vars:c,size:u,variant:d,lineClamp:h,textWrap:f,mod:g,...v}=r,E=Xe({name:"Title",props:r,classes:tb,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:c,varsResolver:Ik});return[1,2,3,4,5,6].includes(l)?A.createElement(ye,{...E("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof h=="number"},g],size:u,...v}):null});Hd.classes=tb;Hd.displayName="@mantine/core/Title";const Yy={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Rk={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Ak({state:e,maxHeight:t,position:r,transitionDuration:n}){const[i,s]=r.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Yy[o],transitionDuration:`${n}ms, ${n}ms, ${n}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},l={opacity:1,transform:Rk[o]},c={opacity:0,maxHeight:0,transform:Yy[o]};return{...a,...{entering:l,entered:l,exiting:c,exited:c}[e]}}function kk(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const rb=S.forwardRef(({data:e,onHide:t,autoClose:r,...n},i)=>{const{autoClose:s,message:o,...a}=e,l=kk(r,e.autoClose),c=S.useRef(),u=()=>window.clearTimeout(c.current),d=()=>{t(e.id),u()},h=()=>{typeof l=="number"&&(c.current=window.setTimeout(d,l))};return S.useEffect(()=>{var f;(f=e.onOpen)==null||f.call(e,e)},[]),S.useEffect(()=>(h(),u),[l]),A.createElement($0,{...n,...a,onClose:d,ref:i,onMouseEnter:u,onMouseLeave:h},o)});rb.displayName="@mantine/notifications/NotificationContainer";var nb={root:"m-b37d9ac7",notification:"m-5ed0edd0"};const xk=RI,Nk={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:ko("overlay"),store:Ro,withinPortal:!0},_k=(e,{zIndex:t,position:r,containerWidth:n})=>{const[i,s]=r.split("-");return{root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-top":i==="top"?"var(--mantine-spacing-md)":void 0,"--notifications-bottom":i==="bottom"?"var(--mantine-spacing-md)":void 0,"--notifications-left":s==="left"?"var(--mantine-spacing-md)":s==="center"?"50%":void 0,"--notifications-right":s==="right"?"var(--mantine-spacing-md)":void 0,"--notifications-transform":s==="center"?"translateX(-50%)":void 0,"--notifications-container-width":Z(n)}}},Vi=$e((e,t)=>{const r=Se("Notifications",Nk,e),{classNames:n,className:i,style:s,styles:o,unstyled:a,vars:l,position:c,autoClose:u,transitionDuration:d,containerWidth:h,notificationMaxHeight:f,limit:g,zIndex:v,store:E,portalProps:p,withinPortal:y,...C}=r,b=qn(),x=CI(E),m=dI(),k=zm(),N=S.useRef({}),H=S.useRef(0),P=(b.respectReducedMotion?k:!1)?1:d,B=Xe({name:"Notifications",classes:nb,props:r,className:i,style:s,classNames:n,styles:o,unstyled:a,vars:l,varsResolver:_k});S.useEffect(()=>{E==null||E.updateState(q=>({...q,limit:g||5}))},[g]),Eo(()=>{x.notifications.length>H.current&&setTimeout(()=>m(),0),H.current=x.notifications.length},[x.notifications]);const _=x.notifications.map(({style:q,...L})=>A.createElement(xk,{key:L.id,timeout:P,onEnter:()=>N.current[L.id].offsetHeight,nodeRef:{current:N.current[L.id]}},F=>A.createElement(rb,{ref:M=>{N.current[L.id]=M},data:L,onHide:M=>hS(M,E),autoClose:u,...B("notification",{style:{...Ak({state:F,position:c,transitionDuration:P,maxHeight:f}),...q}})})));return A.createElement(bh,{withinPortal:y,...p},A.createElement(ye,{...B("root"),ref:t,...C},A.createElement(PI,null,_)))});Vi.classes=nb;Vi.displayName="@mantine/notifications/Notifications";Vi.show=Ao.show;Vi.hide=Ao.hide;Vi.update=Ao.update;Vi.clean=Ao.clean;Vi.cleanQueue=Ao.cleanQueue;Vi.updateState=Ao.updateState;const H0=S.createContext(null);H0.displayName="@mantine/modals/ModalsContext";function Dk(){const e=S.useContext(H0);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Pk({id:e,cancelProps:t,confirmProps:r,labels:n={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:c}){const{cancel:u,confirm:d}=n,h=Dk(),f=v=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(v)),typeof a=="function"&&a(),s&&h.closeModal(e)},g=v=>{typeof(r==null?void 0:r.onClick)=="function"&&(r==null||r.onClick(v)),typeof l=="function"&&l(),i&&h.closeModal(e)};return A.createElement(A.Fragment,null,c&&A.createElement(ye,{mb:"md"},c),A.createElement($i,{justify:"flex-end",...o},A.createElement(Li,{variant:"default",...t,onClick:f},(t==null?void 0:t.children)||u),A.createElement(Li,{...r,onClick:g},(r==null?void 0:r.children)||d)))}const[Bk,jc]=R5("mantine-modals"),$k=jc("openModal"),Lk=jc("closeModal"),Ok=jc("closeAllModals"),Mk=jc("openConfirmModal"),Uk=e=>jc("openContextModal")(e),Hk={open:$k,close:Lk,closeAll:Ok,openConfirmModal:Mk,openContextModal:Uk};function Qy(e,t){var r,n,i,s;t&&e.type==="confirm"&&((n=(r=e.props).onCancel)==null||n.call(r)),(s=(i=e.props).onClose)==null||s.call(i)}function Fk(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(i=>i.id===t.modalId);if(!r)return e;Qy(r,t.canceled);const n=e.modals.filter(i=>i.id!==t.modalId);return{current:n[n.length-1]||e.current,modals:n}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Qy(r,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function jk(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:r,onCancel:n,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:c,labels:u,...d}=e;return{confirmProps:{id:t,children:r,onCancel:n,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:c,labels:u},modalProps:{id:t,...d}}}function Vk({children:e,modalProps:t,labels:r,modals:n}){const[i,s]=S.useReducer(Fk,{modals:[],current:null}),o=S.useRef(i);o.current=i;const a=S.useCallback(E=>{s({type:"CLOSE_ALL",canceled:E})},[o,s]),l=S.useCallback(({modalId:E,...p})=>{const y=E||Ia();return s({type:"OPEN",modal:{id:y,type:"content",props:p}}),y},[s]),c=S.useCallback(({modalId:E,...p})=>{const y=E||Ia();return s({type:"OPEN",modal:{id:y,type:"confirm",props:p}}),y},[s]),u=S.useCallback((E,{modalId:p,...y})=>{const C=p||Ia();return s({type:"OPEN",modal:{id:C,type:"context",props:y,ctx:E}}),C},[s]),d=S.useCallback((E,p)=>{s({type:"CLOSE",modalId:E,canceled:p})},[o,s]);Bk({openModal:l,openConfirmModal:c,openContextModal:({modal:E,...p})=>u(E,p),closeModal:d,closeContextModal:d,closeAllModals:a});const h={modals:i.modals,openModal:l,openConfirmModal:c,openContextModal:u,closeModal:d,closeContextModal:d,closeAll:a},f=()=>{const E=o.current.current;switch(E==null?void 0:E.type){case"context":{const{innerProps:p,...y}=E.props,C=n[E.ctx];return{modalProps:y,content:A.createElement(C,{innerProps:p,context:h,id:E.id})}}case"confirm":{const{modalProps:p,confirmProps:y}=jk(E.props);return{modalProps:p,content:A.createElement(Pk,{...y,id:E.id,labels:E.props.labels||r})}}case"content":{const{children:p,...y}=E.props;return{modalProps:y,content:A.createElement(A.Fragment,null,p)}}default:return{modalProps:{},content:null}}},{modalProps:g,content:v}=f();return A.createElement(H0.Provider,{value:h},A.createElement(gi,{zIndex:ko("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var E;return d((E=i.current)==null?void 0:E.id)}},v),e)}/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$t.apply(this,arguments)}var Lt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lt||(Lt={}));const Xy="popstate";function qk(e){e===void 0&&(e={});function t(n,i){let{pathname:s,search:o,hash:a}=n.location;return Cc("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Vc(i)}return Kk(t,r,null,e)}function Ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function za(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zk(){return Math.random().toString(36).substr(2,8)}function Zy(e,t){return{usr:e.state,key:e.key,idx:t}}function Cc(e,t,r,n){return r===void 0&&(r=null),$t({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?qi(t):t,{state:r,key:t&&t.key||n||zk()})}function Vc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function qi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function Kk(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:s=!1}=n,o=i.history,a=Lt.Pop,l=null,c=u();c==null&&(c=0,o.replaceState($t({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Lt.Pop;let E=u(),p=E==null?null:E-c;c=E,l&&l({action:a,location:v.location,delta:p})}function h(E,p){a=Lt.Push;let y=Cc(v.location,E,p);r&&r(y,E),c=u()+1;let C=Zy(y,c),b=v.createHref(y);try{o.pushState(C,"",b)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(b)}s&&l&&l({action:a,location:v.location,delta:1})}function f(E,p){a=Lt.Replace;let y=Cc(v.location,E,p);r&&r(y,E),c=u();let C=Zy(y,c),b=v.createHref(y);o.replaceState(C,"",b),s&&l&&l({action:a,location:v.location,delta:0})}function g(E){let p=i.location.origin!=="null"?i.location.origin:i.location.href,y=typeof E=="string"?E:Vc(E);return y=y.replace(/ $/,"%20"),Ze(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let v={get action(){return a},get location(){return e(i,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Xy,d),l=E,()=>{i.removeEventListener(Xy,d),l=null}},createHref(E){return t(i,E)},createURL:g,encodeLocation(E){let p=g(E);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(E){return o.go(E)}};return v}var Dt;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Dt||(Dt={}));const Gk=new Set(["lazy","caseSensitive","path","id","index","children"]);function Wk(e){return e.index===!0}function wg(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,s)=>{let o=[...r,s],a=typeof i.id=="string"?i.id:o.join("-");if(Ze(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ze(!n[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Wk(i)){let l=$t({},i,t(i),{id:a});return n[a]=l,l}else{let l=$t({},i,t(i),{id:a,children:void 0});return n[a]=l,i.children&&(l.children=wg(i.children,t,o,n)),l}})}function pa(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?qi(t):t,i=qc(n.pathname||"/",r);if(i==null)return null;let s=ib(e);Qk(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=lx(i);o=sx(s[a],l)}return o}function Yk(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function ib(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ze(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let c=ho([n,l.relativePath]),u=r.concat(l);s.children&&s.children.length>0&&(Ze(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ib(s.children,t,u,c)),!(s.path==null&&!s.index)&&t.push({path:c,score:nx(c,s.index),routesMeta:u})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of sb(s.path))i(s,o,l)}),t}function sb(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let o=sb(n.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function Qk(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ix(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Xk=/^:[\w-]+$/,Zk=3,Jk=2,ex=1,tx=10,rx=-2,Jy=e=>e==="*";function nx(e,t){let r=e.split("/"),n=r.length;return r.some(Jy)&&(n+=rx),t&&(n+=Jk),r.filter(i=>!Jy(i)).reduce((i,s)=>i+(Xk.test(s)?Zk:s===""?ex:tx),n)}function ix(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function sx(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let o=0;o<r.length;++o){let a=r[o],l=o===r.length-1,c=i==="/"?t:t.slice(i.length)||"/",u=ox({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(n,u.params);let d=a.route;s.push({params:n,pathname:ho([i,u.pathname]),pathnameBase:fx(ho([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=ho([i,u.pathnameBase]))}return s}function ox(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ax(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let v=a[d]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:e}}function ax(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),za(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function lx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return za(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function qc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function cx(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?qi(e):e;return{pathname:r?r.startsWith("/")?r:ux(r,t):t,search:px(n),hash:gx(i)}}function ux(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Lf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ob(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function dx(e,t){let r=ob(e);return t?r.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function hx(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=qi(e):(i=$t({},e),Ze(!i.pathname||!i.pathname.includes("?"),Lf("?","pathname","search",i)),Ze(!i.pathname||!i.pathname.includes("#"),Lf("#","pathname","hash",i)),Ze(!i.search||!i.search.includes("#"),Lf("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=r;else{let d=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?t[d]:"/"}let l=cx(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ho=e=>e.join("/").replace(/\/\/+/g,"/"),fx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),px=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,gx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class F0{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function ab(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const lb=["post","put","patch","delete"],mx=new Set(lb),vx=["get",...lb],yx=new Set(vx),Ex=new Set([301,302,303,307,308]),Cx=new Set([307,308]),Of={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Sx={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ml={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},cb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wx=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),ub="remix-router-transitions";function bx(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Ze(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let j=e.detectErrorBoundary;i=K=>({hasErrorBoundary:j(K)})}else i=wx;let s={},o=wg(e.routes,i,void 0,s),a,l=e.basename||"/",c=$t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),u=null,d=new Set,h=null,f=null,g=null,v=e.hydrationData!=null,E=pa(o,e.history.location,l),p=null;if(E==null){let j=dn(404,{pathname:e.history.location.pathname}),{matches:K,route:J}=a1(o);E=K,p={[J.id]:j}}let y,C=E.some(j=>j.route.lazy),b=E.some(j=>j.route.loader);if(C)y=!1;else if(!b)y=!0;else if(c.v7_partialHydration){let j=e.hydrationData?e.hydrationData.loaderData:null,K=e.hydrationData?e.hydrationData.errors:null,J=ue=>ue.route.loader?ue.route.loader.hydrate===!0?!1:j&&j[ue.route.id]!==void 0||K&&K[ue.route.id]!==void 0:!0;if(K){let ue=E.findIndex(Te=>K[Te.route.id]!==void 0);y=E.slice(0,ue+1).every(J)}else y=E.every(J)}else y=e.hydrationData!=null;let x,m={historyAction:e.history.action,location:e.history.location,matches:E,initialized:y,navigation:Of,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||p,fetchers:new Map,blockers:new Map},k=Lt.Pop,N=!1,H,R=!1,P=new Map,B=null,_=!1,q=!1,L=[],F=[],M=new Map,$=0,z=-1,W=new Map,ie=new Set,ae=new Map,Ee=new Map,Ce=new Set,Ie=new Map,Ae=new Map,Re=!1;function Fe(){if(u=e.history.listen(j=>{let{action:K,location:J,delta:ue}=j;if(Re){Re=!1;return}za(Ae.size===0||ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Te=J0({currentLocation:m.location,nextLocation:J,historyAction:K});if(Te&&ue!=null){Re=!0,e.history.go(ue*-1),Gc(Te,{state:"blocked",location:J,proceed(){Gc(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),e.history.go(ue)},reset(){let qe=new Map(m.blockers);qe.set(Te,ml),ke({blockers:qe})}});return}return ve(K,J)}),r){Bx(t,P);let j=()=>$x(t,P);t.addEventListener("pagehide",j),B=()=>t.removeEventListener("pagehide",j)}return m.initialized||ve(Lt.Pop,m.location,{initialHydration:!0}),x}function Ue(){u&&u(),B&&B(),d.clear(),H&&H.abort(),m.fetchers.forEach((j,K)=>Os(K)),m.blockers.forEach((j,K)=>Z0(K))}function Le(j){return d.add(j),()=>d.delete(j)}function ke(j,K){K===void 0&&(K={}),m=$t({},m,j);let J=[],ue=[];c.v7_fetcherPersist&&m.fetchers.forEach((Te,qe)=>{Te.state==="idle"&&(Ce.has(qe)?ue.push(qe):J.push(qe))}),[...d].forEach(Te=>Te(m,{deletedFetchers:ue,unstable_viewTransitionOpts:K.viewTransitionOpts,unstable_flushSync:K.flushSync===!0})),c.v7_fetcherPersist&&(J.forEach(Te=>m.fetchers.delete(Te)),ue.forEach(Te=>Os(Te)))}function Y(j,K,J){var ue,Te;let{flushSync:qe}=J===void 0?{}:J,Oe=m.actionData!=null&&m.navigation.formMethod!=null&&$n(m.navigation.formMethod)&&m.navigation.state==="loading"&&((ue=j.state)==null?void 0:ue._isRedirect)!==!0,Be;K.actionData?Object.keys(K.actionData).length>0?Be=K.actionData:Be=null:Oe?Be=m.actionData:Be=null;let xe=K.loaderData?o1(m.loaderData,K.loaderData,K.matches||[],K.errors):m.loaderData,Qe=m.blockers;Qe.size>0&&(Qe=new Map(Qe),Qe.forEach((mt,sr)=>Qe.set(sr,ml)));let Gt=N===!0||m.navigation.formMethod!=null&&$n(m.navigation.formMethod)&&((Te=j.state)==null?void 0:Te._isRedirect)!==!0;a&&(o=a,a=void 0),_||k===Lt.Pop||(k===Lt.Push?e.history.push(j,j.state):k===Lt.Replace&&e.history.replace(j,j.state));let je;if(k===Lt.Pop){let mt=P.get(m.location.pathname);mt&&mt.has(j.pathname)?je={currentLocation:m.location,nextLocation:j}:P.has(j.pathname)&&(je={currentLocation:j,nextLocation:m.location})}else if(R){let mt=P.get(m.location.pathname);mt?mt.add(j.pathname):(mt=new Set([j.pathname]),P.set(m.location.pathname,mt)),je={currentLocation:m.location,nextLocation:j}}ke($t({},K,{actionData:Be,loaderData:xe,historyAction:k,location:j,initialized:!0,navigation:Of,revalidation:"idle",restoreScrollPosition:tv(j,K.matches||m.matches),preventScrollReset:Gt,blockers:Qe}),{viewTransitionOpts:je,flushSync:qe===!0}),k=Lt.Pop,N=!1,R=!1,_=!1,q=!1,L=[],F=[]}async function de(j,K){if(typeof j=="number"){e.history.go(j);return}let J=bg(m.location,m.matches,l,c.v7_prependBasename,j,c.v7_relativeSplatPath,K==null?void 0:K.fromRouteId,K==null?void 0:K.relative),{path:ue,submission:Te,error:qe}=e1(c.v7_normalizeFormMethod,!1,J,K),Oe=m.location,Be=Cc(m.location,ue,K&&K.state);Be=$t({},Be,e.history.encodeLocation(Be));let xe=K&&K.replace!=null?K.replace:void 0,Qe=Lt.Push;xe===!0?Qe=Lt.Replace:xe===!1||Te!=null&&$n(Te.formMethod)&&Te.formAction===m.location.pathname+m.location.search&&(Qe=Lt.Replace);let Gt=K&&"preventScrollReset"in K?K.preventScrollReset===!0:void 0,je=(K&&K.unstable_flushSync)===!0,mt=J0({currentLocation:Oe,nextLocation:Be,historyAction:Qe});if(mt){Gc(mt,{state:"blocked",location:Be,proceed(){Gc(mt,{state:"proceeding",proceed:void 0,reset:void 0,location:Be}),de(j,K)},reset(){let sr=new Map(m.blockers);sr.set(mt,ml),ke({blockers:sr})}});return}return await ve(Qe,Be,{submission:Te,pendingError:qe,preventScrollReset:Gt,replace:K&&K.replace,enableViewTransition:K&&K.unstable_viewTransition,flushSync:je})}function le(){if(on(),ke({revalidation:"loading"}),m.navigation.state!=="submitting"){if(m.navigation.state==="idle"){ve(m.historyAction,m.location,{startUninterruptedRevalidation:!0});return}ve(k||m.historyAction,m.navigation.location,{overrideNavigation:m.navigation})}}async function ve(j,K,J){H&&H.abort(),H=null,k=j,_=(J&&J.startUninterruptedRevalidation)===!0,bT(m.location,m.matches),N=(J&&J.preventScrollReset)===!0,R=(J&&J.enableViewTransition)===!0;let ue=a||o,Te=J&&J.overrideNavigation,qe=pa(ue,K,l),Oe=(J&&J.flushSync)===!0;if(!qe){let sr=dn(404,{pathname:K.pathname}),{matches:qr,route:Wt}=a1(ue);Gh(),Y(K,{matches:qr,loaderData:{},errors:{[Wt.id]:sr}},{flushSync:Oe});return}if(m.initialized&&!q&&kx(m.location,K)&&!(J&&J.submission&&$n(J.submission.formMethod))){Y(K,{matches:qe},{flushSync:Oe});return}H=new AbortController;let Be=yl(e.history,K,H.signal,J&&J.submission),xe,Qe;if(J&&J.pendingError)Qe={[Yl(qe).route.id]:J.pendingError};else if(J&&J.submission&&$n(J.submission.formMethod)){let sr=await et(Be,K,J.submission,qe,{replace:J.replace,flushSync:Oe});if(sr.shortCircuited)return;xe=sr.pendingActionData,Qe=sr.pendingActionError,Te=Mf(K,J.submission),Oe=!1,Be=new Request(Be.url,{signal:Be.signal})}let{shortCircuited:Gt,loaderData:je,errors:mt}=await ir(Be,K,qe,Te,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Oe,xe,Qe);Gt||(H=null,Y(K,$t({matches:qe},xe?{actionData:xe}:{},{loaderData:je,errors:mt})))}async function et(j,K,J,ue,Te){Te===void 0&&(Te={}),on();let qe=Dx(K,J);ke({navigation:qe},{flushSync:Te.flushSync===!0});let Oe,Be=Ig(ue,K);if(!Be.route.action&&!Be.route.lazy)Oe={type:Dt.error,error:dn(405,{method:j.method,pathname:K.pathname,routeId:Be.route.id})};else if(Oe=await vl("action",j,Be,ue,s,i,l,c.v7_relativeSplatPath),j.signal.aborted)return{shortCircuited:!0};if(io(Oe)){let xe;return Te&&Te.replace!=null?xe=Te.replace:xe=Oe.location===m.location.pathname+m.location.search,await Mt(m,Oe,{submission:J,replace:xe}),{shortCircuited:!0}}if(ga(Oe)){let xe=Yl(ue,Be.route.id);return(Te&&Te.replace)!==!0&&(k=Lt.Push),{pendingActionData:{},pendingActionError:{[xe.route.id]:Oe.error}}}if(no(Oe))throw dn(400,{type:"defer-action"});return{pendingActionData:{[Be.route.id]:Oe.data}}}async function ir(j,K,J,ue,Te,qe,Oe,Be,xe,Qe,Gt){let je=ue||Mf(K,Te),mt=Te||qe||u1(je),sr=a||o,[qr,Wt]=t1(e.history,m,J,mt,K,c.v7_partialHydration&&Be===!0,q,L,F,Ce,ae,ie,sr,l,Qe,Gt);if(Gh(st=>!(J&&J.some(ft=>ft.route.id===st))||qr&&qr.some(ft=>ft.route.id===st)),z=++$,qr.length===0&&Wt.length===0){let st=Q0();return Y(K,$t({matches:J,loaderData:{},errors:Gt||null},Qe?{actionData:Qe}:{},st?{fetchers:new Map(m.fetchers)}:{}),{flushSync:xe}),{shortCircuited:!0}}if(!_&&(!c.v7_partialHydration||!Be)){Wt.forEach(ft=>{let Dr=m.fetchers.get(ft.key),Yc=El(void 0,Dr?Dr.data:void 0);m.fetchers.set(ft.key,Yc)});let st=Qe||m.actionData;ke($t({navigation:je},st?Object.keys(st).length===0?{actionData:null}:{actionData:st}:{},Wt.length>0?{fetchers:new Map(m.fetchers)}:{}),{flushSync:xe})}Wt.forEach(st=>{M.has(st.key)&&Gi(st.key),st.controller&&M.set(st.key,st.controller)});let $o=()=>Wt.forEach(st=>Gi(st.key));H&&H.signal.addEventListener("abort",$o);let{results:Wh,loaderResults:Lo,fetcherResults:Wi}=await Ki(m.matches,J,qr,Wt,j);if(j.signal.aborted)return{shortCircuited:!0};H&&H.signal.removeEventListener("abort",$o),Wt.forEach(st=>M.delete(st.key));let Ms=l1(Wh);if(Ms){if(Ms.idx>=qr.length){let st=Wt[Ms.idx-qr.length].key;ie.add(st)}return await Mt(m,Ms.result,{replace:Oe}),{shortCircuited:!0}}let{loaderData:Yh,errors:sl}=s1(m,J,qr,Lo,Gt,Wt,Wi,Ie);Ie.forEach((st,ft)=>{st.subscribe(Dr=>{(Dr||st.done)&&Ie.delete(ft)})}),c.v7_partialHydration&&Be&&m.errors&&Object.entries(m.errors).filter(st=>{let[ft]=st;return!qr.some(Dr=>Dr.route.id===ft)}).forEach(st=>{let[ft,Dr]=st;sl=Object.assign(sl||{},{[ft]:Dr})});let Qh=Q0(),Oo=X0(z),Wc=Qh||Oo||Wt.length>0;return $t({loaderData:Yh,errors:sl},Wc?{fetchers:new Map(m.fetchers)}:{})}function ht(j,K,J,ue){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");M.has(j)&&Gi(j);let Te=(ue&&ue.unstable_flushSync)===!0,qe=a||o,Oe=bg(m.location,m.matches,l,c.v7_prependBasename,J,c.v7_relativeSplatPath,K,ue==null?void 0:ue.relative),Be=pa(qe,Oe,l);if(!Be){Kt(j,K,dn(404,{pathname:Oe}),{flushSync:Te});return}let{path:xe,submission:Qe,error:Gt}=e1(c.v7_normalizeFormMethod,!0,Oe,ue);if(Gt){Kt(j,K,Gt,{flushSync:Te});return}let je=Ig(Be,xe);if(N=(ue&&ue.preventScrollReset)===!0,Qe&&$n(Qe.formMethod)){pt(j,K,xe,je,Be,Te,Qe);return}ae.set(j,{routeId:K,path:xe}),xn(j,K,xe,je,Be,Te,Qe)}async function pt(j,K,J,ue,Te,qe,Oe){if(on(),ae.delete(j),!ue.route.action&&!ue.route.lazy){let ft=dn(405,{method:Oe.formMethod,pathname:J,routeId:K});Kt(j,K,ft,{flushSync:qe});return}let Be=m.fetchers.get(j);Nn(j,Px(Oe,Be),{flushSync:qe});let xe=new AbortController,Qe=yl(e.history,J,xe.signal,Oe);M.set(j,xe);let Gt=$,je=await vl("action",Qe,ue,Te,s,i,l,c.v7_relativeSplatPath);if(Qe.signal.aborted){M.get(j)===xe&&M.delete(j);return}if(c.v7_fetcherPersist&&Ce.has(j)){if(io(je)||ga(je)){Nn(j,ts(void 0));return}}else{if(io(je))if(M.delete(j),z>Gt){Nn(j,ts(void 0));return}else return ie.add(j),Nn(j,El(Oe)),Mt(m,je,{fetcherSubmission:Oe});if(ga(je)){Kt(j,K,je.error);return}}if(no(je))throw dn(400,{type:"defer-action"});let mt=m.navigation.location||m.location,sr=yl(e.history,mt,xe.signal),qr=a||o,Wt=m.navigation.state!=="idle"?pa(qr,m.navigation.location,l):m.matches;Ze(Wt,"Didn't find any matches after fetcher action");let $o=++$;W.set(j,$o);let Wh=El(Oe,je.data);m.fetchers.set(j,Wh);let[Lo,Wi]=t1(e.history,m,Wt,Oe,mt,!1,q,L,F,Ce,ae,ie,qr,l,{[ue.route.id]:je.data},void 0);Wi.filter(ft=>ft.key!==j).forEach(ft=>{let Dr=ft.key,Yc=m.fetchers.get(Dr),IT=El(void 0,Yc?Yc.data:void 0);m.fetchers.set(Dr,IT),M.has(Dr)&&Gi(Dr),ft.controller&&M.set(Dr,ft.controller)}),ke({fetchers:new Map(m.fetchers)});let Ms=()=>Wi.forEach(ft=>Gi(ft.key));xe.signal.addEventListener("abort",Ms);let{results:Yh,loaderResults:sl,fetcherResults:Qh}=await Ki(m.matches,Wt,Lo,Wi,sr);if(xe.signal.aborted)return;xe.signal.removeEventListener("abort",Ms),W.delete(j),M.delete(j),Wi.forEach(ft=>M.delete(ft.key));let Oo=l1(Yh);if(Oo){if(Oo.idx>=Lo.length){let ft=Wi[Oo.idx-Lo.length].key;ie.add(ft)}return Mt(m,Oo.result)}let{loaderData:Wc,errors:st}=s1(m,m.matches,Lo,sl,void 0,Wi,Qh,Ie);if(m.fetchers.has(j)){let ft=ts(je.data);m.fetchers.set(j,ft)}X0($o),m.navigation.state==="loading"&&$o>z?(Ze(k,"Expected pending action"),H&&H.abort(),Y(m.navigation.location,{matches:Wt,loaderData:Wc,errors:st,fetchers:new Map(m.fetchers)})):(ke({errors:st,loaderData:o1(m.loaderData,Wc,Wt,st),fetchers:new Map(m.fetchers)}),q=!1)}async function xn(j,K,J,ue,Te,qe,Oe){let Be=m.fetchers.get(j);Nn(j,El(Oe,Be?Be.data:void 0),{flushSync:qe});let xe=new AbortController,Qe=yl(e.history,J,xe.signal);M.set(j,xe);let Gt=$,je=await vl("loader",Qe,ue,Te,s,i,l,c.v7_relativeSplatPath);if(no(je)&&(je=await fb(je,Qe.signal,!0)||je),M.get(j)===xe&&M.delete(j),!Qe.signal.aborted){if(Ce.has(j)){Nn(j,ts(void 0));return}if(io(je))if(z>Gt){Nn(j,ts(void 0));return}else{ie.add(j),await Mt(m,je);return}if(ga(je)){Kt(j,K,je.error);return}Ze(!no(je),"Unhandled fetcher deferred data"),Nn(j,ts(je.data))}}async function Mt(j,K,J){let{submission:ue,fetcherSubmission:Te,replace:qe}=J===void 0?{}:J;K.revalidate&&(q=!0);let Oe=Cc(j.location,K.location,{_isRedirect:!0});if(Ze(Oe,"Expected a location on the redirect navigation"),r){let mt=!1;if(K.reloadDocument)mt=!0;else if(cb.test(K.location)){const sr=e.history.createURL(K.location);mt=sr.origin!==t.location.origin||qc(sr.pathname,l)==null}if(mt){qe?t.location.replace(K.location):t.location.assign(K.location);return}}H=null;let Be=qe===!0?Lt.Replace:Lt.Push,{formMethod:xe,formAction:Qe,formEncType:Gt}=j.navigation;!ue&&!Te&&xe&&Qe&&Gt&&(ue=u1(j.navigation));let je=ue||Te;if(Cx.has(K.status)&&je&&$n(je.formMethod))await ve(Be,Oe,{submission:$t({},je,{formAction:K.location}),preventScrollReset:N});else{let mt=Mf(Oe,ue);await ve(Be,Oe,{overrideNavigation:mt,fetcherSubmission:Te,preventScrollReset:N})}}async function Ki(j,K,J,ue,Te){let qe=await Promise.all([...J.map(xe=>vl("loader",Te,xe,K,s,i,l,c.v7_relativeSplatPath)),...ue.map(xe=>xe.matches&&xe.match&&xe.controller?vl("loader",yl(e.history,xe.path,xe.controller.signal),xe.match,xe.matches,s,i,l,c.v7_relativeSplatPath):{type:Dt.error,error:dn(404,{pathname:xe.path})})]),Oe=qe.slice(0,J.length),Be=qe.slice(J.length);return await Promise.all([c1(j,J,Oe,Oe.map(()=>Te.signal),!1,m.loaderData),c1(j,ue.map(xe=>xe.match),Be,ue.map(xe=>xe.controller?xe.controller.signal:null),!0)]),{results:qe,loaderResults:Oe,fetcherResults:Be}}function on(){q=!0,L.push(...Gh()),ae.forEach((j,K)=>{M.has(K)&&(F.push(K),Gi(K))})}function Nn(j,K,J){J===void 0&&(J={}),m.fetchers.set(j,K),ke({fetchers:new Map(m.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function Kt(j,K,J,ue){ue===void 0&&(ue={});let Te=Yl(m.matches,K);Os(j),ke({errors:{[Te.route.id]:J},fetchers:new Map(m.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function an(j){return c.v7_fetcherPersist&&(Ee.set(j,(Ee.get(j)||0)+1),Ce.has(j)&&Ce.delete(j)),m.fetchers.get(j)||Sx}function Os(j){let K=m.fetchers.get(j);M.has(j)&&!(K&&K.state==="loading"&&W.has(j))&&Gi(j),ae.delete(j),W.delete(j),ie.delete(j),Ce.delete(j),m.fetchers.delete(j)}function CT(j){if(c.v7_fetcherPersist){let K=(Ee.get(j)||0)-1;K<=0?(Ee.delete(j),Ce.add(j)):Ee.set(j,K)}else Os(j);ke({fetchers:new Map(m.fetchers)})}function Gi(j){let K=M.get(j);Ze(K,"Expected fetch controller: "+j),K.abort(),M.delete(j)}function Y0(j){for(let K of j){let J=an(K),ue=ts(J.data);m.fetchers.set(K,ue)}}function Q0(){let j=[],K=!1;for(let J of ie){let ue=m.fetchers.get(J);Ze(ue,"Expected fetcher: "+J),ue.state==="loading"&&(ie.delete(J),j.push(J),K=!0)}return Y0(j),K}function X0(j){let K=[];for(let[J,ue]of W)if(ue<j){let Te=m.fetchers.get(J);Ze(Te,"Expected fetcher: "+J),Te.state==="loading"&&(Gi(J),W.delete(J),K.push(J))}return Y0(K),K.length>0}function ST(j,K){let J=m.blockers.get(j)||ml;return Ae.get(j)!==K&&Ae.set(j,K),J}function Z0(j){m.blockers.delete(j),Ae.delete(j)}function Gc(j,K){let J=m.blockers.get(j)||ml;Ze(J.state==="unblocked"&&K.state==="blocked"||J.state==="blocked"&&K.state==="blocked"||J.state==="blocked"&&K.state==="proceeding"||J.state==="blocked"&&K.state==="unblocked"||J.state==="proceeding"&&K.state==="unblocked","Invalid blocker state transition: "+J.state+" -> "+K.state);let ue=new Map(m.blockers);ue.set(j,K),ke({blockers:ue})}function J0(j){let{currentLocation:K,nextLocation:J,historyAction:ue}=j;if(Ae.size===0)return;Ae.size>1&&za(!1,"A router only supports one blocker at a time");let Te=Array.from(Ae.entries()),[qe,Oe]=Te[Te.length-1],Be=m.blockers.get(qe);if(!(Be&&Be.state==="proceeding")&&Oe({currentLocation:K,nextLocation:J,historyAction:ue}))return qe}function Gh(j){let K=[];return Ie.forEach((J,ue)=>{(!j||j(ue))&&(J.cancel(),K.push(ue),Ie.delete(ue))}),K}function wT(j,K,J){if(h=j,g=K,f=J||null,!v&&m.navigation===Of){v=!0;let ue=tv(m.location,m.matches);ue!=null&&ke({restoreScrollPosition:ue})}return()=>{h=null,g=null,f=null}}function ev(j,K){return f&&f(j,K.map(ue=>Yk(ue,m.loaderData)))||j.key}function bT(j,K){if(h&&g){let J=ev(j,K);h[J]=g()}}function tv(j,K){if(h){let J=ev(j,K),ue=h[J];if(typeof ue=="number")return ue}return null}function TT(j){s={},a=wg(j,i,void 0,s)}return x={get basename(){return l},get future(){return c},get state(){return m},get routes(){return o},get window(){return t},initialize:Fe,subscribe:Le,enableScrollRestoration:wT,navigate:de,fetch:ht,revalidate:le,createHref:j=>e.history.createHref(j),encodeLocation:j=>e.history.encodeLocation(j),getFetcher:an,deleteFetcher:CT,dispose:Ue,getBlocker:ST,deleteBlocker:Z0,_internalFetchControllers:M,_internalActiveDeferreds:Ie,_internalSetRoutes:TT},x}function Tx(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function bg(e,t,r,n,i,s,o,a){let l,c;if(o){l=[];for(let d of t)if(l.push(d),d.route.id===o){c=d;break}}else l=t,c=t[t.length-1];let u=hx(i||".",dx(l,s),qc(e.pathname,r)||e.pathname,a==="path");return i==null&&(u.search=e.search,u.hash=e.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!j0(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(u.pathname=u.pathname==="/"?r:ho([r,u.pathname])),Vc(u)}function e1(e,t,r,n){if(!n||!Tx(n))return{path:r};if(n.formMethod&&!_x(n.formMethod))return{path:r,error:dn(405,{method:n.formMethod})};let i=()=>({path:r,error:dn(400,{type:"invalid-body"})}),s=n.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=hb(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!$n(o))return i();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((f,g)=>{let[v,E]=g;return""+f+v+"="+E+`
`},""):String(n.body);return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!$n(o))return i();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:o,formAction:a,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Ze(typeof FormData=="function","FormData is not available in this environment");let l,c;if(n.formData)l=Tg(n.formData),c=n.formData;else if(n.body instanceof FormData)l=Tg(n.body),c=n.body;else if(n.body instanceof URLSearchParams)l=n.body,c=i1(l);else if(n.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(n.body),c=i1(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if($n(u.formMethod))return{path:r,submission:u};let d=qi(r);return t&&d.search&&j0(d.search)&&l.append("index",""),d.search="?"+l,{path:Vc(d),submission:u}}function Ix(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function t1(e,t,r,n,i,s,o,a,l,c,u,d,h,f,g,v){let E=v?Object.values(v)[0]:g?Object.values(g)[0]:void 0,p=e.createURL(t.location),y=e.createURL(i),C=v?Object.keys(v)[0]:void 0,x=Ix(r,C).filter((k,N)=>{let{route:H}=k;if(H.lazy)return!0;if(H.loader==null)return!1;if(s)return H.loader.hydrate?!0:t.loaderData[H.id]===void 0&&(!t.errors||t.errors[H.id]===void 0);if(Rx(t.loaderData,t.matches[N],k)||a.some(B=>B===k.route.id))return!0;let R=t.matches[N],P=k;return r1(k,$t({currentUrl:p,currentParams:R.params,nextUrl:y,nextParams:P.params},n,{actionResult:E,defaultShouldRevalidate:o||p.pathname+p.search===y.pathname+y.search||p.search!==y.search||db(R,P)}))}),m=[];return u.forEach((k,N)=>{if(s||!r.some(_=>_.route.id===k.routeId)||c.has(N))return;let H=pa(h,k.path,f);if(!H){m.push({key:N,routeId:k.routeId,path:k.path,matches:null,match:null,controller:null});return}let R=t.fetchers.get(N),P=Ig(H,k.path),B=!1;d.has(N)?B=!1:l.includes(N)?B=!0:R&&R.state!=="idle"&&R.data===void 0?B=o:B=r1(P,$t({currentUrl:p,currentParams:t.matches[t.matches.length-1].params,nextUrl:y,nextParams:r[r.length-1].params},n,{actionResult:E,defaultShouldRevalidate:o})),B&&m.push({key:N,routeId:k.routeId,path:k.path,matches:H,match:P,controller:new AbortController})}),[x,m]}function Rx(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function db(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function r1(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function n1(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Ze(i,"No route found in manifest");let s={};for(let o in n){let l=i[o]!==void 0&&o!=="hasErrorBoundary";za(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Gk.has(o)&&(s[o]=n[o])}Object.assign(i,s),Object.assign(i,$t({},t(i),{lazy:void 0}))}async function vl(e,t,r,n,i,s,o,a,l){l===void 0&&(l={});let c,u,d,h=v=>{let E,p=new Promise((y,C)=>E=C);return d=()=>E(),t.signal.addEventListener("abort",d),Promise.race([v({request:t,params:r.params,context:l.requestContext}),p])};try{let v=r.route[e];if(r.route.lazy)if(v){let E,p=await Promise.all([h(v).catch(y=>{E=y}),n1(r.route,s,i)]);if(E)throw E;u=p[0]}else if(await n1(r.route,s,i),v=r.route[e],v)u=await h(v);else if(e==="action"){let E=new URL(t.url),p=E.pathname+E.search;throw dn(405,{method:t.method,pathname:p,routeId:r.route.id})}else return{type:Dt.data,data:void 0};else if(v)u=await h(v);else{let E=new URL(t.url),p=E.pathname+E.search;throw dn(404,{pathname:p})}Ze(u!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(v){c=Dt.error,u=v}finally{d&&t.signal.removeEventListener("abort",d)}if(Nx(u)){let v=u.status;if(Ex.has(v)){let p=u.headers.get("Location");if(Ze(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!cb.test(p))p=bg(new URL(t.url),n.slice(0,n.indexOf(r)+1),o,!0,p,a);else if(!l.isStaticRequest){let y=new URL(t.url),C=p.startsWith("//")?new URL(y.protocol+p):new URL(p),b=qc(C.pathname,o)!=null;C.origin===y.origin&&b&&(p=C.pathname+C.search+C.hash)}if(l.isStaticRequest)throw u.headers.set("Location",p),u;return{type:Dt.redirect,status:v,location:p,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===Dt.error?Dt.error:Dt.data,response:u};let E;try{let p=u.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?u.body==null?E=null:E=await u.json():E=await u.text()}catch(p){return{type:Dt.error,error:p}}return c===Dt.error?{type:c,error:new F0(v,u.statusText,E),headers:u.headers}:{type:Dt.data,data:E,statusCode:u.status,headers:u.headers}}if(c===Dt.error)return{type:c,error:u};if(xx(u)){var f,g;return{type:Dt.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((g=u.init)==null?void 0:g.headers)&&new Headers(u.init.headers)}}return{type:Dt.data,data:u}}function yl(e,t,r,n){let i=e.createURL(hb(t)).toString(),s={signal:r};if(n&&$n(n.formMethod)){let{formMethod:o,formEncType:a}=n;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(n.json)):a==="text/plain"?s.body=n.text:a==="application/x-www-form-urlencoded"&&n.formData?s.body=Tg(n.formData):s.body=n.formData}return new Request(i,s)}function Tg(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function i1(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Ax(e,t,r,n,i){let s={},o=null,a,l=!1,c={};return r.forEach((u,d)=>{let h=t[d].route.id;if(Ze(!io(u),"Cannot handle redirect results in processLoaderData"),ga(u)){let f=Yl(e,h),g=u.error;n&&(g=Object.values(n)[0],n=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=g),s[h]=void 0,l||(l=!0,a=ab(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else no(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),n&&(o=n,s[Object.keys(n)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function s1(e,t,r,n,i,s,o,a){let{loaderData:l,errors:c}=Ax(t,r,n,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h,controller:f}=s[u];Ze(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let g=o[u];if(!(f&&f.signal.aborted))if(ga(g)){let v=Yl(e.matches,h==null?void 0:h.route.id);c&&c[v.route.id]||(c=$t({},c,{[v.route.id]:g.error})),e.fetchers.delete(d)}else if(io(g))Ze(!1,"Unhandled fetcher revalidation redirect");else if(no(g))Ze(!1,"Unhandled fetcher deferred data");else{let v=ts(g.data);e.fetchers.set(d,v)}}return{loaderData:l,errors:c}}function o1(e,t,r,n){let i=$t({},t);for(let s of r){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),n&&n.hasOwnProperty(o))break}return i}function Yl(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function a1(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function dn(e,t){let{pathname:r,routeId:n,method:i,type:s}=t===void 0?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",i&&r&&n?a="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a='Route "'+n+'" does not match URL "'+r+'"'):e===404?(o="Not Found",a='No route matches URL "'+r+'"'):e===405&&(o="Method Not Allowed",i&&r&&n?a="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new F0(e||500,o,new Error(a),!0)}function l1(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(io(r))return{result:r,idx:t}}}function hb(e){let t=typeof e=="string"?qi(e):e;return Vc($t({},t,{hash:""}))}function kx(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function no(e){return e.type===Dt.deferred}function ga(e){return e.type===Dt.error}function io(e){return(e&&e.type)===Dt.redirect}function xx(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Nx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function _x(e){return yx.has(e.toLowerCase())}function $n(e){return mx.has(e.toLowerCase())}async function c1(e,t,r,n,i,s){for(let o=0;o<r.length;o++){let a=r[o],l=t[o];if(!l)continue;let c=e.find(d=>d.route.id===l.route.id),u=c!=null&&!db(c,l)&&(s&&s[l.route.id])!==void 0;if(no(a)&&(i||u)){let d=n[o];Ze(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await fb(a,d,i).then(h=>{h&&(r[o]=h||r[o])})}}}async function fb(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:Dt.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Dt.error,error:i}}return{type:Dt.data,data:e.deferredData.data}}}function j0(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ig(e,t){let r=typeof t=="string"?qi(t).search:t.search;if(e[e.length-1].route.index&&j0(r||""))return e[e.length-1];let n=ob(e);return n[n.length-1]}function u1(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:s,json:o}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:r,formEncType:n,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:o,text:void 0}}}function Mf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Dx(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function El(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Px(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ts(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Bx(e,t){try{let r=e.sessionStorage.getItem(ub);if(r){let n=JSON.parse(r);for(let[i,s]of Object.entries(n||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function $x(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(ub,JSON.stringify(r))}catch(n){za(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fd(){return Fd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fd.apply(this,arguments)}const pb=S.createContext(null),gb=S.createContext(null),mb=S.createContext(null),Mh=S.createContext(null),Uh=S.createContext({outlet:null,matches:[],isDataRoute:!1}),vb=S.createContext(null);function V0(){return S.useContext(Mh)!=null}function Lx(){return V0()||Ze(!1),S.useContext(Mh).location}function Ox(e,t,r,n){V0()||Ze(!1);let{navigator:i}=S.useContext(mb),{matches:s}=S.useContext(Uh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Lx(),u;if(t){var d;let E=typeof t=="string"?qi(t):t;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||Ze(!1),u=E}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let E=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(E.length).join("/")}let g=pa(e,{pathname:f}),v=jx(g&&g.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:ho([l,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:ho([l,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,r,n);return t&&v?S.createElement(Mh.Provider,{value:{location:Fd({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Lt.Pop}},v):v}function Mx(){let e=Kx(),t=ab(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},t),r?S.createElement("pre",{style:i},r):null,null)}const Ux=S.createElement(Mx,null);class Hx extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?S.createElement(Uh.Provider,{value:this.props.routeContext},S.createElement(vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Fx(e){let{routeContext:t,match:r,children:n}=e,i=S.useContext(pb);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),S.createElement(Uh.Provider,{value:t},n)}function jx(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if((s=r)!=null&&s.errors)e=r.matches;else return null}let o=e,a=(i=r)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Ze(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=r,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,g=!1,v=null,E=null;r&&(f=a&&d.route.id?a[d.route.id]:void 0,v=d.route.errorElement||Ux,l&&(c<0&&h===0?(Gx("route-fallback",!1),g=!0,E=null):c===h&&(g=!0,E=d.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),y=()=>{let C;return f?C=v:g?C=E:d.route.Component?C=S.createElement(d.route.Component,null):d.route.element?C=d.route.element:C=u,S.createElement(Fx,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:r!=null},children:C})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(Hx,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var Rg=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Rg||{});function Vx(e){let t=S.useContext(gb);return t||Ze(!1),t}function qx(e){let t=S.useContext(Uh);return t||Ze(!1),t}function zx(e){let t=qx(),r=t.matches[t.matches.length-1];return r.route.id||Ze(!1),r.route.id}function Kx(){var e;let t=S.useContext(vb),r=Vx(Rg.UseRouteError),n=zx(Rg.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}const d1={};function Gx(e,t,r){!t&&!d1[e]&&(d1[e]=!0)}function Wx(e){let{basename:t="/",children:r=null,location:n,navigationType:i=Lt.Pop,navigator:s,static:o=!1,future:a}=e;V0()&&Ze(!1);let l=t.replace(/^\/*/,"/"),c=S.useMemo(()=>({basename:l,navigator:s,static:o,future:Fd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof n=="string"&&(n=qi(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=n,v=S.useMemo(()=>{let E=qc(u,l);return E==null?null:{location:{pathname:E,search:d,hash:h,state:f,key:g},navigationType:i}},[l,u,d,h,f,g,i]);return v==null?null:S.createElement(mb.Provider,{value:c},S.createElement(Mh.Provider,{children:r,value:v}))}new Promise(()=>{});function Yx(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:S.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:S.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:S.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jd(){return jd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jd.apply(this,arguments)}const Qx="6";try{window.__reactRouterVersion=Qx}catch{}function Xx(e,t){return bx({basename:t==null?void 0:t.basename,future:jd({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:qk({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||Zx(),routes:e,mapRouteProperties:Yx,window:t==null?void 0:t.window}).initialize()}function Zx(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=jd({},t,{errors:Jx(t.errors)})),t}function Jx(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new F0(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",r[n]=o}catch{}}if(r[n]==null){let s=new Error(i.message);s.stack="",r[n]=s}}else r[n]=i;return r}const eN=S.createContext({isTransitioning:!1}),tN=S.createContext(new Map),rN="startTransition",h1=em[rN],nN="flushSync",f1=Z3[nN];function iN(e){h1?h1(e):e()}function Cl(e){f1?f1(e):e()}class sN{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function oN(e){let{fallbackElement:t,router:r,future:n}=e,[i,s]=S.useState(r.state),[o,a]=S.useState(),[l,c]=S.useState({isTransitioning:!1}),[u,d]=S.useState(),[h,f]=S.useState(),[g,v]=S.useState(),E=S.useRef(new Map),{v7_startTransition:p}=n||{},y=S.useCallback(k=>{p?iN(k):k()},[p]),C=S.useCallback((k,N)=>{let{deletedFetchers:H,unstable_flushSync:R,unstable_viewTransitionOpts:P}=N;H.forEach(_=>E.current.delete(_)),k.fetchers.forEach((_,q)=>{_.data!==void 0&&E.current.set(q,_.data)});let B=r.window==null||typeof r.window.document.startViewTransition!="function";if(!P||B){R?Cl(()=>s(k)):y(()=>s(k));return}if(R){Cl(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let _=r.window.document.startViewTransition(()=>{Cl(()=>s(k))});_.finished.finally(()=>{Cl(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),Cl(()=>f(_));return}h?(u&&u.resolve(),h.skipTransition(),v({state:k,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(k),c({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[r.window,h,u,E,y]);S.useLayoutEffect(()=>r.subscribe(C),[r,C]),S.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new sN)},[l]),S.useEffect(()=>{if(u&&o&&r.window){let k=o,N=u.promise,H=r.window.document.startViewTransition(async()=>{y(()=>s(k)),await N});H.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(H)}},[y,o,u,r.window]),S.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,h,i.location,o]),S.useEffect(()=>{!l.isTransitioning&&g&&(a(g.state),c({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),v(void 0))},[l.isTransitioning,g]),S.useEffect(()=>{},[]);let b=S.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:k=>r.navigate(k),push:(k,N,H)=>r.navigate(k,{state:N,preventScrollReset:H==null?void 0:H.preventScrollReset}),replace:(k,N,H)=>r.navigate(k,{replace:!0,state:N,preventScrollReset:H==null?void 0:H.preventScrollReset})}),[r]),x=r.basename||"/",m=S.useMemo(()=>({router:r,navigator:b,static:!1,basename:x}),[r,b,x]);return S.createElement(S.Fragment,null,S.createElement(pb.Provider,{value:m},S.createElement(gb.Provider,{value:i},S.createElement(tN.Provider,{value:E.current},S.createElement(eN.Provider,{value:l},S.createElement(Wx,{basename:x,location:i.location,navigationType:i.historyAction,navigator:b,future:{v7_relativeSplatPath:r.future.v7_relativeSplatPath}},i.initialized||r.future.v7_partialHydration?S.createElement(aN,{routes:r.routes,future:r.future,state:i}):t))))),null)}function aN(e){let{routes:t,future:r,state:n}=e;return Ox(t,void 0,n,r)}var p1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(p1||(p1={}));var g1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(g1||(g1={}));var lN=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r};const m1=Ic(lN);function cN(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const uN=typeof window<"u"?S.useLayoutEffect:S.useEffect;function or(e,t){uN(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function dN(e,t){e&&cN(e),or(`mantine-form:${e}:set-field-value`,r=>t.setFieldValue(r.detail.path,r.detail.value)),or(`mantine-form:${e}:set-values`,r=>t.setValues(r.detail)),or(`mantine-form:${e}:set-initial-values`,r=>t.setInitialValues(r.detail)),or(`mantine-form:${e}:set-errors`,r=>t.setErrors(r.detail)),or(`mantine-form:${e}:set-field-error`,r=>t.setFieldError(r.detail.path,r.detail.error)),or(`mantine-form:${e}:clear-field-error`,r=>t.clearFieldError(r.detail)),or(`mantine-form:${e}:clear-errors`,t.clearErrors),or(`mantine-form:${e}:reset`,t.reset),or(`mantine-form:${e}:validate`,t.validate),or(`mantine-form:${e}:validate-field`,r=>t.validateField(r.detail)),or(`mantine-form:${e}:reorder-list-item`,r=>t.reorderListItem(r.detail.path,r.detail.payload)),or(`mantine-form:${e}:remove-list-item`,r=>t.removeListItem(r.detail.path,r.detail.index)),or(`mantine-form:${e}:insert-list-item`,r=>t.insertListItem(r.detail.path,r.detail.item,r.detail.index)),or(`mantine-form:${e}:set-dirty`,r=>t.setDirty(r.detail)),or(`mantine-form:${e}:set-touched`,r=>t.setTouched(r.detail)),or(`mantine-form:${e}:reset-dirty`,r=>t.resetDirty(r.detail)),or(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Ag(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,r)=>{const n=e[r];return n!=null&&n!==!1&&(t[r]=n),t},{})}function hN(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:r}=t;r instanceof HTMLInputElement?r.type==="checkbox"?e(r.checked):e(r.value):(r instanceof HTMLTextAreaElement||r instanceof HTMLSelectElement)&&e(r.value)}else e(t)}}function v1(e,t){const r=Object.keys(e);if(typeof t=="string"){const n=r.filter(i=>i.startsWith(`${t}.`));return e[t]||n.some(i=>e[i])||!1}return r.some(n=>e[n])}function yb(e,t){if(t===null||typeof t!="object")return{};const r={...t};return Object.keys(t).forEach(n=>{n.includes(`${String(e)}.`)&&delete r[n]}),r}function y1(e,t){const r=e.substring(t.length+1).split(".")[0];return parseInt(r,10)}function E1(e,t,r,n){if(t===void 0)return r;const i=`${String(e)}`;let s=r;n===-1&&(s=yb(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const c=y1(l,i);return Number.isNaN(c)?!1:c>=t}).forEach(([l,c])=>{const u=y1(l,i),d=l.replace(`${i}.${u}`,`${i}.${u+n}`);o[d]=c,a.add(d),a.has(l)||delete o[l]}),o}function fN(e,{from:t,to:r},n){const i=`${e}.${t}`,s=`${e}.${r}`,o={...n};return Object.keys(n).every(a=>{let l,c;if(a.startsWith(i)&&(l=a,c=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),c=a),l&&c){const u=o[l],d=o[c];return d===void 0?delete o[l]:o[l]=d,u===void 0?delete o[c]:o[c]=u,!1}return!0}),o}function Eb(e){return typeof e!="string"?[]:e.split(".")}function ri(e,t){const r=Eb(e);if(r.length===0||typeof t!="object"||t===null)return;let n=t[r[0]];for(let i=1;i<r.length&&n!==void 0;i+=1)n=n[r[i]];return n}function C1(e,t,r){typeof r.value=="object"&&(r.value=ma(r.value)),!r.enumerable||r.get||r.set||!r.configurable||!r.writable||t==="__proto__"?Object.defineProperty(e,t,r):e[t]=r.value}function ma(e){if(typeof e!="object")return e;var t=0,r,n,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(ma(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(ma(a),ma(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(ma(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(n=Object.getOwnPropertySymbols(e);t<n.length;t++)C1(i,n[t],Object.getOwnPropertyDescriptor(e,n[t]));for(t=0,n=Object.getOwnPropertyNames(e);t<n.length;t++)Object.hasOwnProperty.call(i,r=n[t])&&i[r]===e[r]||C1(i,r,Object.getOwnPropertyDescriptor(e,r))}return i||e}function Hh(e,t,r){const n=Eb(e);if(n.length===0)return r;const i=ma(r);if(n.length===1)return i[n[0]]=t,i;let s=i[n[0]];for(let o=1;o<n.length-1;o+=1){if(s===void 0)return i;s=s[n[o]]}return s[n[n.length-1]]=t,i}function pN(e,{from:t,to:r},n){const i=ri(e,n);if(!Array.isArray(i))return n;const s=[...i],o=i[t];return s.splice(t,1),s.splice(r,0,o),Hh(e,s,n)}function gN(e,t,r,n){const i=ri(e,n);if(!Array.isArray(i))return n;const s=[...i];return s.splice(typeof r=="number"?r:s.length,0,t),Hh(e,s,n)}function mN(e,t,r){const n=ri(e,r);return Array.isArray(n)?Hh(e,n.filter((i,s)=>s!==t),r):r}function S1(e){const t=Ag(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function kg(e,t,r="",n={}){return typeof e!="object"||e===null?n:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${r===""?"":`${r}.`}${s}`,l=ri(a,t);let c=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(c=!0,l.forEach((u,d)=>kg(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(c||kg(o,t,a,i)),i},n)}function xg(e,t){return S1(typeof e=="function"?e(t):kg(e,t))}function Eu(e,t,r){if(typeof e!="string")return{hasError:!1,error:null};const n=xg(t,r),i=Object.keys(n.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?n.errors[i]:null}}const vN="__MANTINE_FORM_INDEX__";function w1(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${vN}`)):!1:!1}function Cb({name:e,initialValues:t,initialErrors:r={},initialDirty:n={},initialTouched:i={},clearInputErrorOnChange:s=!0,validateInputOnChange:o=!1,validateInputOnBlur:a=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:u,validate:d}={}){const[h,f]=S.useState(i),[g,v]=S.useState(n),[E,p]=S.useState(t||{}),[y,C]=S.useState(Ag(r)),[b,x]=S.useState(!1),m=S.useRef(t||{}),k=Y=>{m.current=Y},N=S.useCallback(Y=>{b||(x(!0),p(Y),k(Y))},[b]),H=S.useCallback(()=>f({}),[]),R=Y=>{const de=Y?{...E,...Y}:E;k(de),v({})},P=S.useCallback(Y=>C(de=>Ag(typeof Y=="function"?Y(de):Y)),[]),B=S.useCallback(()=>C({}),[]),_=S.useCallback(()=>{p(m.current),B(),v({}),H()},[]),q=S.useCallback((Y,de)=>P(le=>({...le,[Y]:de})),[]),L=S.useCallback(Y=>P(de=>{if(typeof Y!="string")return de;const le={...de};return delete le[Y],le}),[]),F=S.useCallback(Y=>v(de=>{if(typeof Y!="string")return de;const le=yb(Y,de);return delete le[Y],le}),[]),M=S.useCallback((Y,de)=>{const le=w1(Y,o);F(Y),f(ve=>({...ve,[Y]:!0})),p(ve=>{const et=ri(Y,ve),ir=Hh(Y,de instanceof Function?de(et):de,ve);if(le){const ht=Eu(Y,d,ir);ht.hasError?q(Y,ht.error):L(Y)}return l==null||l(ir,ve),ir}),!le&&s&&q(Y,null)},[l]),$=S.useCallback(Y=>{p(de=>{const le=Y instanceof Function?Y(de):Y,ve={...de,...le};return l==null||l(ve,de),ve}),s&&B()},[l]),z=S.useCallback((Y,de)=>{F(Y),p(le=>{const ve=pN(Y,de,le);return l==null||l(ve,le),ve}),C(le=>fN(Y,de,le))},[]),W=S.useCallback((Y,de)=>{F(Y),p(le=>{const ve=mN(Y,de,le);return l==null||l(ve,le),ve}),C(le=>E1(Y,de,le,-1))},[]),ie=S.useCallback((Y,de,le)=>{F(Y),p(ve=>{const et=gN(Y,de,le,ve);return l==null||l(et,ve),et}),C(ve=>E1(Y,le,ve,1))},[]),ae=S.useCallback(()=>{const Y=xg(d,E);return C(Y.errors),Y},[E,d]),Ee=S.useCallback(Y=>{const de=Eu(Y,d,E);return de.hasError?q(Y,de.error):L(Y),de},[E,d]),Ce=(Y,{type:de="input",withError:le=!0,withFocus:ve=!0,...et}={})=>{const ht={onChange:hN(pt=>M(Y,pt))};return le&&(ht.error=y[Y]),de==="checkbox"?ht.checked=ri(Y,E):ht.value=ri(Y,E),ve&&(ht.onFocus=()=>f(pt=>({...pt,[Y]:!0})),ht.onBlur=()=>{if(w1(Y,a)){const pt=Eu(Y,d,E);pt.hasError?q(Y,pt.error):L(Y)}}),Object.assign(ht,u==null?void 0:u({inputProps:ht,field:Y,options:{type:de,withError:le,withFocus:ve,...et},form:ke}))},Ie=(Y,de)=>le=>{le==null||le.preventDefault();const ve=ae();ve.hasErrors?de==null||de(ve.errors,E,le):Y==null||Y(c(E),le)},Ae=Y=>c(Y||E),Re=S.useCallback(Y=>{Y.preventDefault(),_()},[]),Fe=Y=>{if(Y){const le=ri(Y,g);if(typeof le=="boolean")return le;const ve=ri(Y,E),et=ri(Y,m.current);return!m1(ve,et)}return Object.keys(g).length>0?v1(g):!m1(E,m.current)},Ue=S.useCallback(Y=>v1(h,Y),[h]),Le=S.useCallback(Y=>Y?!Eu(Y,d,E).hasError:!xg(d,E).hasErrors,[E,d]),ke={initialized:b,values:E,errors:y,initialize:N,setValues:$,setInitialValues:k,setErrors:P,setFieldValue:M,setFieldError:q,clearFieldError:L,clearErrors:B,reset:_,validate:ae,validateField:Ee,reorderListItem:z,removeListItem:W,insertListItem:ie,getInputProps:Ce,onSubmit:Ie,onReset:Re,isDirty:Fe,isTouched:Ue,setTouched:f,setDirty:v,resetTouched:H,resetDirty:R,isValid:Le,getTransformedValues:Ae};return dN(e,ke),ke}function lt(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(c){try{l(n.next(c))}catch(u){s(u)}}function a(c){try{l(n.throw(c))}catch(u){s(u)}}function l(c){var u;c.done?i(c.value):(u=c.value,u instanceof r?u:new r(function(d){d(u)})).then(o,a)}l((n=n.apply(e,t||[])).next())})}function rs(){}function ot(){ot.init.call(this)}function Sb(e){return e._maxListeners===void 0?ot.defaultMaxListeners:e._maxListeners}function b1(e,t,r,n){var i,s,o,a;if(typeof r!="function")throw new TypeError('"listener" argument must be a function');if((s=e._events)?(s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]):(s=e._events=new rs,e._eventsCount=0),o){if(typeof o=="function"?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),!o.warned&&(i=Sb(e))&&i>0&&o.length>i){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+t+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,a=l,typeof console.warn=="function"?console.warn(a):console.log(a)}}else o=s[t]=r,++e._eventsCount;return e}function T1(e,t,r){var n=!1;function i(){e.removeListener(t,i),n||(n=!0,r.apply(e,arguments))}return i.listener=r,i}function I1(e){var t=this._events;if(t){var r=t[e];if(typeof r=="function")return 1;if(r)return r.length}return 0}function Sl(e,t){for(var r=new Array(t);t--;)r[t]=e[t];return r}typeof SuppressedError=="function"&&SuppressedError,rs.prototype=Object.create(null),ot.EventEmitter=ot,ot.usingDomains=!1,ot.prototype.domain=void 0,ot.prototype._events=void 0,ot.prototype._maxListeners=void 0,ot.defaultMaxListeners=10,ot.init=function(){this.domain=null,ot.usingDomains&&(void 0).active,this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new rs,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},ot.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},ot.prototype.getMaxListeners=function(){return Sb(this)},ot.prototype.emit=function(e){var t,r,n,i,s,o,a,l=e==="error";if(o=this._events)l=l&&o.error==null;else if(!l)return!1;if(a=this.domain,l){if(t=arguments[1],!a){if(t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}return t||(t=new Error('Uncaught, unspecified "error" event')),t.domainEmitter=this,t.domain=a,t.domainThrown=!1,a.emit("error",t),!1}if(!(r=o[e]))return!1;var u=typeof r=="function";switch(n=arguments.length){case 1:(function(d,h,f){if(h)d.call(f);else for(var g=d.length,v=Sl(d,g),E=0;E<g;++E)v[E].call(f)})(r,u,this);break;case 2:(function(d,h,f,g){if(h)d.call(f,g);else for(var v=d.length,E=Sl(d,v),p=0;p<v;++p)E[p].call(f,g)})(r,u,this,arguments[1]);break;case 3:(function(d,h,f,g,v){if(h)d.call(f,g,v);else for(var E=d.length,p=Sl(d,E),y=0;y<E;++y)p[y].call(f,g,v)})(r,u,this,arguments[1],arguments[2]);break;case 4:(function(d,h,f,g,v,E){if(h)d.call(f,g,v,E);else for(var p=d.length,y=Sl(d,p),C=0;C<p;++C)y[C].call(f,g,v,E)})(r,u,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(n-1),s=1;s<n;s++)i[s-1]=arguments[s];(function(d,h,f,g){if(h)d.apply(f,g);else for(var v=d.length,E=Sl(d,v),p=0;p<v;++p)E[p].apply(f,g)})(r,u,this,i)}return!0},ot.prototype.addListener=function(e,t){return b1(this,e,t,!1)},ot.prototype.on=ot.prototype.addListener,ot.prototype.prependListener=function(e,t){return b1(this,e,t,!0)},ot.prototype.once=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.on(e,T1(this,e,t)),this},ot.prototype.prependOnceListener=function(e,t){if(typeof t!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(e,T1(this,e,t)),this},ot.prototype.removeListener=function(e,t){var r,n,i,s,o;if(typeof t!="function")throw new TypeError('"listener" argument must be a function');if(!(n=this._events))return this;if(!(r=n[e]))return this;if(r===t||r.listener&&r.listener===t)--this._eventsCount==0?this._events=new rs:(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if(typeof r!="function"){for(i=-1,s=r.length;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;if(r.length===1){if(r[0]=void 0,--this._eventsCount==0)return this._events=new rs,this;delete n[e]}else(function(a,l){for(var c=l,u=c+1,d=a.length;u<d;c+=1,u+=1)a[c]=a[u];a.pop()})(r,i);n.removeListener&&this.emit("removeListener",e,o||t)}return this},ot.prototype.off=function(e,t){return this.removeListener(e,t)},ot.prototype.removeAllListeners=function(e){var t,r;if(!(r=this._events))return this;if(!r.removeListener)return arguments.length===0?(this._events=new rs,this._eventsCount=0):r[e]&&(--this._eventsCount==0?this._events=new rs:delete r[e]),this;if(arguments.length===0){for(var n,i=Object.keys(r),s=0;s<i.length;++s)(n=i[s])!=="removeListener"&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=new rs,this._eventsCount=0,this}if(typeof(t=r[e])=="function")this.removeListener(e,t);else if(t)do this.removeListener(e,t[t.length-1]);while(t[0]);return this},ot.prototype.listeners=function(e){var t,r,n=this._events;return r=n&&(t=n[e])?typeof t=="function"?[t.listener||t]:function(i){for(var s=new Array(i.length),o=0;o<s.length;++o)s[o]=i[o].listener||i[o];return s}(t):[],r},ot.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):I1.call(e,t)},ot.prototype.listenerCount=I1,ot.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};var yN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function EN(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Ve={options:{usePureJavaScript:!1}},Sc=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function wb(){throw new Error("setTimeout has not been defined")}function bb(){throw new Error("clearTimeout has not been defined")}var ns=wb,is=bb;function Tb(e){if(ns===setTimeout)return setTimeout(e,0);if((ns===wb||!ns)&&setTimeout)return ns=setTimeout,setTimeout(e,0);try{return ns(e,0)}catch{try{return ns.call(null,e,0)}catch{return ns.call(this,e,0)}}}typeof Sc.setTimeout=="function"&&(ns=setTimeout),typeof Sc.clearTimeout=="function"&&(is=clearTimeout);var so,Ai=[],xa=!1,rd=-1;function CN(){xa&&so&&(xa=!1,so.length?Ai=so.concat(Ai):rd=-1,Ai.length&&Ib())}function Ib(){if(!xa){var e=Tb(CN);xa=!0;for(var t=Ai.length;t;){for(so=Ai,Ai=[];++rd<t;)so&&so[rd].run();rd=-1,t=Ai.length}so=null,xa=!1,function(r){if(is===clearTimeout)return clearTimeout(r);if((is===bb||!is)&&clearTimeout)return is=clearTimeout,clearTimeout(r);try{return is(r)}catch{try{return is.call(null,r)}catch{return is.call(this,r)}}}(e)}}function Rb(e,t){this.fun=e,this.array=t}Rb.prototype.run=function(){this.fun.apply(null,this.array)};function Po(){}var SN=Po,wN=Po,bN=Po,TN=Po,IN=Po,RN=Po,AN=Po,Xo=Sc.performance||{},kN=Xo.now||Xo.mozNow||Xo.msNow||Xo.oNow||Xo.webkitNow||function(){return new Date().getTime()},xN=new Date,ss={nextTick:function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Ai.push(new Rb(e,t)),Ai.length!==1||xa||Tb(Ib)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:SN,addListener:wN,once:bN,off:TN,removeListener:IN,removeAllListeners:RN,emit:AN,binding:function(e){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(e){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(e){var t=.001*kN.call(Xo),r=Math.floor(t),n=Math.floor(t%1*1e9);return e&&(r-=e[0],(n-=e[1])<0&&(r--,n+=1e9)),[r,n]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-xN)/1e3}},ai=[],un=[],NN=typeof Uint8Array<"u"?Uint8Array:Array,q0=!1;function Ab(){q0=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0;t<64;++t)ai[t]=e[t],un[e.charCodeAt(t)]=t;un[45]=62,un[95]=63}function _N(e,t,r){for(var n,i,s=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s.push(ai[(i=n)>>18&63]+ai[i>>12&63]+ai[i>>6&63]+ai[63&i]);return s.join("")}function R1(e){var t;q0||Ab();for(var r=e.length,n=r%3,i="",s=[],o=16383,a=0,l=r-n;a<l;a+=o)s.push(_N(e,a,a+o>l?l:a+o));return n===1?(t=e[r-1],i+=ai[t>>2],i+=ai[t<<4&63],i+="=="):n===2&&(t=(e[r-2]<<8)+e[r-1],i+=ai[t>>10],i+=ai[t>>4&63],i+=ai[t<<2&63],i+="="),s.push(i),s.join("")}function Cu(e,t,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,c=l>>1,u=-7,d=r?i-1:0,h=r?-1:1,f=e[t+d];for(d+=h,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=h,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+d],d+=h,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),s-=c}return(f?-1:1)*o*Math.pow(2,s-n)}function kb(e,t,r,n,i,s){var o,a,l,c=8*s-i-1,u=(1<<c)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,g=n?1:-1,v=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*l-1)*Math.pow(2,i),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[r+f]=255&a,f+=g,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;e[r+f]=255&o,f+=g,o/=256,c-=8);e[r+f-g]|=128*v}var DN={}.toString,xb=Array.isArray||function(e){return DN.call(e)=="[object Array]"};function Vd(){return ee.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function ki(e,t){if(Vd()<t)throw new RangeError("Invalid typed array length");return ee.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=ee.prototype:(e===null&&(e=new ee(t)),e.length=t),e}function ee(e,t,r){if(!(ee.TYPED_ARRAY_SUPPORT||this instanceof ee))return new ee(e,t,r);if(typeof e=="number"){if(typeof t=="string")throw new Error("If encoding is specified then the first argument must be a string");return Ng(this,e)}return Nb(this,e,t,r)}function Nb(e,t,r,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer?function(i,s,o,a){if(s.byteLength,o<0||s.byteLength<o)throw new RangeError("'offset' is out of bounds");if(s.byteLength<o+(a||0))throw new RangeError("'length' is out of bounds");return s=o===void 0&&a===void 0?new Uint8Array(s):a===void 0?new Uint8Array(s,o):new Uint8Array(s,o,a),ee.TYPED_ARRAY_SUPPORT?(i=s).__proto__=ee.prototype:i=Uf(i,s),i}(e,t,r,n):typeof t=="string"?function(i,s,o){if(typeof o=="string"&&o!==""||(o="utf8"),!ee.isEncoding(o))throw new TypeError('"encoding" must be a valid string encoding');var a=0|Db(s,o);i=ki(i,a);var l=i.write(s,o);return l!==a&&(i=i.slice(0,l)),i}(e,t,r):function(i,s){if(li(s)){var o=0|z0(s.length);return(i=ki(i,o)).length===0||s.copy(i,0,0,o),i}if(s){if(typeof ArrayBuffer<"u"&&s.buffer instanceof ArrayBuffer||"length"in s)return typeof s.length!="number"||(a=s.length)!=a?ki(i,0):Uf(i,s);if(s.type==="Buffer"&&xb(s.data))return Uf(i,s.data)}var a;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function _b(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Ng(e,t){if(_b(t),e=ki(e,t<0?0:0|z0(t)),!ee.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function Uf(e,t){var r=t.length<0?0:0|z0(t.length);e=ki(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function z0(e){if(e>=Vd())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Vd().toString(16)+" bytes");return 0|e}function li(e){return!(e==null||!e._isBuffer)}function Db(e,t){if(li(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var r=e.length;if(r===0)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return qd(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Lb(e).length;default:if(n)return qd(e).length;t=(""+t).toLowerCase(),n=!0}}function PN(e,t,r){var n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return jN(this,t,r);case"utf8":case"utf-8":return Bb(this,t,r);case"ascii":return HN(this,t,r);case"latin1":case"binary":return FN(this,t,r);case"base64":return UN(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return VN(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function Hs(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function A1(e,t,r,n,i){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if(typeof t=="string"&&(t=ee.from(t,n)),li(t))return t.length===0?-1:k1(e,t,r,n,i);if(typeof t=="number")return t&=255,ee.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):k1(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function k1(e,t,r,n,i){var s,o=1,a=e.length,l=t.length;if(n!==void 0&&((n=String(n).toLowerCase())==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;o=2,a/=2,l/=2,r/=2}function c(f,g){return o===1?f[g]:f.readUInt16BE(g*o)}if(i){var u=-1;for(s=r;s<a;s++)if(c(e,s)===c(t,u===-1?0:s-u)){if(u===-1&&(u=s),s-u+1===l)return u*o}else u!==-1&&(s-=s-u),u=-1}else for(r+l>a&&(r=a-l),s=r;s>=0;s--){for(var d=!0,h=0;h<l;h++)if(c(e,s+h)!==c(t,h)){d=!1;break}if(d)return s}return-1}function BN(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;if(s%2!=0)throw new TypeError("Invalid hex string");n>s/2&&(n=s/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function $N(e,t,r,n){return Fh(qd(t,e.length-r),e,r,n)}function Pb(e,t,r,n){return Fh(function(i){for(var s=[],o=0;o<i.length;++o)s.push(255&i.charCodeAt(o));return s}(t),e,r,n)}function LN(e,t,r,n){return Pb(e,t,r,n)}function ON(e,t,r,n){return Fh(Lb(t),e,r,n)}function MN(e,t,r,n){return Fh(function(i,s){for(var o,a,l,c=[],u=0;u<i.length&&!((s-=2)<0);++u)a=(o=i.charCodeAt(u))>>8,l=o%256,c.push(l),c.push(a);return c}(t,e.length-r),e,r,n)}function UN(e,t,r){return t===0&&r===e.length?R1(e):R1(e.slice(t,r))}function Bb(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,o,a,l,c=e[i],u=null,d=c>239?4:c>223?3:c>191?2:1;if(i+d<=r)switch(d){case 1:c<128&&(u=c);break;case 2:(192&(s=e[i+1]))==128&&(l=(31&c)<<6|63&s)>127&&(u=l);break;case 3:s=e[i+1],o=e[i+2],(192&s)==128&&(192&o)==128&&(l=(15&c)<<12|(63&s)<<6|63&o)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=e[i+1],o=e[i+2],a=e[i+3],(192&s)==128&&(192&o)==128&&(192&a)==128&&(l=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&a)>65535&&l<1114112&&(u=l)}u===null?(u=65533,d=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),i+=d}return function(h){var f=h.length;if(f<=x1)return String.fromCharCode.apply(String,h);for(var g="",v=0;v<f;)g+=String.fromCharCode.apply(String,h.slice(v,v+=x1));return g}(n)}ee.TYPED_ARRAY_SUPPORT=Sc.TYPED_ARRAY_SUPPORT===void 0||Sc.TYPED_ARRAY_SUPPORT,Vd(),ee.poolSize=8192,ee._augment=function(e){return e.__proto__=ee.prototype,e},ee.from=function(e,t,r){return Nb(null,e,t,r)},ee.TYPED_ARRAY_SUPPORT&&(ee.prototype.__proto__=Uint8Array.prototype,ee.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&ee[Symbol.species]),ee.alloc=function(e,t,r){return function(n,i,s,o){return _b(i),i<=0?ki(n,i):s!==void 0?typeof o=="string"?ki(n,i).fill(s,o):ki(n,i).fill(s):ki(n,i)}(null,e,t,r)},ee.allocUnsafe=function(e){return Ng(null,e)},ee.allocUnsafeSlow=function(e){return Ng(null,e)},ee.isBuffer=function(e){return e!=null&&(!!e._isBuffer||D1(e)||function(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&D1(t.slice(0,0))}(e))},ee.compare=function(e,t){if(!li(e)||!li(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},ee.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ee.concat=function(e,t){if(!xb(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return ee.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=ee.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(!li(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},ee.byteLength=Db,ee.prototype._isBuffer=!0,ee.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)Hs(this,t,t+1);return this},ee.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)Hs(this,t,t+3),Hs(this,t+1,t+2);return this},ee.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)Hs(this,t,t+7),Hs(this,t+1,t+6),Hs(this,t+2,t+5),Hs(this,t+3,t+4);return this},ee.prototype.toString=function(){var e=0|this.length;return e===0?"":arguments.length===0?Bb(this,0,e):PN.apply(this,arguments)},ee.prototype.equals=function(e){if(!li(e))throw new TypeError("Argument must be a Buffer");return this===e||ee.compare(this,e)===0},ee.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},ee.prototype.compare=function(e,t,r,n,i){if(!li(e))throw new TypeError("Argument must be a Buffer");if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),n===void 0&&(n=0),i===void 0&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(s,o),l=this.slice(n,i),c=e.slice(t,r),u=0;u<a;++u)if(l[u]!==c[u]){s=l[u],o=c[u];break}return s<o?-1:o<s?1:0},ee.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},ee.prototype.indexOf=function(e,t,r){return A1(this,e,t,r,!0)},ee.prototype.lastIndexOf=function(e,t,r){return A1(this,e,t,r,!1)},ee.prototype.write=function(e,t,r,n){if(t===void 0)n="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,n===void 0&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((r===void 0||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return BN(this,e,t,r);case"utf8":case"utf-8":return $N(this,e,t,r);case"ascii":return Pb(this,e,t,r);case"latin1":case"binary":return LN(this,e,t,r);case"base64":return ON(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return MN(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},ee.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var x1=4096;function HN(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function FN(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function jN(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=zN(e[s]);return i}function VN(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function Yt(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function Pr(e,t,r,n,i,s){if(!li(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function Su(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function wu(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function $b(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N1(e,t,r,n,i){return i||$b(e,0,r,4),kb(e,t,r,n,23,4),r+4}function _1(e,t,r,n,i){return i||$b(e,0,r,8),kb(e,t,r,n,52,8),r+8}ee.prototype.slice=function(e,t){var r,n=this.length;if((e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=t===void 0?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),ee.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=ee.prototype;else{var i=t-e;r=new ee(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+e]}return r},ee.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},ee.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},ee.prototype.readUInt8=function(e,t){return t||Yt(e,1,this.length),this[e]},ee.prototype.readUInt16LE=function(e,t){return t||Yt(e,2,this.length),this[e]|this[e+1]<<8},ee.prototype.readUInt16BE=function(e,t){return t||Yt(e,2,this.length),this[e]<<8|this[e+1]},ee.prototype.readUInt32LE=function(e,t){return t||Yt(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},ee.prototype.readUInt32BE=function(e,t){return t||Yt(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},ee.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},ee.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||Yt(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},ee.prototype.readInt8=function(e,t){return t||Yt(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},ee.prototype.readInt16LE=function(e,t){t||Yt(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt16BE=function(e,t){t||Yt(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},ee.prototype.readInt32LE=function(e,t){return t||Yt(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},ee.prototype.readInt32BE=function(e,t){return t||Yt(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},ee.prototype.readFloatLE=function(e,t){return t||Yt(e,4,this.length),Cu(this,e,!0,23,4)},ee.prototype.readFloatBE=function(e,t){return t||Yt(e,4,this.length),Cu(this,e,!1,23,4)},ee.prototype.readDoubleLE=function(e,t){return t||Yt(e,8,this.length),Cu(this,e,!0,52,8)},ee.prototype.readDoubleBE=function(e,t){return t||Yt(e,8,this.length),Cu(this,e,!1,52,8)},ee.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Pr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},ee.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||Pr(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},ee.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,1,255,0),ee.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},ee.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Su(this,e,t,!0),t+2},ee.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,65535,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Su(this,e,t,!1),t+2},ee.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):wu(this,e,t,!0),t+4},ee.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,4294967295,0),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):wu(this,e,t,!1),t+4},ee.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Pr(this,e,t,r,i-1,-i)}var s=0,o=1,a=0;for(this[t]=255&e;++s<r&&(o*=256);)e<0&&a===0&&this[t+s-1]!==0&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},ee.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);Pr(this,e,t,r,i-1,-i)}var s=r-1,o=1,a=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)e<0&&a===0&&this[t+s+1]!==0&&(a=1),this[t+s]=(e/o|0)-a&255;return t+r},ee.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,1,127,-128),ee.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},ee.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Su(this,e,t,!0),t+2},ee.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,2,32767,-32768),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Su(this,e,t,!1),t+2},ee.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,2147483647,-2147483648),ee.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):wu(this,e,t,!0),t+4},ee.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||Pr(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),ee.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):wu(this,e,t,!1),t+4},ee.prototype.writeFloatLE=function(e,t,r){return N1(this,e,t,!0,r)},ee.prototype.writeFloatBE=function(e,t,r){return N1(this,e,t,!1,r)},ee.prototype.writeDoubleLE=function(e,t,r){return _1(this,e,t,!0,r)},ee.prototype.writeDoubleBE=function(e,t,r){return _1(this,e,t,!1,r)},ee.prototype.copy=function(e,t,r,n){if(r||(r=0),n||n===0||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,s=n-r;if(this===e&&r<t&&t<n)for(i=s-1;i>=0;--i)e[i+t]=this[i+r];else if(s<1e3||!ee.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},ee.prototype.fill=function(e,t,r,n){if(typeof e=="string"){if(typeof t=="string"?(n=t,t=0,r=this.length):typeof r=="string"&&(n=r,r=this.length),e.length===1){var i=e.charCodeAt(0);i<256&&(e=i)}if(n!==void 0&&typeof n!="string")throw new TypeError("encoding must be a string");if(typeof n=="string"&&!ee.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else typeof e=="number"&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0),typeof e=="number")for(s=t;s<r;++s)this[s]=e;else{var o=li(e)?e:qd(new ee(e,n).toString()),a=o.length;for(s=0;s<r-t;++s)this[s+t]=o[s%a]}return this};var qN=/[^+\/0-9A-Za-z-_]/g;function zN(e){return e<16?"0"+e.toString(16):e.toString(16)}function qd(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function Lb(e){return function(t){var r,n,i,s,o,a;q0||Ab();var l=t.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=t[l-2]==="="?2:t[l-1]==="="?1:0,a=new NN(3*l/4-o),i=o>0?l-4:l;var c=0;for(r=0,n=0;r<i;r+=4,n+=3)s=un[t.charCodeAt(r)]<<18|un[t.charCodeAt(r+1)]<<12|un[t.charCodeAt(r+2)]<<6|un[t.charCodeAt(r+3)],a[c++]=s>>16&255,a[c++]=s>>8&255,a[c++]=255&s;return o===2?(s=un[t.charCodeAt(r)]<<2|un[t.charCodeAt(r+1)]>>4,a[c++]=255&s):o===1&&(s=un[t.charCodeAt(r)]<<10|un[t.charCodeAt(r+1)]<<4|un[t.charCodeAt(r+2)]>>2,a[c++]=s>>8&255,a[c++]=255&s),a}(function(t){if((t=function(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}(t).replace(qN,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(e))}function Fh(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function D1(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var _g={},KN=_g,P1={};_g.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var l=0,c=e[i];l<a.length;++l)c+=a[l]<<8,a[l]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}else n=function(d,h){var f=0,g=h.length,v=h.charAt(0),E=[0];for(f=0;f<d.length();++f){for(var p=0,y=d.at(f);p<E.length;++p)y+=E[p]<<8,E[p]=y%g,y=y/g|0;for(;y>0;)E.push(y%g),y=y/g|0}var C="";for(f=0;d.at(f)===0&&f<d.length()-1;++f)C+=v;for(f=E.length-1;f>=0;--f)C+=h[E[f]];return C}(e,t);if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n},_g.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=P1[t];if(!r){r=P1[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");var i=t.length,s=t.charAt(0),o=[0];for(n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var l=0,c=a;l<o.length;++l)c+=o[l]*i,o[l]=255&c,c>>=8;for(;c>0;)o.push(255&c),c>>=8}for(var u=0;e[u]===s&&u<e.length-1;++u)o.push(0);return ee!==void 0?ee.from(o.reverse()):new Uint8Array(o.reverse())};var B1=Ve,$1=KN,U=B1.util=B1.util||{};function wl(e){if(e!==8&&e!==16&&e!==24&&e!==32)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function Dg(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(U.isArrayBuffer(e)||U.isArrayBufferView(e))if(ee!==void 0&&e instanceof ee)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof Dg||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}(function(){if(ss!==void 0&&ss.nextTick&&!ss.browser)return U.nextTick=ss.nextTick,void(typeof setImmediate=="function"?U.setImmediate=setImmediate:U.setImmediate=U.nextTick);if(typeof setImmediate=="function")return U.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(U.nextTick=function(a){return setImmediate(a)});if(U.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(l){if(l.source===window&&l.data===e){l.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(u){u()})}};var o=a,e="forge.setImmediate",t=[];U.setImmediate=function(l){t.push(l),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div");t=[],new MutationObserver(function(){var a=t.slice();t.length=0,a.forEach(function(l){l()})}).observe(i,{attributes:!0});var s=U.setImmediate;U.setImmediate=function(a){Date.now()-r>15?(r=Date.now(),s(a)):(t.push(a),t.length===1&&i.setAttribute("a",n=!n))}}U.nextTick=U.setImmediate})(),U.isNodejs=ss!==void 0&&ss.versions&&ss.versions.node,U.globalScope=U.isNodejs?yN:typeof self>"u"?window:self,U.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},U.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer},U.isArrayBufferView=function(e){return e&&U.isArrayBuffer(e.buffer)&&e.byteLength!==void 0},U.ByteBuffer=Dg,U.ByteStringBuffer=Dg;U.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},U.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},U.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},U.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},U.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},U.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},U.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(U.encodeUtf8(e))},U.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},U.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},U.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},U.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},U.ByteStringBuffer.prototype.putInt=function(e,t){wl(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)},U.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},U.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},U.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},U.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},U.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},U.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},U.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},U.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},U.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},U.ByteStringBuffer.prototype.getInt=function(e){wl(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t},U.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},U.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},U.ByteStringBuffer.prototype.bytes=function(e){return e===void 0?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},U.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},U.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},U.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},U.ByteStringBuffer.prototype.copy=function(){var e=U.createBuffer(this.data);return e.read=this.read,e},U.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},U.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},U.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},U.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},U.ByteStringBuffer.prototype.toString=function(){return U.decodeUtf8(this.bytes())},U.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=U.isArrayBuffer(e),n=U.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},U.DataBuffer.prototype.length=function(){return this.write-this.read},U.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},U.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},U.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},U.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},U.DataBuffer.prototype.putBytes=function(e,t){if(U.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(U.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof U.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&U.isArrayBufferView(e.data))return n=new Uint8Array(e.data.byteLength,e.read,e.length()),this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this;if(e instanceof U.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var i;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.hex.decode(e,i,this.write),this;if(t==="base64")return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.base64.decode(e,i,this.write),this;if(t==="utf8"&&(e=U.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=U.binary.raw.decode(i),this;if(t==="utf16")return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=U.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},U.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},U.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},U.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},U.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},U.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},U.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},U.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},U.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},U.DataBuffer.prototype.putInt=function(e,t){wl(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this},U.DataBuffer.prototype.putSignedInt=function(e,t){return wl(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},U.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},U.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},U.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},U.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},U.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},U.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},U.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},U.DataBuffer.prototype.getInt=function(e){wl(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t},U.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},U.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t},U.DataBuffer.prototype.bytes=function(e){return e===void 0?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},U.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},U.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},U.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},U.DataBuffer.prototype.copy=function(){return new U.DataBuffer(this)},U.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},U.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},U.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},U.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},U.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if((e=e||"utf8")==="binary"||e==="raw")return U.binary.raw.encode(t);if(e==="hex")return U.binary.hex.encode(t);if(e==="base64")return U.binary.base64.encode(t);if(e==="utf8")return U.text.utf8.decode(t);if(e==="utf16")return U.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},U.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=U.encodeUtf8(e)),new U.ByteBuffer(e)},U.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},U.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s},U.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},U.bytesToHex=function(e){return U.createBuffer(e).toHex()},U.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var Qi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Xi=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],L1="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";U.encode64=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.length;)r=e.charCodeAt(a++),n=e.charCodeAt(a++),i=e.charCodeAt(a++),s+=Qi.charAt(r>>2),s+=Qi.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=Qi.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":Qi.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+`\r
`,s=s.substr(t));return o+=s},U.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",o=0;o<e.length;)t=Xi[e.charCodeAt(o++)-43],r=Xi[e.charCodeAt(o++)-43],n=Xi[e.charCodeAt(o++)-43],i=Xi[e.charCodeAt(o++)-43],s+=String.fromCharCode(t<<2|r>>4),n!==64&&(s+=String.fromCharCode((15&r)<<4|n>>2),i!==64&&(s+=String.fromCharCode((3&n)<<6|i)));return s},U.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},U.decodeUtf8=function(e){return decodeURIComponent(escape(e))},U.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:$1.encode,decode:$1.decode}},U.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},U.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},U.binary.hex.encode=U.bytesToHex,U.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},U.binary.base64.encode=function(e,t){for(var r,n,i,s="",o="",a=0;a<e.byteLength;)r=e[a++],n=e[a++],i=e[a++],s+=Qi.charAt(r>>2),s+=Qi.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=Qi.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":Qi.charAt(63&i)),t&&s.length>t&&(o+=s.substr(0,t)+`\r
`,s=s.substr(t));return o+=s},U.binary.base64.decode=function(e,t,r){var n,i,s,o,a=t;a||(a=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var l=0,c=r=r||0;l<e.length;)n=Xi[e.charCodeAt(l++)-43],i=Xi[e.charCodeAt(l++)-43],s=Xi[e.charCodeAt(l++)-43],o=Xi[e.charCodeAt(l++)-43],a[c++]=n<<2|i>>4,s!==64&&(a[c++]=(15&i)<<4|s>>2,o!==64&&(a[c++]=(3&s)<<6|o));return t?c-r:a.subarray(0,c)},U.binary.base58.encode=function(e,t){return U.binary.baseN.encode(e,L1,t)},U.binary.base58.decode=function(e,t){return U.binary.baseN.decode(e,L1,t)},U.text={utf8:{},utf16:{}},U.text.utf8.encode=function(e,t,r){e=U.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},U.text.utf8.decode=function(e){return U.decodeUtf8(String.fromCharCode.apply(null,e))},U.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n},U.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},U.deflate=function(e,t,r){if(t=U.decode64(e.deflate(U.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},U.inflate=function(e,t,r){var n=e.inflate(U.encode64(t)).rval;return n===null?null:U.decode64(n)};var K0=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=U.encode64(JSON.stringify(r)),n=e.setItem(t,r)),n!==void 0&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},G0=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(U.decode64(r))),r},GN=function(e,t,r,n){var i=G0(e,t);i===null&&(i={}),i[r]=n,K0(e,t,i)},WN=function(e,t,r){var n=G0(e,t);return n!==null&&(n=r in n?n[r]:null),n},YN=function(e,t,r){var n=G0(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),K0(e,t,n)}},QN=function(e,t){K0(e,t,null)},bu=function(e,t,r){var n,i=null;r===void 0&&(r=["web","flash"]);var s=!1,o=null;for(var a in r){n=r[a];try{if(n==="flash"||n==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");i=e.apply(this,t),s=n==="flash"}n!=="web"&&n!=="both"||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(l){o=l}if(s)break}if(!s)throw o;return i};U.setItem=function(e,t,r,n,i){bu(GN,arguments,i)},U.getItem=function(e,t,r,n){return bu(WN,arguments,n)},U.removeItem=function(e,t,r,n){bu(YN,arguments,n)},U.clearItems=function(e,t,r){bu(QN,arguments,r)},U.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},U.format=function(e){for(var t,r,n=/%./g,i=0,s=[],o=0;t=n.exec(e);){(r=e.substring(o,n.lastIndex-2)).length>0&&s.push(r),o=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")},U.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,l=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",u=c.length>3?c.length%3:0;return l+(u?c.substr(0,u)+a:"")+c.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")},U.formatSize=function(e){return e=e>=1073741824?U.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?U.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?U.formatNumber(e/1024,0)+" KiB":U.formatNumber(e,0)+" bytes"},U.bytesFromIP=function(e){return e.indexOf(".")!==-1?U.bytesFromIPv4(e):e.indexOf(":")!==-1?U.bytesFromIPv6(e):null},U.bytesFromIPv4=function(e){if((e=e.split(".")).length!==4)return null;for(var t=U.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},U.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter(function(o){return o.length===0&&++t,!0})).length+t),n=U.createBuffer(),i=0;i<8;++i)if(e[i]&&e[i].length!==0){var s=U.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},U.bytesToIP=function(e){return e.length===4?U.bytesToIPv4(e):e.length===16?U.bytesToIPv6(e):null},U.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},U.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=U.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;o&&a===o.end+1?(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:a,end:a})}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")},U.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in U&&!e.update)return t(null,U.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return U.cores=navigator.hardwareConcurrency,t(null,U.cores);if(typeof Worker>"u")return U.cores=1,t(null,U.cores);if(typeof Blob>"u")return U.cores=2,t(null,U.cores);var r=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(n){var i=Date.now(),s=i+4;self.postMessage({st:i,et:s})})}).toString(),")()"],{type:"application/javascript"}));(function n(i,s,o){if(s===0){var a=Math.floor(i.reduce(function(l,c){return l+c},0)/i.length);return U.cores=Math.max(1,a),URL.revokeObjectURL(r),t(null,U.cores)}(function(l,c){for(var u=[],d=[],h=0;h<l;++h){var f=new Worker(r);f.addEventListener("message",function(g){if(d.push(g.data),d.length===l){for(var v=0;v<l;++v)u[v].terminate();c(null,d)}}),u.push(f)}for(h=0;h<l;++h)u[h].postMessage(h)})(o,function(l,c){i.push(function(u,d){for(var h=[],f=0;f<u;++f)for(var g=d[f],v=h[f]=[],E=0;E<u;++E)if(f!==E){var p=d[E];(g.st>p.st&&g.st<p.et||p.st>g.st&&p.st<g.et)&&v.push(E)}return h.reduce(function(y,C){return Math.max(y,C.length)},0)}(o,c)),n(i,s-1,o)})})([],5,16)};var Xt=Ve;Xt.cipher=Xt.cipher||{},Xt.cipher.algorithms=Xt.cipher.algorithms||{},Xt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Xt.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new Xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})},Xt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Xt.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+e);return new Xt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})},Xt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Xt.cipher.algorithms[e]=t},Xt.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in Xt.cipher.algorithms?Xt.cipher.algorithms[e]:null};var Hf=Xt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Hf.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Xt.util.createBuffer(),this.output=e.output||Xt.util.createBuffer(),this.mode.start(t)},Hf.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},Hf.prototype.finish=function(e){!e||this.mode.name!=="ECB"&&this.mode.name!=="CBC"||(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))};var Zt=Ve;Zt.cipher=Zt.cipher||{};var ze=Zt.cipher.modes=Zt.cipher.modes||{};function Tu(e,t){if(typeof e=="string"&&(e=Zt.util.createBuffer(e)),Zt.util.isArray(e)&&e.length>4){var r=e;e=Zt.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Zt.util.isArray(e)){var i=[],s=t/4;for(n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function Iu(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ff(e){return[e/4294967296|0,4294967295&e]}ze.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},ze.ecb.prototype.start=function(e){},ze.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},ze.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},ze.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},ze.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},ze.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},ze.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Tu(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},ze.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();for(this.cipher.encrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},ze.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();for(this.cipher.decrypt(this._inBlock,this._outBlock),n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},ze.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},ze.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},ze.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Tu(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Tu(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},ze.ofb.prototype.decrypt=ze.ofb.prototype.encrypt,ze.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0},ze.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Tu(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},ze.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}Iu(this._inBlock)},ze.ctr.prototype.decrypt=ze.ctr.prototype.encrypt,ze.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Zt.util.createBuffer(),this._partialBytes=0,this._R=3774873600},ze.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,r=Zt.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?Zt.util.createBuffer(e.additionalData):Zt.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=Zt.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=r.length();if(n===12)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ff(8*n)))}this._inBlock=this._j0.slice(0),Iu(this._inBlock),this._partialBytes=0,t=Zt.util.createBuffer(t),this._aDataLength=Ff(8*t.length());var i=t.length()%this.blockSize;for(i&&t.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},ze.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;for(s>0&&(s=this.blockSize-s),this._partialOutput.clear(),i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),Iu(this._inBlock)},ze.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),Iu(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},ze.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Zt.util.createBuffer();var n=this._aDataLength.concat(Ff(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},ze.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i)e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n);return r},ze.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},ze.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},ze.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},ze.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],l=(n-1-o%n)*t;a[o/n|0]=1<<t-1<<l,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s},ze.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],l=i[o];i[s+o]=[a[0]^l[0],a[1]^l[1],a[2]^l[2],a[3]^l[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};var vt=Ve;function qo(e,t){vt.cipher.registerAlgorithm(e,function(){return new vt.aes.Algorithm(e,t)})}vt.aes=vt.aes||{},vt.aes.startEncrypting=function(e,t,r,n){var i=Ru({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},vt.aes.createEncryptionCipher=function(e,t){return Ru({key:e,output:null,decrypt:!1,mode:t})},vt.aes.startDecrypting=function(e,t,r,n){var i=Ru({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},vt.aes.createDecryptionCipher=function(e,t){return Ru({key:e,output:null,decrypt:!0,mode:t})},vt.aes.Algorithm=function(e,t){Bg||O1();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return jf(r._w,n,i,!1)},decrypt:function(n,i){return jf(r._w,n,i,!0)}}}),r._init=!1},vt.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,r=e.key;if(typeof r!="string"||r.length!==16&&r.length!==24&&r.length!==32){if(vt.util.isArray(r)&&(r.length===16||r.length===24||r.length===32)){t=r,r=vt.util.createBuffer();for(var n=0;n<t.length;++n)r.putByte(t[n])}}else r=vt.util.createBuffer(r);if(!vt.util.isArray(r)){t=r,r=[];var i=t.length();if(i===16||i===24||i===32)for(i>>>=2,n=0;n<i;++n)r.push(t.getInt32())}if(!vt.util.isArray(r)||r.length!==4&&r.length!==6&&r.length!==8)throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=M1(r,e.decrypt&&!o),this._init=!0}},vt.aes._expandKey=function(e,t){return Bg||O1(),M1(e,t)},vt.aes._updateBlock=jf,qo("AES-ECB",vt.cipher.modes.ecb),qo("AES-CBC",vt.cipher.modes.cbc),qo("AES-CFB",vt.cipher.modes.cfb),qo("AES-OFB",vt.cipher.modes.ofb),qo("AES-CTR",vt.cipher.modes.ctr),qo("AES-GCM",vt.cipher.modes.gcm);var Rr,Pg,Ob,oo,Mn,Bg=!1,zo=4;function O1(){Bg=!0,Ob=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;for(Rr=new Array(256),Pg=new Array(256),oo=new Array(4),Mn=new Array(4),t=0;t<4;++t)oo[t]=new Array(256),Mn[t]=new Array(256);var r,n,i,s,o,a,l,c=0,u=0;for(t=0;t<256;++t){s=(s=u^u<<1^u<<2^u<<3^u<<4)>>8^255&s^99,Rr[c]=s,Pg[s]=c,a=(o=e[s])<<24^s<<16^s<<8^s^o,l=((r=e[c])^(n=e[r])^(i=e[n]))<<24^(c^i)<<16^(c^n^i)<<8^c^r^i;for(var d=0;d<4;++d)oo[d][c]=a,Mn[d][s]=l,a=a<<24|a>>>8,l=l<<24|l>>>8;c===0?c=u=1:(c=r^e[e[e[r^i]]],u^=e[e[u]])}}function M1(e,t){for(var r,n=e.slice(0),i=1,s=n.length,o=zo*(s+6+1),a=s;a<o;++a)r=n[a-1],a%s==0?(r=Rr[r>>>16&255]<<24^Rr[r>>>8&255]<<16^Rr[255&r]<<8^Rr[r>>>24]^Ob[i]<<24,i++):s>6&&a%s==4&&(r=Rr[r>>>24]<<24^Rr[r>>>16&255]<<16^Rr[r>>>8&255]<<8^Rr[255&r]),n[a]=n[a-s]^r;if(t){for(var l,c=Mn[0],u=Mn[1],d=Mn[2],h=Mn[3],f=n.slice(0),g=(a=0,(o=n.length)-zo);a<o;a+=zo,g-=zo)if(a===0||a===o-zo)f[a]=n[g],f[a+1]=n[g+3],f[a+2]=n[g+2],f[a+3]=n[g+1];else for(var v=0;v<zo;++v)l=n[g+v],f[a+(3&-v)]=c[Rr[l>>>24]]^u[Rr[l>>>16&255]]^d[Rr[l>>>8&255]]^h[Rr[255&l]];n=f}return n}function jf(e,t,r,n){var i,s,o,a,l,c,u,d,h,f,g,v,E=e.length/4-1;n?(i=Mn[0],s=Mn[1],o=Mn[2],a=Mn[3],l=Pg):(i=oo[0],s=oo[1],o=oo[2],a=oo[3],l=Rr),c=t[0]^e[0],u=t[n?3:1]^e[1],d=t[2]^e[2],h=t[n?1:3]^e[3];for(var p=3,y=1;y<E;++y)f=i[c>>>24]^s[u>>>16&255]^o[d>>>8&255]^a[255&h]^e[++p],g=i[u>>>24]^s[d>>>16&255]^o[h>>>8&255]^a[255&c]^e[++p],v=i[d>>>24]^s[h>>>16&255]^o[c>>>8&255]^a[255&u]^e[++p],h=i[h>>>24]^s[c>>>16&255]^o[u>>>8&255]^a[255&d]^e[++p],c=f,u=g,d=v;r[0]=l[c>>>24]<<24^l[u>>>16&255]<<16^l[d>>>8&255]<<8^l[255&h]^e[++p],r[n?3:1]=l[u>>>24]<<24^l[d>>>16&255]<<16^l[h>>>8&255]<<8^l[255&c]^e[++p],r[2]=l[d>>>24]<<24^l[h>>>16&255]<<16^l[c>>>8&255]<<8^l[255&u]^e[++p],r[n?1:3]=l[h>>>24]<<24^l[c>>>16&255]<<16^l[u>>>8&255]<<8^l[255&d]^e[++p]}function Ru(e){var t,r="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?vt.cipher.createDecipher(r,e.key):vt.cipher.createCipher(r,e.key)).start;return t.start=function(i,s){var o=null;s instanceof vt.util.ByteBuffer&&(o=s,s={}),(s=s||{}).output=o,s.iv=i,n.call(t,s)},t}var Ql=Ve;Ql.pki=Ql.pki||{};var $g=Ql.pki.oids=Ql.oids=Ql.oids||{};function se(e,t){$g[e]=t,$g[t]=e}function at(e,t){$g[e]=t}se("1.2.840.113549.1.1.1","rsaEncryption"),se("1.2.840.113549.1.1.4","md5WithRSAEncryption"),se("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),se("1.2.840.113549.1.1.7","RSAES-OAEP"),se("1.2.840.113549.1.1.8","mgf1"),se("1.2.840.113549.1.1.9","pSpecified"),se("1.2.840.113549.1.1.10","RSASSA-PSS"),se("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),se("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),se("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),se("1.3.101.112","EdDSA25519"),se("1.2.840.10040.4.3","dsa-with-sha1"),se("1.3.14.3.2.7","desCBC"),se("1.3.14.3.2.26","sha1"),se("1.3.14.3.2.29","sha1WithRSASignature"),se("2.16.840.1.101.3.4.2.1","sha256"),se("2.16.840.1.101.3.4.2.2","sha384"),se("2.16.840.1.101.3.4.2.3","sha512"),se("2.16.840.1.101.3.4.2.4","sha224"),se("2.16.840.1.101.3.4.2.5","sha512-224"),se("2.16.840.1.101.3.4.2.6","sha512-256"),se("1.2.840.113549.2.2","md2"),se("1.2.840.113549.2.5","md5"),se("1.2.840.113549.1.7.1","data"),se("1.2.840.113549.1.7.2","signedData"),se("1.2.840.113549.1.7.3","envelopedData"),se("1.2.840.113549.1.7.4","signedAndEnvelopedData"),se("1.2.840.113549.1.7.5","digestedData"),se("1.2.840.113549.1.7.6","encryptedData"),se("1.2.840.113549.1.9.1","emailAddress"),se("1.2.840.113549.1.9.2","unstructuredName"),se("1.2.840.113549.1.9.3","contentType"),se("1.2.840.113549.1.9.4","messageDigest"),se("1.2.840.113549.1.9.5","signingTime"),se("1.2.840.113549.1.9.6","counterSignature"),se("1.2.840.113549.1.9.7","challengePassword"),se("1.2.840.113549.1.9.8","unstructuredAddress"),se("1.2.840.113549.1.9.14","extensionRequest"),se("1.2.840.113549.1.9.20","friendlyName"),se("1.2.840.113549.1.9.21","localKeyId"),se("1.2.840.113549.1.9.22.1","x509Certificate"),se("1.2.840.113549.1.12.10.1.1","keyBag"),se("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),se("1.2.840.113549.1.12.10.1.3","certBag"),se("1.2.840.113549.1.12.10.1.4","crlBag"),se("1.2.840.113549.1.12.10.1.5","secretBag"),se("1.2.840.113549.1.12.10.1.6","safeContentsBag"),se("1.2.840.113549.1.5.13","pkcs5PBES2"),se("1.2.840.113549.1.5.12","pkcs5PBKDF2"),se("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),se("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),se("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),se("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),se("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),se("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),se("1.2.840.113549.2.7","hmacWithSHA1"),se("1.2.840.113549.2.8","hmacWithSHA224"),se("1.2.840.113549.2.9","hmacWithSHA256"),se("1.2.840.113549.2.10","hmacWithSHA384"),se("1.2.840.113549.2.11","hmacWithSHA512"),se("1.2.840.113549.3.7","des-EDE3-CBC"),se("2.16.840.1.101.3.4.1.2","aes128-CBC"),se("2.16.840.1.101.3.4.1.22","aes192-CBC"),se("2.16.840.1.101.3.4.1.42","aes256-CBC"),se("2.5.4.3","commonName"),se("2.5.4.4","surname"),se("2.5.4.5","serialNumber"),se("2.5.4.6","countryName"),se("2.5.4.7","localityName"),se("2.5.4.8","stateOrProvinceName"),se("2.5.4.9","streetAddress"),se("2.5.4.10","organizationName"),se("2.5.4.11","organizationalUnitName"),se("2.5.4.12","title"),se("2.5.4.13","description"),se("2.5.4.15","businessCategory"),se("2.5.4.17","postalCode"),se("2.5.4.42","givenName"),se("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),se("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),se("2.16.840.1.113730.1.1","nsCertType"),se("2.16.840.1.113730.1.13","nsComment"),at("2.5.29.1","authorityKeyIdentifier"),at("2.5.29.2","keyAttributes"),at("2.5.29.3","certificatePolicies"),at("2.5.29.4","keyUsageRestriction"),at("2.5.29.5","policyMapping"),at("2.5.29.6","subtreesConstraint"),at("2.5.29.7","subjectAltName"),at("2.5.29.8","issuerAltName"),at("2.5.29.9","subjectDirectoryAttributes"),at("2.5.29.10","basicConstraints"),at("2.5.29.11","nameConstraints"),at("2.5.29.12","policyConstraints"),at("2.5.29.13","basicConstraints"),se("2.5.29.14","subjectKeyIdentifier"),se("2.5.29.15","keyUsage"),at("2.5.29.16","privateKeyUsagePeriod"),se("2.5.29.17","subjectAltName"),se("2.5.29.18","issuerAltName"),se("2.5.29.19","basicConstraints"),at("2.5.29.20","cRLNumber"),at("2.5.29.21","cRLReason"),at("2.5.29.22","expirationDate"),at("2.5.29.23","instructionCode"),at("2.5.29.24","invalidityDate"),at("2.5.29.25","cRLDistributionPoints"),at("2.5.29.26","issuingDistributionPoint"),at("2.5.29.27","deltaCRLIndicator"),at("2.5.29.28","issuingDistributionPoint"),at("2.5.29.29","certificateIssuer"),at("2.5.29.30","nameConstraints"),se("2.5.29.31","cRLDistributionPoints"),se("2.5.29.32","certificatePolicies"),at("2.5.29.33","policyMappings"),at("2.5.29.34","policyConstraints"),se("2.5.29.35","authorityKeyIdentifier"),at("2.5.29.36","policyConstraints"),se("2.5.29.37","extKeyUsage"),at("2.5.29.46","freshestCRL"),at("2.5.29.54","inhibitAnyPolicy"),se("1.3.6.1.4.1.11129.2.4.2","timestampList"),se("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),se("1.3.6.1.5.5.7.3.1","serverAuth"),se("1.3.6.1.5.5.7.3.2","clientAuth"),se("1.3.6.1.5.5.7.3.3","codeSigning"),se("1.3.6.1.5.5.7.3.4","emailProtection"),se("1.3.6.1.5.5.7.3.8","timeStamping");var bt=Ve,fe=bt.asn1=bt.asn1||{};function bl(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}fe.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},fe.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},fe.create=function(e,t,r,n,i){if(bt.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||bt.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=fe.copy(a)),a},fe.copy=function(e,t){var r;if(bt.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(fe.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:fe.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)},fe.equals=function(e,t,r){if(bt.util.isArray(e)){if(!bt.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!fe.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&fe.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i},fe.getBerValueLength=function(e){var t=e.getByte();if(t!==128)return 128&t?e.getInt((127&t)<<3):t};function nd(e,t,r,n){var i;bl(e,t,2);var s=e.getByte();t--;var o=192&s,a=31&s;i=e.length();var l,c,u=function(b,x){var m=b.getByte();if(x--,m!==128){var k;if(128&m){var N=127&m;bl(b,x,N),k=b.getInt(N<<3)}else k=m;if(k<0)throw new Error("Negative length: "+k);return k}}(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=u,d}u=t}var h=!(32&~s);if(h)if(l=[],u===void 0)for(;;){if(bl(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),l.push(nd(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),l.push(nd(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(l===void 0&&o===fe.Class.UNIVERSAL&&a===fe.Type.BITSTRING&&(c=e.bytes(u)),l===void 0&&n.decodeBitStrings&&o===fe.Class.UNIVERSAL&&a===fe.Type.BITSTRING&&u>1){var f=e.read,g=t,v=0;if(a===fe.Type.BITSTRING&&(bl(e,t,1),v=e.getByte(),t--),v===0)try{i=e.length();var E=nd(e,t,r+1,{strict:!0,decodeBitStrings:!0}),p=i-e.length();t-=p,a==fe.Type.BITSTRING&&p++;var y=E.tagClass;p!==u||y!==fe.Class.UNIVERSAL&&y!==fe.Class.CONTEXT_SPECIFIC||(l=[E])}catch{}l===void 0&&(e.read=f,t=g)}if(l===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(a===fe.Type.BMPSTRING)for(l="";u>0;u-=2)bl(e,t,2),l+=String.fromCharCode(e.getInt16()),t-=2;else l=e.getBytes(u),t-=u}var C=c===void 0?null:{bitStringContents:c};return fe.create(o,a,h,l,C)}fe.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=bt.util.createBuffer(e));var r=e.length(),n=nd(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n},fe.toDer=function(e){var t=bt.util.createBuffer(),r=e.tagClass|e.type,n=bt.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=fe.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(fe.toDer(e.value[s]))}else if(e.type===fe.Type.BMPSTRING)for(s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else!(e.type===fe.Type.INTEGER&&e.value.length>1)||(e.value.charCodeAt(0)!==0||128&e.value.charCodeAt(1))&&(e.value.charCodeAt(0)!==255||128&~e.value.charCodeAt(1))?n.putBytes(e.value):n.putBytes(e.value.substr(1));if(t.putByte(r),n.length()<=127)t.putByte(127&n.length());else{var o=n.length(),a="";do a+=String.fromCharCode(255&o),o>>>=8;while(o>0);for(t.putByte(128|a.length),s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t},fe.oidToDer=function(e){var t,r,n,i,s=e.split("."),o=bt.util.createBuffer();o.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var a=2;a<s.length;++a){t=!0,r=[],n=parseInt(s[a],10);do i=127&n,n>>>=7,t||(i|=128),r.push(i),t=!1;while(n>0);for(var l=r.length-1;l>=0;--l)o.putByte(r[l])}return o},fe.derToOid=function(e){var t;typeof e=="string"&&(e=bt.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)n<<=7,128&(r=e.getByte())?n+=127&r:(t+="."+(n+r),n=0);return t},fe.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var l=e.charAt(10),c=10;l!=="+"&&l!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&((l=e.charAt(c))==="+"||l==="-")){var u=60*parseInt(e.substr(c+1,2),10)+parseInt(e.substr(c+4,2),10);u*=6e4,l==="+"?t.setTime(+t-u):t.setTime(+t+u)}return t},fe.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),l=0,c=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var d=e.length-5,h=e.charAt(d);return h!=="+"&&h!=="-"||(c=60*parseInt(e.substr(d+1,2),10)+parseInt(e.substr(d+4,2),10),c*=6e4,h==="+"&&(c*=-1),u=!0),e.charAt(14)==="."&&(l=1e3*parseFloat(e.substr(14),10)),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,l),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,l)),t},fe.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},fe.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},fe.integerToDer=function(e){var t=bt.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r},fe.derToInteger=function(e){typeof e=="string"&&(e=bt.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},fe.validate=function(e,t,r,n){var i=!1;if(e.tagClass!==t.tagClass&&t.tagClass!==void 0||e.type!==t.type&&t.type!==void 0)n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||t.constructed===void 0){if(i=!0,t.value&&bt.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&((i=fe.validate(e.value[s],t.value[o],r,n))?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{if(e.bitStringContents.charCodeAt(0)!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return i};var U1=/[^\\u0000-\\u00ff]/;fe.prettyPrint=function(e,t,r){var n="";r=r||2,(t=t||0)>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case fe.Class.UNIVERSAL:n+="Universal:";break;case fe.Class.APPLICATION:n+="Application:";break;case fe.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case fe.Class.PRIVATE:n+="Private:"}if(e.tagClass===fe.Class.UNIVERSAL)switch(n+=e.type,e.type){case fe.Type.NONE:n+=" (None)";break;case fe.Type.BOOLEAN:n+=" (Boolean)";break;case fe.Type.INTEGER:n+=" (Integer)";break;case fe.Type.BITSTRING:n+=" (Bit string)";break;case fe.Type.OCTETSTRING:n+=" (Octet string)";break;case fe.Type.NULL:n+=" (Null)";break;case fe.Type.OID:n+=" (Object Identifier)";break;case fe.Type.ODESC:n+=" (Object Descriptor)";break;case fe.Type.EXTERNAL:n+=" (External or Instance of)";break;case fe.Type.REAL:n+=" (Real)";break;case fe.Type.ENUMERATED:n+=" (Enumerated)";break;case fe.Type.EMBEDDED:n+=" (Embedded PDV)";break;case fe.Type.UTF8:n+=" (UTF8)";break;case fe.Type.ROID:n+=" (Relative Object Identifier)";break;case fe.Type.SEQUENCE:n+=" (Sequence)";break;case fe.Type.SET:n+=" (Set)";break;case fe.Type.PRINTABLESTRING:n+=" (Printable String)";break;case fe.Type.IA5String:n+=" (IA5String (ASCII))";break;case fe.Type.UTCTIME:n+=" (UTC time)";break;case fe.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case fe.Type.BMPSTRING:n+=" (BMP String)"}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){var o=0,a="";for(s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=fe.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===fe.Type.OID){var l=fe.derToOid(e.value);n+=l,bt.pki&&bt.pki.oids&&l in bt.pki.oids&&(n+=" ("+bt.pki.oids[l]+") ")}if(e.type===fe.Type.INTEGER)try{n+=fe.derToInteger(e.value)}catch{n+="0x"+bt.util.bytesToHex(e.value)}else if(e.type===fe.Type.BITSTRING){if(e.value.length>1?n+="0x"+bt.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===fe.Type.OCTETSTRING)U1.test(e.value)||(n+="("+e.value+") "),n+="0x"+bt.util.bytesToHex(e.value);else if(e.type===fe.Type.UTF8)try{n+=bt.util.decodeUtf8(e.value)}catch(u){if(u.message!=="URI malformed")throw u;n+="0x"+bt.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===fe.Type.PRINTABLESTRING||e.type===fe.Type.IA5String?n+=e.value:U1.test(e.value)?n+="0x"+bt.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n};var Au=Ve;Au.md=Au.md||{},Au.md.algorithms=Au.md.algorithms||{};var vi=Ve;(vi.hmac=vi.hmac||{}).create=function(){var e=null,t=null,r=null,n=null,i={start:function(s,o){if(s!==null)if(typeof s=="string"){if(!((s=s.toLowerCase())in vi.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=vi.md.algorithms[s].create()}else t=s;if(o===null)o=e;else{if(typeof o=="string")o=vi.util.createBuffer(o);else if(vi.util.isArray(o)){var a=o;o=vi.util.createBuffer();for(var l=0;l<a.length;++l)o.putByte(a[l])}var c=o.length();for(c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=vi.util.createBuffer(),n=vi.util.createBuffer(),c=o.length(),l=0;l<c;++l)a=o.at(l),r.putByte(54^a),n.putByte(92^a);if(c<t.blockLength)for(a=t.blockLength-c,l=0;l<a;++l)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},update:function(s){t.update(s)},getMac:function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()}};return i.digest=i.getMac,i};var Xn=Ve,H1=Xn.md5=Xn.md5||{};Xn.md.md5=Xn.md.algorithms.md5=H1,H1.create=function(){F1||function(){Vf="",Vf+=Xn.util.fillString("\0",64),id=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],$l=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],va=new Array(64);for(var i=0;i<64;++i)va[i]=Math.floor(4294967296*Math.abs(Math.sin(i+1)));F1=!0}();var e=null,t=Xn.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Xn.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Xn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),j1(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Xn.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(Vf.substr(0,n.blockLength-s));for(var o,a=0,l=n.fullMessageLength.length-1;l>=0;--l)a=(o=8*n.fullMessageLength[l]+a)/4294967296>>>0,i.putInt32Le(o>>>0);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};j1(c,r,i);var u=Xn.util.createBuffer();return u.putInt32Le(c.h0),u.putInt32Le(c.h1),u.putInt32Le(c.h2),u.putInt32Le(c.h3),u},n};var Vf=null,id=null,$l=null,va=null,F1=!1;function j1(e,t,r){for(var n,i,s,o,a,l,c,u=r.length();u>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,c=0;c<16;++c)t[c]=r.getInt32Le(),n=i+(a^s&(o^a))+va[c]+t[c],i=a,a=o,o=s,s+=n<<(l=$l[c])|n>>>32-l;for(;c<32;++c)n=i+(o^a&(s^o))+va[c]+t[id[c]],i=a,a=o,o=s,s+=n<<(l=$l[c])|n>>>32-l;for(;c<48;++c)n=i+(s^o^a)+va[c]+t[id[c]],i=a,a=o,o=s,s+=n<<(l=$l[c])|n>>>32-l;for(;c<64;++c)n=i+(o^(s|~a))+va[c]+t[id[c]],i=a,a=o,o=s,s+=n<<(l=$l[c])|n>>>32-l;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,u-=64}}var zd=Ve,V1=zd.pem=zd.pem||{};function ku(e){for(var t=e.name+": ",r=[],n=function(l,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;var s=0,o=-1;for(i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else t[i]!==" "&&t[i]!=="	"&&t[i]!==","||(o=i);return t}function XN(e){return e.replace(/^\s+/,"")}V1.encode=function(e,t){t=t||{};var r,n="-----BEGIN "+e.type+`-----\r
`;if(e.procType&&(n+=ku(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(n+=ku(r={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=ku(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=ku(e.headers[i]);return e.procType&&(n+=`\r
`),n+=zd.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`},V1.decode=function(e){for(var t,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,i=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,s=/\r?\n/;t=n.exec(e);){var o=t[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:zd.util.decode64(t[3])};if(r.push(a),t[2]){for(var l=t[2].split(s),c=0;t&&c<l.length;){for(var u=l[c].replace(/\s+$/,""),d=c+1;d<l.length;++d){var h=l[d];if(!/\s/.test(h[0]))break;u+=h,c=d}if(t=u.match(i)){for(var f={name:t[1],values:[]},g=t[2].split(","),v=0;v<g.length;++v)f.values.push(XN(g[v]));if(a.procType)if(a.contentDomain||f.name!=="Content-Domain")if(a.dekInfo||f.name!=="DEK-Info")a.headers.push(f);else{if(f.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:g[0],parameters:g[1]||null}}else a.contentDomain=g[0]||"";else{if(f.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(f.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:g[0],type:g[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(r.length===0)throw new Error("Invalid PEM formatted message.");return r};var Rt=Ve;function Kn(e,t){Rt.cipher.registerAlgorithm(e,function(){return new Rt.des.Algorithm(e,t)})}Rt.des=Rt.des||{},Rt.des.startEncrypting=function(e,t,r,n){var i=xu({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i},Rt.des.createEncryptionCipher=function(e,t){return xu({key:e,output:null,decrypt:!1,mode:t})},Rt.des.startDecrypting=function(e,t,r,n){var i=xu({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i},Rt.des.createDecryptionCipher=function(e,t){return xu({key:e,output:null,decrypt:!0,mode:t})},Rt.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return q1(r._keys,n,i,!1)},decrypt:function(n,i){return q1(r._keys,n,i,!0)}}}),r._init=!1},Rt.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=Rt.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(r){for(var n,i=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],s=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],o=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],l=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],c=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],d=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],h=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],g=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],v=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],E=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=r.length()>8?3:1,C=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],x=0,m=0;m<y;m++){var k=r.getInt32(),N=r.getInt32();k^=(n=252645135&(k>>>4^N))<<4,k^=n=65535&((N^=n)>>>-16^k),k^=(n=858993459&(k>>>2^(N^=n<<-16)))<<2,k^=n=65535&((N^=n)>>>-16^k),k^=(n=1431655765&(k>>>1^(N^=n<<-16)))<<1,k^=n=16711935&((N^=n)>>>8^k),n=(k^=(n=1431655765&(k>>>1^(N^=n<<8)))<<1)<<8|(N^=n)>>>20&240,k=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=n;for(var H=0;H<b.length;++H){b[H]?(k=k<<2|k>>>26,N=N<<2|N>>>26):(k=k<<1|k>>>27,N=N<<1|N>>>27),N&=-15;var R=i[(k&=-15)>>>28]|s[k>>>24&15]|o[k>>>20&15]|a[k>>>16&15]|l[k>>>12&15]|c[k>>>8&15]|u[k>>>4&15],P=d[N>>>28]|h[N>>>24&15]|f[N>>>20&15]|g[N>>>16&15]|v[N>>>12&15]|E[N>>>8&15]|p[N>>>4&15];n=65535&(P>>>16^R),C[x++]=R^n,C[x++]=P^n<<16}}return C}(t),this._init=!0}},Kn("DES-ECB",Rt.cipher.modes.ecb),Kn("DES-CBC",Rt.cipher.modes.cbc),Kn("DES-CFB",Rt.cipher.modes.cfb),Kn("DES-OFB",Rt.cipher.modes.ofb),Kn("DES-CTR",Rt.cipher.modes.ctr),Kn("3DES-ECB",Rt.cipher.modes.ecb),Kn("3DES-CBC",Rt.cipher.modes.cbc),Kn("3DES-CFB",Rt.cipher.modes.cfb),Kn("3DES-OFB",Rt.cipher.modes.ofb),Kn("3DES-CTR",Rt.cipher.modes.ctr);var ZN=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],JN=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],e_=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],t_=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],r_=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],n_=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],i_=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],s_=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function q1(e,t,r,n){var i,s,o=e.length===32?3:9;i=o===3?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a=t[0],l=t[1];a^=(s=252645135&(a>>>4^l))<<4,a^=(s=65535&(a>>>16^(l^=s)))<<16,a^=s=858993459&((l^=s)>>>2^a),a^=s=16711935&((l^=s<<2)>>>8^a),a=(a^=(s=1431655765&(a>>>1^(l^=s<<8)))<<1)<<1|a>>>31,l=(l^=s)<<1|l>>>31;for(var c=0;c<o;c+=3){for(var u=i[c+1],d=i[c+2],h=i[c];h!=u;h+=d){var f=l^e[h],g=(l>>>4|l<<28)^e[h+1];s=a,a=l,l=s^(JN[f>>>24&63]|t_[f>>>16&63]|n_[f>>>8&63]|s_[63&f]|ZN[g>>>24&63]|e_[g>>>16&63]|r_[g>>>8&63]|i_[63&g])}s=a,a=l,l=s}l=l>>>1|l<<31,l^=s=1431655765&((a=a>>>1|a<<31)>>>1^l),l^=(s=16711935&(l>>>8^(a^=s<<1)))<<8,l^=(s=858993459&(l>>>2^(a^=s)))<<2,l^=s=65535&((a^=s)>>>16^l),l^=s=252645135&((a^=s<<16)>>>4^l),a^=s<<4,r[0]=a,r[1]=l}function xu(e){var t,r="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),n=(t=e.decrypt?Rt.cipher.createDecipher(r,e.key):Rt.cipher.createCipher(r,e.key)).start;return t.start=function(i,s){var o=null;s instanceof Rt.util.ByteBuffer&&(o=s,s={}),(s=s||{}).output=o,s.iv=i,n.call(t,s)},t}var yi,W0=EN(Object.freeze({__proto__:null,default:{}})),Ir=Ve,o_=Ir.pkcs5=Ir.pkcs5||{};Ir.util.isNodejs&&!Ir.options.usePureJavaScript&&(yi=W0),Ir.pbkdf2=o_.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Ir.util.isNodejs&&!Ir.options.usePureJavaScript&&yi.pbkdf2&&(i===null||typeof i!="object")&&(yi.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=ee.from(e,"binary"),t=ee.from(t,"binary"),s?yi.pbkdf2Sync.length===4?yi.pbkdf2(e,t,r,n,function(C,b){if(C)return s(C);s(null,b.toString("binary"))}):yi.pbkdf2(e,t,r,n,i,function(C,b){if(C)return s(C);s(null,b.toString("binary"))}):yi.pbkdf2Sync.length===4?yi.pbkdf2Sync(e,t,r,n).toString("binary"):yi.pbkdf2Sync(e,t,r,n,i).toString("binary");if(i==null&&(i="sha1"),typeof i=="string"){if(!(i in Ir.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Ir.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var l=Math.ceil(n/o),c=n-(l-1)*o,u=Ir.hmac.create();u.start(i,e);var d,h,f,g="";if(!s){for(var v=1;v<=l;++v){u.start(null,null),u.update(t),u.update(Ir.util.int32ToBytes(v)),d=f=u.digest().getBytes();for(var E=2;E<=r;++E)u.start(null,null),u.update(f),h=u.digest().getBytes(),d=Ir.util.xorBytes(d,h,o),f=h;g+=v<l?d:d.substr(0,c)}return g}v=1;function p(){if(v>l)return s(null,g);u.start(null,null),u.update(t),u.update(Ir.util.int32ToBytes(v)),d=f=u.digest().getBytes(),E=2,y()}function y(){if(E<=r)return u.start(null,null),u.update(f),h=u.digest().getBytes(),d=Ir.util.xorBytes(d,h,o),f=h,++E,Ir.util.setImmediate(y);g+=v<l?d:d.substr(0,c),++v,p()}p()};var Zn=Ve,z1=Zn.sha256=Zn.sha256||{};Zn.md.sha256=Zn.md.algorithms.sha256=z1,z1.create=function(){K1||(qf="",qf+=Zn.util.fillString("\0",64),Mb=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],K1=!0);var e=null,t=Zn.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Zn.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Zn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),G1(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Zn.util.createBuffer();i.putBytes(t.bytes());var s,o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(qf.substr(0,n.blockLength-o));for(var a=8*n.fullMessageLength[0],l=0;l<n.fullMessageLength.length-1;++l)a+=(s=8*n.fullMessageLength[l+1])/4294967296>>>0,i.putInt32(a>>>0),a=s>>>0;i.putInt32(a);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};G1(c,r,i);var u=Zn.util.createBuffer();return u.putInt32(c.h0),u.putInt32(c.h1),u.putInt32(c.h2),u.putInt32(c.h3),u.putInt32(c.h4),u.putInt32(c.h5),u.putInt32(c.h6),u.putInt32(c.h7),u},n};var qf=null,K1=!1,Mb=null;function G1(e,t,r){for(var n,i,s,o,a,l,c,u,d,h,f,g,v,E=r.length();E>=64;){for(a=0;a<16;++a)t[a]=r.getInt32();for(;a<64;++a)n=((n=t[a-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[a-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[a]=n+t[a-7]+i+t[a-16]|0;for(l=e.h0,c=e.h1,u=e.h2,d=e.h3,h=e.h4,f=e.h5,g=e.h6,v=e.h7,a=0;a<64;++a)s=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),o=l&c|u&(l^c),n=v+((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(g^h&(f^g))+Mb[a]+t[a],v=g,g=f,f=h,h=d+n>>>0,d=u,u=c,c=l,l=n+(i=s+o)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+u|0,e.h3=e.h3+d|0,e.h4=e.h4+h|0,e.h5=e.h5+f|0,e.h6=e.h6+g|0,e.h7=e.h7+v|0,E-=64}}var Gn=Ve,Nu=null;!Gn.util.isNodejs||Gn.options.usePureJavaScript||ss.versions["node-webkit"]||(Nu=W0),(Gn.prng=Gn.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();function s(){if(t.pools[0].messageLength>=32)return o();var l=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(l)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var l=t.plugin.md.create();l.update(t.keyBytes);for(var c=1,u=0;u<32;++u)t.reseeds%c==0&&(l.update(t.pools[u].digest().getBytes()),t.pools[u].start()),c<<=1;t.keyBytes=l.digest().getBytes(),l.start(),l.update(t.keyBytes);var d=l.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(d),t.generated=0}function a(l){var c=null,u=Gn.util.globalScope,d=u.crypto||u.msCrypto;d&&d.getRandomValues&&(c=function(b){return d.getRandomValues(b)});var h=Gn.util.createBuffer();if(c)for(;h.length()<l;){var f=Math.max(1,Math.min(l-h.length(),65536)/4),g=new Uint32Array(Math.floor(f));try{c(g);for(var v=0;v<g.length;++v)h.putInt32(g[v])}catch(b){if(!(typeof QuotaExceededError<"u"&&b instanceof QuotaExceededError))throw b}}if(h.length()<l)for(var E,p,y,C=Math.floor(65536*Math.random());h.length()<l;)for(p=16807*(65535&C),p+=(32767&(E=16807*(C>>16)))<<16,C=4294967295&(p=(2147483647&(p+=E>>15))+(p>>31)),v=0;v<3;++v)y=C>>>(v<<3),y^=Math.floor(256*Math.random()),h.putByte(255&y);return h.getBytes(l)}return t.pools=n,t.pool=0,t.generate=function(l,c){if(!c)return t.generateSync(l);var u=t.plugin.cipher,d=t.plugin.increment,h=t.plugin.formatKey,f=t.plugin.formatSeed,g=Gn.util.createBuffer();t.key=null,function v(E){if(E)return c(E);if(g.length()>=l)return c(null,g.getBytes(l));if(t.generated>1048575&&(t.key=null),t.key===null)return Gn.util.nextTick(function(){(function(y){if(t.pools[0].messageLength>=32)return o(),y();var C=32-t.pools[0].messageLength<<5;t.seedFile(C,function(b,x){if(b)return y(b);t.collect(x),o(),y()})})(v)});var p=u(t.key,t.seed);t.generated+=p.length,g.putBytes(p),t.key=h(u(t.key,d(t.seed))),t.seed=f(u(t.key,t.seed)),Gn.util.setImmediate(v)}()},t.generateSync=function(l){var c=t.plugin.cipher,u=t.plugin.increment,d=t.plugin.formatKey,h=t.plugin.formatSeed;t.key=null;for(var f=Gn.util.createBuffer();f.length()<l;){t.generated>1048575&&(t.key=null),t.key===null&&s();var g=c(t.key,t.seed);t.generated+=g.length,f.putBytes(g),t.key=d(c(t.key,u(t.seed))),t.seed=h(c(t.key,t.seed))}return f.getBytes(l)},Nu?(t.seedFile=function(l,c){Nu.randomBytes(l,function(u,d){if(u)return c(u);c(null,d.toString())})},t.seedFileSync=function(l){return Nu.randomBytes(l).toString()}):(t.seedFile=function(l,c){try{c(null,a(l))}catch(u){c(u)}},t.seedFileSync=a),t.collect=function(l){for(var c=l.length,u=0;u<c;++u)t.pools[t.pool].update(l.substr(u,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(l,c){for(var u="",d=0;d<c;d+=8)u+=String.fromCharCode(l>>d&255);t.collect(u)},t.registerWorker=function(l){l===self?t.seedFile=function(c,u){self.addEventListener("message",function d(h){var f=h.data;f.forge&&f.forge.prng&&(self.removeEventListener("message",d),u(f.forge.prng.err,f.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:c}}})}:l.addEventListener("message",function(c){var u=c.data;u.forge&&u.forge.prng&&t.seedFile(u.forge.prng.needed,function(d,h){l.postMessage({forge:{prng:{err:d,bytes:h}}})})})},t};var wr=Ve;wr.random&&wr.random.getBytes||function(e){var t={},r=new Array(4),n=wr.util.createBuffer();function i(){var d=wr.prng.create(t);return d.getBytes=function(h,f){return d.generate(h,f)},d.getBytesSync=function(h){return d.generate(h)},d}t.formatKey=function(d){var h=wr.util.createBuffer(d);return(d=new Array(4))[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),wr.aes._expandKey(d,!1)},t.formatSeed=function(d){var h=wr.util.createBuffer(d);return(d=new Array(4))[0]=h.getInt32(),d[1]=h.getInt32(),d[2]=h.getInt32(),d[3]=h.getInt32(),d},t.cipher=function(d,h){return wr.aes._updateBlock(d,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(d){return++d[3],d},t.md=wr.md.sha256;var s=i(),o=null,a=wr.util.globalScope,l=a.crypto||a.msCrypto;if(l&&l.getRandomValues&&(o=function(d){return l.getRandomValues(d)}),!wr.util.isNodejs&&!o){if(s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var u in navigator)try{typeof navigator[u]=="string"&&(c+=navigator[u])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(d){s.collectInt(d.clientX,16),s.collectInt(d.clientY,16)}),e().keypress(function(d){s.collectInt(d.charCode,8)}))}if(wr.random)for(var u in s)wr.random[u]=s[u];else wr.random=s;wr.random.createInstance=i}(typeof jQuery<"u"?jQuery:null);var Lr=Ve,zf=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],W1=[1,2,3,5],a_=function(e,t){return e<<t&65535|(65535&e)>>16-t},l_=function(e,t){return(65535&e)>>t|e<<16-t&65535};Lr.rc2=Lr.rc2||{},Lr.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Lr.util.createBuffer(e)),t=t||128;var r,n=e,i=e.length(),s=t,o=Math.ceil(s/8),a=255>>(7&s);for(r=i;r<128;r++)n.putByte(zf[n.at(r-1)+n.at(r-i)&255]);for(n.setAt(128-o,zf[n.at(128-o)&a]),r=127-o;r>=0;r--)n.setAt(r,zf[n.at(r+1)^n.at(r+o)]);return n};var Y1=function(e,t,r){var n,i,s,o,a=!1,l=null,c=null,u=null,d=[];for(e=Lr.rc2.expandKey(e,t),s=0;s<64;s++)d.push(e.getInt16Le());r?(n=function(g){for(s=0;s<4;s++)g[s]+=d[o]+(g[(s+3)%4]&g[(s+2)%4])+(~g[(s+3)%4]&g[(s+1)%4]),g[s]=a_(g[s],W1[s]),o++},i=function(g){for(s=0;s<4;s++)g[s]+=d[63&g[(s+3)%4]]}):(n=function(g){for(s=3;s>=0;s--)g[s]=l_(g[s],W1[s]),g[s]-=d[o]+(g[(s+3)%4]&g[(s+2)%4])+(~g[(s+3)%4]&g[(s+1)%4]),o--},i=function(g){for(s=3;s>=0;s--)g[s]-=d[63&g[(s+3)%4]]});var h=function(g){var v=[];for(s=0;s<4;s++){var E=l.getInt16Le();u!==null&&(r?E^=u.getInt16Le():u.putInt16Le(E)),v.push(65535&E)}o=r?0:63;for(var p=0;p<g.length;p++)for(var y=0;y<g[p][0];y++)g[p][1](v);for(s=0;s<4;s++)u!==null&&(r?u.putInt16Le(v[s]):v[s]^=u.getInt16Le()),c.putInt16Le(v[s])},f=null;return f={start:function(g,v){g&&typeof g=="string"&&(g=Lr.util.createBuffer(g)),a=!1,l=Lr.util.createBuffer(),c=v||new Lr.util.createBuffer,u=g,f.output=c},update:function(g){for(a||l.putBuffer(g);l.length()>=8;)h([[5,n],[1,i],[6,n],[1,i],[5,n]])},finish:function(g){var v=!0;if(r)if(g)v=g(8,l,!r);else{var E=l.length()===8?8:8-l.length();l.fillWithByte(E,E)}if(v&&(a=!0,f.update()),!r&&(v=l.length()===0))if(g)v=g(8,c,!r);else{var p=c.length(),y=c.at(p-1);y>p?v=!1:c.truncate(y)}return v}}};Lr.rc2.startEncrypting=function(e,t,r){var n=Lr.rc2.createEncryptionCipher(e,128);return n.start(t,r),n},Lr.rc2.createEncryptionCipher=function(e,t){return Y1(e,t,!0)},Lr.rc2.startDecrypting=function(e,t,r){var n=Lr.rc2.createDecryptionCipher(e,128);return n.start(t,r),n},Lr.rc2.createDecryptionCipher=function(e,t){return Y1(e,t,!1)};var Si,Kf=Ve;function re(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}function rt(){return new re(null)}function Q1(e,t,r,n,i,s){for(var o=16383&t,a=t>>14;--s>=0;){var l=16383&this.data[e],c=this.data[e++]>>14,u=a*l+c*o;i=((l=o*l+((16383&u)<<14)+r.data[n]+i)>>28)+(u>>14)+a*c,r.data[n++]=268435455&l}return i}Kf.jsbn=Kf.jsbn||{},Kf.jsbn.BigInteger=re,typeof navigator>"u"?(re.prototype.am=Q1,Si=28):navigator.appName=="Microsoft Internet Explorer"?(re.prototype.am=function(e,t,r,n,i,s){for(var o=32767&t,a=t>>15;--s>=0;){var l=32767&this.data[e],c=this.data[e++]>>15,u=a*l+c*o;i=((l=o*l+((32767&u)<<15)+r.data[n]+(1073741823&i))>>>30)+(u>>>15)+a*c+(i>>>30),r.data[n++]=1073741823&l}return i},Si=30):navigator.appName!="Netscape"?(re.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=67108863&o}return i},Si=26):(re.prototype.am=Q1,Si=28),re.prototype.DB=Si,re.prototype.DM=(1<<Si)-1,re.prototype.DV=1<<Si;re.prototype.FV=Math.pow(2,52),re.prototype.F1=52-Si,re.prototype.F2=2*Si-52;var Ka,yn,c_="0123456789abcdefghijklmnopqrstuvwxyz",jh=new Array;for(Ka=48,yn=0;yn<=9;++yn)jh[Ka++]=yn;for(Ka=97,yn=10;yn<36;++yn)jh[Ka++]=yn;for(Ka=65,yn=10;yn<36;++yn)jh[Ka++]=yn;function X1(e){return c_.charAt(e)}function Ub(e,t){var r=jh[e.charCodeAt(t)];return r??-1}function ls(e){var t=rt();return t.fromInt(e),t}function sd(e){var t,r=1;return(t=e>>>16)!=0&&(e=t,r+=16),(t=e>>8)!=0&&(e=t,r+=8),(t=e>>4)!=0&&(e=t,r+=4),(t=e>>2)!=0&&(e=t,r+=2),(t=e>>1)!=0&&(e=t,r+=1),r}function Ys(e){this.m=e}function Qs(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function u_(e,t){return e&t}function Gf(e,t){return e|t}function Z1(e,t){return e^t}function J1(e,t){return e&~t}function d_(e){if(e==0)return-1;var t=0;return 65535&e||(e>>=16,t+=16),255&e||(e>>=8,t+=8),15&e||(e>>=4,t+=4),3&e||(e>>=2,t+=2),1&e||++t,t}function h_(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Ll(){}function e2(e){return e}function Zo(e){this.r2=rt(),this.q3=rt(),re.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Ys.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Ys.prototype.revert=function(e){return e},Ys.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Ys.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Ys.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Qs.prototype.convert=function(e){var t=rt();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(re.ZERO)>0&&this.m.subTo(t,t),t},Qs.prototype.revert=function(e){var t=rt();return e.copyTo(t),this.reduce(t),t},Qs.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Qs.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Qs.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},re.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},re.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},re.prototype.fromString=function(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else{if(t!=4)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?255&e[n]:Ub(e,n);o<0?e.charAt(n)=="-"&&(i=!0):(i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}r==8&&128&e[0]&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&re.ZERO.subTo(this,this)},re.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},re.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},re.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},re.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,o=Math.floor(e/this.DB),a=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+o+1]=this.data[r]>>i|a,a=(this.data[r]&s)<<n;for(r=o-1;r>=0;--r)t.data[r]=0;t.data[o]=a,t.t=this.t+o+1,t.s=this.s,t.clamp()},re.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},re.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},re.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&re.ZERO.subTo(t,t)},re.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},re.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return t!=null&&t.fromInt(0),void(r!=null&&this.copyTo(r));r==null&&(r=rt());var s=rt(),o=this.s,a=e.s,l=this.DB-sd(n.data[n.t-1]);l>0?(n.lShiftTo(l,s),i.lShiftTo(l,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,u=s.data[c-1];if(u!=0){var d=u*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),h=this.FV/d,f=(1<<this.F1)/d,g=1<<this.F2,v=r.t,E=v-c,p=t??rt();for(s.dlShiftTo(E,p),r.compareTo(p)>=0&&(r.data[r.t++]=1,r.subTo(p,r)),re.ONE.dlShiftTo(c,p),p.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--E>=0;){var y=r.data[--v]==u?this.DM:Math.floor(r.data[v]*h+(r.data[v-1]+g)*f);if((r.data[v]+=s.am(0,y,r,E,0,c))<y)for(s.dlShiftTo(E,p),r.subTo(p,r);r.data[v]<--y;)r.subTo(p,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&re.ZERO.subTo(t,t)),r.t=c,r.clamp(),l>0&&r.rShiftTo(l,r),o<0&&re.ZERO.subTo(r,r)}}},re.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(!(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},re.prototype.isEven=function(){return(this.t>0?1&this.data[0]:this.s)==0},re.prototype.exp=function(e,t){if(e>4294967295||e<1)return re.ONE;var r=rt(),n=rt(),i=t.convert(this),s=sd(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)},re.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(r=this.data[o]>>a)>0&&(i=!0,s=X1(r));o>=0;)a<t?(r=(this.data[o]&(1<<a)-1)<<t-a,r|=this.data[--o]>>(a+=this.DB-t)):(r=this.data[o]>>(a-=t)&n,a<=0&&(a+=this.DB,--o)),r>0&&(i=!0),i&&(s+=X1(r));return i?s:"0"},re.prototype.negate=function(){var e=rt();return re.ZERO.subTo(this,e),e},re.prototype.abs=function(){return this.s<0?this.negate():this},re.prototype.compareTo=function(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if((t=r-e.t)!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0},re.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+sd(this.data[this.t-1]^this.s&this.DM)},re.prototype.mod=function(e){var t=rt();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(re.ZERO)>0&&e.subTo(t,t),t},re.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new Ys(t):new Qs(t),this.exp(e,r)},re.ZERO=ls(0),re.ONE=ls(1),Ll.prototype.convert=e2,Ll.prototype.revert=e2,Ll.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},Ll.prototype.sqrTo=function(e,t){e.squareTo(t)},Zo.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=rt();return e.copyTo(t),this.reduce(t),t},Zo.prototype.revert=function(e){return e},Zo.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Zo.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Zo.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Dn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],f_=(1<<26)/Dn[Dn.length-1];re.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},re.prototype.toRadix=function(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=ls(r),i=rt(),s=rt(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o},re.prototype.fromRadix=function(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var l=Ub(e,a);l<0?e.charAt(a)=="-"&&this.signum()==0&&(i=!0):(o=t*o+l,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&re.ZERO.subTo(this,this)},re.prototype.fromNumber=function(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(re.ONE.shiftLeft(e-1),Gf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(re.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},re.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},re.prototype.changeBit=function(e,t){var r=re.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},re.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},re.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},re.prototype.dAddOffset=function(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},re.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},re.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},re.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},re.prototype.millerRabin=function(e){var t=this.subtract(re.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),s={nextBytes:function(c){for(var u=0;u<c.length;++u)c[u]=Math.floor(256*Math.random())}},o=0;o<e;++o){do n=new re(this.bitLength(),s);while(n.compareTo(re.ONE)<=0||n.compareTo(t)>=0);var a=n.modPow(i,this);if(a.compareTo(re.ONE)!=0&&a.compareTo(t)!=0){for(var l=1;l++<r&&a.compareTo(t)!=0;)if((a=a.modPowInt(2,this)).compareTo(re.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0},re.prototype.clone=function(){var e=rt();return this.copyTo(e),e},re.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},re.prototype.byteValue=function(){return this.t==0?this.s:this.data[0]<<24>>24},re.prototype.shortValue=function(){return this.t==0?this.s:this.data[0]<<16>>16},re.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1},re.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),128&r&&(r|=-256),i==0&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},re.prototype.equals=function(e){return this.compareTo(e)==0},re.prototype.min=function(e){return this.compareTo(e)<0?this:e},re.prototype.max=function(e){return this.compareTo(e)>0?this:e},re.prototype.and=function(e){var t=rt();return this.bitwiseTo(e,u_,t),t},re.prototype.or=function(e){var t=rt();return this.bitwiseTo(e,Gf,t),t},re.prototype.xor=function(e){var t=rt();return this.bitwiseTo(e,Z1,t),t},re.prototype.andNot=function(e){var t=rt();return this.bitwiseTo(e,J1,t),t},re.prototype.not=function(){for(var e=rt(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},re.prototype.shiftLeft=function(e){var t=rt();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},re.prototype.shiftRight=function(e){var t=rt();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},re.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+d_(this.data[e]);return this.s<0?this.t*this.DB:-1},re.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=h_(this.data[r]^t);return e},re.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:!!(this.data[t]&1<<e%this.DB)},re.prototype.setBit=function(e){return this.changeBit(e,Gf)},re.prototype.clearBit=function(e){return this.changeBit(e,J1)},re.prototype.flipBit=function(e){return this.changeBit(e,Z1)},re.prototype.add=function(e){var t=rt();return this.addTo(e,t),t},re.prototype.subtract=function(e){var t=rt();return this.subTo(e,t),t},re.prototype.multiply=function(e){var t=rt();return this.multiplyTo(e,t),t},re.prototype.divide=function(e){var t=rt();return this.divRemTo(e,t,null),t},re.prototype.remainder=function(e){var t=rt();return this.divRemTo(e,null,t),t},re.prototype.divideAndRemainder=function(e){var t=rt(),r=rt();return this.divRemTo(e,t,r),new Array(t,r)},re.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=ls(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new Ys(t):t.isEven()?new Zo(t):new Qs(t);var o=new Array,a=3,l=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),r>1){var u=rt();for(n.sqrTo(o[1],u);a<=c;)o[a]=rt(),n.mulTo(u,o[a-2],o[a]),a+=2}var d,h,f=e.t-1,g=!0,v=rt();for(i=sd(e.data[f])-1;f>=0;){for(i>=l?d=e.data[f]>>i-l&c:(d=(e.data[f]&(1<<i+1)-1)<<l-i,f>0&&(d|=e.data[f-1]>>this.DB+i-l)),a=r;!(1&d);)d>>=1,--a;if((i-=a)<0&&(i+=this.DB,--f),g)o[d].copyTo(s),g=!1;else{for(;a>1;)n.sqrTo(s,v),n.sqrTo(v,s),a-=2;a>0?n.sqrTo(s,v):(h=s,s=v,v=h),n.mulTo(v,o[d],s)}for(;f>=0&&!(e.data[f]&1<<i);)n.sqrTo(s,v),h=s,s=v,v=h,--i<0&&(i=this.DB-1,--f)}return n.revert(s)},re.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return re.ZERO;for(var r=e.clone(),n=this.clone(),i=ls(1),s=ls(0),o=ls(0),a=ls(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}return n.compareTo(re.ONE)!=0?re.ZERO:a.compareTo(e)>=0?a.subtract(e):a.signum()<0?(a.addTo(e,a),a.signum()<0?a.add(e):a):a},re.prototype.pow=function(e){return this.exp(e,new Ll)},re.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},re.prototype.isProbablePrime=function(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Dn[Dn.length-1]){for(t=0;t<Dn.length;++t)if(r.data[0]==Dn[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Dn.length;){for(var n=Dn[t],i=t+1;i<Dn.length&&n<f_;)n*=Dn[i++];for(n=r.modInt(n);t<i;)if(n%Dn[t++]==0)return!1}return r.millerRabin(e)};var Jn=Ve,t2=Jn.sha1=Jn.sha1||{};Jn.md.sha1=Jn.md.algorithms.sha1=t2,t2.create=function(){r2||(Wf="",Wf+=Jn.util.fillString("\0",64),r2=!0);var e=null,t=Jn.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=Jn.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n}};return n.start(),n.update=function(i,s){s==="utf8"&&(i=Jn.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),n2(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Jn.util.createBuffer();i.putBytes(t.bytes());var s,o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;i.putBytes(Wf.substr(0,n.blockLength-o));for(var a=8*n.fullMessageLength[0],l=0;l<n.fullMessageLength.length-1;++l)a+=(s=8*n.fullMessageLength[l+1])/4294967296>>>0,i.putInt32(a>>>0),a=s>>>0;i.putInt32(a);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};n2(c,r,i);var u=Jn.util.createBuffer();return u.putInt32(c.h0),u.putInt32(c.h1),u.putInt32(c.h2),u.putInt32(c.h3),u.putInt32(c.h4),u},n};var Wf=null,r2=!1;function n2(e,t,r){for(var n,i,s,o,a,l,c,u=r.length();u>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,l=e.h4,c=0;c<16;++c)n=r.getInt32(),t[c]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<20;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(a^s&(o^a))+l+1518500249+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<32;++c)n=(n=t[c-3]^t[c-8]^t[c-14]^t[c-16])<<1|n>>>31,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<40;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+1859775393+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<60;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s&o|a&(s^o))+l+2400959708+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;c<80;++c)n=(n=t[c-6]^t[c-16]^t[c-28]^t[c-32])<<2|n>>>30,t[c]=n,n=(i<<5|i>>>27)+(s^o^a)+l+3395469782+n,l=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+l|0,u-=64}}var ei=Ve,i2=ei.pkcs1=ei.pkcs1||{};function _u(e,t,r){r||(r=ei.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}i2.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=ei.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),l=a-2*s.digestLength-2;if(t.length>l)throw(g=new Error("RSAES-OAEP input message length is too long.")).length=t.length,g.maxLength=l,g;n||(n=""),s.update(n,"raw");for(var c=s.digest(),u="",d=l-t.length,h=0;h<d;h++)u+="\0";var f=c.getBytes()+u+""+t;if(i){if(i.length!==s.digestLength){var g;throw(g=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=i.length,g.digestLength=s.digestLength,g}}else i=ei.random.getBytes(s.digestLength);var v=_u(i,a-s.digestLength-1,o),E=ei.util.xorBytes(f,v,f.length),p=_u(E,s.digestLength,o);return"\0"+ei.util.xorBytes(i,p,i.length)+E},i2.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o)throw(v=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,v.expectedLength=o,v;if(i===void 0?i=ei.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),l=t.charAt(0),c=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),d=_u(u,i.digestLength,s),h=_u(ei.util.xorBytes(c,d,c.length),o-i.digestLength-1,s),f=ei.util.xorBytes(u,h,u.length),g=f.substring(0,i.digestLength),v=l!=="\0",E=0;E<i.digestLength;++E)v|=a.charAt(E)!==g.charAt(E);for(var p=1,y=i.digestLength,C=i.digestLength;C<f.length;C++){var b=f.charCodeAt(C);v|=b&(p?65534:0),y+=p&=1&b^1}if(v||f.charCodeAt(y)!==1)throw new Error("Invalid RSAES-OAEP padding.");return f.substring(y+1)};var Fs=Ve;(function(){if(!Fs.prime){var e=Fs.prime=Fs.prime||{},t=Fs.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,c){return l|c};e.generateProbablePrime=function(l,c,u){typeof c=="function"&&(u=c,c={});var d=(c=c||{}).algorithm||"PRIMEINC";typeof d=="string"&&(d={name:d}),d.options=d.options||{};var h=c.prng||Fs.random,f={nextBytes:function(g){for(var v=h.getBytesSync(g.length),E=0;E<g.length;++E)g[E]=v.charCodeAt(E)}};if(d.name==="PRIMEINC")return function(g,v,E,p){return"workers"in E?function(y,C,b,x){if(typeof Worker>"u")return s(y,C,b,x);var m=a(y,C),k=b.workers,N=b.workLoad||100,H=30*N/8,R=b.workerScript||"forge/prime.worker.js";if(k===-1)return Fs.util.estimateCores(function(B,_){B&&(_=2),k=_-1,P()});function P(){k=Math.max(1,k);for(var B=[],_=0;_<k;++_)B[_]=new Worker(R);for(_=0;_<k;++_)B[_].addEventListener("message",L);var q=!1;function L(F){if(!q){var M=F.data;if(M.found){for(var $=0;$<B.length;++$)B[$].terminate();return q=!0,x(null,new t(M.prime,16))}m.bitLength()>y&&(m=a(y,C));var z=m.toString(16);F.target.postMessage({hex:z,workLoad:N}),m.dAddOffset(H,0)}}}P()}(g,v,E,p):s(g,v,E,p)}(l,f,d.options,u);throw new Error("Invalid prime generation algorithm: "+d.name)}}function s(l,c,u,d){var h=a(l,c),f=function(v){return v<=100?27:v<=150?18:v<=200?15:v<=250?12:v<=300?9:v<=350?8:v<=400?7:v<=500?6:v<=600?5:v<=800?4:v<=1250?3:2}(h.bitLength());"millerRabinTests"in u&&(f=u.millerRabinTests);var g=10;"maxBlockTime"in u&&(g=u.maxBlockTime),o(h,l,c,0,f,g,d)}function o(l,c,u,d,h,f,g){var v=+new Date;do{if(l.bitLength()>c&&(l=a(c,u)),l.isProbablePrime(h))return g(null,l);l.dAddOffset(r[d++%8],0)}while(f<0||+new Date-v<f);Fs.util.setImmediate(function(){o(l,c,u,d,h,f,g)})}function a(l,c){var u=new t(l,c),d=l-1;return u.testBit(d)||u.bitwiseTo(t.ONE.shiftLeft(d),i,u),u.dAddOffset(31-u.mod(n).byteValue(),0),u}})();var Ne=Ve;if(tt===void 0)var tt=Ne.jsbn.BigInteger;var Lg=Ne.util.isNodejs?W0:null,V=Ne.asn1,En=Ne.util;Ne.pki=Ne.pki||{},Ne.pki.rsa=Ne.rsa=Ne.rsa||{};var Me=Ne.pki,p_=[6,4,2,4,2,4,6,2],g_={name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},m_={name:"RSAPrivateKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},v_={name:"RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:V.Class.UNIVERSAL,type:V.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y_=Ne.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},E_={name:"DigestInfo",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:V.Class.UNIVERSAL,type:V.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:V.Class.UNIVERSAL,type:V.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:V.Class.UNIVERSAL,type:V.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:V.Class.UNIVERSAL,type:V.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},C_=function(e){var t;if(!(e.algorithm in Me.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=Me.oids[e.algorithm];var n=V.oidToDer(t).getBytes(),i=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]),s=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[]);s.value.push(V.create(V.Class.UNIVERSAL,V.Type.OID,!1,n)),s.value.push(V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,""));var o=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),V.toDer(i).getBytes()},s2=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var n;t.dP||(t.dP=t.d.mod(t.p.subtract(tt.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(tt.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do n=new tt(Ne.util.bytesToHex(Ne.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(tt.ONE));for(var i=(e=e.multiply(n.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n)};function o2(e,t,r){var n=Ne.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o,a=i-3-e.length;if(r===0||r===1){o=r===0?0:255;for(var l=0;l<a;++l)n.putByte(o)}else for(;a>0;){var c=0,u=Ne.random.getBytes(a);for(l=0;l<a;++l)(o=u.charCodeAt(l))===0?++c:n.putByte(o);a=c}return n.putByte(0),n.putBytes(e),n}function Du(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=Ne.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&n===void 0)throw new Error("Encryption block is invalid.");var l=0;if(a===0){l=i-3-n;for(var c=0;c<l;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(l=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++l}else if(a===2)for(l=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++l}if(s.getByte()!==0||l!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function Wn(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=Ne.util.hexToBytes(t);return!(r.length>1)||(r.charCodeAt(0)!==0||128&r.charCodeAt(1))&&(r.charCodeAt(0)!==255||128&~r.charCodeAt(1))?r:r.substr(1)}function S_(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function a2(e){return Ne.util.isNodejs&&typeof Lg[e]=="function"}function l2(e){return En.globalScope!==void 0&&typeof En.globalScope.crypto=="object"&&typeof En.globalScope.crypto.subtle=="object"&&typeof En.globalScope.crypto.subtle[e]=="function"}function c2(e){return En.globalScope!==void 0&&typeof En.globalScope.msCrypto=="object"&&typeof En.globalScope.msCrypto.subtle=="object"&&typeof En.globalScope.msCrypto.subtle[e]=="function"}function u2(e){for(var t=Ne.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}Me.rsa.encrypt=function(e,t,r){var n,i=r,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(i=r===2,n=o2(e,t,r)):(n=Ne.util.createBuffer()).putBytes(e);for(var o=new tt(n.toHex(),16),a=s2(o,t,i).toString(16),l=Ne.util.createBuffer(),c=s-Math.ceil(a.length/2);c>0;)l.putByte(0),--c;return l.putBytes(Ne.util.hexToBytes(a)),l.getBytes()},Me.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new tt(Ne.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=s2(o,t,r).toString(16),l=Ne.util.createBuffer(),c=i-Math.ceil(a.length/2);c>0;)l.putByte(0),--c;return l.putBytes(Ne.util.hexToBytes(a)),n!==!1?Du(l.getBytes(),t,r):l.getBytes()},Me.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048;var n,i=(r=r||{}).prng||Ne.random,s={nextBytes:function(a){for(var l=i.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=l.charCodeAt(c)}},o=r.algorithm||"PRIMEINC";if(o!=="PRIMEINC")throw new Error("Invalid key generation algorithm: "+o);return(n={algorithm:o,state:0,bits:e,rng:s,eInt:t||65537,e:new tt(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(n.eInt),n},Me.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new tt(null);r.fromInt(30);for(var n,i=0,s=function(d,h){return d|h},o=+new Date,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,c=l-1;e.pqState===0?(e.num=new tt(l,e.rng),e.num.testBit(c)||e.num.bitwiseTo(tt.ONE.shiftLeft(c),s,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),i=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(S_(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(p_[i++%8],0):e.pqState===2?e.pqState=e.num.subtract(tt.ONE).gcd(e.e).compareTo(tt.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(tt.ONE),e.q1=e.q.subtract(tt.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(tt.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Me.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Me.rsa.setPublicKey(e.n,e.e)}}a+=(n=+new Date)-o,o=n}return e.keys!==null},Me.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(a2("generateKeyPair"))return Lg.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,l,c){if(a)return n(a);n(null,{privateKey:Me.privateKeyFromPem(c),publicKey:Me.publicKeyFromPem(l)})});if(l2("generateKey")&&l2("exportKey"))return En.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u2(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return En.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var l=Me.privateKeyFromAsn1(V.fromDer(Ne.util.createBuffer(a)));n(null,{privateKey:l,publicKey:Me.setRsaPublicKey(l.n,l.e)})}});if(c2("generateKey")&&c2("exportKey")){var i=En.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:u2(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return i.oncomplete=function(a){var l=a.target.result,c=En.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);c.oncomplete=function(u){var d=u.target.result,h=Me.privateKeyFromAsn1(V.fromDer(Ne.util.createBuffer(d)));n(null,{privateKey:h,publicKey:Me.setRsaPublicKey(h.n,h.e)})},c.onerror=function(u){n(u)}},void(i.onerror=function(a){n(a)})}}else if(a2("generateKeyPairSync")){var s=Lg.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Me.privateKeyFromPem(s.privateKey),publicKey:Me.publicKeyFromPem(s.publicKey)}}}var o=Me.rsa.createKeyPairGenerationState(e,t,r);if(!n)return Me.rsa.stepKeyPairGenerationState(o,0),o.keys;(function(a,l,c){typeof l=="function"&&(c=l,l={}),l=l||{};var u={algorithm:{name:l.algorithm||"PRIMEINC",options:{workers:l.workers||2,workLoad:l.workLoad||100,workerScript:l.workerScript}}};"prng"in l&&(u.prng=l.prng);function d(){h(a.pBits,function(g,v){return g?c(g):(a.p=v,a.q!==null?f(g,a.q):void h(a.qBits,f))})}function h(g,v){Ne.prime.generateProbablePrime(g,u,v)}function f(g,v){if(g)return c(g);if(a.q=v,a.p.compareTo(a.q)<0){var E=a.p;a.p=a.q,a.q=E}if(a.p.subtract(tt.ONE).gcd(a.e).compareTo(tt.ONE)!==0)return a.p=null,void d();if(a.q.subtract(tt.ONE).gcd(a.e).compareTo(tt.ONE)!==0)return a.q=null,void h(a.qBits,f);if(a.p1=a.p.subtract(tt.ONE),a.q1=a.q.subtract(tt.ONE),a.phi=a.p1.multiply(a.q1),a.phi.gcd(a.e).compareTo(tt.ONE)!==0)return a.p=a.q=null,void d();if(a.n=a.p.multiply(a.q),a.n.bitLength()!==a.bits)return a.q=null,void h(a.qBits,f);var p=a.e.modInverse(a.phi);a.keys={privateKey:Me.rsa.setPrivateKey(a.n,a.e,p,a.p,a.q,p.mod(a.p1),p.mod(a.q1),a.q.modInverse(a.p)),publicKey:Me.rsa.setPublicKey(a.n,a.e)},c(null,a.keys)}d()})(o,r,n)},Me.setRsaPublicKey=Me.rsa.setPublicKey=function(e,t){var r={n:e,e:t,encrypt:function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,l,c){return o2(a,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,l){return Ne.pkcs1.encode_rsa_oaep(l,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return Me.rsa.encrypt(o,r,!0)},verify:function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(l,c){c=Du(c,r,!0);var u=V.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),d={},h=[];if(!V.validate(u,E_,d,h))throw(f=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=h,f;var f,g=V.derToOid(d.algorithmIdentifier);if(g!==Ne.oids.md2&&g!==Ne.oids.md5&&g!==Ne.oids.sha1&&g!==Ne.oids.sha224&&g!==Ne.oids.sha256&&g!==Ne.oids.sha384&&g!==Ne.oids.sha512&&g!==Ne.oids["sha512-224"]&&g!==Ne.oids["sha512-256"])throw(f=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=g,f;if((g===Ne.oids.md2||g===Ne.oids.md5)&&!("parameters"in d))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===d.digest}}:s!=="NONE"&&s!=="NULL"&&s!==null||(s={verify:function(l,c){return l===(c=Du(c,r,!0))}});var a=Me.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())}};return r},Me.setRsaPrivateKey=Me.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var l={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a,decrypt:function(c,u,d){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var h=Me.rsa.decrypt(c,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:Du};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(f,g){return Ne.pkcs1.decode_rsa_oaep(g,f,d)}};else{if(["RAW","NONE","NULL",null].indexOf(u)===-1)throw new Error('Unsupported encryption scheme: "'+u+'".');u={decode:function(f){return f}}}return u.decode(h,l,!1)},sign:function(c,u){var d=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:C_},d=1):u!=="NONE"&&u!=="NULL"&&u!==null||(u={encode:function(){return c}},d=1);var h=u.encode(c,l.n.bitLength());return Me.rsa.encrypt(h,l,d)}};return l},Me.wrapRsaPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Me.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,V.toDer(e).getBytes())])},Me.privateKeyFromAsn1=function(e){var t,r,n,i,s,o,a,l,c={},u=[];if(V.validate(e,g_,c,u)&&(e=V.fromDer(Ne.util.createBuffer(c.privateKey))),c={},u=[],!V.validate(e,m_,c,u)){var d=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw d.errors=u,d}return t=Ne.util.createBuffer(c.privateKeyModulus).toHex(),r=Ne.util.createBuffer(c.privateKeyPublicExponent).toHex(),n=Ne.util.createBuffer(c.privateKeyPrivateExponent).toHex(),i=Ne.util.createBuffer(c.privateKeyPrime1).toHex(),s=Ne.util.createBuffer(c.privateKeyPrime2).toHex(),o=Ne.util.createBuffer(c.privateKeyExponent1).toHex(),a=Ne.util.createBuffer(c.privateKeyExponent2).toHex(),l=Ne.util.createBuffer(c.privateKeyCoefficient).toHex(),Me.setRsaPrivateKey(new tt(t,16),new tt(r,16),new tt(n,16),new tt(i,16),new tt(s,16),new tt(o,16),new tt(a,16),new tt(l,16))},Me.privateKeyToAsn1=Me.privateKeyToRSAPrivateKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(0).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.e)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.d)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.p)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.q)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.dP)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.dQ)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.qInv))])},Me.publicKeyFromAsn1=function(e){var t={},r=[];if(V.validate(e,y_,t,r)){var n,i=V.derToOid(t.publicKeyOid);if(i!==Me.oids.rsaEncryption)throw(n=new Error("Cannot read public key. Unknown OID.")).oid=i,n;e=t.rsaPublicKey}if(r=[],!V.validate(e,v_,t,r))throw(n=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,n;var s=Ne.util.createBuffer(t.publicKeyModulus).toHex(),o=Ne.util.createBuffer(t.publicKeyExponent).toHex();return Me.setRsaPublicKey(new tt(s,16),new tt(o,16))},Me.publicKeyToAsn1=Me.publicKeyToSubjectPublicKeyInfo=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Me.oids.rsaEncryption).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.BITSTRING,!1,[Me.publicKeyToRSAPublicKey(e)])])},Me.publicKeyToRSAPublicKey=function(e){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.n)),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Wn(e.e))])};var me=Ve;if(w_===void 0)var w_=me.jsbn.BigInteger;var Q=me.asn1,He=me.pki=me.pki||{};He.pbe=me.pbe=me.pbe||{};var js=He.oids,b_={name:"EncryptedPrivateKeyInfo",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},T_={name:"PBES2Algorithms",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},I_={name:"pkcs-12PbeParams",tagClass:Q.Class.UNIVERSAL,type:Q.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:Q.Class.UNIVERSAL,type:Q.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:Q.Class.UNIVERSAL,type:Q.Type.INTEGER,constructed:!1,capture:"iterations"}]};function d2(e,t){return e.start().update(t).digest().getBytes()}function h2(e){var t;if(e){if(!(t=He.oids[Q.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return Hb(t)}function Hb(e){var t=me.md;switch(e){case"hmacWithSHA224":t=me.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}He.encryptPrivateKeyInfo=function(e,t,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,i,s,o=me.random.getBytesSync(r.saltSize),a=r.count,l=Q.integerToDer(a);if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,u,d;switch(r.algorithm){case"aes128":n=16,c=16,u=js["aes128-CBC"],d=me.aes.createEncryptionCipher;break;case"aes192":n=24,c=16,u=js["aes192-CBC"],d=me.aes.createEncryptionCipher;break;case"aes256":n=32,c=16,u=js["aes256-CBC"],d=me.aes.createEncryptionCipher;break;case"des":n=8,c=8,u=js.desCBC,d=me.des.createEncryptionCipher;break;default:throw(p=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,p}var h="hmacWith"+r.prfAlgorithm.toUpperCase(),f=Hb(h),g=me.pkcs5.pbkdf2(t,o,a,n,f),v=me.random.getBytesSync(c);(y=d(g)).start(v),y.update(Q.toDer(e)),y.finish(),s=y.output.getBytes();var E=function(b,x,m,k){var N=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,b),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,x.getBytes())]);return k!=="hmacWithSHA1"&&N.value.push(Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,me.util.hexToBytes(m.toString(16))),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(He.oids[k]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.NULL,!1,"")])),N}(o,l,n,h);i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(js.pkcs5PBES2).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(js.pkcs5PBKDF2).getBytes()),E]),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(u).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,v)])])])}else{var p;if(r.algorithm!=="3des")throw(p=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,p;n=24;var y,C=new me.util.ByteBuffer(o);g=He.pbe.generatePkcs12Key(t,C,1,a,n),v=He.pbe.generatePkcs12Key(t,C,2,a,n),(y=me.des.createEncryptionCipher(g)).start(v),y.update(Q.toDer(e)),y.finish(),s=y.output.getBytes(),i=Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OID,!1,Q.oidToDer(js["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,o),Q.create(Q.Class.UNIVERSAL,Q.Type.INTEGER,!1,l.getBytes())])])}return Q.create(Q.Class.UNIVERSAL,Q.Type.SEQUENCE,!0,[i,Q.create(Q.Class.UNIVERSAL,Q.Type.OCTETSTRING,!1,s)])},He.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!Q.validate(e,b_,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=Q.derToOid(n.encryptionOid),a=He.pbe.getCipher(o,n.encryptionParams,t),l=me.util.createBuffer(n.encryptedData);return a.update(l),a.finish()&&(r=Q.fromDer(a.output)),r},He.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:Q.toDer(e).getBytes()};return me.pem.encode(r,{maxline:t})},He.encryptedPrivateKeyFromPem=function(e){var t=me.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return Q.fromDer(t.body)},He.encryptRsaPrivateKey=function(e,t,r){if(!(r=r||{}).legacy){var n=He.wrapRsaPrivateKey(He.privateKeyToAsn1(e));return n=He.encryptPrivateKeyInfo(n,t,r),He.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=me.random.getBytesSync(16),a=me.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=me.random.getBytesSync(8),a=me.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=me.random.getBytesSync(8),a=me.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw l.algorithm=r.algorithm,l}var c=a(me.pbe.opensslDeriveBytes(t,s.substr(0,8),o));c.start(s),c.update(Q.toDer(He.privateKeyToAsn1(e))),c.finish();var u={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:me.util.bytesToHex(s).toUpperCase()},body:c.output.getBytes()};return me.pem.encode(u)},He.decryptRsaPrivateKey=function(e,t){var r=null,n=me.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY")throw(o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=o,o;if(n.procType&&n.procType.type==="ENCRYPTED"){var i,s;switch(n.dekInfo.algorithm){case"DES-CBC":i=8,s=me.des.createDecryptionCipher;break;case"DES-EDE3-CBC":i=24,s=me.des.createDecryptionCipher;break;case"AES-128-CBC":i=16,s=me.aes.createDecryptionCipher;break;case"AES-192-CBC":i=24,s=me.aes.createDecryptionCipher;break;case"AES-256-CBC":i=32,s=me.aes.createDecryptionCipher;break;case"RC2-40-CBC":i=5,s=function(c){return me.rc2.createDecryptionCipher(c,40)};break;case"RC2-64-CBC":i=8,s=function(c){return me.rc2.createDecryptionCipher(c,64)};break;case"RC2-128-CBC":i=16,s=function(c){return me.rc2.createDecryptionCipher(c,128)};break;default:var o;throw(o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,o}var a=me.util.hexToBytes(n.dekInfo.parameters),l=s(me.pbe.opensslDeriveBytes(t,a.substr(0,8),i));if(l.start(a),l.update(me.util.createBuffer(n.body)),!l.finish())return r;r=l.output.getBytes()}else r=n.body;return(r=n.type==="ENCRYPTED PRIVATE KEY"?He.decryptPrivateKeyInfo(Q.fromDer(r),t):Q.fromDer(r))!==null&&(r=He.privateKeyFromAsn1(r)),r},He.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(s==null){if(!("sha1"in me.md))throw new Error('"sha1" hash algorithm unavailable.');s=me.md.sha1.create()}var l=s.digestLength,c=s.blockLength,u=new me.util.ByteBuffer,d=new me.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)d.putInt16(e.charCodeAt(a));d.putInt16(0)}var h=d.length(),f=t.length(),g=new me.util.ByteBuffer;g.fillWithByte(r,c);var v=c*Math.ceil(f/c),E=new me.util.ByteBuffer;for(a=0;a<v;a++)E.putByte(t.at(a%f));var p=c*Math.ceil(h/c),y=new me.util.ByteBuffer;for(a=0;a<p;a++)y.putByte(d.at(a%h));var C=E;C.putBuffer(y);for(var b=Math.ceil(i/l),x=1;x<=b;x++){var m=new me.util.ByteBuffer;m.putBytes(g.bytes()),m.putBytes(C.bytes());for(var k=0;k<n;k++)s.start(),s.update(m.getBytes()),m=s.digest();var N=new me.util.ByteBuffer;for(a=0;a<c;a++)N.putByte(m.at(a%l));var H=Math.ceil(f/c)+Math.ceil(h/c),R=new me.util.ByteBuffer;for(o=0;o<H;o++){var P=new me.util.ByteBuffer(C.getBytes(c)),B=511;for(a=N.length()-1;a>=0;a--)B>>=8,B+=N.at(a)+P.at(a),P.setAt(a,255&B);R.putBuffer(P)}C=R,u.putBuffer(m)}return u.truncate(u.length()-i),u},He.pbe.getCipher=function(e,t,r){switch(e){case He.oids.pkcs5PBES2:return He.pbe.getCipherForPBES2(e,t,r);case He.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case He.oids["pbewithSHAAnd40BitRC2-CBC"]:return He.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},He.pbe.getCipherForPBES2=function(e,t,r){var n,i={},s=[];if(!Q.validate(t,T_,i,s))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=s,n;if((e=Q.derToOid(i.kdfOid))!==He.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,n.supportedOids=["pkcs5PBKDF2"],n;if((e=Q.derToOid(i.encOid))!==He.oids["aes128-CBC"]&&e!==He.oids["aes192-CBC"]&&e!==He.oids["aes256-CBC"]&&e!==He.oids["des-EDE3-CBC"]&&e!==He.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var o,a,l=i.kdfSalt,c=me.util.createBuffer(i.kdfIterationCount);switch(c=c.getInt(c.length()<<3),He.oids[e]){case"aes128-CBC":o=16,a=me.aes.createDecryptionCipher;break;case"aes192-CBC":o=24,a=me.aes.createDecryptionCipher;break;case"aes256-CBC":o=32,a=me.aes.createDecryptionCipher;break;case"des-EDE3-CBC":o=24,a=me.des.createDecryptionCipher;break;case"desCBC":o=8,a=me.des.createDecryptionCipher}var u=h2(i.prfOid),d=me.pkcs5.pbkdf2(r,l,c,o,u),h=i.encIv,f=a(d);return f.start(h),f},He.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!Q.validate(t,I_,n,i))throw(u=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=i,u;var s,o,a,l=me.util.createBuffer(n.salt),c=me.util.createBuffer(n.iterations);switch(c=c.getInt(c.length()<<3),e){case He.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:s=24,o=8,a=me.des.startDecrypting;break;case He.oids["pbewithSHAAnd40BitRC2-CBC"]:s=5,o=8,a=function(f,g){var v=me.rc2.createDecryptionCipher(f,40);return v.start(g,null),v};break;default:var u;throw(u=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,u}var d=h2(n.prfOid),h=He.pbe.generatePkcs12Key(r,l,1,c,s,d);return d.start(),a(h,He.pbe.generatePkcs12Key(r,l,2,c,o,d))},He.pbe.opensslDeriveBytes=function(e,t,r,n){if(n==null){if(!("md5"in me.md))throw new Error('"md5" hash algorithm unavailable.');n=me.md.md5.create()}t===null&&(t="");for(var i=[d2(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(d2(n,i[o-1]+e+t));return i.join("").substr(0,r)};var Na=Ve,ge=Na.asn1,Ga=Na.pkcs7asn1=Na.pkcs7asn1||{};Na.pkcs7=Na.pkcs7||{},Na.pkcs7.asn1=Ga;var Fb={name:"ContentInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};Ga.contentInfoValidator=Fb;var f2={name:"EncryptedContentInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};Ga.envelopedDataValidator={name:"EnvelopedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(f2)},Ga.encryptedDataValidator={name:"EncryptedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"}].concat(f2)};var R_={name:"SignerInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:ge.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};Ga.signedDataValidator={name:"SignedData",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},Fb,{name:"SignedData.Certificates",tagClass:ge.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:ge.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SET,capture:"signerInfos",optional:!0,value:[R_]}]},Ga.recipientInfoValidator={name:"RecipientInfo",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:ge.Class.UNIVERSAL,type:ge.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:ge.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:ge.Class.UNIVERSAL,type:ge.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Vs=Ve;Vs.mgf=Vs.mgf||{},(Vs.mgf.mgf1=Vs.mgf1=Vs.mgf1||{}).create=function(e){var t={generate:function(r,n){for(var i=new Vs.util.ByteBuffer,s=Math.ceil(n/e.digestLength),o=0;o<s;o++){var a=new Vs.util.ByteBuffer;a.putInt32(o),e.start(),e.update(r+a.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}};return t};var Pu=Ve;Pu.mgf=Pu.mgf||{},Pu.mgf.mgf1=Pu.mgf1;var qs=Ve;(qs.pss=qs.pss||{}).create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,r=e.md,n=e.mgf,i=r.digestLength,s=e.salt||null;if(typeof s=="string"&&(s=qs.util.createBuffer(s)),"saltLength"in e)t=e.saltLength;else{if(s===null)throw new Error("Salt length not specified or specific salt not given.");t=s.length()}if(s!==null&&s.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||qs.random,a={encode:function(l,c){var u,d,h=c-1,f=Math.ceil(h/8),g=l.digest().getBytes();if(f<i+t+2)throw new Error("Message is too long to encrypt.");d=s===null?o.getBytesSync(t):s.bytes();var v=new qs.util.ByteBuffer;v.fillWithByte(0,8),v.putBytes(g),v.putBytes(d),r.start(),r.update(v.getBytes());var E=r.digest().getBytes(),p=new qs.util.ByteBuffer;p.fillWithByte(0,f-t-i-2),p.putByte(1),p.putBytes(d);var y=p.getBytes(),C=f-i-1,b=n.generate(E,C),x="";for(u=0;u<C;u++)x+=String.fromCharCode(y.charCodeAt(u)^b.charCodeAt(u));var m=65280>>8*f-h&255;return(x=String.fromCharCode(x.charCodeAt(0)&~m)+x.substr(1))+E+""},verify:function(l,c,u){var d,h=u-1,f=Math.ceil(h/8);if(c=c.substr(-f),f<i+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(c.charCodeAt(f-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=f-i-1,v=c.substr(0,g),E=c.substr(g,i),p=65280>>8*f-h&255;if(v.charCodeAt(0)&p)throw new Error("Bits beyond keysize not zero as expected.");var y=n.generate(E,g),C="";for(d=0;d<g;d++)C+=String.fromCharCode(v.charCodeAt(d)^y.charCodeAt(d));C=String.fromCharCode(C.charCodeAt(0)&~p)+C.substr(1);var b=f-i-t-2;for(d=0;d<b;d++)if(C.charCodeAt(d)!==0)throw new Error("Leftmost octets not zero as expected");if(C.charCodeAt(b)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var x=C.substr(-t),m=new qs.util.ByteBuffer;return m.fillWithByte(0,8),m.putBytes(l),m.putBytes(x),r.start(),r.update(m.getBytes()),E===r.digest().getBytes()}};return a};var _e=Ve,w=_e.asn1,ce=_e.pki=_e.pki||{},Je=ce.oids,_t={};_t.CN=Je.commonName,_t.commonName="CN",_t.C=Je.countryName,_t.countryName="C",_t.L=Je.localityName,_t.localityName="L",_t.ST=Je.stateOrProvinceName,_t.stateOrProvinceName="ST",_t.O=Je.organizationName,_t.organizationName="O",_t.OU=Je.organizationalUnitName,_t.organizationalUnitName="OU",_t.E=Je.emailAddress,_t.emailAddress="E";var jb=_e.pki.rsa.publicKeyValidator,A_={name:"Certificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:w.Class.UNIVERSAL,type:w.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:w.Class.UNIVERSAL,type:w.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},jb,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},k_={name:"rsapss",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:w.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:w.Class.UNIVERSAL,type:w.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:w.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:w.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:w.Class.UNIVERSAL,type:w.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},x_={name:"CertificationRequestInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},jb,{name:"CertificationRequestInfo.attributes",tagClass:w.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:w.Class.UNIVERSAL,type:w.Type.SET,constructed:!0}]}]}]},N_={name:"CertificationRequest",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[x_,{name:"CertificationRequest.signatureAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:w.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:w.Class.UNIVERSAL,type:w.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function Zi(e,t){typeof t=="string"&&(t={shortName:t});for(var r,n=null,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}ce.RDNAttributesAsArray=function(e,t){for(var r,n,i,s=[],o=0;o<e.value.length;++o){r=e.value[o];for(var a=0;a<r.value.length;++a)i={},n=r.value[a],i.type=w.derToOid(n.value[0].value),i.value=n.value[1].value,i.valueTagClass=n.value[1].type,i.type in Je&&(i.name=Je[i.type],i.name in _t&&(i.shortName=_t[i.name])),t&&(t.update(i.type),t.update(i.value)),s.push(i)}return s},ce.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var n=e[r],i=w.derToOid(n.value[0].value),s=n.value[1].value,o=0;o<s.length;++o){var a={};if(a.type=i,a.value=s[o].value,a.valueTagClass=s[o].type,a.type in Je&&(a.name=Je[a.type],a.name in _t&&(a.shortName=_t[a.name])),a.type===Je.extensionRequest){a.extensions=[];for(var l=0;l<a.value.length;++l)a.extensions.push(ce.certificateExtensionFromAsn1(a.value[l]))}t.push(a)}return t};var Bu=function(e,t,r){var n={};if(e!==Je["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Je.sha1},mgf:{algorithmOid:Je.mgf1,hash:{algorithmOid:Je.sha1}},saltLength:20});var i={},s=[];if(!w.validate(t,k_,i,s)){var o=new Error("Cannot read RSASSA-PSS parameter block.");throw o.errors=s,o}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=w.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=w.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=w.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},$u=function(e){switch(Je[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return _e.md.sha1.create();case"md5WithRSAEncryption":return _e.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return _e.md.sha256.create();case"sha384WithRSAEncryption":return _e.md.sha384.create();case"sha512WithRSAEncryption":return _e.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},p2=function(e){var t,r=e.certificate;switch(r.signatureOid){case Je.sha1WithRSAEncryption:case Je.sha1WithRSASignature:break;case Je["RSASSA-PSS"]:var n,i,s;if((n=Je[r.signatureParameters.mgf.hash.algorithmOid])===void 0||_e.md[n]===void 0)throw(s=new Error("Unsupported MGF hash function.")).oid=r.signatureParameters.mgf.hash.algorithmOid,s.name=n,s;if((i=Je[r.signatureParameters.mgf.algorithmOid])===void 0||_e.mgf[i]===void 0)throw(s=new Error("Unsupported MGF function.")).oid=r.signatureParameters.mgf.algorithmOid,s.name=i,s;if(i=_e.mgf[i].create(_e.md[n].create()),(n=Je[r.signatureParameters.hash.algorithmOid])===void 0||_e.md[n]===void 0)throw(s=new Error("Unsupported RSASSA-PSS hash function.")).oid=r.signatureParameters.hash.algorithmOid,s.name=n,s;t=_e.pss.create(_e.md[n].create(),i,r.signatureParameters.saltLength)}return r.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function Jo(e){for(var t,r,n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),i=e.attributes,s=0;s<i.length;++s){var o=(t=i[s]).value,a=w.Type.PRINTABLESTRING;"valueTagClass"in t&&(a=t.valueTagClass)===w.Type.UTF8&&(o=_e.util.encodeUtf8(o)),r=w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.type).getBytes()),w.create(w.Class.UNIVERSAL,a,!1,o)])]),n.value.push(r)}return n}function ln(e){for(var t,r=0;r<e.length;++r){if((t=e[r]).name===void 0&&(t.type&&t.type in ce.oids?t.name=ce.oids[t.type]:t.shortName&&t.shortName in _t&&(t.name=ce.oids[_t[t.shortName]])),t.type===void 0){if(!t.name||!(t.name in ce.oids))throw(i=new Error("Attribute type not specified.")).attribute=t,i;t.type=ce.oids[t.name]}if(t.shortName===void 0&&t.name&&t.name in _t&&(t.shortName=_t[t.name]),t.type===Je.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=w.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var n=0;n<t.extensions.length;++n)t.value.push(ce.certificateExtensionToAsn1(Vb(t.extensions[n])))}var i;if(t.value===void 0)throw(i=new Error("Attribute value not specified.")).attribute=t,i}}function Vb(e,t){if(t=t||{},e.name===void 0&&e.id&&e.id in ce.oids&&(e.name=ce.oids[e.id]),e.id===void 0){if(!e.name||!(e.name in ce.oids))throw(E=new Error("Extension ID not specified.")).extension=e,E;e.id=ce.oids[e.name]}if(e.value!==void 0)return e;if(e.name==="keyUsage"){var r=0,n=0,i=0;e.digitalSignature&&(n|=128,r=7),e.nonRepudiation&&(n|=64,r=6),e.keyEncipherment&&(n|=32,r=5),e.dataEncipherment&&(n|=16,r=4),e.keyAgreement&&(n|=8,r=3),e.keyCertSign&&(n|=4,r=2),e.cRLSign&&(n|=2,r=1),e.encipherOnly&&(n|=1,r=0),e.decipherOnly&&(i|=128,r=7);var s=String.fromCharCode(r);i!==0?s+=String.fromCharCode(n)+String.fromCharCode(i):n!==0&&(s+=String.fromCharCode(n)),e.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,"")),"pathLenConstraint"in e&&e.value.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var a in e)e[a]===!0&&(a in Je?o.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(Je[a]).getBytes())):a.indexOf(".")!==-1&&o.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(a).getBytes())))}else if(e.name==="nsCertType")r=0,n=0,e.client&&(n|=128,r=7),e.server&&(n|=64,r=6),e.email&&(n|=32,r=5),e.objsign&&(n|=16,r=4),e.reserved&&(n|=8,r=3),e.sslCA&&(n|=4,r=2),e.emailCA&&(n|=2,r=1),e.objCA&&(n|=1,r=0),s=String.fromCharCode(r),n!==0&&(s+=String.fromCharCode(n)),e.value=w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,s);else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);for(var l=0;l<e.altNames.length;++l){if(s=(f=e.altNames[l]).value,f.type===7&&f.ip){if((s=_e.util.bytesFromIP(f.ip))===null)throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else f.type===8&&(s=f.oid?w.oidToDer(w.oidToDer(f.oid)):w.oidToDer(s));e.value.value.push(w.create(w.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=w.create(w.Class.UNIVERSAL,w.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var c=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=c.toHex(),e.value=w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,c.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){if(e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),o=e.value.value,e.keyIdentifier){var u=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!1,u))}if(e.authorityCertIssuer){var d=[w.create(w.Class.CONTEXT_SPECIFIC,4,!0,[Jo(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,d))}if(e.serialNumber){var h=_e.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!1,h))}}else if(e.name==="cRLDistributionPoints"){e.value=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),o=e.value.value;var f,g=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]),v=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);for(l=0;l<e.altNames.length;++l){if(s=(f=e.altNames[l]).value,f.type===7&&f.ip){if((s=_e.util.bytesFromIP(f.ip))===null)throw(E=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,E}else f.type===8&&(s=f.oid?w.oidToDer(w.oidToDer(f.oid)):w.oidToDer(s));v.value.push(w.create(w.Class.CONTEXT_SPECIFIC,f.type,!1,s))}g.value.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[v])),o.push(g)}var E;if(e.value===void 0)throw(E=new Error("Extension value not specified.")).extension=e,E;return e}function Yf(e,t){if(e===Je["RSASSA-PSS"]){var r=[];return t.hash.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.mgf.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(t.mgf.hash.algorithmOid).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&r.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(t.saltLength).getBytes())])),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,r)}return w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")}function __(e){var t=w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var r=e.attributes,n=0;n<r.length;++n){var i=r[n],s=i.value,o=w.Type.UTF8;"valueTagClass"in i&&(o=i.valueTagClass),o===w.Type.UTF8&&(s=_e.util.encodeUtf8(s));var a=!1;"valueConstructed"in i&&(a=i.valueConstructed);var l=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(i.type).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SET,!0,[w.create(w.Class.UNIVERSAL,o,a,s)])]);t.value.push(l)}return t}ce.certificateFromPem=function(e,t,r){var n=_e.pem.decode(e)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var s=w.fromDer(n.body,r);return ce.certificateFromAsn1(s,t)},ce.certificateToPem=function(e,t){var r={type:"CERTIFICATE",body:w.toDer(ce.certificateToAsn1(e)).getBytes()};return _e.pem.encode(r,{maxline:t})},ce.publicKeyFromPem=function(e){var t=_e.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=w.fromDer(t.body);return ce.publicKeyFromAsn1(n)},ce.publicKeyToPem=function(e,t){var r={type:"PUBLIC KEY",body:w.toDer(ce.publicKeyToAsn1(e)).getBytes()};return _e.pem.encode(r,{maxline:t})},ce.publicKeyToRSAPublicKeyPem=function(e,t){var r={type:"RSA PUBLIC KEY",body:w.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes()};return _e.pem.encode(r,{maxline:t})},ce.getPublicKeyFingerprint=function(e,t){var r,n=(t=t||{}).md||_e.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":r=w.toDer(ce.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":r=w.toDer(ce.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(r);var i=n.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i},ce.certificationRequestFromPem=function(e,t,r){var n=_e.pem.decode(e)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var s=w.fromDer(n.body,r);return ce.certificationRequestFromAsn1(s,t)},ce.certificationRequestToPem=function(e,t){var r={type:"CERTIFICATE REQUEST",body:w.toDer(ce.certificationRequestToAsn1(e)).getBytes()};return _e.pem.encode(r,{maxline:t})},ce.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return Zi(e.issuer,t)},e.issuer.addField=function(t){ln([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return Zi(e.subject,t)},e.subject.addField=function(t){ln([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){ln(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){ln(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)Vb(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var r,n=null,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,r){e.md=r||_e.md.sha1.create();var n=Je[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.tbsCertificate=ce.getTBSCertificate(e);var s=w.toDer(e.tbsCertificate);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var n=t.issuer,i=e.subject,s=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw s.expectedIssuer=i.attributes,s.actualIssuer=n.attributes,s}var o=t.md;if(o===null){o=$u({signatureOid:t.signatureOid,type:"certificate"});var a=t.tbsCertificate||ce.getTBSCertificate(t),l=w.toDer(a);o.update(l.getBytes())}return o!==null&&(r=p2({certificate:e,md:o,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,o;r=!0;for(var a=0;r&&a<n.attributes.length;++a)s=n.attributes[a],o=i.attributes[a],s.type===o.type&&s.value===o.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return ce.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=Je.subjectKeyIdentifier,r=0;r<e.extensions.length;++r){var n=e.extensions[r];if(n.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return _e.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},e},ce.certificateFromAsn1=function(e,t){var r={},n=[];if(!w.validate(e,A_,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}if(w.derToOid(r.publicKeyOid)!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var o=_e.util.createBuffer(r.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=_e.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Bu(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=_e.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Bu(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var a=[];if(r.certValidity1UTCTime!==void 0&&a.push(w.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&a.push(w.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&a.push(w.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&a.push(w.generalizedTimeToDate(r.certValidity4GeneralizedTime)),a.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(a.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=a[0],s.validity.notAfter=a[1],s.tbsCertificate=r.tbsCertificate,t){s.md=$u({signatureOid:s.signatureOid,type:"certificate"});var l=w.toDer(s.tbsCertificate);s.md.update(l.getBytes())}var c=_e.md.sha1.create(),u=w.toDer(r.certIssuer);c.update(u.getBytes()),s.issuer.getField=function(f){return Zi(s.issuer,f)},s.issuer.addField=function(f){ln([f]),s.issuer.attributes.push(f)},s.issuer.attributes=ce.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=c.digest().toHex();var d=_e.md.sha1.create(),h=w.toDer(r.certSubject);return d.update(h.getBytes()),s.subject.getField=function(f){return Zi(s.subject,f)},s.subject.addField=function(f){ln([f]),s.subject.attributes.push(f)},s.subject.attributes=ce.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=d.digest().toHex(),r.certExtensions?s.extensions=ce.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s},ce.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(ce.certificateExtensionFromAsn1(n.value[i]));return t},ce.certificateExtensionFromAsn1=function(e){var t={};if(t.id=w.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===w.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in Je)if(t.name=Je[t.id],t.name==="keyUsage"){var r=0,n=0;(s=w.fromDer(t.value)).value.length>1&&(r=s.value.charCodeAt(1),n=s.value.length>2?s.value.charCodeAt(2):0),t.digitalSignature=!(128&~r),t.nonRepudiation=!(64&~r),t.keyEncipherment=!(32&~r),t.dataEncipherment=!(16&~r),t.keyAgreement=!(8&~r),t.keyCertSign=!(4&~r),t.cRLSign=!(2&~r),t.encipherOnly=!(1&~r),t.decipherOnly=!(128&~n)}else if(t.name==="basicConstraints"){(s=w.fromDer(t.value)).value.length>0&&s.value[0].type===w.Type.BOOLEAN?t.cA=s.value[0].value.charCodeAt(0)!==0:t.cA=!1;var i=null;s.value.length>0&&s.value[0].type===w.Type.INTEGER?i=s.value[0].value:s.value.length>1&&(i=s.value[1].value),i!==null&&(t.pathLenConstraint=w.derToInteger(i))}else if(t.name==="extKeyUsage")for(var s=w.fromDer(t.value),o=0;o<s.value.length;++o){var a=w.derToOid(s.value[o].value);a in Je?t[Je[a]]=!0:t[a]=!0}else if(t.name==="nsCertType")r=0,(s=w.fromDer(t.value)).value.length>1&&(r=s.value.charCodeAt(1)),t.client=!(128&~r),t.server=!(64&~r),t.email=!(32&~r),t.objsign=!(16&~r),t.reserved=!(8&~r),t.sslCA=!(4&~r),t.emailCA=!(2&~r),t.objCA=!(1&~r);else if(t.name==="subjectAltName"||t.name==="issuerAltName"){var l;t.altNames=[],s=w.fromDer(t.value);for(var c=0;c<s.value.length;++c){var u={type:(l=s.value[c]).type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=_e.util.bytesToIP(l.value);break;case 8:u.oid=w.derToOid(l.value)}}}else t.name==="subjectKeyIdentifier"&&(s=w.fromDer(t.value),t.subjectKeyIdentifier=_e.util.bytesToHex(s.value));return t},ce.certificationRequestFromAsn1=function(e,t){var r={},n=[];if(!w.validate(e,N_,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}if(w.derToOid(r.publicKeyOid)!==ce.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=ce.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=_e.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Bu(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=_e.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Bu(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,t){s.md=$u({signatureOid:s.signatureOid,type:"certification request"});var o=w.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var a=_e.md.sha1.create();return s.subject.getField=function(l){return Zi(s.subject,l)},s.subject.addField=function(l){ln([l]),s.subject.attributes.push(l)},s.subject.attributes=ce.RDNAttributesAsArray(r.certificationRequestInfoSubject,a),s.subject.hash=a.digest().toHex(),s.publicKey=ce.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(l){return Zi(s,l)},s.addAttribute=function(l){ln([l]),s.attributes.push(l)},s.attributes=ce.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s},ce.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return Zi(e.subject,t)},e.subject.addField=function(t){ln([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return Zi(e,t)},e.addAttribute=function(t){ln([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){ln(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){ln(t),e.attributes=t},e.sign=function(t,r){e.md=r||_e.md.sha1.create();var n=Je[e.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=n,e.certificationRequestInfo=ce.getCertificationRequestInfo(e);var s=w.toDer(e.certificationRequestInfo);e.md.update(s.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(r===null){r=$u({signatureOid:e.signatureOid,type:"certification request"});var n=e.certificationRequestInfo||ce.getCertificationRequestInfo(e),i=w.toDer(n);r.update(i.getBytes())}return r!==null&&(t=p2({certificate:e,md:r,signature:e.signature})),t},e};var D_=new Date("1950-01-01T00:00:00Z"),P_=new Date("2050-01-01T00:00:00Z");function g2(e){return e>=D_&&e<P_?w.create(w.Class.UNIVERSAL,w.Type.UTCTIME,!1,w.dateToUtcTime(e)):w.create(w.Class.UNIVERSAL,w.Type.GENERALIZEDTIME,!1,w.dateToGeneralizedTime(e))}ce.getTBSCertificate=function(e){var t=g2(e.validity.notBefore),r=g2(e.validity.notAfter),n=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.CONTEXT_SPECIFIC,0,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.version).getBytes())]),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,_e.util.hexToBytes(e.serialNumber)),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.siginfo.algorithmOid).getBytes()),Yf(e.siginfo.algorithmOid,e.siginfo.parameters)]),Jo(e.issuer),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,r]),Jo(e.subject),ce.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,1,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&n.value.push(w.create(w.Class.CONTEXT_SPECIFIC,2,!0,[w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&n.value.push(ce.certificateExtensionsToAsn1(e.extensions)),n},ce.getCertificationRequestInfo=function(e){return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,w.integerToDer(e.version).getBytes()),Jo(e.subject),ce.publicKeyToAsn1(e.publicKey),__(e)])},ce.distinguishedNameToAsn1=function(e){return Jo(e)},ce.certificateToAsn1=function(e){var t=e.tbsCertificate||ce.getTBSCertificate(e);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.signatureOid).getBytes()),Yf(e.signatureOid,e.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.signature)])},ce.certificateExtensionsToAsn1=function(e){var t=w.create(w.Class.CONTEXT_SPECIFIC,3,!0,[]),r=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);t.value.push(r);for(var n=0;n<e.length;++n)r.value.push(ce.certificateExtensionToAsn1(e[n]));return t},ce.certificateExtensionToAsn1=function(e){var t=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[]);t.value.push(w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.id).getBytes())),e.critical&&t.value.push(w.create(w.Class.UNIVERSAL,w.Type.BOOLEAN,!1,""));var r=e.value;return typeof e.value!="string"&&(r=w.toDer(r).getBytes()),t.value.push(w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r)),t},ce.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||ce.getCertificationRequestInfo(e);return w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[t,w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(e.signatureOid).getBytes()),Yf(e.signatureOid,e.signatureParameters)]),w.create(w.Class.UNIVERSAL,w.Type.BITSTRING,!1,"\0"+e.signature)])},ce.createCaStore=function(e){var t={certs:{}};function r(o){return n(o),t.certs[o.hash]||null}function n(o){if(!o.hash){var a=_e.md.sha1.create();o.attributes=ce.RDNAttributesAsArray(Jo(o),a),o.hash=a.digest().toHex()}}if(t.getIssuer=function(o){return r(o.issuer)},t.addCertificate=function(o){if(typeof o=="string"&&(o=_e.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))if(o.subject.hash in t.certs){var a=t.certs[o.subject.hash];_e.util.isArray(a)||(a=[a]),a.push(o),t.certs[o.subject.hash]=a}else t.certs[o.subject.hash]=o},t.hasCertificate=function(o){typeof o=="string"&&(o=_e.pki.certificateFromPem(o));var a=r(o.subject);if(!a)return!1;_e.util.isArray(a)||(a=[a]);for(var l=w.toDer(ce.certificateToAsn1(o)).getBytes(),c=0;c<a.length;++c)if(l===w.toDer(ce.certificateToAsn1(a[c])).getBytes())return!0;return!1},t.listAllCertificates=function(){var o=[];for(var a in t.certs)if(t.certs.hasOwnProperty(a)){var l=t.certs[a];if(_e.util.isArray(l))for(var c=0;c<l.length;++c)o.push(l[c]);else o.push(l)}return o},t.removeCertificate=function(o){var a;if(typeof o=="string"&&(o=_e.pki.certificateFromPem(o)),n(o.subject),!t.hasCertificate(o))return null;var l=r(o.subject);if(!_e.util.isArray(l))return a=t.certs[o.subject.hash],delete t.certs[o.subject.hash],a;for(var c=w.toDer(ce.certificateToAsn1(o)).getBytes(),u=0;u<l.length;++u)c===w.toDer(ce.certificateToAsn1(l[u])).getBytes()&&(a=l[u],l.splice(u,1));return l.length===0&&delete t.certs[o.subject.hash],a},e)for(var i=0;i<e.length;++i){var s=e[i];t.addCertificate(s)}return t},ce.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},ce.verifyCertificateChain=function(e,t,r){typeof r=="function"&&(r={verify:r}),r=r||{};var n=(t=t.slice(0)).slice(0),i=r.validityCheckDate;i===void 0&&(i=new Date);var s=!0,o=null,a=0;do{var l=t.shift(),c=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(o={message:"Certificate is not valid yet or has expired.",error:ce.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),o===null){if((c=t[0]||e.getIssuer(l))===null&&l.isIssuer(l)&&(u=!0,c=l),c){var d=c;_e.util.isArray(d)||(d=[d]);for(var h=!1;!h&&d.length>0;){c=d.shift();try{h=c.verify(l)}catch{}}h||(o={message:"Certificate signature is invalid.",error:ce.certificateError.bad_certificate})}o!==null||c&&!u||e.hasCertificate(l)||(o={message:"Certificate is not trusted.",error:ce.certificateError.unknown_ca})}if(o===null&&c&&!l.isIssuer(c)&&(o={message:"Certificate issuer is invalid.",error:ce.certificateError.bad_certificate}),o===null)for(var f={keyUsage:!0,basicConstraints:!0},g=0;o===null&&g<l.extensions.length;++g){var v=l.extensions[g];v.critical&&!(v.name in f)&&(o={message:"Certificate has an unsupported critical extension.",error:ce.certificateError.unsupported_certificate})}if(o===null&&(!s||t.length===0&&(!c||u))){var E=l.getExtension("basicConstraints"),p=l.getExtension("keyUsage");p!==null&&(p.keyCertSign&&E!==null||(o={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:ce.certificateError.bad_certificate})),o!==null||E===null||E.cA||(o={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:ce.certificateError.bad_certificate}),o===null&&p!==null&&"pathLenConstraint"in E&&a-1>E.pathLenConstraint&&(o={message:"Certificate basicConstraints pathLenConstraint violated.",error:ce.certificateError.bad_certificate})}var y=o===null||o.error,C=r.verify?r.verify(y,a,n):y;if(C!==!0)throw y===!0&&(o={message:"The application rejected the certificate.",error:ce.certificateError.bad_certificate}),(C||C===0)&&(typeof C!="object"||_e.util.isArray(C)?typeof C=="string"&&(o.error=C):(C.message&&(o.message=C.message),C.error&&(o.error=C.error))),o;o=null,s=!1,++a}while(t.length>0);return!0};var yt=Ve,D=yt.asn1,Ge=yt.pki,Tl=yt.pkcs12=yt.pkcs12||{},qb={name:"ContentInfo",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},B_={name:"PFX",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,capture:"version"},qb,{name:"PFX.macData",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:D.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:D.Class.UNIVERSAL,type:D.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:D.Class.UNIVERSAL,type:D.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},$_={name:"SafeBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},L_={name:"Attribute",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:D.Class.UNIVERSAL,type:D.Type.SET,constructed:!0,capture:"values"}]},O_={name:"CertBag",tagClass:D.Class.UNIVERSAL,type:D.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:D.Class.UNIVERSAL,type:D.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:D.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:D.Class.UNIVERSAL,type:D.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Il(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var o=0;o<e[s].safeBags.length;o++){var a=e[s].safeBags[o];n!==void 0&&a.type!==n||(t!==null?a.attributes[t]!==void 0&&a.attributes[t].indexOf(r)>=0&&i.push(a):i.push(a))}return i}function Og(e){if(e.composed||e.constructed){for(var t=yt.util.createBuffer(),r=0;r<e.value.length;++r)t.putBytes(e.value[r].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function M_(e,t){var r={},n=[];if(!D.validate(e,yt.pkcs7.asn1.encryptedDataValidator,r,n))throw(i=new Error("Cannot read EncryptedContentInfo.")).errors=n,i;var i,s=D.derToOid(r.contentType);if(s!==Ge.oids.data)throw(i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=s,i;s=D.derToOid(r.encAlgorithm);var o=Ge.pbe.getCipher(s,r.encParameter,t),a=Og(r.encryptedContentAsn1),l=yt.util.createBuffer(a.value);if(o.update(l),!o.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return o.output.getBytes()}function U_(e,t,r){if(!t&&e.length===0)return[];if((e=D.fromDer(e,t)).tagClass!==D.Class.UNIVERSAL||e.type!==D.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<e.value.length;i++){var s=e.value[i],o={},a=[];if(!D.validate(s,$_,o,a))throw(h=new Error("Cannot read SafeBag.")).errors=a,h;var l,c,u={type:D.derToOid(o.bagId),attributes:H_(o.bagAttributes)};n.push(u);var d=o.bagValue.value[0];switch(u.type){case Ge.oids.pkcs8ShroudedKeyBag:if((d=Ge.decryptPrivateKeyInfo(d,r))===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Ge.oids.keyBag:try{u.key=Ge.privateKeyFromAsn1(d)}catch{u.key=null,u.asn1=d}continue;case Ge.oids.certBag:l=O_,c=function(){if(D.derToOid(o.certId)!==Ge.oids.x509Certificate){var f=new Error("Unsupported certificate type, only X.509 supported.");throw f.oid=D.derToOid(o.certId),f}var g=D.fromDer(o.cert,t);try{u.cert=Ge.certificateFromAsn1(g,!0)}catch{u.cert=null,u.asn1=g}};break;default:var h;throw(h=new Error("Unsupported PKCS#12 SafeBag type.")).oid=u.type,h}if(l!==void 0&&!D.validate(d,l,o,a))throw(h=new Error("Cannot read PKCS#12 "+l.name)).errors=a,h;c()}return n}function H_(e){var t={};if(e!==void 0)for(var r=0;r<e.length;++r){var n={},i=[];if(!D.validate(e[r],L_,n,i)){var s=new Error("Cannot read PKCS#12 BagAttribute.");throw s.errors=i,s}var o=D.derToOid(n.oid);if(Ge.oids[o]!==void 0){t[Ge.oids[o]]=[];for(var a=0;a<n.values.length;++a)t[Ge.oids[o]].push(n.values[a].value)}}return t}Tl.pkcs12FromAsn1=function(e,t,r){typeof t=="string"?(r=t,t=!0):t===void 0&&(t=!0);var n={};if(!D.validate(e,B_,n,[]))throw(i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=i,i;var i,s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(g){var v,E={};return"localKeyId"in g?v=g.localKeyId:"localKeyIdHex"in g&&(v=yt.util.hexToBytes(g.localKeyIdHex)),v===void 0&&!("friendlyName"in g)&&"bagType"in g&&(E[g.bagType]=Il(s.safeContents,null,null,g.bagType)),v!==void 0&&(E.localKeyId=Il(s.safeContents,"localKeyId",v,g.bagType)),"friendlyName"in g&&(E.friendlyName=Il(s.safeContents,"friendlyName",g.friendlyName,g.bagType)),E},getBagsByFriendlyName:function(g,v){return Il(s.safeContents,"friendlyName",g,v)},getBagsByLocalKeyId:function(g,v){return Il(s.safeContents,"localKeyId",g,v)}};if(n.version.charCodeAt(0)!==3)throw(i=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=n.version.charCodeAt(0),i;if(D.derToOid(n.contentType)!==Ge.oids.data)throw(i=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=D.derToOid(n.contentType),i;var o=n.content.value[0];if(o.tagClass!==D.Class.UNIVERSAL||o.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=Og(o),n.mac){var a=null,l=0,c=D.derToOid(n.macAlgorithm);switch(c){case Ge.oids.sha1:a=yt.md.sha1.create(),l=20;break;case Ge.oids.sha256:a=yt.md.sha256.create(),l=32;break;case Ge.oids.sha384:a=yt.md.sha384.create(),l=48;break;case Ge.oids.sha512:a=yt.md.sha512.create(),l=64;break;case Ge.oids.md5:a=yt.md.md5.create(),l=16}if(a===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+c);var u=new yt.util.ByteBuffer(n.macSalt),d="macIterations"in n?parseInt(yt.util.bytesToHex(n.macIterations),16):1,h=Tl.generateKey(r,u,3,d,l,a),f=yt.hmac.create();if(f.start(a,h),f.update(o.value),f.getMac().getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(g,v,E,p){if(v=D.fromDer(v,E),v.tagClass!==D.Class.UNIVERSAL||v.type!==D.Type.SEQUENCE||v.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var y=0;y<v.value.length;y++){var C=v.value[y],b={},x=[];if(!D.validate(C,qb,b,x))throw(H=new Error("Cannot read ContentInfo.")).errors=x,H;var m={encrypted:!1},k=null,N=b.content.value[0];switch(D.derToOid(b.contentType)){case Ge.oids.data:if(N.tagClass!==D.Class.UNIVERSAL||N.type!==D.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");k=Og(N).value;break;case Ge.oids.encryptedData:k=M_(N,p),m.encrypted=!0;break;default:var H;throw(H=new Error("Unsupported PKCS#12 contentType.")).contentType=D.derToOid(b.contentType),H}m.safeBags=U_(k,E,p),g.safeContents.push(m)}}(s,o.value,t,r),s},Tl.toPkcs12Asn1=function(e,t,r,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i,s=n.localKeyId;if(s!==null)s=yt.util.hexToBytes(s);else if(n.generateLocalKeyId)if(t){var o=yt.util.isArray(t)?t[0]:t;typeof o=="string"&&(o=Ge.certificateFromPem(o)),(k=yt.md.sha1.create()).update(D.toDer(Ge.certificateToAsn1(o)).getBytes()),s=k.digest().getBytes()}else s=yt.random.getBytes(20);var a=[];s!==null&&a.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.localKeyId).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,s)])])),"friendlyName"in n&&a.push(D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.friendlyName).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SET,!0,[D.create(D.Class.UNIVERSAL,D.Type.BMPSTRING,!1,n.friendlyName)])])),a.length>0&&(i=D.create(D.Class.UNIVERSAL,D.Type.SET,!0,a));var l=[],c=[];t!==null&&(c=yt.util.isArray(t)?t:[t]);for(var u=[],d=0;d<c.length;++d){typeof(t=c[d])=="string"&&(t=Ge.certificateFromPem(t));var h=d===0?i:void 0,f=Ge.certificateToAsn1(t),g=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.certBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.x509Certificate).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(f).getBytes())])])]),h]);u.push(g)}if(u.length>0){var v=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,u),E=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(v).getBytes())])]);l.push(E)}var p=null;if(e!==null){var y=Ge.wrapRsaPrivateKey(Ge.privateKeyToAsn1(e));p=r===null?D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.keyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[y]),i]):D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.pkcs8ShroudedKeyBag).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[Ge.encryptPrivateKeyInfo(y,r,n)]),i]);var C=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[p]),b=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(C).getBytes())])]);l.push(b)}var x,m=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,l);if(n.useMac){var k=yt.md.sha1.create(),N=new yt.util.ByteBuffer(yt.random.getBytes(n.saltSize)),H=n.count,R=(e=Tl.generateKey(r,N,3,H,20),yt.hmac.create());R.start(k,e),R.update(D.toDer(m).getBytes());var P=R.getMac();x=D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.sha1).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.NULL,!1,"")]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,P.getBytes())]),D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,N.getBytes()),D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(H).getBytes())])}return D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.INTEGER,!1,D.integerToDer(3).getBytes()),D.create(D.Class.UNIVERSAL,D.Type.SEQUENCE,!0,[D.create(D.Class.UNIVERSAL,D.Type.OID,!1,D.oidToDer(Ge.oids.data).getBytes()),D.create(D.Class.CONTEXT_SPECIFIC,0,!0,[D.create(D.Class.UNIVERSAL,D.Type.OCTETSTRING,!1,D.toDer(m).getBytes())])]),x])},Tl.generateKey=yt.pbe.generatePkcs12Key;var ds=Ve,Qf=ds.asn1,Ko=ds.pki=ds.pki||{};Ko.pemToDer=function(e){var t=ds.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return ds.util.createBuffer(t.body)},Ko.privateKeyFromPem=function(e){var t=ds.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Qf.fromDer(t.body);return Ko.privateKeyFromAsn1(n)},Ko.privateKeyToPem=function(e,t){var r={type:"RSA PRIVATE KEY",body:Qf.toDer(Ko.privateKeyToAsn1(e)).getBytes()};return ds.pem.encode(r,{maxline:t})},Ko.privateKeyInfoToPem=function(e,t){var r={type:"PRIVATE KEY",body:Qf.toDer(e).getBytes()};return ds.pem.encode(r,{maxline:t})};var ne=Ve,Kd=function(e,t,r,n){var i=ne.util.createBuffer(),s=e.length>>1,o=s+(1&e.length),a=e.substr(0,o),l=e.substr(s,o),c=ne.util.createBuffer(),u=ne.hmac.create();r=t+r;var d=Math.ceil(n/16),h=Math.ceil(n/20);u.start("MD5",a);var f=ne.util.createBuffer();c.putBytes(r);for(var g=0;g<d;++g)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),f.putBuffer(u.digest());u.start("SHA1",l);var v=ne.util.createBuffer();for(c.clear(),c.putBytes(r),g=0;g<h;++g)u.start(null,null),u.update(c.getBytes()),c.putBuffer(u.digest()),u.start(null,null),u.update(c.bytes()+r),v.putBuffer(u.digest());return i.putBytes(ne.util.xorBytes(f.getBytes(),v.getBytes(),n)),i},F_=function(e,t,r){var n=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=ne.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},j_=function(e,t,r){var n=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=ne.util.createBuffer(i),t.length=i.length,n=!0}catch{}return n},zr=function(e,t){var r=0;switch(t){case 1:r=e.getByte();break;case 2:r=e.getInt16();break;case 3:r=e.getInt24();break;case 4:r=e.getInt32()}return ne.util.createBuffer(e.getBytes(r))},cn=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},I={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};I.SupportedVersions=[I.Versions.TLS_1_1,I.Versions.TLS_1_0],I.Version=I.SupportedVersions[0],I.MaxFragment=15360,I.ConnectionEnd={server:0,client:1},I.PRFAlgorithm={tls_prf_sha256:0},I.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},I.CipherType={stream:0,block:1,aead:2},I.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},I.CompressionMethod={none:0,deflate:1},I.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},I.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},I.Alert={},I.Alert.Level={warning:1,fatal:2},I.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},I.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},I.CipherSuites={},I.getCipherSuite=function(e){var t=null;for(var r in I.CipherSuites){var n=I.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},I.handleUnexpected=function(e,t){!e.open&&e.entity===I.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}})},I.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(I.queue(e,I.createAlert(e,{level:I.Alert.Level.warning,description:I.Alert.Description.no_renegotiation})),I.flush(e)),e.process()},I.parseHelloMessage=function(e,t,r){var n=null,i=e.entity===I.ConnectionEnd.client;if(r<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});else{var s=t.fragment,o=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:ne.util.createBuffer(s.getBytes(32)),session_id:zr(s,1),extensions:[]},i?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=zr(s,2),n.compression_methods=zr(s,1)),(o=r-(o-s.length()))>0){for(var a=zr(s,2);a.length()>0;)n.extensions.push({type:[a.getByte(),a.getByte()],data:zr(a,2)});if(!i)for(var l=0;l<n.extensions.length;++l){var c=n.extensions[l];if(c.type[0]===0&&c.type[1]===0)for(var u=zr(c.data,2);u.length()>0&&u.getByte()===0;)e.session.extensions.server_name.serverNameList.push(zr(u,2).getBytes())}}if(e.session.version&&(n.version.major!==e.session.version.major||n.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=I.getCipherSuite(n.cipher_suite);else for(var d=ne.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=I.getCipherSuite(d.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure},cipherSuite:ne.util.bytesToHex(n.cipher_suite)});e.session.compressionMethod=i?n.compression_method:I.CompressionMethod.none}return n},I.createSecurityParameters=function(e,t){var r=e.entity===I.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:I.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:I.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}},I.handleServerHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=v2,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=V_,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.session.id=i,e.process()}},I.handleClientHello=function(e,t,r){var n=I.parseHelloMessage(e,t,r);if(!e.fail){var i=n.session_id.bytes(),s=null;if(e.sessionCache&&((s=e.sessionCache.getSession(i))===null?i="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,i="")),i.length===0&&(i=ne.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=n.version,e.session.sp={},s)e.version=e.session.version=s.version,e.session.sp=s.sp;else{for(var o,a=1;a<I.SupportedVersions.length&&!((o=I.SupportedVersions[a]).minor<=n.version.minor);++a);e.version={major:o.major,minor:o.minor},e.session.version=e.version}s!==null?(e.expect=Zf,e.session.resuming=!0,e.session.sp.client_random=n.random.bytes()):(e.expect=e.verifyClient!==!1?Y_:Xf,e.session.resuming=!1,I.createSecurityParameters(e,n)),e.open=!0,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHello(e)})),e.session.resuming?(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.pending=I.createConnectionState(e),e.state.current.write=e.state.pending.write,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))):(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)})),e.fail||(I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerKeyExchange(e)})),e.verifyClient!==!1&&I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificateRequest(e)})),I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createServerHelloDone(e)})))),I.flush(e),e.process()}},I.handleCertificate=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n,i,s=t.fragment,o={certificate_list:zr(s,3)},a=[];try{for(;o.certificate_list.length()>0;)n=zr(o.certificate_list,3),i=ne.asn1.fromDer(n),n=ne.pki.certificateFromAsn1(i,!0),a.push(n)}catch(c){return e.error(e,{message:"Could not parse certificate list.",cause:c,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var l=e.entity===I.ConnectionEnd.client;!l&&e.verifyClient!==!0||a.length!==0?a.length===0?e.expect=l?m2:Xf:(l?e.session.serverCertificate=a[0]:e.session.clientCertificate=a[0],I.verifyCertificateChain(e,a)&&(e.expect=l?m2:Xf)):e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}}),e.process()},I.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});e.expect=q_,e.process()},I.handleClientKeyExchange=function(e,t,r){if(r<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unsupported_certificate}});var n=t.fragment,i={enc_pre_master_secret:zr(n,2).getBytes()},s=null;if(e.getPrivateKey)try{s=e.getPrivateKey(e,e.session.serverCertificate),s=ne.pki.privateKeyFromPem(s)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}})}if(s===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}});try{var o=e.session.sp;o.pre_master_secret=s.decrypt(i.enc_pre_master_secret);var a=e.session.clientHelloVersion;if(a.major!==o.pre_master_secret.charCodeAt(0)||a.minor!==o.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{o.pre_master_secret=ne.random.getBytes(48)}e.expect=Zf,e.session.clientCertificate!==null&&(e.expect=Q_),e.process()},I.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:zr(n,1),certificate_authorities:zr(n,2)};e.session.certificateRequest=i,e.expect=z_,e.process()},I.handleCertificateVerify=function(e,t,r){if(r<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s={signature:zr(n,2).getBytes()},o=ne.util.createBuffer();o.putBuffer(e.session.md5.digest()),o.putBuffer(e.session.sha1.digest()),o=o.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(o,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.handshake_failure}})}e.expect=Zf,e.process()},I.handleServerHelloDone=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.record_overflow}});if(e.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.insufficient_security}},i=e.verify(e,n.alert.description,0,[]);if(i!==!0)return(i||i===0)&&(typeof i!="object"||ne.util.isArray(i)?typeof i=="number"&&(n.alert.description=i):(i.message&&(n.message=i.message),i.alert&&(n.alert.description=i.alert))),e.error(e,n)}e.session.certificateRequest!==null&&(t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createCertificate(e)}),I.queue(e,t)),t=I.createRecord(e,{type:I.ContentType.handshake,data:I.createClientKeyExchange(e)}),I.queue(e,t),e.expect=W_;var s=function(o,a){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createCertificateVerify(o,a)})),I.queue(o,I.createRecord(o,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),o.state.pending=I.createConnectionState(o),o.state.current.write=o.state.pending.write,I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createFinished(o)})),o.expect=v2,I.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);I.getClientSignature(e,s)},I.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.illegal_parameter}});var r=e.entity===I.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=I.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?K_:X_,e.process()},I.handleFinished=function(e,t,r){var n=t.fragment;n.read-=4;var i=n.bytes();n.read+=4;var s=t.fragment.getBytes();(n=ne.util.createBuffer()).putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest());var o=e.entity===I.ConnectionEnd.client,a=o?"server finished":"client finished",l=e.session.sp;if((n=Kd(l.master_secret,a,n.getBytes(),12)).getBytes()!==s)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&o||!e.session.resuming&&!o)&&(I.queue(e,I.createRecord(e,{type:I.ContentType.change_cipher_spec,data:I.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,I.queue(e,I.createRecord(e,{type:I.ContentType.handshake,data:I.createFinished(e)}))),e.expect=o?G_:Z_,e.handshaking=!1,++e.handshakes,e.peerCertificate=o?e.session.serverCertificate:e.session.clientCertificate,I.flush(e),e.isConnected=!0,e.connected(e),e.process()},I.handleAlert=function(e,t){var r,n=t.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case I.Alert.Description.close_notify:r="Connection closed.";break;case I.Alert.Description.unexpected_message:r="Unexpected message.";break;case I.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case I.Alert.Description.decryption_failed:r="Decryption failed.";break;case I.Alert.Description.record_overflow:r="Record overflow.";break;case I.Alert.Description.decompression_failure:r="Decompression failed.";break;case I.Alert.Description.handshake_failure:r="Handshake failure.";break;case I.Alert.Description.bad_certificate:r="Bad certificate.";break;case I.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case I.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case I.Alert.Description.certificate_expired:r="Certificate expired.";break;case I.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case I.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case I.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case I.Alert.Description.access_denied:r="Access denied.";break;case I.Alert.Description.decode_error:r="Decode error.";break;case I.Alert.Description.decrypt_error:r="Decrypt error.";break;case I.Alert.Description.export_restriction:r="Export restriction.";break;case I.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case I.Alert.Description.insufficient_security:r="Insufficient security.";break;case I.Alert.Description.internal_error:r="Internal error.";break;case I.Alert.Description.user_canceled:r="User canceled.";break;case I.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(i.description===I.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===I.ConnectionEnd.client?"server":"client",alert:i}),e.process()},I.handleHandshake=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return e.fragmented=t,t.fragment=ne.util.createBuffer(),r.read-=4,e.process();e.fragmented=null,r.read-=4;var s=r.bytes(i+4);r.read+=4,n in Gd[e.entity][e.expect]?(e.entity!==I.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:ne.md.md5.create(),sha1:ne.md.sha1.create()}),n!==I.HandshakeType.hello_request&&n!==I.HandshakeType.certificate_verify&&n!==I.HandshakeType.finished&&(e.session.md5.update(s),e.session.sha1.update(s)),Gd[e.entity][e.expect][n](e,t,i)):I.handleUnexpected(e,t)},I.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},I.handleHeartbeat=function(e,t){var r=t.fragment,n=r.getByte(),i=r.getInt16(),s=r.getBytes(i);if(n===I.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>s.length)return e.process();I.queue(e,I.createRecord(e,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_response,s)})),I.flush(e)}else if(n===I.HeartbeatMessageType.heartbeat_response){if(s!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,ne.util.createBuffer(s))}e.process()};var V_=1,m2=2,q_=3,z_=4,v2=5,K_=6,G_=7,W_=8,Y_=1,Xf=2,Q_=3,Zf=4,X_=5,Z_=6,T=I.handleUnexpected,y2=I.handleChangeCipherSpec,ar=I.handleAlert,br=I.handleHandshake,E2=I.handleApplicationData,lr=I.handleHeartbeat,Mg=[];Mg[I.ConnectionEnd.client]=[[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[y2,ar,T,T,lr],[T,ar,br,T,lr],[T,ar,br,E2,lr],[T,ar,br,T,lr]],Mg[I.ConnectionEnd.server]=[[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[T,ar,br,T,lr],[y2,ar,T,T,lr],[T,ar,br,T,lr],[T,ar,br,E2,lr],[T,ar,br,T,lr]];var Ji=I.handleHelloRequest,J_=I.handleServerHello,zb=I.handleCertificate,C2=I.handleServerKeyExchange,Jf=I.handleCertificateRequest,Lu=I.handleServerHelloDone,Kb=I.handleFinished,Gd=[];Gd[I.ConnectionEnd.client]=[[T,T,J_,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,zb,C2,Jf,Lu,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,C2,Jf,Lu,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,Jf,Lu,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,T,Lu,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Kb],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[Ji,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var e7=I.handleClientHello,t7=I.handleClientKeyExchange,r7=I.handleCertificateVerify;Gd[I.ConnectionEnd.server]=[[T,e7,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,zb,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,t7,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,r7,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,Kb],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]],I.generateKeys=function(e,t){var r=Kd,n=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",n,48).bytes(),t.pre_master_secret=null),n=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,s=e.version.major===I.Versions.TLS_1_0.major&&e.version.minor===I.Versions.TLS_1_0.minor;s&&(i+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",n,i),a={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return s&&(a.client_write_IV=o.getBytes(t.fixed_iv_length),a.server_write_IV=o.getBytes(t.fixed_iv_length)),a},I.createConnectionState=function(e){var t=e.entity===I.ConnectionEnd.client,r=function(){var s={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(o){return!0},compressionState:null,compressFunction:function(o){return!0},updateSequenceNumber:function(){s.sequenceNumber[1]===4294967295?(s.sequenceNumber[1]=0,++s.sequenceNumber[0]):++s.sequenceNumber[1]}};return s},n={read:r(),write:r()};if(n.read.update=function(s,o){return n.read.cipherFunction(o,n.read)?n.read.compressFunction(s,o,n.read)||s.error(s,{message:"Could not decompress record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.decompression_failure}}):s.error(s,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_record_mac}}),!s.fail},n.write.update=function(s,o){return n.write.compressFunction(s,o,n.write)?n.write.cipherFunction(o,n.write)||s.error(s,{message:"Could not encrypt record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):s.error(s,{message:"Could not compress record.",send:!1,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}),!s.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=I.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case I.CompressionMethod.none:break;case I.CompressionMethod.deflate:n.read.compressFunction=j_,n.write.compressFunction=F_;break;default:throw new Error("Unsupported compression algorithm.")}}return n},I.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),r=ne.util.createBuffer();return r.putInt32(t),r.putBytes(ne.random.getBytes(28)),r},I.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},I.createAlert=function(e,t){var r=ne.util.createBuffer();return r.putByte(t.level),r.putByte(t.description),I.createRecord(e,{type:I.ContentType.alert,data:r})},I.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=ne.util.createBuffer(),r=0;r<e.cipherSuites.length;++r){var n=e.cipherSuites[r];t.putByte(n.id[0]),t.putByte(n.id[1])}var i=t.length(),s=ne.util.createBuffer();s.putByte(I.CompressionMethod.none);var o=s.length(),a=ne.util.createBuffer();if(e.virtualHost){var l=ne.util.createBuffer();l.putByte(0),l.putByte(0);var c=ne.util.createBuffer();c.putByte(0),cn(c,2,ne.util.createBuffer(e.virtualHost));var u=ne.util.createBuffer();cn(u,2,c),cn(l,2,u),a.putBuffer(l)}var d=a.length();d>0&&(d+=2);var h=e.session.id,f=h.length+1+2+4+28+2+i+1+o+d,g=ne.util.createBuffer();return g.putByte(I.HandshakeType.client_hello),g.putInt24(f),g.putByte(e.version.major),g.putByte(e.version.minor),g.putBytes(e.session.sp.client_random),cn(g,1,ne.util.createBuffer(h)),cn(g,2,t),cn(g,1,s),d>0&&cn(g,2,a),g},I.createServerHello=function(e){var t=e.session.id,r=t.length+1+2+4+28+2+1,n=ne.util.createBuffer();return n.putByte(I.HandshakeType.server_hello),n.putInt24(r),n.putByte(e.version.major),n.putByte(e.version.minor),n.putBytes(e.session.sp.server_random),cn(n,1,ne.util.createBuffer(t)),n.putByte(e.session.cipherSuite.id[0]),n.putByte(e.session.cipherSuite.id[1]),n.putByte(e.session.compressionMethod),n},I.createCertificate=function(e){var t,r=e.entity===I.ConnectionEnd.client,n=null;e.getCertificate&&(t=r?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,t));var i=ne.util.createBuffer();if(n!==null)try{ne.util.isArray(n)||(n=[n]);for(var s=null,o=0;o<n.length;++o){var a=ne.pem.decode(n[o])[0];if(a.type!=="CERTIFICATE"&&a.type!=="X509 CERTIFICATE"&&a.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=a.type,l}if(a.procType&&a.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var c=ne.util.createBuffer(a.body);s===null&&(s=ne.asn1.fromDer(c.bytes(),!1));var u=ne.util.createBuffer();cn(u,3,c),i.putBuffer(u)}n=ne.pki.certificateFromAsn1(s),r?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(f){return e.error(e,{message:"Could not send certificate list.",cause:f,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate}})}var d=3+i.length(),h=ne.util.createBuffer();return h.putByte(I.HandshakeType.certificate),h.putInt24(d),cn(h,3,i),h},I.createClientKeyExchange=function(e){var t=ne.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(ne.random.getBytes(46));var r=e.session.sp;r.pre_master_secret=t.getBytes();var n=(t=e.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,i=ne.util.createBuffer();return i.putByte(I.HandshakeType.client_key_exchange),i.putInt24(n),i.putInt16(t.length),i.putBytes(t),i},I.createServerKeyExchange=function(e){return ne.util.createBuffer()},I.getClientSignature=function(e,t){var r=ne.util.createBuffer();r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest()),r=r.getBytes(),e.getSignature=e.getSignature||function(n,i,s){var o=null;if(n.getPrivateKey)try{o=n.getPrivateKey(n,n.session.clientCertificate),o=ne.pki.privateKeyFromPem(o)}catch(a){n.error(n,{message:"Could not get private key.",cause:a,send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}})}o===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.internal_error}}):i=o.sign(i,null),s(n,i)},e.getSignature(e,r,t)},I.createCertificateVerify=function(e,t){var r=t.length+2,n=ne.util.createBuffer();return n.putByte(I.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(t.length),n.putBytes(t),n},I.createCertificateRequest=function(e){var t=ne.util.createBuffer();t.putByte(1);var r=ne.util.createBuffer();for(var n in e.caStore.certs){var i=e.caStore.certs[n],s=ne.pki.distinguishedNameToAsn1(i.subject),o=ne.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var a=1+t.length()+2+r.length(),l=ne.util.createBuffer();return l.putByte(I.HandshakeType.certificate_request),l.putInt24(a),cn(l,1,t),cn(l,2,r),l},I.createServerHelloDone=function(e){var t=ne.util.createBuffer();return t.putByte(I.HandshakeType.server_hello_done),t.putInt24(0),t},I.createChangeCipherSpec=function(){var e=ne.util.createBuffer();return e.putByte(1),e},I.createFinished=function(e){var t=ne.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var r=e.entity===I.ConnectionEnd.client,n=e.session.sp,i=r?"client finished":"server finished";t=Kd(n.master_secret,i,t.getBytes(),12);var s=ne.util.createBuffer();return s.putByte(I.HandshakeType.finished),s.putInt24(t.length()),s.putBuffer(t),s},I.createHeartbeat=function(e,t,r){r===void 0&&(r=t.length);var n=ne.util.createBuffer();n.putByte(e),n.putInt16(r),n.putBytes(t);var i=n.length(),s=Math.max(16,i-r-3);return n.putBytes(ne.random.getBytes(s)),n},I.queue=function(e,t){if(t&&(t.fragment.length()!==0||t.type!==I.ContentType.handshake&&t.type!==I.ContentType.alert&&t.type!==I.ContentType.change_cipher_spec)){if(t.type===I.ContentType.handshake){var r=t.fragment.bytes();e.session.md5.update(r),e.session.sha1.update(r),r=null}var n;if(t.fragment.length()<=I.MaxFragment)n=[t];else{n=[];for(var i=t.fragment.bytes();i.length>I.MaxFragment;)n.push(I.createRecord(e,{type:t.type,data:ne.util.createBuffer(i.slice(0,I.MaxFragment))})),i=i.slice(I.MaxFragment);i.length>0&&n.push(I.createRecord(e,{type:t.type,data:ne.util.createBuffer(i)}))}for(var s=0;s<n.length&&!e.fail;++s){var o=n[s];e.state.current.write.update(e,o)&&e.records.push(o)}}},I.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var ep=function(e){switch(e){case!0:return!0;case ne.pki.certificateError.bad_certificate:return I.Alert.Description.bad_certificate;case ne.pki.certificateError.unsupported_certificate:return I.Alert.Description.unsupported_certificate;case ne.pki.certificateError.certificate_revoked:return I.Alert.Description.certificate_revoked;case ne.pki.certificateError.certificate_expired:return I.Alert.Description.certificate_expired;case ne.pki.certificateError.certificate_unknown:return I.Alert.Description.certificate_unknown;case ne.pki.certificateError.unknown_ca:return I.Alert.Description.unknown_ca;default:return I.Alert.Description.bad_certificate}};for(var tp in I.verifyCertificateChain=function(e,t){try{var r={};for(var n in e.verifyOptions)r[n]=e.verifyOptions[n];r.verify=function(s,o,a){ep(s);var l=e.verify(e,s,o,a);if(l!==!0){if(typeof l=="object"&&!ne.util.isArray(l)){var c=new Error("The application rejected the certificate.");throw c.send=!0,c.alert={level:I.Alert.Level.fatal,description:I.Alert.Description.bad_certificate},l.message&&(c.message=l.message),l.alert&&(c.alert.description=l.alert),c}l!==s&&(l=function(u){switch(u){case!0:return!0;case I.Alert.Description.bad_certificate:return ne.pki.certificateError.bad_certificate;case I.Alert.Description.unsupported_certificate:return ne.pki.certificateError.unsupported_certificate;case I.Alert.Description.certificate_revoked:return ne.pki.certificateError.certificate_revoked;case I.Alert.Description.certificate_expired:return ne.pki.certificateError.certificate_expired;case I.Alert.Description.certificate_unknown:return ne.pki.certificateError.certificate_unknown;case I.Alert.Description.unknown_ca:return ne.pki.certificateError.unknown_ca;default:return ne.pki.certificateError.bad_certificate}}(l))}return l},ne.pki.verifyCertificateChain(e.caStore,t,r)}catch(s){var i=s;(typeof i!="object"||ne.util.isArray(i))&&(i={send:!0,alert:{level:I.Alert.Level.fatal,description:ep(s)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:I.Alert.Level.fatal,description:ep(i.error)}),e.error(e,i)}return!e.fail},I.createSessionCache=function(e,t){var r=null;if(e&&e.getSession&&e.setSession&&e.order)r=e;else{for(var n in(r={}).cache=e||{},r.capacity=Math.max(t||100,1),r.order=[],e)r.order.length<=t?r.order.push(n):delete e[n];r.getSession=function(i){var s=null,o=null;if(i?o=ne.util.bytesToHex(i):r.order.length>0&&(o=r.order[0]),o!==null&&o in r.cache){for(var a in s=r.cache[o],delete r.cache[o],r.order)if(r.order[a]===o){r.order.splice(a,1);break}}return s},r.setSession=function(i,s){if(r.order.length===r.capacity){var o=r.order.shift();delete r.cache[o]}o=ne.util.bytesToHex(i),r.order.push(o),r.cache[o]=s}}return r},I.createConnection=function(e){var t=null;t=e.caStore?ne.util.isArray(e.caStore)?ne.pki.createCaStore(e.caStore):e.caStore:ne.pki.createCaStore();var r=e.cipherSuites||null;if(r===null)for(var n in r=[],I.CipherSuites)r.push(I.CipherSuites[n]);var i=e.server?I.ConnectionEnd.server:I.ConnectionEnd.client,s=e.sessionCache?I.createSessionCache(e.sessionCache):null,o={version:{major:I.Version.major,minor:I.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:s,cipherSuites:r,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(a,l,c,u){return l},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:ne.util.createBuffer(),tlsData:ne.util.createBuffer(),data:ne.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(a,l){l.origin=l.origin||(a.entity===I.ConnectionEnd.client?"client":"server"),l.send&&(I.queue(a,I.createAlert(a,l.alert)),I.flush(a));var c=l.fatal!==!1;c&&(a.fail=!0),e.error(a,l),c&&a.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(a){o.version={major:I.Version.major,minor:I.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=(o.entity,I.ConnectionEnd.client,0),o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(a||a===void 0),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=I.createConnectionState(o)}};return o.reset(),o.handshake=function(a){if(o.entity!==I.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&o.handshakes===0&&(o.fail=!1),o.handshaking=!0;var l=null;(a=a||"").length>0&&(o.sessionCache&&(l=o.sessionCache.getSession(a)),l===null&&(a="")),a.length===0&&o.sessionCache&&(l=o.sessionCache.getSession())!==null&&(a=l.id),o.session={id:a,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:ne.md.md5.create(),sha1:ne.md.sha1.create()},l&&(o.version=l.version,o.session.sp=l.sp),o.session.sp.client_random=I.createRandom().getBytes(),o.open=!0,I.queue(o,I.createRecord(o,{type:I.ContentType.handshake,data:I.createClientHello(o)})),I.flush(o)}},o.process=function(a){var l=0;return a&&o.input.putBytes(a),o.fail||(o.record!==null&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),o.record===null&&(l=function(c){var u=0,d=c.input,h=d.length();if(h<5)u=5-h;else{c.record={type:d.getByte(),version:{major:d.getByte(),minor:d.getByte()},length:d.getInt16(),fragment:ne.util.createBuffer(),ready:!1};var f=c.record.version.major===c.version.major;f&&c.session&&c.session.version&&(f=c.record.version.minor===c.version.minor),f||c.error(c,{message:"Incompatible TLS version.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.protocol_version}})}return u}(o)),o.fail||o.record===null||o.record.ready||(l=function(c){var u=0,d=c.input,h=d.length();return h<c.record.length?u=c.record.length-h:(c.record.fragment.putBytes(d.getBytes(c.record.length)),d.compact(),c.state.current.read.update(c,c.record)&&(c.fragmented!==null&&(c.fragmented.type===c.record.type?(c.fragmented.fragment.putBuffer(c.record.fragment),c.record=c.fragmented):c.error(c,{message:"Invalid fragmented record.",send:!0,alert:{level:I.Alert.Level.fatal,description:I.Alert.Description.unexpected_message}})),c.record.ready=!0)),u}(o)),!o.fail&&o.record!==null&&o.record.ready&&function(c,u){var d=u.type-I.ContentType.change_cipher_spec,h=Mg[c.entity][c.expect];d in h?h[d](c,u):I.handleUnexpected(c,u)}(o,o.record)),l},o.prepare=function(a){return I.queue(o,I.createRecord(o,{type:I.ContentType.application_data,data:ne.util.createBuffer(a)})),I.flush(o)},o.prepareHeartbeatRequest=function(a,l){return a instanceof ne.util.ByteBuffer&&(a=a.bytes()),l===void 0&&(l=a.length),o.expectedHeartbeatPayload=a,I.queue(o,I.createRecord(o,{type:I.ContentType.heartbeat,data:I.createHeartbeat(I.HeartbeatMessageType.heartbeat_request,a,l)})),I.flush(o)},o.close=function(a){if(!o.fail&&o.sessionCache&&o.session){var l={id:o.session.id,version:o.session.version,sp:o.session.sp};l.sp.keys=null,o.sessionCache.setSession(l.id,l)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,I.queue(o,I.createAlert(o,{level:I.Alert.Level.warning,description:I.Alert.Description.close_notify})),I.flush(o)),o.closed(o)),o.reset(a)},o},ne.tls=ne.tls||{},I)typeof I[tp]!="function"&&(ne.tls[tp]=I[tp]);ne.tls.prf_tls1=Kd,ne.tls.hmac_sha1=function(e,t,r){var n=ne.hmac.create();n.start("SHA1",e);var i=ne.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},ne.tls.createSessionCache=I.createSessionCache,ne.tls.createConnection=I.createConnection;var As=Ve,hn=As.tls;function S2(e,t,r){var n=t.entity===As.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:As.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},e.write.cipherState={init:!1,cipher:As.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},e.read.cipherFunction=o7,e.write.cipherFunction=n7,e.read.macLength=e.write.macLength=r.mac_length,e.read.macFunction=e.write.macFunction=hn.hmac_sha1}function n7(e,t){var r,n=!1,i=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(i),t.updateSequenceNumber(),r=e.version.minor===hn.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:As.random.getBytesSync(16),t.cipherState.init=!0;var s=t.cipherState.cipher;return s.start({iv:r}),e.version.minor>=hn.Versions.TLS_1_1.minor&&s.output.putBytes(r),s.update(e.fragment),s.finish(i7)&&(e.fragment=s.output,e.length=e.fragment.length(),n=!0),n}function i7(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function s7(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),o=i-1-s;o<i-1;++o)n=n&&t.at(o)==s;n&&t.truncate(s+1)}return n}function o7(e,t){var r,n=!1;r=e.version.minor===hn.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(s7);var s=t.macLength,o=As.random.getBytesSync(s),a=i.output.length();a>=s?(e.fragment=i.output.getBytes(a-s),o=i.output.getBytes(s)):e.fragment=i.output.getBytes(),e.fragment=As.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=function(c,u,d){var h=As.hmac.create();return h.start("SHA1",c),h.update(u),u=h.digest().getBytes(),h.start(null,null),h.update(d),d=h.digest().getBytes(),u===d}(t.macKey,o,l)&&n,n}hn.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=hn.BulkCipherAlgorithm.aes,e.cipher_type=hn.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=hn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:S2},hn.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=hn.BulkCipherAlgorithm.aes,e.cipher_type=hn.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=hn.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:S2};var wt=Ve,Ol=wt.sha512=wt.sha512||{};wt.md.sha512=wt.md.algorithms.sha512=Ol;var w2=wt.sha384=wt.sha512.sha384=wt.sha512.sha384||{};w2.create=function(){return Ol.create("SHA-384")},wt.md.sha384=wt.md.algorithms.sha384=w2,wt.sha512.sha256=wt.sha512.sha256||{create:function(){return Ol.create("SHA-512/256")}},wt.md["sha512/256"]=wt.md.algorithms["sha512/256"]=wt.sha512.sha256,wt.sha512.sha224=wt.sha512.sha224||{create:function(){return Ol.create("SHA-512/224")}},wt.md["sha512/224"]=wt.md.algorithms["sha512/224"]=wt.sha512.sha224,Ol.create=function(e){if(b2||(rp="",rp+=wt.util.fillString("\0",128),Ug=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(Go={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Go["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Go["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Go["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],b2=!0),e===void 0&&(e="SHA-512"),!(e in Go))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Go[e],r=null,n=wt.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var l=a.messageLengthSize/4,c=0;c<l;++c)a.fullMessageLength.push(0);for(n=wt.util.createBuffer(),r=new Array(t.length),c=0;c<t.length;++c)r[c]=t[c].slice(0);return a}};return a.start(),a.update=function(l,c){c==="utf8"&&(l=wt.util.encodeUtf8(l));var u=l.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=u[1],u[1]=u[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(l),T2(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var l=wt.util.createBuffer();l.putBytes(n.bytes());var c,u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize&a.blockLength-1;l.putBytes(rp.substr(0,a.blockLength-u));for(var d=8*a.fullMessageLength[0],h=0;h<a.fullMessageLength.length-1;++h)d+=(c=8*a.fullMessageLength[h+1])/4294967296>>>0,l.putInt32(d>>>0),d=c>>>0;l.putInt32(d);var f=new Array(r.length);for(h=0;h<r.length;++h)f[h]=r[h].slice(0);T2(f,i,l);var g,v=wt.util.createBuffer();for(g=e==="SHA-512"?f.length:e==="SHA-384"?f.length-2:f.length-4,h=0;h<g;++h)v.putInt32(f[h][0]),h===g-1&&e==="SHA-512/224"||v.putInt32(f[h][1]);return v},a};var rp=null,b2=!1,Ug=null,Go=null;function T2(e,t,r){for(var n,i,s,o,a,l,c,u,d,h,f,g,v,E,p,y,C,b,x,m,k,N,H,R,P,B,_,q,L,F,M,$,z,W=r.length();W>=128;){for(_=0;_<16;++_)t[_][0]=r.getInt32()>>>0,t[_][1]=r.getInt32()>>>0;for(;_<80;++_)n=(((q=(F=t[_-2])[0])>>>19|(L=F[1])<<13)^(L>>>29|q<<3)^q>>>6)>>>0,i=((q<<13|L>>>19)^(L<<3|q>>>29)^(q<<26|L>>>6))>>>0,s=(((q=($=t[_-15])[0])>>>1|(L=$[1])<<31)^(q>>>8|L<<24)^q>>>7)>>>0,o=((q<<31|L>>>1)^(q<<24|L>>>8)^(q<<25|L>>>7))>>>0,M=t[_-7],z=t[_-16],L=i+M[1]+o+z[1],t[_][0]=n+M[0]+s+z[0]+(L/4294967296>>>0)>>>0,t[_][1]=L>>>0;for(f=e[0][0],g=e[0][1],v=e[1][0],E=e[1][1],p=e[2][0],y=e[2][1],C=e[3][0],b=e[3][1],x=e[4][0],m=e[4][1],k=e[5][0],N=e[5][1],H=e[6][0],R=e[6][1],P=e[7][0],B=e[7][1],_=0;_<80;++_)c=((x>>>14|m<<18)^(x>>>18|m<<14)^(m>>>9|x<<23))>>>0,u=(H^x&(k^H))>>>0,a=((f>>>28|g<<4)^(g>>>2|f<<30)^(g>>>7|f<<25))>>>0,l=((f<<4|g>>>28)^(g<<30|f>>>2)^(g<<25|f>>>7))>>>0,d=(f&v|p&(f^v))>>>0,h=(g&E|y&(g^E))>>>0,L=B+(((x<<18|m>>>14)^(x<<14|m>>>18)^(m<<23|x>>>9))>>>0)+((R^m&(N^R))>>>0)+Ug[_][1]+t[_][1],n=P+c+u+Ug[_][0]+t[_][0]+(L/4294967296>>>0)>>>0,i=L>>>0,s=a+d+((L=l+h)/4294967296>>>0)>>>0,o=L>>>0,P=H,B=R,H=k,R=N,k=x,N=m,x=C+n+((L=b+i)/4294967296>>>0)>>>0,m=L>>>0,C=p,b=y,p=v,y=E,v=f,E=g,f=n+s+((L=i+o)/4294967296>>>0)>>>0,g=L>>>0;L=e[0][1]+g,e[0][0]=e[0][0]+f+(L/4294967296>>>0)>>>0,e[0][1]=L>>>0,L=e[1][1]+E,e[1][0]=e[1][0]+v+(L/4294967296>>>0)>>>0,e[1][1]=L>>>0,L=e[2][1]+y,e[2][0]=e[2][0]+p+(L/4294967296>>>0)>>>0,e[2][1]=L>>>0,L=e[3][1]+b,e[3][0]=e[3][0]+C+(L/4294967296>>>0)>>>0,e[3][1]=L>>>0,L=e[4][1]+m,e[4][0]=e[4][0]+x+(L/4294967296>>>0)>>>0,e[4][1]=L>>>0,L=e[5][1]+N,e[5][0]=e[5][0]+k+(L/4294967296>>>0)>>>0,e[5][1]=L>>>0,L=e[6][1]+R,e[6][0]=e[6][0]+H+(L/4294967296>>>0)>>>0,e[6][1]=L>>>0,L=e[7][1]+B,e[7][0]=e[7][0]+P+(L/4294967296>>>0)>>>0,e[7][1]=L>>>0,W-=128}}var Hg={},Qt=Ve.asn1;Hg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Hg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Qt.Class.UNIVERSAL,type:Qt.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var dr=Ve,Gb=Hg,a7=Gb.publicKeyValidator,l7=Gb.privateKeyValidator;if(c7===void 0)var c7=dr.jsbn.BigInteger;var Fg=dr.util.ByteBuffer,Br=ee===void 0?Uint8Array:ee;dr.pki=dr.pki||{},dr.pki.ed25519=dr.ed25519=dr.ed25519||{};var Ke=dr.ed25519;function Ei(e){var t=e.message;if(t instanceof Uint8Array||t instanceof Br)return t;var r=e.encoding;if(t===void 0){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),r="binary"}if(typeof t=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(ee!==void 0)return ee.from(t,r);t=new Fg(t,r)}else if(!(t instanceof Fg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new Br(t.length()),i=0;i<n.length;++i)n[i]=t.at(i);return n}Ke.constants={},Ke.constants.PUBLIC_KEY_BYTE_LENGTH=32,Ke.constants.PRIVATE_KEY_BYTE_LENGTH=64,Ke.constants.SEED_BYTE_LENGTH=32,Ke.constants.SIGN_BYTE_LENGTH=64,Ke.constants.HASH_BYTE_LENGTH=64,Ke.generateKeyPair=function(e){var t=(e=e||{}).seed;if(t===void 0)t=dr.random.getBytesSync(Ke.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==Ke.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Ke.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Ei({message:t,encoding:"binary"});for(var r=new Br(Ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=new Br(Ke.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=t[i];return function(s,o){var a,l=[Pe(),Pe(),Pe(),Pe()],c=Rl(o,32);for(c[0]&=248,c[31]&=127,c[31]|=64,op(l,c),sp(s,l),a=0;a<32;++a)o[a+32]=s[a]}(r,n),{publicKey:r,privateKey:n}},Ke.privateKeyFromAsn1=function(e){var t={},r=[];if(!dr.asn1.validate(e,l7,t,r)){var n=new Error("Invalid Key.");throw n.errors=r,n}var i=dr.asn1.derToOid(t.privateKeyOid),s=dr.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.privateKey;return{privateKeyBytes:Ei({message:dr.asn1.fromDer(o).value,encoding:"binary"})}},Ke.publicKeyFromAsn1=function(e){var t={},r=[];if(!dr.asn1.validate(e,a7,t,r)){var n=new Error("Invalid Key.");throw n.errors=r,n}var i=dr.asn1.derToOid(t.publicKeyOid),s=dr.oids.EdDSA25519;if(i!==s)throw new Error('Invalid OID "'+i+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==Ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Ei({message:o,encoding:"binary"})},Ke.publicKeyFromPrivateKey=function(e){var t=Ei({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==Ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ke.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new Br(Ke.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r},Ke.sign=function(e){var t=Ei(e=e||{}),r=Ei({message:e.privateKey,encoding:"binary"});if(r.length===Ke.constants.SEED_BYTE_LENGTH)r=Ke.generateKeyPair({seed:r}).privateKey;else if(r.length!==Ke.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Ke.constants.SEED_BYTE_LENGTH+" or "+Ke.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length);(function(o,a,l,c){var u,d,h=new Float64Array(64),f=[Pe(),Pe(),Pe(),Pe()],g=Rl(c,32);for(g[0]&=248,g[31]&=127,g[31]|=64,u=0;u<l;++u)o[64+u]=a[u];for(u=0;u<32;++u)o[32+u]=g[32+u];var v=Rl(o.subarray(32),l+32);for(ip(v),op(f,v),sp(o,f),u=32;u<64;++u)o[u]=c[u];var E=Rl(o,l+64);for(ip(E),u=32;u<64;++u)h[u]=0;for(u=0;u<32;++u)h[u]=v[u];for(u=0;u<32;++u)for(d=0;d<32;d++)h[u+d]+=E[u]*g[d];Wb(o.subarray(32),h)})(n,t,t.length,r);for(var i=new Br(Ke.constants.SIGN_BYTE_LENGTH),s=0;s<i.length;++s)i[s]=n[s];return i},Ke.verify=function(e){var t=Ei(e=e||{});if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Ei({message:e.signature,encoding:"binary"});if(r.length!==Ke.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Ke.constants.SIGN_BYTE_LENGTH);var n=Ei({message:e.publicKey,encoding:"binary"});if(n.length!==Ke.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Ke.constants.PUBLIC_KEY_BYTE_LENGTH);var i,s=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length),o=new Br(Ke.constants.SIGN_BYTE_LENGTH+t.length);for(i=0;i<Ke.constants.SIGN_BYTE_LENGTH;++i)s[i]=r[i];for(i=0;i<t.length;++i)s[i+Ke.constants.SIGN_BYTE_LENGTH]=t[i];return function(a,l,c,u){var d,h=new Br(32),f=[Pe(),Pe(),Pe(),Pe()],g=[Pe(),Pe(),Pe(),Pe()];if(c<64||function(E,p){var y=Pe(),C=Pe(),b=Pe(),x=Pe(),m=Pe(),k=Pe(),N=Pe();return gs(E[2],Wd),function(H,R){var P;for(P=0;P<16;++P)H[P]=R[2*P]+(R[2*P+1]<<8);H[15]&=32767}(E[1],p),Xs(b,E[1]),gt(x,b,u7),ya(b,b,E[2]),ea(x,E[2],x),Xs(m,x),Xs(k,m),gt(N,k,m),gt(y,N,b),gt(y,y,x),function(H,R){var P,B=Pe();for(P=0;P<16;++P)B[P]=R[P];for(P=250;P>=0;--P)Xs(B,B),P!==1&&gt(B,B,R);for(P=0;P<16;++P)H[P]=B[P]}(y,y),gt(y,y,b),gt(y,y,x),gt(y,y,x),gt(E[0],y,x),Xs(C,E[0]),gt(C,C,x),k2(C,b)&&gt(E[0],E[0],h7),Xs(C,E[0]),gt(C,C,x),k2(C,b)?-1:(Qb(E[0])===p[31]>>7&&ya(E[0],jg,E[0]),gt(E[3],E[0],E[1]),0)}(g,u))return-1;for(d=0;d<c;++d)a[d]=l[d];for(d=0;d<32;++d)a[d+32]=u[d];var v=Rl(a,c);if(ip(v),Xb(f,g,v),op(g,l.subarray(32)),Vg(f,g),sp(h,f),c-=64,Yb(l,0,h,0)){for(d=0;d<c;++d)a[d]=0;return-1}for(d=0;d<c;++d)a[d]=l[d+64];return c}(o,s,s.length,n)>=0};var jg=Pe(),Wd=Pe([1]),u7=Pe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),d7=Pe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),I2=Pe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),R2=Pe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),np=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),h7=Pe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Rl(e,t){var r=dr.md.sha512.create(),n=new Fg(e);r.update(n.getBytes(t),"binary");var i=r.digest().getBytes();if(ee!==void 0)return ee.from(i,"binary");for(var s=new Br(Ke.constants.HASH_BYTE_LENGTH),o=0;o<64;++o)s[o]=i.charCodeAt(o);return s}function Wb(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*np[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*np[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*np[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ip(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;Wb(e,t)}function Vg(e,t){var r=Pe(),n=Pe(),i=Pe(),s=Pe(),o=Pe(),a=Pe(),l=Pe(),c=Pe(),u=Pe();ya(r,e[1],e[0]),ya(u,t[1],t[0]),gt(r,r,u),ea(n,e[0],e[1]),ea(u,t[0],t[1]),gt(n,n,u),gt(i,e[3],t[3]),gt(i,i,d7),gt(s,e[2],t[2]),ea(s,s,s),ya(o,n,r),ya(a,s,i),ea(l,s,i),ea(c,n,r),gt(e[0],o,a),gt(e[1],c,l),gt(e[2],l,a),gt(e[3],o,c)}function A2(e,t,r){for(var n=0;n<4;++n)Zb(e[n],t[n],r)}function sp(e,t){var r=Pe(),n=Pe(),i=Pe();(function(s,o){var a,l=Pe();for(a=0;a<16;++a)l[a]=o[a];for(a=253;a>=0;--a)Xs(l,l),a!==2&&a!==4&&gt(l,l,o);for(a=0;a<16;++a)s[a]=l[a]})(i,t[2]),gt(r,t[0],i),gt(n,t[1],i),Yd(e,n),e[31]^=Qb(r)<<7}function Yd(e,t){var r,n,i,s=Pe(),o=Pe();for(r=0;r<16;++r)o[r]=t[r];for(ap(o),ap(o),ap(o),n=0;n<2;++n){for(s[0]=o[0]-65517,r=1;r<15;++r)s[r]=o[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=o[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,Zb(o,s,1-i)}for(r=0;r<16;r++)e[2*r]=255&o[r],e[2*r+1]=o[r]>>8}function k2(e,t){var r=new Br(32),n=new Br(32);return Yd(r,e),Yd(n,t),Yb(r,0,n,0)}function Yb(e,t,r,n){return function(i,s,o,a,l){var c,u=0;for(c=0;c<l;++c)u|=i[s+c]^o[a+c];return(1&u-1>>>8)-1}(e,t,r,n,32)}function Qb(e){var t=new Br(32);return Yd(t,e),1&t[0]}function Xb(e,t,r){var n,i;for(gs(e[0],jg),gs(e[1],Wd),gs(e[2],Wd),gs(e[3],jg),i=255;i>=0;--i)A2(e,t,n=r[i/8|0]>>(7&i)&1),Vg(t,e),Vg(e,e),A2(e,t,n)}function op(e,t){var r=[Pe(),Pe(),Pe(),Pe()];gs(r[0],I2),gs(r[1],R2),gs(r[2],Wd),gt(r[3],I2,R2),Xb(e,r,t)}function gs(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function ap(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function Zb(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function Pe(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function ea(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function ya(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function Xs(e,t){gt(e,t,t)}function gt(e,t,r){var n,i,s=0,o=0,a=0,l=0,c=0,u=0,d=0,h=0,f=0,g=0,v=0,E=0,p=0,y=0,C=0,b=0,x=0,m=0,k=0,N=0,H=0,R=0,P=0,B=0,_=0,q=0,L=0,F=0,M=0,$=0,z=0,W=r[0],ie=r[1],ae=r[2],Ee=r[3],Ce=r[4],Ie=r[5],Ae=r[6],Re=r[7],Fe=r[8],Ue=r[9],Le=r[10],ke=r[11],Y=r[12],de=r[13],le=r[14],ve=r[15];s+=(n=t[0])*W,o+=n*ie,a+=n*ae,l+=n*Ee,c+=n*Ce,u+=n*Ie,d+=n*Ae,h+=n*Re,f+=n*Fe,g+=n*Ue,v+=n*Le,E+=n*ke,p+=n*Y,y+=n*de,C+=n*le,b+=n*ve,o+=(n=t[1])*W,a+=n*ie,l+=n*ae,c+=n*Ee,u+=n*Ce,d+=n*Ie,h+=n*Ae,f+=n*Re,g+=n*Fe,v+=n*Ue,E+=n*Le,p+=n*ke,y+=n*Y,C+=n*de,b+=n*le,x+=n*ve,a+=(n=t[2])*W,l+=n*ie,c+=n*ae,u+=n*Ee,d+=n*Ce,h+=n*Ie,f+=n*Ae,g+=n*Re,v+=n*Fe,E+=n*Ue,p+=n*Le,y+=n*ke,C+=n*Y,b+=n*de,x+=n*le,m+=n*ve,l+=(n=t[3])*W,c+=n*ie,u+=n*ae,d+=n*Ee,h+=n*Ce,f+=n*Ie,g+=n*Ae,v+=n*Re,E+=n*Fe,p+=n*Ue,y+=n*Le,C+=n*ke,b+=n*Y,x+=n*de,m+=n*le,k+=n*ve,c+=(n=t[4])*W,u+=n*ie,d+=n*ae,h+=n*Ee,f+=n*Ce,g+=n*Ie,v+=n*Ae,E+=n*Re,p+=n*Fe,y+=n*Ue,C+=n*Le,b+=n*ke,x+=n*Y,m+=n*de,k+=n*le,N+=n*ve,u+=(n=t[5])*W,d+=n*ie,h+=n*ae,f+=n*Ee,g+=n*Ce,v+=n*Ie,E+=n*Ae,p+=n*Re,y+=n*Fe,C+=n*Ue,b+=n*Le,x+=n*ke,m+=n*Y,k+=n*de,N+=n*le,H+=n*ve,d+=(n=t[6])*W,h+=n*ie,f+=n*ae,g+=n*Ee,v+=n*Ce,E+=n*Ie,p+=n*Ae,y+=n*Re,C+=n*Fe,b+=n*Ue,x+=n*Le,m+=n*ke,k+=n*Y,N+=n*de,H+=n*le,R+=n*ve,h+=(n=t[7])*W,f+=n*ie,g+=n*ae,v+=n*Ee,E+=n*Ce,p+=n*Ie,y+=n*Ae,C+=n*Re,b+=n*Fe,x+=n*Ue,m+=n*Le,k+=n*ke,N+=n*Y,H+=n*de,R+=n*le,P+=n*ve,f+=(n=t[8])*W,g+=n*ie,v+=n*ae,E+=n*Ee,p+=n*Ce,y+=n*Ie,C+=n*Ae,b+=n*Re,x+=n*Fe,m+=n*Ue,k+=n*Le,N+=n*ke,H+=n*Y,R+=n*de,P+=n*le,B+=n*ve,g+=(n=t[9])*W,v+=n*ie,E+=n*ae,p+=n*Ee,y+=n*Ce,C+=n*Ie,b+=n*Ae,x+=n*Re,m+=n*Fe,k+=n*Ue,N+=n*Le,H+=n*ke,R+=n*Y,P+=n*de,B+=n*le,_+=n*ve,v+=(n=t[10])*W,E+=n*ie,p+=n*ae,y+=n*Ee,C+=n*Ce,b+=n*Ie,x+=n*Ae,m+=n*Re,k+=n*Fe,N+=n*Ue,H+=n*Le,R+=n*ke,P+=n*Y,B+=n*de,_+=n*le,q+=n*ve,E+=(n=t[11])*W,p+=n*ie,y+=n*ae,C+=n*Ee,b+=n*Ce,x+=n*Ie,m+=n*Ae,k+=n*Re,N+=n*Fe,H+=n*Ue,R+=n*Le,P+=n*ke,B+=n*Y,_+=n*de,q+=n*le,L+=n*ve,p+=(n=t[12])*W,y+=n*ie,C+=n*ae,b+=n*Ee,x+=n*Ce,m+=n*Ie,k+=n*Ae,N+=n*Re,H+=n*Fe,R+=n*Ue,P+=n*Le,B+=n*ke,_+=n*Y,q+=n*de,L+=n*le,F+=n*ve,y+=(n=t[13])*W,C+=n*ie,b+=n*ae,x+=n*Ee,m+=n*Ce,k+=n*Ie,N+=n*Ae,H+=n*Re,R+=n*Fe,P+=n*Ue,B+=n*Le,_+=n*ke,q+=n*Y,L+=n*de,F+=n*le,M+=n*ve,C+=(n=t[14])*W,b+=n*ie,x+=n*ae,m+=n*Ee,k+=n*Ce,N+=n*Ie,H+=n*Ae,R+=n*Re,P+=n*Fe,B+=n*Ue,_+=n*Le,q+=n*ke,L+=n*Y,F+=n*de,M+=n*le,$+=n*ve,b+=(n=t[15])*W,o+=38*(m+=n*ae),a+=38*(k+=n*Ee),l+=38*(N+=n*Ce),c+=38*(H+=n*Ie),u+=38*(R+=n*Ae),d+=38*(P+=n*Re),h+=38*(B+=n*Fe),f+=38*(_+=n*Ue),g+=38*(q+=n*Le),v+=38*(L+=n*ke),E+=38*(F+=n*Y),p+=38*(M+=n*de),y+=38*($+=n*le),C+=38*(z+=n*ve),s=(n=(s+=38*(x+=n*ie))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),C=(n=C+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),C=(n=C+i+65535)-65536*(i=Math.floor(n/65536)),b=(n=b+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=l,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e[8]=f,e[9]=g,e[10]=v,e[11]=E,e[12]=p,e[13]=y,e[14]=C,e[15]=b}var Gr=Ve;Gr.kem=Gr.kem||{};var x2=Gr.jsbn.BigInteger;function N2(e,t,r,n){e.generate=function(i,s){for(var o=new Gr.util.ByteBuffer,a=Math.ceil(s/n)+r,l=new Gr.util.ByteBuffer,c=r;c<a;++c){l.putInt32(c),t.start(),t.update(i+l.getBytes());var u=t.digest();o.putBytes(u.getBytes(n))}return o.truncate(o.length()-s),o.getBytes()}}Gr.kem.rsa={},Gr.kem.rsa.create=function(e,t){var r=(t=t||{}).prng||Gr.random,n={encrypt:function(i,s){var o,a=Math.ceil(i.n.bitLength()/8);do o=new x2(Gr.util.bytesToHex(r.getBytesSync(a)),16).mod(i.n);while(o.compareTo(x2.ONE)<=0);var l=a-(o=Gr.util.hexToBytes(o.toString(16))).length;return l>0&&(o=Gr.util.fillString("\0",l)+o),{encapsulation:i.encrypt(o,"NONE"),key:e.generate(o,s)}},decrypt:function(i,s,o){var a=i.decrypt(s,"NONE");return e.generate(a,o)}};return n},Gr.kem.kdf1=function(e,t){N2(this,e,0,t||e.digestLength)},Gr.kem.kdf2=function(e,t){N2(this,e,1,t||e.digestLength)};var We=Ve;We.log=We.log||{},We.log.levels=["none","error","warning","info","debug","verbose","max"];var od={},qg=[],Xl=null;We.log.LEVEL_LOCKED=2,We.log.NO_LEVEL_CHECK=4,We.log.INTERPOLATE=8;for(var ms=0;ms<We.log.levels.length;++ms){var _2=We.log.levels[ms];od[_2]={index:ms,name:_2.toUpperCase()}}We.log.logMessage=function(e){for(var t=od[e.level].index,r=0;r<qg.length;++r){var n=qg[r];n.flags&We.log.NO_LEVEL_CHECK?n.f(e):t<=od[n.level].index&&n.f(n,e)}},We.log.prepareStandard=function(e){"standard"in e||(e.standard=od[e.level].name+" ["+e.category+"] "+e.message)},We.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=We.util.format.apply(this,t)}},We.log.prepareStandardFull=function(e){"standardFull"in e||(We.log.prepareStandard(e),e.standardFull=e.standard)};var D2=["error","warning","info","debug","verbose"];for(ms=0;ms<D2.length;++ms)(function(e){We.log[e]=function(t,r){var n=Array.prototype.slice.call(arguments).slice(2),i={timestamp:new Date,level:e,category:t,message:r,arguments:n};We.log.logMessage(i)}})(D2[ms]);if(We.log.makeLogger=function(e){var t={flags:0,f:e};return We.log.setLevel(t,"none"),t},We.log.setLevel=function(e,t){var r=!1;if(e&&!(e.flags&We.log.LEVEL_LOCKED)){for(var n=0;n<We.log.levels.length;++n)if(t==We.log.levels[n]){e.level=t,r=!0;break}}return r},We.log.lock=function(e,t){t===void 0||t?e.flags|=We.log.LEVEL_LOCKED:e.flags&=~We.log.LEVEL_LOCKED},We.log.addLogger=function(e){qg.push(e)},typeof console<"u"&&"log"in console){var Al;if(console.error&&console.warn&&console.info&&console.debug){var f7={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},lp=function(e,t){We.log.prepareStandard(t);var r=f7[t.level],n=[t.standard];n=n.concat(t.arguments.slice()),r.apply(console,n)};Al=We.log.makeLogger(lp)}else lp=function(e,t){We.log.prepareStandardFull(t),console.log(t.standardFull)},Al=We.log.makeLogger(lp);We.log.setLevel(Al,"debug"),We.log.addLogger(Al),Xl=Al}else console={log:function(){}};if(Xl!==null&&typeof window<"u"&&window.location){var Ou=new URL(window.location.href).searchParams;Ou.has("console.level")&&We.log.setLevel(Xl,Ou.get("console.level").slice(-1)[0]),Ou.has("console.lock")&&Ou.get("console.lock").slice(-1)[0]=="true"&&We.log.lock(Xl)}We.log.consoleLogger=Xl;var he=Ve,O=he.asn1,Tr=he.pkcs7=he.pkcs7||{};function p7(e){var t={},r=[];if(!O.validate(e,Tr.asn1.recipientInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:t.version.charCodeAt(0),issuer:he.pki.RDNAttributesAsArray(t.issuer),serialNumber:he.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:O.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function g7(e){for(var t,r=[],n=0;n<e.length;++n)r.push((t=e[n],O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(t.version).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[he.pki.distinguishedNameToAsn1({attributes:t.issuer}),O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,he.util.hexToBytes(t.serialNumber))]),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.encryptedContent.algorithm).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")]),O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return r}function m7(e){var t=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(e.version).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[he.pki.distinguishedNameToAsn1({attributes:e.issuer}),O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,he.util.hexToBytes(e.serialNumber))]),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.digestAlgorithm).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.signatureAlgorithm).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")])),t.value.push(O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var r=O.create(O.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<e.unauthenticatedAttributes.length;++n){var i=e.unauthenticatedAttributes[n];r.values.push(zg(i))}t.value.push(r)}return t}function zg(e){var t;if(e.type===he.pki.oids.contentType)t=O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.value).getBytes());else if(e.type===he.pki.oids.messageDigest)t=O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===he.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var s=Date.parse(i);i=isNaN(s)?i.length===13?O.utcTimeToDate(i):O.generalizedTimeToDate(i):new Date(s)}t=i>=r&&i<n?O.create(O.Class.UNIVERSAL,O.Type.UTCTIME,!1,O.dateToUtcTime(i)):O.create(O.Class.UNIVERSAL,O.Type.GENERALIZEDTIME,!1,O.dateToGeneralizedTime(i))}return O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.type).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SET,!0,[t])])}function cp(e,t,r){var n={};if(!O.validate(t,r,n,[])){var i=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw i.errors=i,i}if(O.derToOid(n.contentType)!==he.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var s="";if(he.util.isArray(n.encryptedContent))for(var o=0;o<n.encryptedContent.length;++o){if(n.encryptedContent[o].type!==O.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");s+=n.encryptedContent[o].value}else s=n.encryptedContent;e.encryptedContent={algorithm:O.derToOid(n.encAlgorithm),parameter:he.util.createBuffer(n.encParameter.value),content:he.util.createBuffer(s)}}if(n.content){if(s="",he.util.isArray(n.content))for(o=0;o<n.content.length;++o){if(n.content[o].type!==O.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");s+=n.content[o].value}else s=n.content;e.content=he.util.createBuffer(s)}return e.version=n.version.charCodeAt(0),e.rawCapture=n,n}function P2(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case he.pki.oids["aes128-CBC"]:case he.pki.oids["aes192-CBC"]:case he.pki.oids["aes256-CBC"]:t=he.aes.createDecryptionCipher(e.encryptedContent.key);break;case he.pki.oids.desCBC:case he.pki.oids["des-EDE3-CBC"]:t=he.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}Tr.messageFromPem=function(e){var t=he.pem.decode(e)[0];if(t.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=O.fromDer(t.body);return Tr.messageFromAsn1(n)},Tr.messageToPem=function(e,t){var r={type:"PKCS7",body:O.toDer(e.toAsn1()).getBytes()};return he.pem.encode(r,{maxline:t})},Tr.messageFromAsn1=function(e){var t={},r=[];if(!O.validate(e,Tr.asn1.contentInfoValidator,t,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i,s=O.derToOid(t.contentType);switch(s){case he.pki.oids.envelopedData:i=Tr.createEnvelopedData();break;case he.pki.oids.encryptedData:i=Tr.createEncryptedData();break;case he.pki.oids.signedData:i=Tr.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+s+" is not (yet) supported.")}return i.fromAsn1(t.content.value[0]),i},Tr.createSignedData=function(){var e=null;return e={type:he.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(cp(e,t,Tr.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var r=e.rawCapture.certificates.value,n=0;n<r.length;++n)e.certificates.push(he.pki.certificateFromAsn1(r[n]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],r=0;r<e.certificates.length;++r)t.push(he.pki.certificateToAsn1(e.certificates[r]));var n=[],i=O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(e.version).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&i.value[0].value.push(O.create(O.Class.CONTEXT_SPECIFIC,0,!0,t)),n.length>0&&i.value[0].value.push(O.create(O.Class.CONTEXT_SPECIFIC,1,!0,n)),i.value[0].value.push(O.create(O.Class.UNIVERSAL,O.Type.SET,!0,e.signerInfos)),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.type).getBytes()),i])},addSigner:function(t){var r=t.issuer,n=t.serialNumber;if(t.certificate){var i=t.certificate;typeof i=="string"&&(i=he.pki.certificateFromPem(i)),r=i.issuer.attributes,n=i.serialNumber}var s=t.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof s=="string"&&(s=he.pki.privateKeyFromPem(s));var o=t.digestAlgorithm||he.pki.oids.sha1;switch(o){case he.pki.oids.sha1:case he.pki.oids.sha256:case he.pki.oids.sha384:case he.pki.oids.sha512:case he.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var a=t.authenticatedAttributes||[];if(a.length>0){for(var l=!1,c=!1,u=0;u<a.length;++u){var d=a[u];if(l||d.type!==he.pki.oids.contentType){if(!(c||d.type!==he.pki.oids.messageDigest)){if(c=!0,l)break}}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:s,version:1,issuer:r,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:he.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:a,unauthenticatedAttributes:[]})},sign:function(t){var r;if(t=t||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(he.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof he.util.ByteBuffer?r=e.content.bytes():typeof e.content=="string"&&(r=he.util.encodeUtf8(e.content)),t.detached?e.detachedContent=O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,r):e.contentInfo.value.push(O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,r)])))),e.signers.length!==0){var n=function(){for(var i={},s=0;s<e.signers.length;++s){var o=e.signers[s];(a=o.digestAlgorithm)in i||(i[a]=he.md[he.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=i[a]:o.md=he.md[he.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],i)e.digestAlgorithmIdentifiers.push(O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(a).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.NULL,!1,"")]));return i}();(function(i){var s;if(s=e.detachedContent?e.detachedContent:(s=e.contentInfo.value[1]).value[0],!s)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=O.derToOid(e.contentInfo.value[0].value),a=O.toDer(s);for(var l in a.getByte(),O.getBerValueLength(a),a=a.getBytes(),i)i[l].start().update(a);for(var c=new Date,u=0;u<e.signers.length;++u){var d=e.signers[u];if(d.authenticatedAttributes.length===0){if(o!==he.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=O.create(O.Class.UNIVERSAL,O.Type.SET,!0,[]),f=0;f<d.authenticatedAttributes.length;++f){var g=d.authenticatedAttributes[f];g.type===he.pki.oids.messageDigest?g.value=i[d.digestAlgorithm].digest():g.type===he.pki.oids.signingTime&&(g.value||(g.value=c)),h.value.push(zg(g)),d.authenticatedAttributesAsn1.value.push(zg(g))}a=O.toDer(h).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(v){for(var E=[],p=0;p<v.length;++p)E.push(m7(v[p]));return E}(e.signers)})(n)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){typeof t=="string"&&(t=he.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}},e},Tr.createEncryptedData=function(){var e=null;return e={type:he.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:he.pki.oids["aes256-CBC"]},fromAsn1:function(t){cp(e,t,Tr.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),P2(e)}},e},Tr.createEnvelopedData=function(){var e=null;return e={type:he.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:he.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=cp(e,t,Tr.asn1.envelopedDataValidator);e.recipients=function(n){for(var i=[],s=0;s<n.length;++s)i.push(p7(n[s]));return i}(r.recipientInfos.value)},toAsn1:function(){return O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(e.type).getBytes()),O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.INTEGER,!1,O.integerToDer(e.version).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SET,!0,g7(e.recipients)),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,(t=e.encryptedContent,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(he.pki.oids.data).getBytes()),O.create(O.Class.UNIVERSAL,O.Type.SEQUENCE,!0,[O.create(O.Class.UNIVERSAL,O.Type.OID,!1,O.oidToDer(t.algorithm).getBytes()),t.parameter?O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),O.create(O.Class.CONTEXT_SPECIFIC,0,!0,[O.create(O.Class.UNIVERSAL,O.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var o=!0,a=0;a<r.length;++a)if(s[a].type!==r[a].type||s[a].value!==r[a].value){o=!1;break}if(o)return i}}return null},decrypt:function(t,r){if(e.encryptedContent.key===void 0&&t!==void 0&&r!==void 0)switch(t.encryptedContent.algorithm){case he.pki.oids.rsaEncryption:case he.pki.oids.desCBC:var n=r.decrypt(t.encryptedContent.content);e.encryptedContent.key=he.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}P2(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:he.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,r){if(e.encryptedContent.content===void 0){var n,i,s;switch(r=r||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,r){case he.pki.oids["aes128-CBC"]:n=16,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["aes192-CBC"]:n=24,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["aes256-CBC"]:n=32,i=16,s=he.aes.createEncryptionCipher;break;case he.pki.oids["des-EDE3-CBC"]:n=24,i=8,s=he.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(t===void 0)t=he.util.createBuffer(he.random.getBytes(n));else if(t.length()!=n)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+n+".");e.encryptedContent.algorithm=r,e.encryptedContent.key=t,e.encryptedContent.parameter=he.util.createBuffer(he.random.getBytes(i));var o=s(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var a=0;a<e.recipients.length;++a){var l=e.recipients[a];if(l.encryptedContent.content===void 0){if(l.encryptedContent.algorithm!==he.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm);l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}},e};var Ut=Ve,Mu=Ut.ssh=Ut.ssh||{};function Yn(e,t){var r=t.toString(16);r[0]>="8"&&(r="00"+r);var n=Ut.util.hexToBytes(r);e.putInt32(n.length),e.putBytes(n)}function Wo(e,t){e.putInt32(t.length),e.putString(t)}function Uu(){for(var e=Ut.md.sha1.create(),t=arguments.length,r=0;r<t;++r)e.update(arguments[r]);return e.digest()}Mu.privateKeyToPutty=function(e,t,r){var n="ssh-rsa",i=(t=t||"")===""?"none":"aes256-cbc",s="PuTTY-User-Key-File-2: "+n+`\r
`;s+="Encryption: "+i+`\r
`,s+="Comment: "+(r=r||"")+`\r
`;var o=Ut.util.createBuffer();Wo(o,n),Yn(o,e.e),Yn(o,e.n);var a=Ut.util.encode64(o.bytes(),64),l=Math.floor(a.length/66)+1;s+="Public-Lines: "+l+`\r
`,s+=a;var c,u=Ut.util.createBuffer();if(Yn(u,e.d),Yn(u,e.p),Yn(u,e.q),Yn(u,e.qInv),t){var d=u.length()+16-1;d-=d%16;var h=Uu(u.bytes());h.truncate(h.length()-d+u.length()),u.putBuffer(h);var f=Ut.util.createBuffer();f.putBuffer(Uu("\0\0\0\0",t)),f.putBuffer(Uu("\0\0\0",t));var g=Ut.aes.createEncryptionCipher(f.truncate(8),"CBC");g.start(Ut.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var v=g.output;v.truncate(16),c=Ut.util.encode64(v.bytes(),64)}else c=Ut.util.encode64(u.bytes(),64);s+=`\r
Private-Lines: `+(l=Math.floor(c.length/66)+1)+`\r
`,s+=c;var E=Uu("putty-private-key-file-mac-key",t),p=Ut.util.createBuffer();Wo(p,n),Wo(p,i),Wo(p,r),p.putInt32(o.length()),p.putBuffer(o),p.putInt32(u.length()),p.putBuffer(u);var y=Ut.hmac.create();return y.start("sha1",E),y.update(p.bytes()),s+=`\r
Private-MAC: `+y.digest().toHex()+`\r
`},Mu.publicKeyToOpenSSH=function(e,t){var r="ssh-rsa";t=t||"";var n=Ut.util.createBuffer();return Wo(n,r),Yn(n,e.e),Yn(n,e.n),r+" "+Ut.util.encode64(n.bytes())+" "+t},Mu.privateKeyToOpenSSH=function(e,t){return t?Ut.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Ut.pki.privateKeyToPem(e)},Mu.getPublicKeyFingerprint=function(e,t){var r=(t=t||{}).md||Ut.md.md5.create(),n=Ut.util.createBuffer();Wo(n,"ssh-rsa"),Yn(n,e.e),Yn(n,e.n),r.start(),r.update(n.getBytes());var i=r.digest();if(t.encoding==="hex"){var s=i.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}if(t.encoding==="binary")return i.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return i};var Yo=Ve;class v7 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class y7 extends Error{constructor(t){super(),this.name="AbortError",this.message=t}}const B2=e=>globalThis.DOMException===void 0?new y7(e):new DOMException(e),$2=e=>{const t=e.reason===void 0?B2("This operation was aborted."):e.reason;return t instanceof Error?t:B2(t)};class Bo extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}class Kg extends Bo{constructor(t){super(t||"Unsupported content type.")}}class Gg extends Bo{constructor(t){super(t||"Request pending.")}}class E7 extends Bo{constructor(t){super(t||"Unspecified session description handler error.")}}class up extends Bo{constructor(){super("The session has terminated.")}}class kl extends Bo{constructor(t){super(t||"An error occurred during state transition.")}}class C7{constructor(t){this.incomingAckRequest=t}get request(){return this.incomingAckRequest.message}}class S7{constructor(t){this.incomingByeRequest=t}get request(){return this.incomingByeRequest.message}accept(t){return this.incomingByeRequest.accept(t),Promise.resolve()}reject(t){return this.incomingByeRequest.reject(t),Promise.resolve()}}class w7{constructor(t){this.incomingCancelRequest=t}get request(){return this.incomingCancelRequest}}class wc{constructor(){this.listeners=new Array}addListener(t,r){const n=i=>{this.removeListener(n),t(i)};(r==null?void 0:r.once)===!0?this.listeners.push(n):this.listeners.push(t)}emit(t){this.listeners.slice().forEach(r=>r(t))}removeAllListeners(){this.listeners=[]}removeListener(t){this.listeners=this.listeners.filter(r=>r!==t)}on(t){return this.addListener(t)}off(t){return this.removeListener(t)}once(t){return this.addListener(t,{once:!0})}}class b7{constructor(t){this.incomingInfoRequest=t}get request(){return this.incomingInfoRequest.message}accept(t){return this.incomingInfoRequest.accept(t),Promise.resolve()}reject(t){return this.incomingInfoRequest.reject(t),Promise.resolve()}}class Jb{constructor(t){this.parameters={};for(const r in t)t.hasOwnProperty(r)&&this.setParam(r,t[r])}setParam(t,r){t&&(this.parameters[t.toLowerCase()]=r==null?null:r.toString())}getParam(t){if(t)return this.parameters[t.toLowerCase()]}hasParam(t){return!(!t||this.parameters[t.toLowerCase()]===void 0)}deleteParam(t){if(t=t.toLowerCase(),this.hasParam(t)){const r=this.parameters[t];return delete this.parameters[t],r}}clearParams(){this.parameters={}}}class Or extends Jb{constructor(t,r,n){super(n),this.uri=t,this._displayName=r}get friendlyName(){return this.displayName||this.uri.aor}get displayName(){return this._displayName}set displayName(t){this._displayName=t}clone(){return new Or(this.uri.clone(),this._displayName,JSON.parse(JSON.stringify(this.parameters)))}toString(){let t=this.displayName||this.displayName==="0"?'"'+this.displayName+'" ':"";t+="<"+this.uri.toString()+">";for(const r in this.parameters)this.parameters.hasOwnProperty(r)&&(t+=";"+r,this.parameters[r]!==null&&(t+="="+this.parameters[r]));return t}}class hi extends Jb{constructor(t="sip",r,n,i,s,o){if(super(s||{}),this.headers={},!n)throw new TypeError('missing or invalid "host" parameter');for(const a in o)o.hasOwnProperty(a)&&this.setHeader(a,o[a]);this.raw={scheme:t,user:r,host:n,port:i},this.normal={scheme:t.toLowerCase(),user:r,host:n.toLowerCase(),port:i}}get scheme(){return this.normal.scheme}set scheme(t){this.raw.scheme=t,this.normal.scheme=t.toLowerCase()}get user(){return this.normal.user}set user(t){this.normal.user=this.raw.user=t}get host(){return this.normal.host}set host(t){this.raw.host=t,this.normal.host=t.toLowerCase()}get aor(){return this.normal.user+"@"+this.normal.host}get port(){return this.normal.port}set port(t){this.normal.port=this.raw.port=t}setHeader(t,r){this.headers[this.headerize(t)]=r instanceof Array?r:[r]}getHeader(t){if(t)return this.headers[this.headerize(t)]}hasHeader(t){return!!t&&!!this.headers.hasOwnProperty(this.headerize(t))}deleteHeader(t){if(t=this.headerize(t),this.headers.hasOwnProperty(t)){const r=this.headers[t];return delete this.headers[t],r}}clearHeaders(){this.headers={}}clone(){return new hi(this._raw.scheme,this._raw.user||"",this._raw.host,this._raw.port,JSON.parse(JSON.stringify(this.parameters)),JSON.parse(JSON.stringify(this.headers)))}toRaw(){return this._toString(this._raw)}toString(){return this._toString(this._normal)}get _normal(){return this.normal}get _raw(){return this.raw}_toString(t){let r=t.scheme+":";t.scheme.toLowerCase().match("^sips?$")||(r+="//"),t.user&&(r+=this.escapeUser(t.user)+"@"),r+=t.host,(t.port||t.port===0)&&(r+=":"+t.port);for(const i in this.parameters)this.parameters.hasOwnProperty(i)&&(r+=";"+i,this.parameters[i]!==null&&(r+="="+this.parameters[i]));const n=[];for(const i in this.headers)if(this.headers.hasOwnProperty(i))for(const s in this.headers[i])this.headers[i].hasOwnProperty(s)&&n.push(i+"="+this.headers[i][s]);return n.length>0&&(r+="?"+n.join("&")),r}escapeUser(t){let r;try{r=decodeURIComponent(t)}catch(n){throw n}return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%2B/gi,"+").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}headerize(t){const r={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},n=t.toLowerCase().replace(/_/g,"-").split("-"),i=n.length;let s="";for(let o=0;o<i;o++)o!==0&&(s+="-"),s+=n[o].charAt(0).toUpperCase()+n[o].substring(1);return r[s]&&(s=r[s]),s}}function L2(e,t){if(e.scheme!==t.scheme||e.user!==t.user||e.host!==t.host||e.port!==t.port||!function(i,s){const o=Object.keys(i.parameters),a=Object.keys(s.parameters);return!!o.filter(l=>a.includes(l)).every(l=>i.parameters[l]===s.parameters[l])&&!!["user","ttl","method","transport"].every(l=>i.hasParam(l)&&s.hasParam(l)||!i.hasParam(l)&&!s.hasParam(l))&&!!["maddr"].every(l=>i.hasParam(l)&&s.hasParam(l)||!i.hasParam(l)&&!s.hasParam(l))}(e,t))return!1;const r=Object.keys(e.headers),n=Object.keys(t.headers);if(r.length!==0||n.length!==0){if(r.length!==n.length)return!1;const i=r.filter(s=>n.includes(s));if(i.length!==n.length||!i.every(s=>e.headers[s].length&&t.headers[s].length&&e.headers[s][0]===t.headers[s][0]))return!1}return!0}function dp(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}class _a extends Error{constructor(t,r,n,i){super(),this.message=t,this.expected=r,this.found=n,this.location=i,this.name="SyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,_a.prototype):this.__proto__=_a.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_a)}static buildMessage(t,r){function n(l){return l.charCodeAt(0).toString(16).toUpperCase()}function i(l){return l.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,c=>"\\x0"+n(c)).replace(/[\x10-\x1F\x7F-\x9F]/g,c=>"\\x"+n(c))}function s(l){return l.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,c=>"\\x0"+n(c)).replace(/[\x10-\x1F\x7F-\x9F]/g,c=>"\\x"+n(c))}function o(l){switch(l.type){case"literal":return'"'+i(l.text)+'"';case"class":const c=l.parts.map(u=>Array.isArray(u)?s(u[0])+"-"+s(u[1]):s(u));return"["+(l.inverted?"^":"")+c+"]";case"any":return"any character";case"end":return"end of input";case"other":return l.description}}return"Expected "+function(l){const c=l.map(o);let u,d;if(c.sort(),c.length>0){for(u=1,d=1;u<c.length;u++)c[u-1]!==c[u]&&(c[d]=c[u],d++);c.length=d}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}(t)+" but "+(((a=r)?'"'+i(a)+'"':"end of input")+" found.");var a}format(t){let r="Error: "+this.message;if(this.location){let n,i=null;for(n=0;n<t.length;n++)if(t[n].source===this.location.source){i=t[n].text.split(/\r\n|\n|\r/g);break}let s=this.location.start,o=this.location.source+":"+s.line+":"+s.column;if(i){let a=this.location.end,l=dp("",s.line.toString().length," "),c=i[s.line-1],u=s.line===a.line?a.column:c.length+1;r+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+c+`
`+l+" | "+dp("",s.column-1," ")+dp("",u-s.column,"^")}else r+=`
 at `+o}return r}}const T7=function(e,t){const r={},n=(t=t!==void 0?t:{}).grammarSource,i={Contact:119,Name_Addr_Header:156,Record_Route:176,Request_Response:81,SIP_URI:45,Subscription_State:186,Supported:191,Require:182,Via:194,absoluteURI:84,Call_ID:118,Content_Disposition:130,Content_Length:135,Content_Type:136,CSeq:146,displayName:122,Event:149,From:151,host:52,Max_Forwards:154,Min_SE:213,Proxy_Authenticate:157,quoted_string:40,Refer_To:178,Replaces:179,Session_Expires:210,stun_URI:217,To:192,turn_URI:223,uuid:226,WWW_Authenticate:209,challenge:158,sipfrag:230,Referred_By:231};let s=119;const o=[`\r
`,p(`\r
`,!1),/^[0-9]/,y([["0","9"]],!1,!1),/^[a-zA-Z]/,y([["a","z"],["A","Z"]],!1,!1),/^[0-9a-fA-F]/,y([["0","9"],["a","f"],["A","F"]],!1,!1),/^[\0-\xFF]/,y([["\0",""]],!1,!1),/^["]/,y(['"'],!1,!1)," ",p(" ",!1),"	",p("	",!1),/^[a-zA-Z0-9]/,y([["a","z"],["A","Z"],["0","9"]],!1,!1),";",p(";",!1),"/",p("/",!1),"?",p("?",!1),":",p(":",!1),"@",p("@",!1),"&",p("&",!1),"=",p("=",!1),"+",p("+",!1),"$",p("$",!1),",",p(",",!1),"-",p("-",!1),"_",p("_",!1),".",p(".",!1),"!",p("!",!1),"~",p("~",!1),"*",p("*",!1),"'",p("'",!1),"(",p("(",!1),")",p(")",!1),"%",p("%",!1),function(){return" "},function(){return":"},/^[!-~]/,y([["!","~"]],!1,!1),/^[\x80-\uFFFF]/,y([["",""]],!1,!1),/^[\x80-\xBF]/,y([["",""]],!1,!1),/^[a-f]/,y([["a","f"]],!1,!1),"`",p("`",!1),"<",p("<",!1),">",p(">",!1),"\\",p("\\",!1),"[",p("[",!1),"]",p("]",!1),"{",p("{",!1),"}",p("}",!1),function(){return"*"},function(){return"/"},function(){return"="},function(){return"("},function(){return")"},function(){return">"},function(){return"<"},function(){return","},function(){return";"},function(){return":"},function(){return'"'},/^[!-']/,y([["!","'"]],!1,!1),/^[*-[]/,y([["*","["]],!1,!1),/^[\]-~]/,y([["]","~"]],!1,!1),function(R){return R},/^[#-[]/,y([["#","["]],!1,!1),/^[\0-\t]/,y([["\0","	"]],!1,!1),/^[\v-\f]/,y([["\v","\f"]],!1,!1),/^[\x0E-\x7F]/,y([["",""]],!1,!1),function(){(t=t||{data:{}}).data.uri=new hi(t.data.scheme,t.data.user,t.data.host,t.data.port),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port},function(){(t=t||{data:{}}).data.uri=new hi(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params,t.startRule==="SIP_URI"&&(t.data=t.data.uri)},"sips",p("sips",!0),"sip",p("sip",!0),function(R){(t=t||{data:{}}).data.scheme=R},function(){(t=t||{data:{}}).data.user=decodeURIComponent(v().slice(0,-1))},function(){(t=t||{data:{}}).data.password=v()},function(){return(t=t||{data:{}}).data.host=v(),t.data.host},function(){return(t=t||{data:{}}).data.host_type="domain",v()},/^[a-zA-Z0-9_\-]/,y([["a","z"],["A","Z"],["0","9"],"_","-"],!1,!1),/^[a-zA-Z0-9\-]/,y([["a","z"],["A","Z"],["0","9"],"-"],!1,!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",v()},"::",p("::",!1),function(){return(t=t||{data:{}}).data.host_type="IPv6",v()},function(){return(t=t||{data:{}}).data.host_type="IPv4",v()},"25",p("25",!1),/^[0-5]/,y([["0","5"]],!1,!1),"2",p("2",!1),/^[0-4]/,y([["0","4"]],!1,!1),"1",p("1",!1),/^[1-9]/,y([["1","9"]],!1,!1),function(R){return t=t||{data:{}},R=parseInt(R.join("")),t.data.port=R,R},"transport=",p("transport=",!0),"udp",p("udp",!0),"tcp",p("tcp",!0),"sctp",p("sctp",!0),"tls",p("tls",!0),function(R){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.transport=R.toLowerCase()},"user=",p("user=",!0),"phone",p("phone",!0),"ip",p("ip",!0),function(R){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.user=R.toLowerCase()},"method=",p("method=",!0),function(R){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.method=R},"ttl=",p("ttl=",!0),function(R){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.ttl=R},"maddr=",p("maddr=",!0),function(R){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.maddr=R},"lr",p("lr",!0),function(){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),t.data.uri_params.lr=void 0},function(R,P){(t=t||{data:{}}).data.uri_params||(t.data.uri_params={}),P=P===null?void 0:P[1],t.data.uri_params[R.toLowerCase()]=P},function(R,P){R=R.join("").toLowerCase(),P=P.join(""),(t=t||{data:{}}).data.uri_headers||(t.data.uri_headers={}),t.data.uri_headers[R]?t.data.uri_headers[R].push(P):t.data.uri_headers[R]=[P]},function(){(t=t||{data:{}}).startRule==="Refer_To"&&(t.data.uri=new hi(t.data.scheme,t.data.user,t.data.host,t.data.port,t.data.uri_params,t.data.uri_headers),delete t.data.scheme,delete t.data.user,delete t.data.host,delete t.data.host_type,delete t.data.port,delete t.data.uri_params)},"//",p("//",!1),function(){(t=t||{data:{}}).data.scheme=v()},p("SIP",!0),function(){(t=t||{data:{}}).data.sip_version=v()},"INVITE",p("INVITE",!1),"ACK",p("ACK",!1),"VXACH",p("VXACH",!1),"OPTIONS",p("OPTIONS",!1),"BYE",p("BYE",!1),"CANCEL",p("CANCEL",!1),"REGISTER",p("REGISTER",!1),"SUBSCRIBE",p("SUBSCRIBE",!1),"NOTIFY",p("NOTIFY",!1),"REFER",p("REFER",!1),"PUBLISH",p("PUBLISH",!1),function(){return(t=t||{data:{}}).data.method=v(),t.data.method},function(R){(t=t||{data:{}}).data.status_code=parseInt(R.join(""))},function(){(t=t||{data:{}}).data.reason_phrase=v()},function(){(t=t||{data:{}}).data=v()},function(){var R,P;for(P=(t=t||{data:{}}).data.multi_header.length,R=0;R<P;R++)if(t.data.multi_header[R].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var R;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{R=new Or(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{R=null}t.data.multi_header.push({position:l,offset:E().start.offset,parsed:R})},function(R){(R=v().trim())[0]==='"'&&(R=R.substring(1,R.length-1)),(t=t||{data:{}}).data.displayName=R},"q",p("q",!0),function(R){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.q=R},"expires",p("expires",!0),function(R){(t=t||{data:{}}).data.params||(t.data.params={}),t.data.params.expires=R},function(R){return parseInt(R.join(""))},"0",p("0",!1),function(){return parseFloat(v())},function(R,P){(t=t||{data:{}}).data.params||(t.data.params={}),P=P===null?void 0:P[1],t.data.params[R.toLowerCase()]=P},"render",p("render",!0),"session",p("session",!0),"icon",p("icon",!0),"alert",p("alert",!0),function(){(t=t||{data:{}}).startRule==="Content_Disposition"&&(t.data.type=v().toLowerCase())},"handling",p("handling",!0),"optional",p("optional",!0),"required",p("required",!0),function(R){(t=t||{data:{}}).data=parseInt(R.join(""))},function(){(t=t||{data:{}}).data=v()},"text",p("text",!0),"image",p("image",!0),"audio",p("audio",!0),"video",p("video",!0),"application",p("application",!0),"message",p("message",!0),"multipart",p("multipart",!0),"x-",p("x-",!0),function(R){(t=t||{data:{}}).data.value=parseInt(R.join(""))},function(R){(t=t||{data:{}}).data=R},function(R){(t=t||{data:{}}).data.event=R.toLowerCase()},function(){var R=(t=t||{data:{}}).data.tag;t.data=new Or(t.data.uri,t.data.displayName,t.data.params),R&&t.data.setParam("tag",R)},"tag",p("tag",!0),function(R){(t=t||{data:{}}).data.tag=R},function(R){(t=t||{data:{}}).data=parseInt(R.join(""))},function(R){(t=t||{data:{}}).data=R},function(){(t=t||{data:{}}).data=new Or(t.data.uri,t.data.displayName,t.data.params)},"digest",p("Digest",!0),"realm",p("realm",!0),function(R){(t=t||{data:{}}).data.realm=R},"domain",p("domain",!0),"nonce",p("nonce",!0),function(R){(t=t||{data:{}}).data.nonce=R},"opaque",p("opaque",!0),function(R){(t=t||{data:{}}).data.opaque=R},"stale",p("stale",!0),"true",p("true",!0),function(){(t=t||{data:{}}).data.stale=!0},"false",p("false",!0),function(){(t=t||{data:{}}).data.stale=!1},"algorithm",p("algorithm",!0),"md5",p("MD5",!0),"md5-sess",p("MD5-sess",!0),function(R){(t=t||{data:{}}).data.algorithm=R.toUpperCase()},"qop",p("qop",!0),"auth-int",p("auth-int",!0),"auth",p("auth",!0),function(R){(t=t||{data:{}}).data.qop||(t.data.qop=[]),t.data.qop.push(R.toLowerCase())},function(R){(t=t||{data:{}}).data.value=parseInt(R.join(""))},function(){var R,P;for(P=(t=t||{data:{}}).data.multi_header.length,R=0;R<P;R++)if(t.data.multi_header[R].parsed===null){t.data=null;break}t.data!==null?t.data=t.data.multi_header:t.data=-1},function(){var R;(t=t||{data:{}}).data.multi_header||(t.data.multi_header=[]);try{R=new Or(t.data.uri,t.data.displayName,t.data.params),delete t.data.uri,delete t.data.displayName,delete t.data.params}catch{R=null}t.data.multi_header.push({position:l,offset:E().start.offset,parsed:R})},function(){(t=t||{data:{}}).data=new Or(t.data.uri,t.data.displayName,t.data.params)},function(){(t=t||{data:{}}).data.replaces_from_tag&&t.data.replaces_to_tag||(t.data=-1)},function(){(t=t||{data:{}}).data={call_id:t.data}},"from-tag",p("from-tag",!0),function(R){(t=t||{data:{}}).data.replaces_from_tag=R},"to-tag",p("to-tag",!0),function(R){(t=t||{data:{}}).data.replaces_to_tag=R},"early-only",p("early-only",!0),function(){(t=t||{data:{}}).data.early_only=!0},function(R,P){return P},function(R,P){return function(B,_){return[B].concat(_)}(R,P)},function(R){(t=t||{data:{}}).startRule==="Require"&&(t.data=R||[])},function(R){(t=t||{data:{}}).data.value=parseInt(R.join(""))},"active",p("active",!0),"pending",p("pending",!0),"terminated",p("terminated",!0),function(){(t=t||{data:{}}).data.state=v()},"reason",p("reason",!0),function(R){t=t||{data:{}},R!==void 0&&(t.data.reason=R)},function(R){t=t||{data:{}},R!==void 0&&(t.data.expires=R)},"retry_after",p("retry_after",!0),function(R){t=t||{data:{}},R!==void 0&&(t.data.retry_after=R)},"deactivated",p("deactivated",!0),"probation",p("probation",!0),"rejected",p("rejected",!0),"timeout",p("timeout",!0),"giveup",p("giveup",!0),"noresource",p("noresource",!0),"invariant",p("invariant",!0),function(R){(t=t||{data:{}}).startRule==="Supported"&&(t.data=R||[])},function(){var R=(t=t||{data:{}}).data.tag;t.data=new Or(t.data.uri,t.data.displayName,t.data.params),R&&t.data.setParam("tag",R)},"ttl",p("ttl",!0),function(R){(t=t||{data:{}}).data.ttl=R},"maddr",p("maddr",!0),function(R){(t=t||{data:{}}).data.maddr=R},"received",p("received",!0),function(R){(t=t||{data:{}}).data.received=R},"branch",p("branch",!0),function(R){(t=t||{data:{}}).data.branch=R},"rport",p("rport",!0),function(R){t=t||{data:{}},R!==void 0&&(t.data.rport=R.join(""))},function(R){(t=t||{data:{}}).data.protocol=R},p("UDP",!0),p("TCP",!0),p("TLS",!0),p("SCTP",!0),function(R){(t=t||{data:{}}).data.transport=R},function(){(t=t||{data:{}}).data.host=v()},function(R){(t=t||{data:{}}).data.port=parseInt(R.join(""))},function(R){return parseInt(R.join(""))},function(R){(t=t||{data:{}}).startRule==="Session_Expires"&&(t.data.deltaSeconds=R)},"refresher",p("refresher",!1),"uas",p("uas",!1),"uac",p("uac",!1),function(R){(t=t||{data:{}}).startRule==="Session_Expires"&&(t.data.refresher=R)},function(R){(t=t||{data:{}}).startRule==="Min_SE"&&(t.data=R)},"stuns",p("stuns",!0),"stun",p("stun",!0),function(R){(t=t||{data:{}}).data.scheme=R},function(R){(t=t||{data:{}}).data.host=R},"?transport=",p("?transport=",!1),"turns",p("turns",!0),"turn",p("turn",!0),function(R){(t=t||{data:{}}).data.transport=R},function(){(t=t||{data:{}}).data=v()},"Referred-By",p("Referred-By",!1),"b",p("b",!1),"cid",p("cid",!1)],a=[m('2 ""6 7!'),m('4"""5!7#'),m('4$""5!7%'),m(`4&""5!7'`),m(";'.# &;("),m('4(""5!7)'),m('4*""5!7+'),m('2,""6,7-'),m('2.""6.7/'),m('40""5!71'),m('22""6273. &24""6475.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(";).# &;,"),m('2F""6F7G.} &2H""6H7I.q &2J""6J7K.e &2L""6L7M.Y &2N""6N7O.M &2P""6P7Q.A &2R""6R7S.5 &2T""6T7U.) &2V""6V7W'),m(`%%2X""6X7Y/5#;#/,$;#/#$+#)(#'#("'#&'#/"!&,)`),m(`%%$;$0#*;$&/,#; /#$+")("'#&'#." &"/=#$;$/&#0#*;$&&&#/'$8":Z" )("'#&'#`),m(';.." &"'),m(`%$;'.# &;(0)*;'.# &;(&/?#28""6879/0$;//'$8#:[# )(#'#("'#&'#`),m(`%%$;2/&#0#*;2&&&#/g#$%$;.0#*;.&/,#;2/#$+")("'#&'#0=*%$;.0#*;.&/,#;2/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m('4\\""5!7].# &;3'),m('4^""5!7_'),m('4`""5!7a'),m(';!.) &4b""5!7c'),m('%$;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G. &2J""6J7K.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m('%$;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O/#0*;). &2F""6F7G.} &2L""6L7M.q &2X""6X7Y.e &2P""6P7Q.Y &2H""6H7I.M &2@""6@7A.A &2d""6d7e.5 &2R""6R7S.) &2N""6N7O&&&#/"!&,)'),m(`2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &2:""6:7;. &2D""6D7E. &22""6273. &28""6879. &2j""6j7k. &;&.} &24""6475.q &2l""6l7m.e &2n""6n7o.Y &26""6677.M &2>""6>7?.A &2p""6p7q.5 &2r""6r7s.) &;'.# &;(`),m('%$;). &2F""6F7G. &2J""6J7K. &2L""6L7M. &2X""6X7Y. &2P""6P7Q. &2H""6H7I. &2@""6@7A. &2d""6d7e. &2R""6R7S. &2N""6N7O. &2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s/#0*;). &2F""6F7G. &2J""6J7K. &2L""6L7M. &2X""6X7Y. &2P""6P7Q. &2H""6H7I. &2@""6@7A. &2d""6d7e. &2R""6R7S. &2N""6N7O. &2T""6T7U. &2V""6V7W. &2f""6f7g. &2h""6h7i. &28""6879.w &2j""6j7k.k &;&.e &24""6475.Y &2l""6l7m.M &2n""6n7o.A &26""6677.5 &2p""6p7q.) &2r""6r7s&&&#/"!&,)'),m(`%;//?#2P""6P7Q/0$;//'$8#:t# )(#'#("'#&'#`),m(`%;//?#24""6475/0$;//'$8#:u# )(#'#("'#&'#`),m(`%;//?#2>""6>7?/0$;//'$8#:v# )(#'#("'#&'#`),m(`%;//?#2T""6T7U/0$;//'$8#:w# )(#'#("'#&'#`),m(`%;//?#2V""6V7W/0$;//'$8#:x# )(#'#("'#&'#`),m(`%2h""6h7i/0#;//'$8":y" )("'#&'#`),m(`%;//6#2f""6f7g/'$8":z" )("'#&'#`),m(`%;//?#2D""6D7E/0$;//'$8#:{# )(#'#("'#&'#`),m(`%;//?#22""6273/0$;//'$8#:|# )(#'#("'#&'#`),m(`%;//?#28""6879/0$;//'$8#:}# )(#'#("'#&'#`),m(`%;//0#;&/'$8":~" )("'#&'#`),m(`%;&/0#;//'$8":~" )("'#&'#`),m(`%;=/T#$;G.) &;K.# &;F0/*;G.) &;K.# &;F&/,$;>/#$+#)(#'#("'#&'#`),m('4""5!7.A &4""5!7.5 &4""5!7.) &;3.# &;.'),m(`%%;//Q#;&/H$$;J.# &;K0)*;J.# &;K&/,$;&/#$+$)($'#(#'#("'#&'#/"!&,)`),m(`%;//]#;&/T$%$;J.# &;K0)*;J.# &;K&/"!&,)/1$;&/($8$:$!!)($'#(#'#("'#&'#`),m(';..G &2L""6L7M.; &4""5!7./ &4""5!7.# &;3'),m(`%2j""6j7k/J#4""5!7.5 &4""5!7.) &4""5!7/#$+")("'#&'#`),m(`%;N/M#28""6879/>$;O." &"/0$;S/'$8$:$ )($'#(#'#("'#&'#`),m(`%;N/d#28""6879/U$;O." &"/G$;S/>$;_/5$;l." &"/'$8&:& )(&'#(%'#($'#(#'#("'#&'#`),m(`%3""5$7.) &3""5#7/' 8!:!! )`),m(`%;P/]#%28""6879/,#;R/#$+")("'#&'#." &"/6$2:""6:7;/'$8#:# )(#'#("'#&'#`),m("$;+.) &;-.# &;Q/2#0/*;+.) &;-.# &;Q&&&#"),m('2<""6<7=.q &2>""6>7?.e &2@""6@7A.Y &2B""6B7C.M &2D""6D7E.A &22""6273.5 &26""6677.) &24""6475'),m('%$;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E0e*;+._ &;-.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E&/& 8!:! )'),m(`%;T/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:! )"),m(`%$%;V/2#2J""6J7K/#$+")("'#&'#0<*%;V/2#2J""6J7K/#$+")("'#&'#&/D#;W/;$2J""6J7K." &"/'$8#:# )(#'#("'#&'#`),m('$4""5!7/,#0)*4""5!7&&&#'),m(`%4$""5!7%/?#$4""5!70)*4""5!7&/#$+")("'#&'#`),m(`%2l""6l7m/?#;Y/6$2n""6n7o/'$8#:# )(#'#("'#&'#`),m(`%%;Z/#28""6879/$;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+-)(-'#(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/#;Z/$28""6879/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+,)(,'#(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/#;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/t#;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%2""67/\\#;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+&)(&'#(%'#($'#(#'#("'#&'#. &%2""67/D#;Z/;$28""6879/,$;[/#$+$)($'#(#'#("'#&'#. &%2""67/,#;[/#$+")("'#&'#. &%2""67/,#;Z/#$+")("'#&'#. &%;Z/#2""67/$;Z/$28""6879/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$++)(+'#(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$2""67/t$;Z/k$28""6879/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+*)(*'#()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/k$2""67/\\$;Z/S$28""6879/D$;Z/;$28""6879/,$;[/#$+))()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/z$%28""6879/,#;Z/#$+")("'#&'#." &"/S$2""67/D$;Z/;$28""6879/,$;[/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;[/#$+')(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/b$%28""6879/,#;Z/#$+")("'#&'#." &"/;$2""67/,$;Z/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#. &%;Z/#%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/$%28""6879/,#;Z/#$+")("'#&'#." &"/Y$%28""6879/,#;Z/#$+")("'#&'#." &"/2$2""67/#$+()(('#(''#(&'#(%'#($'#(#'#("'#&'#/& 8!:! )`),m(`%;#/M#;#." &"/?$;#." &"/1$;#." &"/#$+$)($'#(#'#("'#&'#`),m(`%;Z/;#28""6879/,$;Z/#$+#)(#'#("'#&'#.# &;\\`),m(`%;]/o#2J""6J7K/\`$;]/W$2J""6J7K/H$;]/?$2J""6J7K/0$;]/'$8':' )(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%2""67/2#4""5!7/#$+")("'#&'#. &%2""67/;#4""5!7/,$;!/#$+#)(#'#("'#&'#.j &%2""67/5#;!/,$;!/#$+#)(#'#("'#&'#.B &%4""5!7/,#;!/#$+")("'#&'#.# &;!`),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:!! )`),m(`$%22""6273/,#;\`/#$+")("'#&'#0<*%22""6273/,#;\`/#$+")("'#&'#&`),m(";a.A &;b.; &;c.5 &;d./ &;e.) &;f.# &;g"),m(`%3""5*7/a#3""5#7.G &3""5#7.; &3""5$7./ &3""5#7.# &;6/($8":"! )("'#&'#`),m(`%3""5%7/I#3""5%7./ &3""5"7.# &;6/($8":"! )("'#&'#`),m(`%3""5'7/1#;/($8":"! )("'#&'#`),m(`%3""5$7/1#;/($8":"! )("'#&'#`),m(`%3""5&7/1#;T/($8":"! )("'#&'#`),m(`%3""5"7/N#%2>""6>7?/,#;6/#$+")("'#&'#." &"/'$8":" )("'#&'#`),m(`%;h/P#%2>""6>7?/,#;i/#$+")("'#&'#." &"/)$8":""! )("'#&'#`),m('%$;j/&#0#*;j&&&#/"!&,)'),m('%$;j/&#0#*;j&&&#/"!&,)'),m(";k.) &;+.# &;-"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &28""6879.A &2<""6<7=.5 &2@""6@7A.) &2B""6B7C'),m(`%26""6677/n#;m/e$$%2<""6<7=/,#;m/#$+")("'#&'#0<*%2<""6<7=/,#;m/#$+")("'#&'#&/#$+#)(#'#("'#&'#`),m(`%;n/A#2>""6>7?/2$;o/)$8#:#"" )(#'#("'#&'#`),m("$;p.) &;+.# &;-/2#0/*;p.) &;+.# &;-&&&#"),m("$;p.) &;+.# &;-0/*;p.) &;+.# &;-&"),m('2l""6l7m.e &2n""6n7o.Y &24""6475.M &26""6677.A &28""6879.5 &2@""6@7A.) &2B""6B7C'),m(";.# &;r"),m(`%;/G#;'/>$;s/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m(";M.# &;t"),m(`%;/E#28""6879/6$;u.# &;x/'$8#:# )(#'#("'#&'#`),m(`%;v.# &;w/J#%26""6677/,#;/#$+")("'#&'#." &"/#$+")("'#&'#`),m(`%2""67/:#;/1$;w." &"/#$+#)(#'#("'#&'#`),m(`%24""6475/,#;{/#$+")("'#&'#`),m(`%;z/3#$;y0#*;y&/#$+")("'#&'#`),m(";*.) &;+.# &;-"),m(';+. &;-. &22""6273.} &26""6677.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%;|/e#$%24""6475/,#;|/#$+")("'#&'#0<*%24""6475/,#;|/#$+")("'#&'#&/#$+")("'#&'#`),m(`%$;~0#*;~&/e#$%22""6273/,#;}/#$+")("'#&'#0<*%22""6273/,#;}/#$+")("'#&'#&/#$+")("'#&'#`),m("$;~0#*;~&"),m(';+.w &;-.q &28""6879.e &2:""6:7;.Y &2<""6<7=.M &2>""6>7?.A &2@""6@7A.5 &2B""6B7C.) &2D""6D7E'),m(`%%;"/#$;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K0M*;".G &;!.A &2@""6@7A.5 &2F""6F7G.) &2J""6J7K&/#$+")("'#&'#/& 8!:! )`),m(";.# &;"),m(`%%;O/2#2:""6:7;/#$+")("'#&'#." &"/,#;S/#$+")("'#&'#." &"`),m('$;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A/#0*;+. &;-.} &2B""6B7C.q &2D""6D7E.e &22""6273.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A&&&#'),m("$;y0#*;y&"),m(`%3""5#7/q#24""6475/b$$;!/&#0#*;!&&&#/L$2J""6J7K/=$$;!/&#0#*;!&&&#/'$8%:% )(%'#($'#(#'#("'#&'#`),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m('2""67'),m("%;.Y &;.S &;.M &;.G &;.A &;.; &;.5 &;./ &;.) &;.# &;6/& 8!:! )"),m(`%;/G#;'/>$;/5$;'/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%;/' 8!:!! )"),m(`%;!/5#;!/,$;!/#$+#)(#'#("'#&'#`),m("%$;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(0G*;*.A &;+.; &;-.5 &;3./ &;4.) &;'.# &;(&/& 8!:! )"),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;9/N#%2:""6:7;/,#;9/#$+")("'#&'#." &"/'$8":" )("'#&'#`),m(`%;:.c &%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#/& 8!:! )`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;." &"/>#;@/5$;M/,$;?/#$+$)($'#(#'#("'#&'#`),m(`%%;6/Y#$%;./,#;6/#$+")("'#&'#06*%;./,#;6/#$+")("'#&'#&/#$+")("'#&'#.# &;H/' 8!:!! )`),m(";.) &;.# &;"),m(`%3""5!7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m(`%3""5'7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%2""67/o#%2J""6J7K/M#;!." &"/?$;!." &"/1$;!." &"/#$+$)($'#(#'#("'#&'#." &"/'$8":" )("'#&'#`),m(`%;6/J#%;</,#;/#$+")("'#&'#." &"/)$8":""! )("'#&'#`),m(";6.) &;T.# &;H"),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3""5&7.G &3""5'7.; &3""5$7./ &3""5%7.# &;6/& 8!:! )`),m(";.# &;"),m(`%3""5(7/M#;</D$3""5(7./ &3""5(7.# &;6/#$+#)(#'#("'#&'#`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/& 8!:! )"),m(`%;/k#;;/b$;/Y$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.# &;"),m('3""5$7.S &3""5%7.G &3""5%7.; &3""5%7./ &3""5+7.# &;'),m(`3""5'7./ &3""5)7.# &;`),m(";6.# &;"),m(`%3""5"7/,#;6/#$+")("'#&'#`),m(";.# &;6"),m(`%;6/5#;</,$;/#$+#)(#'#("'#&'#`),m(";6.# &;H"),m(`%;/5#;./,$;/#$+#)(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/' 8!:!! )"),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(`%%;7/e#$%2J""6J7K/,#;7/#$+")("'#&'#0<*%2J""6J7K/,#;7/#$+")("'#&'#&/#$+")("'#&'#/"!&,)`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(";.# &;"),m(`%3""5#7/:#;</1$;6/($8#:#! )(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m("%;/' 8!:!! )"),m(`%$;0#*;&/x#;@/o$;M/f$;?/]$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8%:% )(%'#($'#(#'#("'#&'#`),m(";"),m(`%3""5&7/k#;./b$;/Y$$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#.# &;`),m(`%;6/k#;./b$;/Y$$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(`%;6/;#;</2$;6.# &;H/#$+#)(#'#("'#&'#`),m(";.G &;.A &;.; &;.5 &;./ &;.) &;.# &;"),m(`%3""5%7/5#;</,$;/#$+#)(#'#("'#&'#`),m("%;I/' 8!:!! )"),m(`%3""5&7/#;</$;D/$;/|$$%$;'/&#0#*;'&&&#/,#;/#$+")("'#&'#0C*%$;'/&#0#*;'&&&#/,#;/#$+")("'#&'#&/,$;E/#$+&)(&'#(%'#($'#(#'#("'#&'#`),m(";t.# &;w"),m(`%3""5%7/5#;</,$;/#$+#)(#'#("'#&'#`),m("%;I/' 8!:!! )"),m(`%3""5&7/:#;</1$;I/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/]#;</T$%3""5$7/& 8!:! ).4 &%3""5%7/& 8!:! )/#$+#)(#'#("'#&'#`),m(`%3""5)7/R#;</I$3""5#7./ &3""5(7.# &;6/($8#:#! )(#'#("'#&'#`),m(`%3""5#7/#;</$;D/$%;/e#$%2D""6D7E/,#;/#$+")("'#&'#0<*%2D""6D7E/,#;/#$+")("'#&'#&/#$+")("'#&'#/,$;E/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3""5(7./ &3""5$7.# &;6/' 8!:!! )`),m(`%;6/Y#$%;A/,#;6/#$+")("'#&'#06*%;A/,#;6/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/G#;./>$;/5$;./,$;/#$+%)(%'#($'#(#'#("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%;/]#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;L.O &;.I &%;@." &"/:#;t/1$;?." &"/#$+#)(#'#("'#&'#/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(`%;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m("%;/& 8!:! )"),m(`%3""5(7/:#;</1$;6/($8#:#! )(#'#("'#&'#.g &%3""5&7/:#;</1$;6/($8#:#! )(#'#("'#&'#.: &%3""5*7/& 8!:! ).# &;`),m(`%%;6/k#$%;A/2#;6/)$8":""$ )("'#&'#0<*%;A/2#;6/)$8":""$ )("'#&'#&/)$8":""! )("'#&'#." &"/' 8!:!! )`),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m("%$;!/&#0#*;!&&&#/' 8!:!! )"),m(`%;/Y#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%3""5&7.; &3""5'7./ &3""5*7.# &;6/& 8!:! )`),m(`%3""5&7/:#;</1$;/($8#:#! )(#'#("'#&'#.} &%3""5'7/:#;</1$;/($8#:#! )(#'#("'#&'#.P &%3""5+7/:#;</1$;/($8#:#! )(#'#("'#&'#.# &;`),m(`3""5+7.k &3""5)7._ &3""5(7.S &3""5'7.G &3""5&7.; &3""5*7./ &3""5)7.# &;6`),m(';1." &"'),m(`%%;6/k#$%;A/2#;6/)$8":""$ )("'#&'#0<*%;A/2#;6/)$8":""$ )("'#&'#&/)$8":""! )("'#&'#." &"/' 8!:!! )`),m(`%;L.# &;/]#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/'$8":" )("'#&'#`),m(";.# &;"),m(`%;/Y#$%;A/,#;/#$+")("'#&'#06*%;A/,#;/#$+")("'#&'#&/#$+")("'#&'#`),m(`%;/k#;./b$;/Y$$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.; &;.5 &;./ &;.) &;.# &;"),m(`%3""5#7/:#;</1$;/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/:#;</1$;T/($8#:#! )(#'#("'#&'#`),m(`%3""5(7/F#;</=$;\\.) &;Y.# &;X/($8#:#! )(#'#("'#&'#`),m(`%3""5&7/:#;</1$;6/($8#:#! )(#'#("'#&'#`),m(`%3""5%7/A#;</8$$;!0#*;!&/($8#:#! )(#'#("'#&'#`),m(`%;/G#;;/>$;6/5$;;/,$;/#$+%)(%'#($'#(#'#("'#&'#`),m(`%3""5#7.# &;6/' 8!:!! )`),m(`%3""5#7.G &3""5#7.; &3""5#7./ &3""5$7.# &;6/' 8!:!! )`),m(`%;/D#%;C/,#;/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;U.) &;\\.# &;X/& 8!:! )"),m(`%%;!." &"/[#;!." &"/M$;!." &"/?$;!." &"/1$;!." &"/#$+%)(%'#($'#(#'#("'#&'#/' 8!:!! )`),m(`%%;!/?#;!." &"/1$;!." &"/#$+#)(#'#("'#&'#/' 8!:!! )`),m(";"),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(";.# &;"),m(`%2""67/L#;</C$2""67.) &2""67/($8#:#! )(#'#("'#&'#`),m(`%;/^#$%;B/,#;/#$+")("'#&'#06*%;B/,#;/#$+")("'#&'#&/($8":"!!)("'#&'#`),m(`%;6/5#;0/,$;/#$+#)(#'#("'#&'#`),m("$;2.) &;4.# &;.0/*;2.) &;4.# &;.&"),m("$;%0#*;%&"),m(`%;/;#28""6879/,$;/#$+#)(#'#("'#&'#`),m(`%3""5%7.) &3""5$7/' 8!:!! )`),m(`%;/J#%28""6879/,#;^/#$+")("'#&'#." &"/#$+")("'#&'#`),m("%;\\.) &;X.# &;/' 8!:!! )"),m(';".S &;!.M &2F""6F7G.A &2J""6J7K.5 &2H""6H7I.) &2N""6N7O'),m('2L""6L7M. &2B""6B7C. &2<""6<7=.} &2R""6R7S.q &2T""6T7U.e &2V""6V7W.Y &2P""6P7Q.M &2@""6@7A.A &2D""6D7E.5 &22""6273.) &2>""6>7?'),m(`%;/b#28""6879/S$;/J$%2""67/,#;/#$+")("'#&'#." &"/#$+$)($'#(#'#("'#&'#`),m(`%3""5%7.) &3""5$7/' 8!:!! )`),m(`%3""5#7.6 &3""5#7.* &$;+0#*;+&/' 8!:!! )`),m(`%;/#2F""6F7G/x$;/o$2F""6F7G/\`$;/W$2F""6F7G/H$;/?$2F""6F7G/0$;/'$8):) )()'#(('#(''#(&'#(%'#($'#(#'#("'#&'#`),m(`%;#/>#;#/5$;#/,$;#/#$+$)($'#(#'#("'#&'#`),m(`%;/,#;/#$+")("'#&'#`),m(`%;/5#;/,$;/#$+#)(#'#("'#&'#`),m(`%;q/T#$;m0#*;m&/D$%; /,#;/#$+")("'#&'#." &"/#$+#)(#'#("'#&'#`),m(`%2""67.) &2""67/w#;0/n$;/e$$%;B/2#;.# &;/#$+")("'#&'#0<*%;B/2#;.# &;/#$+")("'#&'#&/#$+$)($'#(#'#("'#&'#`),m(";.# &;L"),m(`%2""67/5#;</,$;/#$+#)(#'#("'#&'#`),m(`%;D/S#;,/J$2:""6:7;/;$;,.# &;T/,$;E/#$+%)(%'#($'#(#'#("'#&'#`)];let l=0,c=0;const u=[{line:1,column:1}];let d,h=0,f=[],g=0;if(t.startRule!==void 0){if(!(t.startRule in i))throw new Error(`Can't start parsing from rule "`+t.startRule+'".');s=i[t.startRule]}function v(){return e.substring(c,l)}function E(){return b(c,l)}function p(R,P){return{type:"literal",text:R,ignoreCase:P}}function y(R,P,B){return{type:"class",parts:R,inverted:P,ignoreCase:B}}function C(R){let P,B=u[R];if(B)return B;for(P=R-1;!u[P];)P--;for(B=u[P],B={line:B.line,column:B.column};P<R;)e.charCodeAt(P)===10?(B.line++,B.column=1):B.column++,P++;return u[R]=B,B}function b(R,P){const B=C(R),_=C(P);return{source:n,start:{offset:R,line:B.line,column:B.column},end:{offset:P,line:_.line,column:_.column}}}function x(R){l<h||(l>h&&(h=l,f=[]),f.push(R))}function m(R){return R.split("").map(P=>P.charCodeAt(0)-32)}if(t.data={},d=function R(P){const B=a[P];let _=0;const q=[];let L=B.length;const F=[],M=[];let $;for(;;){for(;_<L;)switch(B[_]){case 0:M.push(o[B[_+1]]),_+=2;break;case 1:M.push(void 0),_++;break;case 2:M.push(null),_++;break;case 3:M.push(r),_++;break;case 4:M.push([]),_++;break;case 5:M.push(l),_++;break;case 6:M.pop(),_++;break;case 7:l=M.pop(),_++;break;case 8:M.length-=B[_+1],_+=2;break;case 9:M.splice(-2,1),_++;break;case 10:M[M.length-2].push(M.pop()),_++;break;case 11:M.push(M.splice(M.length-B[_+1],B[_+1])),_+=2;break;case 12:M.push(e.substring(M.pop(),l)),_++;break;case 13:F.push(L),q.push(_+3+B[_+1]+B[_+2]),M[M.length-1]?(L=_+3+B[_+1],_+=3):(L=_+3+B[_+1]+B[_+2],_+=3+B[_+1]);break;case 14:F.push(L),q.push(_+3+B[_+1]+B[_+2]),M[M.length-1]===r?(L=_+3+B[_+1],_+=3):(L=_+3+B[_+1]+B[_+2],_+=3+B[_+1]);break;case 15:F.push(L),q.push(_+3+B[_+1]+B[_+2]),M[M.length-1]!==r?(L=_+3+B[_+1],_+=3):(L=_+3+B[_+1]+B[_+2],_+=3+B[_+1]);break;case 16:M[M.length-1]!==r?(F.push(L),q.push(_),L=_+2+B[_+1],_+=2):_+=2+B[_+1];break;case 17:F.push(L),q.push(_+3+B[_+1]+B[_+2]),e.length>l?(L=_+3+B[_+1],_+=3):(L=_+3+B[_+1]+B[_+2],_+=3+B[_+1]);break;case 18:F.push(L),q.push(_+4+B[_+2]+B[_+3]),e.substr(l,o[B[_+1]].length)===o[B[_+1]]?(L=_+4+B[_+2],_+=4):(L=_+4+B[_+2]+B[_+3],_+=4+B[_+2]);break;case 19:F.push(L),q.push(_+4+B[_+2]+B[_+3]),e.substr(l,o[B[_+1]].length).toLowerCase()===o[B[_+1]]?(L=_+4+B[_+2],_+=4):(L=_+4+B[_+2]+B[_+3],_+=4+B[_+2]);break;case 20:F.push(L),q.push(_+4+B[_+2]+B[_+3]),o[B[_+1]].test(e.charAt(l))?(L=_+4+B[_+2],_+=4):(L=_+4+B[_+2]+B[_+3],_+=4+B[_+2]);break;case 21:M.push(e.substr(l,B[_+1])),l+=B[_+1],_+=2;break;case 22:M.push(o[B[_+1]]),l+=o[B[_+1]].length,_+=2;break;case 23:M.push(r),g===0&&x(o[B[_+1]]),_+=2;break;case 24:c=M[M.length-1-B[_+1]],_+=2;break;case 25:c=l,_++;break;case 26:$=B.slice(_+4,_+4+B[_+3]).map(function(z){return M[M.length-1-z]}),M.splice(M.length-B[_+2],B[_+2],o[B[_+1]].apply(null,$)),_+=4+B[_+3];break;case 27:M.push(R(B[_+1])),_+=2;break;case 28:g++,_++;break;case 29:g--,_++;break;default:throw new Error("Invalid opcode: "+B[_]+".")}if(!(F.length>0))break;L=F.pop(),_=q.pop()}return M[0]}(s),d!==r&&l===e.length)return d;throw d!==r&&l<e.length&&x({type:"end"}),k=f,N=h<e.length?e.charAt(h):null,H=h<e.length?b(h,h+1):b(h,h),new _a(_a.buildMessage(k,N),k,N,H);var k,N,H};var zt;(function(e){e.parse=function(t,r){const n={startRule:r};try{T7(t,n)}catch{n.data=-1}return n.data},e.nameAddrHeaderParse=function(t){const r=e.parse(t,"Name_Addr_Header");return r!==-1?r:void 0},e.URIParse=function(t){const r=e.parse(t,"SIP_URI");return r!==-1?r:void 0}})(zt=zt||(zt={}));const I7={100:"Trying",180:"Ringing",181:"Call Is Being Forwarded",182:"Queued",183:"Session Progress",199:"Early Dialog Terminated",200:"OK",202:"Accepted",204:"No Notification",300:"Multiple Choices",301:"Moved Permanently",302:"Moved Temporarily",305:"Use Proxy",380:"Alternative Service",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",410:"Gone",412:"Conditional Request Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Unsupported URI Scheme",417:"Unknown Resource-Priority",420:"Bad Extension",421:"Extension Required",422:"Session Interval Too Small",423:"Interval Too Brief",428:"Use Identity Header",429:"Provide Referrer Identity",430:"Flow Failed",433:"Anonymity Disallowed",436:"Bad Identity-Info",437:"Unsupported Certificate",438:"Invalid Identity Header",439:"First Hop Lacks Outbound Support",440:"Max-Breadth Exceeded",469:"Bad Info Package",470:"Consent Needed",478:"Unresolvable Destination",480:"Temporarily Unavailable",481:"Call/Transaction Does Not Exist",482:"Loop Detected",483:"Too Many Hops",484:"Address Incomplete",485:"Ambiguous",486:"Busy Here",487:"Request Terminated",488:"Not Acceptable Here",489:"Bad Event",491:"Request Pending",493:"Undecipherable",494:"Security Agreement Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Server Time-out",505:"Version Not Supported",513:"Message Too Large",580:"Precondition Failure",600:"Busy Everywhere",603:"Decline",604:"Does Not Exist Anywhere",606:"Not Acceptable"};function ao(e,t=32){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*t).toString(t);return r}function Vh(e){return I7[e]||""}function qh(){return ao(10)}function ni(e){const t={"Call-Id":"Call-ID",Cseq:"CSeq","Min-Se":"Min-SE",Rack:"RAck",Rseq:"RSeq","Www-Authenticate":"WWW-Authenticate"},r=e.toLowerCase().replace(/_/g,"-").split("-"),n=r.length;let i="";for(let s=0;s<n;s++)s!==0&&(i+="-"),i+=r[s].charAt(0).toUpperCase()+r[s].substring(1);return t[i]&&(i=t[i]),i}function bc(e){return encodeURIComponent(e).replace(/%[A-F\d]{2}/g,"U").length}class eT{constructor(){this.headers={}}addHeader(t,r){const n={raw:r};t=ni(t),this.headers[t]?this.headers[t].push(n):this.headers[t]=[n]}getHeader(t){const r=this.headers[ni(t)];if(r)return r[0]?r[0].raw:void 0}getHeaders(t){const r=this.headers[ni(t)],n=[];if(!r)return[];for(const i of r)n.push(i.raw);return n}hasHeader(t){return!!this.headers[ni(t)]}parseHeader(t,r=0){if(t=ni(t),!this.headers[t]||r>=this.headers[t].length)return;const n=this.headers[t][r],i=n.raw;if(n.parsed)return n.parsed;const s=zt.parse(i,t.replace(/-/g,"_"));return s===-1?void this.headers[t].splice(r,1):(n.parsed=s,s)}s(t,r=0){return this.parseHeader(t,r)}setHeader(t,r){this.headers[ni(t)]=[{raw:r}]}toString(){return this.data}}class Da extends eT{constructor(){super()}}class Ps extends eT{constructor(){super()}}class fo{constructor(t,r,n,i,s,o,a){this.headers={},this.extraHeaders=[],this.options=fo.getDefaultOptions(),s&&(this.options=Object.assign(Object.assign({},this.options),s),this.options.optionTags&&this.options.optionTags.length&&(this.options.optionTags=this.options.optionTags.slice()),this.options.routeSet&&this.options.routeSet.length&&(this.options.routeSet=this.options.routeSet.slice())),o&&o.length&&(this.extraHeaders=o.slice()),a&&(this.body={body:a.content,contentType:a.contentType}),this.method=t,this.ruri=r.clone(),this.fromURI=n.clone(),this.fromTag=this.options.fromTag?this.options.fromTag:qh(),this.from=fo.makeNameAddrHeader(this.fromURI,this.options.fromDisplayName,this.fromTag),this.toURI=i.clone(),this.toTag=this.options.toTag,this.to=fo.makeNameAddrHeader(this.toURI,this.options.toDisplayName,this.toTag),this.callId=this.options.callId?this.options.callId:this.options.callIdPrefix+ao(15),this.cseq=this.options.cseq,this.setHeader("route",this.options.routeSet),this.setHeader("via",""),this.setHeader("to",this.to.toString()),this.setHeader("from",this.from.toString()),this.setHeader("cseq",this.cseq+" "+this.method),this.setHeader("call-id",this.callId),this.setHeader("max-forwards","70")}static getDefaultOptions(){return{callId:"",callIdPrefix:"",cseq:1,toDisplayName:"",toTag:"",fromDisplayName:"",fromTag:"",forceRport:!1,hackViaTcp:!1,optionTags:["outbound"],routeSet:[],userAgentString:"sip.js",viaHost:""}}static makeNameAddrHeader(t,r,n){const i={};return n&&(i.tag=n),new Or(t,r,i)}getHeader(t){const r=this.headers[ni(t)];if(r){if(r[0])return r[0]}else{const n=new RegExp("^\\s*"+t+"\\s*:","i");for(const i of this.extraHeaders)if(n.test(i))return i.substring(i.indexOf(":")+1).trim()}}getHeaders(t){const r=[],n=this.headers[ni(t)];if(n)for(const i of n)r.push(i);else{const i=new RegExp("^\\s*"+t+"\\s*:","i");for(const s of this.extraHeaders)i.test(s)&&r.push(s.substring(s.indexOf(":")+1).trim())}return r}hasHeader(t){if(this.headers[ni(t)])return!0;{const r=new RegExp("^\\s*"+t+"\\s*:","i");for(const n of this.extraHeaders)if(r.test(n))return!0}return!1}setHeader(t,r){this.headers[ni(t)]=r instanceof Array?r:[r]}setViaHeader(t,r){this.options.hackViaTcp&&(r="TCP");let n="SIP/2.0/"+r;n+=" "+this.options.viaHost+";branch="+t,this.options.forceRport&&(n+=";rport"),this.setHeader("via",n),this.branch=t}toString(){let t="";t+=this.method+" "+this.ruri.toRaw()+` SIP/2.0\r
`;for(const r in this.headers)if(this.headers[r])for(const n of this.headers[r])t+=r+": "+n+`\r
`;for(const r of this.extraHeaders)t+=r.trim()+`\r
`;return t+="Supported: "+this.options.optionTags.join(", ")+`\r
`,t+="User-Agent: "+this.options.userAgentString+`\r
`,this.body?typeof this.body=="string"?(t+="Content-Length: "+bc(this.body)+`\r
\r
`,t+=this.body):this.body.body&&this.body.contentType?(t+="Content-Type: "+this.body.contentType+`\r
`,t+="Content-Length: "+bc(this.body.body)+`\r
\r
`,t+=this.body.body):t+=`Content-Length: 0\r
\r
`:t+=`Content-Length: 0\r
\r
`,t}}function tT(e){return e==="application/sdp"?"session":"render"}function Qd(e){const t=typeof e=="string"?e:e.body,r=typeof e=="string"?"application/sdp":e.contentType;return{contentDisposition:tT(r),contentType:r,content:t}}function rT(e){return!(!e||typeof e.content!="string"||typeof e.contentType!="string"||e.contentDisposition!==void 0)||typeof e.contentDisposition=="string"}function Zl(e){let t,r,n;if(e instanceof Da&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,r=e.parseHeader("Content-Type"),n=e.body}if(e instanceof Ps&&e.body){const i=e.parseHeader("Content-Disposition");t=i?i.type:void 0,r=e.parseHeader("Content-Type"),n=e.body}if(e instanceof fo&&e.body)if(t=e.getHeader("Content-Disposition"),r=e.getHeader("Content-Type"),typeof e.body=="string"){if(!r)throw new Error("Header content type header does not equal body content type.");n=e.body}else{if(r&&r!==e.body.contentType)throw new Error("Header content type header does not equal body content type.");r=e.body.contentType,n=e.body.body}if(rT(e)&&(t=e.contentDisposition,r=e.contentType,n=e.content),n){if(r&&!t&&(t=tT(r)),!t)throw new Error("Content disposition undefined.");if(!r)throw new Error("Content type undefined.");return{contentDisposition:t,contentType:r,content:n}}}var gn,pe;(function(e){e.Initial="Initial",e.Early="Early",e.AckWait="AckWait",e.Confirmed="Confirmed",e.Terminated="Terminated"})(gn=gn||(gn={})),function(e){e.Initial="Initial",e.HaveLocalOffer="HaveLocalOffer",e.HaveRemoteOffer="HaveRemoteOffer",e.Stable="Stable",e.Closed="Closed"}(pe=pe||(pe={}));const R7=500,A7=5e3,tr={T1:R7,T2:4e3,T4:A7,TIMER_B:32e3,TIMER_D:0,TIMER_F:32e3,TIMER_H:32e3,TIMER_I:0,TIMER_J:0,TIMER_K:0,TIMER_L:32e3,TIMER_M:32e3,TIMER_N:32e3,PROVISIONAL_RESPONSE_INTERVAL:6e4};class hs extends Bo{constructor(t){super(t||"Transaction state error.")}}var be;(function(e){e.ACK="ACK",e.BYE="BYE",e.CANCEL="CANCEL",e.INFO="INFO",e.INVITE="INVITE",e.MESSAGE="MESSAGE",e.NOTIFY="NOTIFY",e.OPTIONS="OPTIONS",e.REGISTER="REGISTER",e.UPDATE="UPDATE",e.SUBSCRIBE="SUBSCRIBE",e.PUBLISH="PUBLISH",e.REFER="REFER",e.PRACK="PRACK"})(be=be||(be={}));const vs=[be.ACK,be.BYE,be.CANCEL,be.INFO,be.INVITE,be.MESSAGE,be.NOTIFY,be.OPTIONS,be.PRACK,be.REFER,be.REGISTER,be.SUBSCRIBE];class nT{constructor(t){this.incomingMessageRequest=t}get request(){return this.incomingMessageRequest.message}accept(t){return this.incomingMessageRequest.accept(t),Promise.resolve()}reject(t){return this.incomingMessageRequest.reject(t),Promise.resolve()}}class Wg{constructor(t){this.incomingNotifyRequest=t}get request(){return this.incomingNotifyRequest.message}accept(t){return this.incomingNotifyRequest.accept(t),Promise.resolve()}reject(t){return this.incomingNotifyRequest.reject(t),Promise.resolve()}}class k7{constructor(t,r){this.incomingReferRequest=t,this.session=r}get referTo(){const t=this.incomingReferRequest.message.parseHeader("refer-to");if(!(t instanceof Or))throw new Error("Failed to parse Refer-To header.");return t}get referredBy(){return this.incomingReferRequest.message.getHeader("referred-by")}get replaces(){const t=this.referTo.uri.getHeader("replaces");return t instanceof Array?t[0]:t}get request(){return this.incomingReferRequest.message}accept(t={statusCode:202}){return this.incomingReferRequest.accept(t),Promise.resolve()}reject(t){return this.incomingReferRequest.reject(t),Promise.resolve()}makeInviter(t){if(this.inviter)return this.inviter;const r=this.referTo.uri.clone();r.clearHeaders();const n=((t=t||{}).extraHeaders||[]).slice(),i=this.replaces;i&&n.push("Replaces: "+decodeURIComponent(i));const s=this.referredBy;return s&&n.push("Referred-By: "+s),t.extraHeaders=n,this.inviter=this.session.userAgent._makeInviter(r,t),this.inviter._referred=this.session,this.session._referral=this.inviter,this.inviter}}var X,mn;(function(e){e.Initial="Initial",e.Establishing="Establishing",e.Established="Established",e.Terminating="Terminating",e.Terminated="Terminated"})(X=X||(X={}));class Tc{constructor(t,r={}){this.pendingReinvite=!1,this.pendingReinviteAck=!1,this._state=X.Initial,this.delegate=r.delegate,this._stateEventEmitter=new wc,this._userAgent=t}dispose(){switch(this.logger.log(`Session ${this.id} in state ${this._state} is being disposed`),delete this.userAgent._sessions[this.id],this._sessionDescriptionHandler&&this._sessionDescriptionHandler.close(),this.state){case X.Initial:case X.Establishing:break;case X.Established:return new Promise(t=>{this._bye({onAccept:()=>t(),onRedirect:()=>t(),onReject:()=>t()})});case X.Terminating:case X.Terminated:break;default:throw new Error("Unknown state.")}return Promise.resolve()}get assertedIdentity(){return this._assertedIdentity}get dialog(){return this._dialog}get id(){return this._id}get replacee(){return this._replacee}get sessionDescriptionHandler(){return this._sessionDescriptionHandler}get sessionDescriptionHandlerFactory(){return this.userAgent.configuration.sessionDescriptionHandlerFactory}get sessionDescriptionHandlerModifiers(){return this._sessionDescriptionHandlerModifiers||[]}set sessionDescriptionHandlerModifiers(t){this._sessionDescriptionHandlerModifiers=t.slice()}get sessionDescriptionHandlerOptions(){return this._sessionDescriptionHandlerOptions||{}}set sessionDescriptionHandlerOptions(t){this._sessionDescriptionHandlerOptions=Object.assign({},t)}get sessionDescriptionHandlerModifiersReInvite(){return this._sessionDescriptionHandlerModifiersReInvite||[]}set sessionDescriptionHandlerModifiersReInvite(t){this._sessionDescriptionHandlerModifiersReInvite=t.slice()}get sessionDescriptionHandlerOptionsReInvite(){return this._sessionDescriptionHandlerOptionsReInvite||{}}set sessionDescriptionHandlerOptionsReInvite(t){this._sessionDescriptionHandlerOptionsReInvite=Object.assign({},t)}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get userAgent(){return this._userAgent}bye(t={}){let r="Session.bye() may only be called if established session.";switch(this.state){case X.Initial:typeof this.cancel=="function"?(r+=" However Inviter.invite() has not yet been called.",r+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(r+=" However Invitation.accept() has not yet been called.",r+=" Perhaps you should have called Invitation.reject()?");break;case X.Establishing:typeof this.cancel=="function"?(r+=" However a dialog does not yet exist.",r+=" Perhaps you should have called Inviter.cancel()?"):typeof this.reject=="function"&&(r+=" However Invitation.accept() has not yet been called (or not yet resolved).",r+=" Perhaps you should have called Invitation.reject()?");break;case X.Established:{const n=t.requestDelegate,i=this.copyRequestOptions(t.requestOptions);return this._bye(n,i)}case X.Terminating:r+=" However this session is already terminating.",typeof this.cancel=="function"?r+=" Perhaps you have already called Inviter.cancel()?":typeof this.reject=="function"&&(r+=" Perhaps you have already called Session.bye()?");break;case X.Terminated:r+=" However this session is already terminated.";break;default:throw new Error("Unknown state")}return this.logger.error(r),Promise.reject(new Error(`Invalid session state ${this.state}`))}info(t={}){if(this.state!==X.Established)return this.logger.error("Session.info() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const r=t.requestDelegate,n=this.copyRequestOptions(t.requestOptions);return this._info(r,n)}invite(t={}){if(this.logger.log("Session.invite"),this.state!==X.Established)return Promise.reject(new Error(`Invalid session state ${this.state}`));if(this.pendingReinvite)return Promise.reject(new Gg("Reinvite in progress. Please wait until complete, then try again."));this.pendingReinvite=!0,t.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiersReInvite=t.sessionDescriptionHandlerModifiers),t.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptionsReInvite=t.sessionDescriptionHandlerOptions);const r={onAccept:s=>{const o=Zl(s.message);if(!o)return this.logger.error("Received 2xx response to re-INVITE without a session description"),this.ackAndBye(s,400,"Missing session description"),this.stateTransition(X.Terminated),void(this.pendingReinvite=!1);if(t.withoutSdp){const a={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setOfferAndGetAnswer(o,a).then(l=>{s.ack({body:l})}).catch(l=>{this.logger.error("Failed to handle offer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state===X.Terminated?s.ack():(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(X.Terminated))}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}else{const a={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.setAnswer(o,a).then(()=>{s.ack()}).catch(l=>{this.logger.error("Failed to handle answer in 2xx response to re-INVITE"),this.logger.error(l.message),this.state!==X.Terminated?(this.ackAndBye(s,488,"Bad Media Description"),this.stateTransition(X.Terminated)):s.ack()}).then(()=>{this.pendingReinvite=!1,t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(s)})}},onProgress:s=>{},onRedirect:s=>{},onReject:s=>{this.logger.warn("Received a non-2xx response to re-INVITE"),this.pendingReinvite=!1,t.withoutSdp?t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s):this.rollbackOffer().catch(o=>{if(this.logger.error("Failed to rollback offer on non-2xx response to re-INVITE"),this.logger.error(o.message),this.state!==X.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const a=[];a.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:a}),this.stateTransition(X.Terminated)}}).then(()=>{t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(s)})},onTrying:s=>{}},n=t.requestOptions||{};if(n.extraHeaders=(n.extraHeaders||[]).slice(),n.extraHeaders.push("Allow: "+vs.toString()),n.extraHeaders.push("Contact: "+this._contact),t.withoutSdp){if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return Promise.resolve(this.dialog.invite(r,n))}const i={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};return this.getOffer(i).then(s=>{if(!this.dialog)throw this.pendingReinvite=!1,new Error("Dialog undefined.");return n.body=s,this.dialog.invite(r,n)}).catch(s=>{throw this.logger.error(s.message),this.logger.error("Failed to send re-INVITE"),this.pendingReinvite=!1,s})}message(t={}){if(this.state!==X.Established)return this.logger.error("Session.message() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));const r=t.requestDelegate,n=this.copyRequestOptions(t.requestOptions);return this._message(r,n)}refer(t,r={}){if(this.state!==X.Established)return this.logger.error("Session.refer() may only be called if established session."),Promise.reject(new Error(`Invalid session state ${this.state}`));if(t instanceof Tc&&!t.dialog)return this.logger.error("Session.refer() may only be called with session which is established. You are perhaps attempting to attended transfer to a target for which there is not dialog yet established. Perhaps you are attempting a 'semi-attended' tansfer? Regardless, this is not supported. The recommended approached is to check to see if the target Session is in the Established state before calling refer(); if the state is not Established you may proceed by falling back using a URI as the target (blind transfer)."),Promise.reject(new Error(`Invalid session state ${this.state}`));const n=r.requestDelegate,i=this.copyRequestOptions(r.requestOptions);return i.extraHeaders=i.extraHeaders?i.extraHeaders.concat(this.referExtraHeaders(this.referToString(t))):this.referExtraHeaders(this.referToString(t)),this._refer(r.onNotify,n,i)}_bye(t,r){if(!this.dialog)return Promise.reject(new Error("Session dialog undefined."));const n=this.dialog;switch(n.sessionState){case gn.Initial:case gn.Early:throw new Error(`Invalid dialog state ${n.sessionState}`);case gn.AckWait:return this.stateTransition(X.Terminating),new Promise(i=>{n.delegate={onAck:()=>{const s=n.bye(t,r);return this.stateTransition(X.Terminated),i(s),Promise.resolve()},onAckTimeout:()=>{const s=n.bye(t,r);this.stateTransition(X.Terminated),i(s)}}});case gn.Confirmed:{const i=n.bye(t,r);return this.stateTransition(X.Terminated),Promise.resolve(i)}case gn.Terminated:throw new Error(`Invalid dialog state ${n.sessionState}`);default:throw new Error("Unrecognized state.")}}_info(t,r){return this.dialog?Promise.resolve(this.dialog.info(t,r)):Promise.reject(new Error("Session dialog undefined."))}_message(t,r){return this.dialog?Promise.resolve(this.dialog.message(t,r)):Promise.reject(new Error("Session dialog undefined."))}_refer(t,r,n){return this.dialog?(this.onNotify=t,Promise.resolve(this.dialog.refer(r,n))):Promise.reject(new Error("Session dialog undefined."))}ackAndBye(t,r,n){t.ack();const i=[];r&&i.push("Reason: "+this.getReasonHeaderValue(r,n)),t.session.bye(void 0,{extraHeaders:i})}onAckRequest(t){if(this.logger.log("Session.onAckRequest"),this.state!==X.Established&&this.state!==X.Terminating)return this.logger.error(`ACK received while in state ${this.state}, dropping request`),Promise.resolve();const r=this.dialog;if(!r)throw new Error("Dialog undefined.");const n={sessionDescriptionHandlerOptions:this.pendingReinviteAck?this.sessionDescriptionHandlerOptionsReInvite:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.pendingReinviteAck?this._sessionDescriptionHandlerModifiersReInvite:this._sessionDescriptionHandlerModifiers};if(this.delegate&&this.delegate.onAck){const i=new C7(t);this.delegate.onAck(i)}switch(this.pendingReinviteAck=!1,r.signalingState){case pe.Initial:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.Stable:{const i=Zl(t.message);return i?i.contentDisposition==="render"?(this._renderbody=i.content,this._rendertype=i.contentType,Promise.resolve()):i.contentDisposition!=="session"?Promise.resolve():this.setAnswer(i,n).catch(s=>{this.logger.error(s.message);const o=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];r.bye(void 0,{extraHeaders:o}),this.stateTransition(X.Terminated)}):Promise.resolve()}case pe.HaveLocalOffer:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.HaveRemoteOffer:{this.logger.error(`Invalid signaling state ${r.signalingState}.`);const i=["Reason: "+this.getReasonHeaderValue(488,"Bad Media Description")];return r.bye(void 0,{extraHeaders:i}),this.stateTransition(X.Terminated),Promise.resolve()}case pe.Closed:default:throw new Error(`Invalid signaling state ${r.signalingState}.`)}}onByeRequest(t){if(this.logger.log("Session.onByeRequest"),this.state===X.Established){if(this.delegate&&this.delegate.onBye){const r=new S7(t);this.delegate.onBye(r)}else t.accept();this.stateTransition(X.Terminated)}else this.logger.error(`BYE received while in state ${this.state}, dropping request`)}onInfoRequest(t){if(this.logger.log("Session.onInfoRequest"),this.state===X.Established)if(this.delegate&&this.delegate.onInfo){const r=new b7(t);this.delegate.onInfo(r)}else t.accept();else this.logger.error(`INFO received while in state ${this.state}, dropping request`)}onInviteRequest(t){if(this.logger.log("Session.onInviteRequest"),this.state!==X.Established)return void this.logger.error(`INVITE received while in state ${this.state}, dropping request`);this.pendingReinviteAck=!0;const r=["Contact: "+this._contact];if(t.message.hasHeader("P-Asserted-Identity")){const i=t.message.getHeader("P-Asserted-Identity");if(!i)throw new Error("Header undefined.");this._assertedIdentity=zt.nameAddrHeaderParse(i)}const n={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptionsReInvite,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiersReInvite};this.generateResponseOfferAnswerInDialog(n).then(i=>{const s=t.accept({statusCode:200,extraHeaders:r,body:i});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,200)}).catch(i=>{if(this.logger.error(i.message),this.logger.error("Failed to handle to re-INVITE request"),!this.dialog)throw new Error("Dialog undefined.");if(this.logger.error(this.dialog.signalingState),this.dialog.signalingState!==pe.Stable)this.rollbackOffer().then(()=>{const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488)}).catch(s=>{this.logger.error(s.message),this.logger.error("Failed to rollback offer on re-INVITE request");const o=t.reject({statusCode:488});if(this.state!==X.Terminated){if(!this.dialog)throw new Error("Dialog undefined.");const a=[];a.push("Reason: "+this.getReasonHeaderValue(500,"Internal Server Error")),this.dialog.bye(void 0,{extraHeaders:a}),this.stateTransition(X.Terminated)}this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,o.message,488)});else{const s=t.reject({statusCode:488});this.delegate&&this.delegate.onInvite&&this.delegate.onInvite(t.message,s.message,488)}})}onMessageRequest(t){if(this.logger.log("Session.onMessageRequest"),this.state===X.Established)if(this.delegate&&this.delegate.onMessage){const r=new nT(t);this.delegate.onMessage(r)}else t.accept();else this.logger.error(`MESSAGE received while in state ${this.state}, dropping request`)}onNotifyRequest(t){if(this.logger.log("Session.onNotifyRequest"),this.state===X.Established)if(this.onNotify){const r=new Wg(t);this.onNotify(r)}else if(this.delegate&&this.delegate.onNotify){const r=new Wg(t);this.delegate.onNotify(r)}else t.accept();else this.logger.error(`NOTIFY received while in state ${this.state}, dropping request`)}onPrackRequest(t){if(this.logger.log("Session.onPrackRequest"),this.state===X.Established)throw new Error("Unimplemented.");this.logger.error(`PRACK received while in state ${this.state}, dropping request`)}onReferRequest(t){if(this.logger.log("Session.onReferRequest"),this.state!==X.Established)return void this.logger.error(`REFER received while in state ${this.state}, dropping request`);if(!t.message.hasHeader("refer-to"))return this.logger.warn("Invalid REFER packet. A refer-to header is required. Rejecting."),void t.reject();const r=new k7(t,this);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(r):(this.logger.log("No delegate available to handle REFER, automatically accepting and following."),r.accept().then(()=>r.makeInviter(this._referralInviterOptions).invite()).catch(n=>{this.logger.error(n.message)}))}generateResponseOfferAnswer(t,r){if(this.dialog)return this.generateResponseOfferAnswerInDialog(r);const n=Zl(t.message);return n&&n.contentDisposition==="session"?this.setOfferAndGetAnswer(n,r):this.getOffer(r)}generateResponseOfferAnswerInDialog(t){if(!this.dialog)throw new Error("Dialog undefined.");switch(this.dialog.signalingState){case pe.Initial:return this.getOffer(t);case pe.HaveLocalOffer:return Promise.resolve(void 0);case pe.HaveRemoteOffer:if(!this.dialog.offer)throw new Error(`Session offer undefined in signaling state ${this.dialog.signalingState}.`);return this.setOfferAndGetAnswer(this.dialog.offer,t);case pe.Stable:return this.state!==X.Established?Promise.resolve(void 0):this.getOffer(t);case pe.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}getOffer(t){const r=this.setupSessionDescriptionHandler(),n=t.sessionDescriptionHandlerOptions,i=t.sessionDescriptionHandlerModifiers;try{return r.getDescription(n,i).then(s=>Qd(s)).catch(s=>{this.logger.error("Session.getOffer: SDH getDescription rejected...");const o=s instanceof Error?s:new Error("Session.getOffer unknown error.");throw this.logger.error(o.message),o})}catch(s){this.logger.error("Session.getOffer: SDH getDescription threw...");const o=s instanceof Error?s:new Error(s);return this.logger.error(o.message),Promise.reject(o)}}rollbackOffer(){const t=this.setupSessionDescriptionHandler();if(t.rollbackDescription===void 0)return Promise.resolve();try{return t.rollbackDescription().catch(r=>{this.logger.error("Session.rollbackOffer: SDH rollbackDescription rejected...");const n=r instanceof Error?r:new Error("Session.rollbackOffer unknown error.");throw this.logger.error(n.message),n})}catch(r){this.logger.error("Session.rollbackOffer: SDH rollbackDescription threw...");const n=r instanceof Error?r:new Error(r);return this.logger.error(n.message),Promise.reject(n)}}setAnswer(t,r){const n=this.setupSessionDescriptionHandler(),i=r.sessionDescriptionHandlerOptions,s=r.sessionDescriptionHandlerModifiers;try{if(!n.hasDescription(t.contentType))return Promise.reject(new Kg)}catch(o){this.logger.error("Session.setAnswer: SDH hasDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}try{return n.setDescription(t.content,i,s).catch(o=>{this.logger.error("Session.setAnswer: SDH setDescription rejected...");const a=o instanceof Error?o:new Error("Session.setAnswer unknown error.");throw this.logger.error(a.message),a})}catch(o){this.logger.error("Session.setAnswer: SDH setDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}}setOfferAndGetAnswer(t,r){const n=this.setupSessionDescriptionHandler(),i=r.sessionDescriptionHandlerOptions,s=r.sessionDescriptionHandlerModifiers;try{if(!n.hasDescription(t.contentType))return Promise.reject(new Kg)}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH hasDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}try{return n.setDescription(t.content,i,s).then(()=>n.getDescription(i,s)).then(o=>Qd(o)).catch(o=>{this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription rejected...");const a=o instanceof Error?o:new Error("Session.setOfferAndGetAnswer unknown error.");throw this.logger.error(a.message),a})}catch(o){this.logger.error("Session.setOfferAndGetAnswer: SDH setDescription or getDescription threw...");const a=o instanceof Error?o:new Error(o);return this.logger.error(a.message),Promise.reject(a)}}setSessionDescriptionHandler(t){if(this._sessionDescriptionHandler)throw new Error("Session description handler defined.");this._sessionDescriptionHandler=t}setupSessionDescriptionHandler(){var t;return this._sessionDescriptionHandler||(this._sessionDescriptionHandler=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions),!((t=this.delegate)===null||t===void 0)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(this._sessionDescriptionHandler,!1)),this._sessionDescriptionHandler}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case X.Initial:t!==X.Establishing&&t!==X.Established&&t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Establishing:t!==X.Established&&t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Established:t!==X.Terminating&&t!==X.Terminated&&r();break;case X.Terminating:t!==X.Terminated&&r();break;case X.Terminated:r();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Session ${this.id} transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===X.Terminated&&this.dispose()}copyRequestOptions(t={}){return{extraHeaders:t.extraHeaders?t.extraHeaders.slice():void 0,body:t.body?{contentDisposition:t.body.contentDisposition||"render",contentType:t.body.contentType||"text/plain",content:t.body.content||""}:void 0}}getReasonHeaderValue(t,r){const n=t;let i=Vh(t);return!i&&r&&(i=r),"SIP;cause="+n+';text="'+i+'"'}referExtraHeaders(t){const r=[];return r.push("Referred-By: <"+this.userAgent.configuration.uri+">"),r.push("Contact: "+this._contact),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),r.push("Refer-To: "+t),r}referToString(t){let r;if(t instanceof hi)r=t.toString();else{if(!t.dialog)throw new Error("Dialog undefined.");const n=t.remoteIdentity.friendlyName,i=t.dialog.remoteTarget.toString(),s=t.dialog.callId,o=t.dialog.remoteTag,a=t.dialog.localTag;r=`"${n}" <${i}?Replaces=${encodeURIComponent(`${s};to-tag=${o};from-tag=${a}`)}>`}return r}}(function(e){e.Required="Required",e.Supported="Supported",e.Unsupported="Unsupported"})(mn=mn||(mn={}));const x7={"100rel":!0,199:!0,answermode:!0,"early-session":!0,eventlist:!0,explicitsub:!0,"from-change":!0,"geolocation-http":!0,"geolocation-sip":!0,gin:!0,gruu:!0,histinfo:!0,ice:!0,join:!0,"multiple-refer":!0,norefersub:!0,nosub:!0,outbound:!0,path:!0,policy:!0,precondition:!0,pref:!0,privacy:!0,"recipient-list-invite":!0,"recipient-list-message":!0,"recipient-list-subscribe":!0,replaces:!0,"resource-priority":!0,"sdp-anat":!0,"sec-agree":!0,tdialog:!0,timer:!0,uui:!0};let N7=class extends Tc{constructor(e,t){super(e),this.incomingInviteRequest=t,this.disposed=!1,this.expiresTimer=void 0,this.isCanceled=!1,this.rel100="none",this.rseq=Math.floor(1e4*Math.random()),this.userNoAnswerTimer=void 0,this.waitingForPrack=!1,this.logger=e.getLogger("sip.Invitation");const r=this.incomingInviteRequest.message,n=r.getHeader("require");n&&n.toLowerCase().includes("100rel")&&(this.rel100="required");const i=r.getHeader("supported");if(i&&i.toLowerCase().includes("100rel")&&(this.rel100="supported"),r.toTag=t.toTag,typeof r.toTag!="string")throw new TypeError("toTag should have been a string.");if(this.userNoAnswerTimer=setTimeout(()=>{t.reject({statusCode:480}),this.stateTransition(X.Terminated)},this.userAgent.configuration.noAnswerTimeout?1e3*this.userAgent.configuration.noAnswerTimeout:6e4),r.hasHeader("expires")){const a=1e3*Number(r.getHeader("expires")||0);this.expiresTimer=setTimeout(()=>{this.state===X.Initial&&(t.reject({statusCode:487}),this.stateTransition(X.Terminated))},a)}const s=this.request.getHeader("P-Asserted-Identity");s&&(this._assertedIdentity=zt.nameAddrHeaderParse(s)),this._contact=this.userAgent.contact.toString();const o=r.parseHeader("Content-Disposition");o&&o.type==="render"&&(this._renderbody=r.body,this._rendertype=r.getHeader("Content-Type")),this._id=r.callId+r.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.expiresTimer&&(clearTimeout(this.expiresTimer),this.expiresTimer=void 0),this.userNoAnswerTimer&&(clearTimeout(this.userNoAnswerTimer),this.userNoAnswerTimer=void 0),this.prackNeverArrived(),this.state){case X.Initial:case X.Establishing:return this.reject().then(()=>super.dispose());case X.Established:case X.Terminating:case X.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get autoSendAnInitialProvisionalResponse(){return this.rel100!=="required"&&this.userAgent.configuration.sendInitialProvisionalResponse}get body(){return this.incomingInviteRequest.message.body}get localIdentity(){return this.request.to}get remoteIdentity(){return this.request.from}get request(){return this.incomingInviteRequest.message}accept(e={}){if(this.logger.log("Invitation.accept"),this.state!==X.Initial){const t=new Error(`Invalid session state ${this.state}`);return this.logger.error(t.message),Promise.reject(t)}return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.stateTransition(X.Establishing),this.sendAccept(e).then(({message:t,session:r})=>{r.delegate={onAck:n=>this.onAckRequest(n),onAckTimeout:()=>this.onAckTimeout(),onBye:n=>this.onByeRequest(n),onInfo:n=>this.onInfoRequest(n),onInvite:n=>this.onInviteRequest(n),onMessage:n=>this.onMessageRequest(n),onNotify:n=>this.onNotifyRequest(n),onPrack:n=>this.onPrackRequest(n),onRefer:n=>this.onReferRequest(n)},this._dialog=r,this.stateTransition(X.Established),this._replacee&&this._replacee._bye()}).catch(t=>this.handleResponseError(t))}progress(e={}){if(this.logger.log("Invitation.progress"),this.state!==X.Initial){const r=new Error(`Invalid session state ${this.state}`);return this.logger.error(r.message),Promise.reject(r)}const t=e.statusCode||180;if(t<100||t>199)throw new TypeError("Invalid statusCode: "+t);return e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),this.waitingForPrack?(this.logger.warn("Unexpected call for progress while waiting for prack, ignoring"),Promise.resolve()):e.statusCode===100?this.sendProgressTrying().then(()=>{}).catch(r=>this.handleResponseError(r)):this.rel100==="required"||this.rel100==="supported"&&e.rel100||this.rel100==="supported"&&this.userAgent.configuration.sipExtension100rel===mn.Required?this.sendProgressReliableWaitForPrack(e).then(()=>{}).catch(r=>this.handleResponseError(r)):this.sendProgress(e).then(()=>{}).catch(r=>this.handleResponseError(r))}reject(e={}){if(this.logger.log("Invitation.reject"),this.state!==X.Initial&&this.state!==X.Establishing){const s=new Error(`Invalid session state ${this.state}`);return this.logger.error(s.message),Promise.reject(s)}const t=e.statusCode||480,r=e.reasonPhrase?e.reasonPhrase:Vh(t),n=e.extraHeaders||[];if(t<300||t>699)throw new TypeError("Invalid statusCode: "+t);const i=e.body?Qd(e.body):void 0;return t<400?this.incomingInviteRequest.redirect([],{statusCode:t,reasonPhrase:r,extraHeaders:n,body:i}):this.incomingInviteRequest.reject({statusCode:t,reasonPhrase:r,extraHeaders:n,body:i}),this.stateTransition(X.Terminated),Promise.resolve()}_onCancel(e){if(this.logger.log("Invitation._onCancel"),this.state===X.Initial||this.state===X.Establishing){if(this.delegate&&this.delegate.onCancel){const t=new w7(e);this.delegate.onCancel(t)}this.isCanceled=!0,this.incomingInviteRequest.reject({statusCode:487}),this.stateTransition(X.Terminated)}else this.logger.error(`CANCEL received while in state ${this.state}, dropping request`)}handlePrackOfferAnswer(e){if(!this.dialog)throw new Error("Dialog undefined.");const t=Zl(e.message);if(!t||t.contentDisposition!=="session")return Promise.resolve(void 0);const r={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers};switch(this.dialog.signalingState){case pe.Initial:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case pe.Stable:return this.setAnswer(t,r).then(()=>{});case pe.HaveLocalOffer:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`);case pe.HaveRemoteOffer:return this.setOfferAndGetAnswer(t,r);case pe.Closed:default:throw new Error(`Invalid signaling state ${this.dialog.signalingState}.`)}}handleResponseError(e){let t=480;if(e instanceof Error?this.logger.error(e.message):this.logger.error(e),e instanceof Kg?(this.logger.error("A session description handler occurred while sending response (content type unsupported"),t=415):e instanceof E7?this.logger.error("A session description handler occurred while sending response"):e instanceof up?this.logger.error("Session ended before response could be formulated and sent (while waiting for PRACK)"):e instanceof hs&&this.logger.error("Session changed state before response could be formulated and sent"),this.state===X.Initial||this.state===X.Establishing)try{this.incomingInviteRequest.reject({statusCode:t}),this.stateTransition(X.Terminated)}catch(r){throw this.logger.error("An error occurred attempting to reject the request while handling another error"),r}if(!this.isCanceled)throw e;this.logger.warn("An error occurred while attempting to formulate and send a response to an incoming INVITE. However a CANCEL was received and processed while doing so which can (and often does) result in errors occurring as the session terminates in the meantime. Said error is being ignored.")}onAckTimeout(){if(this.logger.log("Invitation.onAckTimeout"),!this.dialog)throw new Error("Dialog undefined.");this.logger.log("No ACK received for an extended period of time, terminating session"),this.dialog.bye(),this.stateTransition(X.Terminated)}sendAccept(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.extraHeaders||[];return this.waitingForPrack?this.waitForArrivalOfPrack().then(()=>clearTimeout(this.userNoAnswerTimer)).then(()=>this.generateResponseOfferAnswer(this.incomingInviteRequest,t)).then(n=>this.incomingInviteRequest.accept({statusCode:200,body:n,extraHeaders:r})):(clearTimeout(this.userNoAnswerTimer),this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(n=>this.incomingInviteRequest.accept({statusCode:200,body:n,extraHeaders:r})))}sendProgress(e={}){const t=e.statusCode||180,r=e.reasonPhrase,n=(e.extraHeaders||[]).slice(),i=e.body?Qd(e.body):void 0;if(t===183&&!i)return this.sendProgressWithSDP(e);try{const s=this.incomingInviteRequest.progress({statusCode:t,reasonPhrase:r,extraHeaders:n,body:i});return this._dialog=s.session,Promise.resolve(s)}catch(s){return Promise.reject(s)}}sendProgressWithSDP(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,n=e.reasonPhrase,i=(e.extraHeaders||[]).slice();return this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(s=>this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s})).then(s=>(this._dialog=s.session,s))}sendProgressReliable(e={}){return e.extraHeaders=(e.extraHeaders||[]).slice(),e.extraHeaders.push("Require: 100rel"),e.extraHeaders.push("RSeq: "+Math.floor(1e4*Math.random())),this.sendProgressWithSDP(e)}sendProgressReliableWaitForPrack(e={}){const t={sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions,sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers},r=e.statusCode||183,n=e.reasonPhrase,i=(e.extraHeaders||[]).slice();let s;return i.push("Require: 100rel"),i.push("RSeq: "+this.rseq++),new Promise((o,a)=>{this.waitingForPrack=!0,this.generateResponseOfferAnswer(this.incomingInviteRequest,t).then(l=>(s=l,this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s}))).then(l=>{let c,u;this._dialog=l.session,l.session.delegate={onPrack:v=>{c=v,clearTimeout(d),clearTimeout(g),this.waitingForPrack&&(this.waitingForPrack=!1,this.handlePrackOfferAnswer(c).then(E=>{try{u=c.accept({statusCode:200,body:E}),this.prackArrived(),o({prackRequest:c,prackResponse:u,progressResponse:l})}catch(p){a(p)}}).catch(E=>a(E)))}};const d=setTimeout(()=>{this.waitingForPrack&&(this.waitingForPrack=!1,this.logger.warn("No PRACK received, rejecting INVITE."),clearTimeout(g),this.reject({statusCode:504}).then(()=>a(new up)).catch(v=>a(v)))},64*tr.T1),h=()=>{try{this.incomingInviteRequest.progress({statusCode:r,reasonPhrase:n,extraHeaders:i,body:s})}catch(v){return this.waitingForPrack=!1,void a(v)}g=setTimeout(h,f*=2)};let f=tr.T1,g=setTimeout(h,f)}).catch(l=>{this.waitingForPrack=!1,a(l)})})}sendProgressTrying(){try{const e=this.incomingInviteRequest.trying();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}waitForArrivalOfPrack(){if(this.waitingForPrackPromise)throw new Error("Already waiting for PRACK");return this.waitingForPrackPromise=new Promise((e,t)=>{this.waitingForPrackResolve=e,this.waitingForPrackReject=t}),this.waitingForPrackPromise}prackArrived(){this.waitingForPrackResolve&&this.waitingForPrackResolve(),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}prackNeverArrived(){this.waitingForPrackReject&&this.waitingForPrackReject(new up),this.waitingForPrackPromise=void 0,this.waitingForPrackResolve=void 0,this.waitingForPrackReject=void 0}},iT=class extends Tc{constructor(e,t,r={}){super(e,r),this.disposed=!1,this.earlyMedia=!1,this.earlyMediaSessionDescriptionHandlers=new Map,this.isCanceled=!1,this.inviteWithoutSdp=!1,this.logger=e.getLogger("sip.Inviter"),this.earlyMedia=r.earlyMedia!==void 0?r.earlyMedia:this.earlyMedia,this.fromTag=qh(),this.inviteWithoutSdp=r.inviteWithoutSdp!==void 0?r.inviteWithoutSdp:this.inviteWithoutSdp;const n=Object.assign({},r);n.params=Object.assign({},r.params);const i=r.anonymous||!1,s=e.contact.toString({anonymous:i,outbound:i?!e.contact.tempGruu:!e.contact.pubGruu});i&&e.configuration.uri&&(n.params.fromDisplayName="Anonymous",n.params.fromUri="sip:anonymous@anonymous.invalid");let o=e.userAgentCore.configuration.aor;if(n.params.fromUri&&(o=typeof n.params.fromUri=="string"?zt.URIParse(n.params.fromUri):n.params.fromUri),!o)throw new TypeError("Invalid from URI: "+n.params.fromUri);let a=t;if(n.params.toUri&&(a=typeof n.params.toUri=="string"?zt.URIParse(n.params.toUri):n.params.toUri),!a)throw new TypeError("Invalid to URI: "+n.params.toUri);const l=Object.assign({},n.params);l.fromTag=this.fromTag;const c=(n.extraHeaders||[]).slice();i&&e.configuration.uri&&(c.push("P-Preferred-Identity: "+e.configuration.uri.toString()),c.push("Privacy: id")),c.push("Contact: "+s),c.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),e.configuration.sipExtension100rel===mn.Required&&c.push("Require: 100rel"),e.configuration.sipExtensionReplaces===mn.Required&&c.push("Require: replaces"),n.extraHeaders=c,this.outgoingRequestMessage=e.userAgentCore.makeOutgoingRequestMessage(be.INVITE,t,o,a,l,c,void 0),this._contact=s,this._referralInviterOptions=n,this._renderbody=r.renderbody,this._rendertype=r.rendertype,r.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=r.sessionDescriptionHandlerModifiers),r.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=r.sessionDescriptionHandlerOptions),r.sessionDescriptionHandlerModifiersReInvite&&(this.sessionDescriptionHandlerModifiersReInvite=r.sessionDescriptionHandlerModifiersReInvite),r.sessionDescriptionHandlerOptionsReInvite&&(this.sessionDescriptionHandlerOptionsReInvite=r.sessionDescriptionHandlerOptionsReInvite),this._id=this.outgoingRequestMessage.callId+this.fromTag,this.userAgent._sessions[this._id]=this}dispose(){if(this.disposed)return Promise.resolve();switch(this.disposed=!0,this.disposeEarlyMedia(),this.state){case X.Initial:case X.Establishing:return this.cancel().then(()=>super.dispose());case X.Established:case X.Terminating:case X.Terminated:return super.dispose();default:throw new Error("Unknown state.")}}get body(){return this.outgoingRequestMessage.body}get localIdentity(){return this.outgoingRequestMessage.from}get remoteIdentity(){return this.outgoingRequestMessage.to}get request(){return this.outgoingRequestMessage}cancel(e={}){if(this.logger.log("Inviter.cancel"),this.state!==X.Initial&&this.state!==X.Establishing){const t=new Error(`Invalid session state ${this.state}`);return this.logger.error(t.message),Promise.reject(t)}if(this.isCanceled=!0,this.stateTransition(X.Terminating),this.outgoingInviteRequest){let t;e.statusCode&&e.reasonPhrase&&(t=function(r,n){if(r&&r<200||r>699)throw new TypeError("Invalid statusCode: "+r);if(r)return"SIP;cause="+r+';text="'+(Vh(r)||n)+'"'}(e.statusCode,e.reasonPhrase)),this.outgoingInviteRequest.cancel(t,e)}else this.logger.warn("Canceled session before INVITE was sent"),this.stateTransition(X.Terminated);return Promise.resolve()}invite(e={}){if(this.logger.log("Inviter.invite"),this.state!==X.Initial)return super.invite(e);if(e.sessionDescriptionHandlerModifiers&&(this.sessionDescriptionHandlerModifiers=e.sessionDescriptionHandlerModifiers),e.sessionDescriptionHandlerOptions&&(this.sessionDescriptionHandlerOptions=e.sessionDescriptionHandlerOptions),e.withoutSdp||this.inviteWithoutSdp)return this._renderbody&&this._rendertype&&(this.outgoingRequestMessage.body={contentType:this._rendertype,body:this._renderbody}),this.stateTransition(X.Establishing),Promise.resolve(this.sendInvite(e));const t={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.getOffer(t).then(r=>(this.outgoingRequestMessage.body={body:r.content,contentType:r.contentType},this.stateTransition(X.Establishing),this.sendInvite(e))).catch(r=>{throw this.logger.log(r.message),this.state!==X.Terminated&&this.stateTransition(X.Terminated),r})}sendInvite(e={}){return this.outgoingInviteRequest=this.userAgent.userAgentCore.invite(this.outgoingRequestMessage,{onAccept:t=>this.dialog?(this.logger.log("Additional confirmed dialog, sending ACK and BYE"),void this.ackAndBye(t)):this.isCanceled?(this.logger.log("Canceled session accepted, sending ACK and BYE"),this.ackAndBye(t),void this.stateTransition(X.Terminated)):(this.notifyReferer(t),void this.onAccept(t).then(()=>{this.disposeEarlyMedia()}).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onAccept&&e.requestDelegate.onAccept(t)})),onProgress:t=>{this.isCanceled||(this.notifyReferer(t),this.onProgress(t).catch(()=>{this.disposeEarlyMedia()}).then(()=>{e.requestDelegate&&e.requestDelegate.onProgress&&e.requestDelegate.onProgress(t)}))},onRedirect:t=>{this.notifyReferer(t),this.onRedirect(t),e.requestDelegate&&e.requestDelegate.onRedirect&&e.requestDelegate.onRedirect(t)},onReject:t=>{this.notifyReferer(t),this.onReject(t),e.requestDelegate&&e.requestDelegate.onReject&&e.requestDelegate.onReject(t)},onTrying:t=>{this.notifyReferer(t),this.onTrying(t),e.requestDelegate&&e.requestDelegate.onTrying&&e.requestDelegate.onTrying(t)}}),this.outgoingInviteRequest}disposeEarlyMedia(){this.earlyMediaSessionDescriptionHandlers.forEach(e=>{e.close()}),this.earlyMediaSessionDescriptionHandlers.clear()}notifyReferer(e){if(!this._referred)return;if(!(this._referred instanceof Tc))throw new Error("Referred session not instance of session");if(!this._referred.dialog)return;if(!e.message.statusCode)throw new Error("Status code undefined.");if(!e.message.reasonPhrase)throw new Error("Reason phrase undefined.");const t=`SIP/2.0 ${e.message.statusCode} ${e.message.reasonPhrase}`.trim();this._referred.dialog.notify(void 0,{extraHeaders:["Event: refer","Subscription-State: terminated"],body:{contentDisposition:"render",contentType:"message/sipfrag",content:t}}).delegate={onReject:()=>{this._referred=void 0}}}onAccept(e){if(this.logger.log("Inviter.onAccept"),this.state!==X.Establishing)return this.logger.error(`Accept received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));const t=e.message,r=e.session;switch(t.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=zt.nameAddrHeaderParse(t.getHeader("P-Asserted-Identity"))),r.delegate={onAck:n=>this.onAckRequest(n),onBye:n=>this.onByeRequest(n),onInfo:n=>this.onInfoRequest(n),onInvite:n=>this.onInviteRequest(n),onMessage:n=>this.onMessageRequest(n),onNotify:n=>this.onNotifyRequest(n),onPrack:n=>this.onPrackRequest(n),onRefer:n=>this.onReferRequest(n)},this._dialog=r,r.signalingState){case pe.Initial:case pe.HaveLocalOffer:return this.logger.error("Received 2xx response to INVITE without a session description"),this.ackAndBye(e,400,"Missing session description"),this.stateTransition(X.Terminated),Promise.reject(new Error("Bad Media Description"));case pe.HaveRemoteOffer:{if(!this._dialog.offer)throw new Error(`Session offer undefined in signaling state ${this._dialog.signalingState}.`);const n={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setOfferAndGetAnswer(this._dialog.offer,n).then(i=>{e.ack({body:i}),this.stateTransition(X.Established)}).catch(i=>{throw this.ackAndBye(e,488,"Invalid session description"),this.stateTransition(X.Terminated),i})}case pe.Stable:{if(this.earlyMediaSessionDescriptionHandlers.size>0){const s=this.earlyMediaSessionDescriptionHandlers.get(r.id);if(!s)throw new Error("Session description handler undefined.");return this.setSessionDescriptionHandler(s),this.earlyMediaSessionDescriptionHandlers.delete(r.id),e.ack(),this.stateTransition(X.Established),Promise.resolve()}if(this.earlyMediaDialog){if(this.earlyMediaDialog!==r){this.earlyMedia&&this.logger.error("You have set the 'earlyMedia' option to 'true' which requires that your INVITE requests do not fork and yet this INVITE request did in fact fork. Consequentially and not surprisingly the end point which accepted the INVITE (confirmed dialog) does not match the end point with which early media has been setup (early dialog) and thus this session is unable to proceed. In accordance with the SIP specifications, the SIP servers your end point is connected to determine if an INVITE forks and the forking behavior of those servers cannot be controlled by this library. If you wish to use early media with this library you must configure those servers accordingly. Alternatively you may set the 'earlyMedia' to 'false' which will allow this library to function with any INVITE requests which do fork.");const s=new Error("Early media dialog does not equal confirmed dialog, terminating session");return this.logger.error(s.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(X.Terminated),Promise.reject(s)}return e.ack(),this.stateTransition(X.Established),Promise.resolve()}const n=r.answer;if(!n)throw new Error("Answer is undefined.");const i={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(n,i).then(()=>{let s;this._renderbody&&this._rendertype&&(s={body:{contentDisposition:"render",contentType:this._rendertype,content:this._renderbody}}),e.ack(s),this.stateTransition(X.Established)}).catch(s=>{throw this.logger.error(s.message),this.ackAndBye(e,488,"Not Acceptable Here"),this.stateTransition(X.Terminated),s})}case pe.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onProgress(e){var t;if(this.logger.log("Inviter.onProgress"),this.state!==X.Establishing)return this.logger.error(`Progress received while in state ${this.state}, dropping response`),Promise.reject(new Error(`Invalid session state ${this.state}`));if(!this.outgoingInviteRequest)throw new Error("Outgoing INVITE request undefined.");const r=e.message,n=e.session;r.hasHeader("P-Asserted-Identity")&&(this._assertedIdentity=zt.nameAddrHeaderParse(r.getHeader("P-Asserted-Identity")));const i=r.getHeader("require"),s=r.getHeader("rseq"),o=!!(i&&i.includes("100rel")&&s&&Number(s)),a=[];switch(o&&a.push("RAck: "+r.getHeader("rseq")+" "+r.getHeader("cseq")),n.signalingState){case pe.Initial:return o&&(this.logger.warn("First reliable provisional response received MUST contain an offer when INVITE does not contain an offer."),e.prack({extraHeaders:a})),Promise.resolve();case pe.HaveLocalOffer:return o&&e.prack({extraHeaders:a}),Promise.resolve();case pe.HaveRemoteOffer:if(!o)return this.logger.warn("Non-reliable provisional response MUST NOT contain an initial offer, discarding response."),Promise.resolve();{const l=this.sessionDescriptionHandlerFactory(this,this.userAgent.configuration.sessionDescriptionHandlerFactoryOptions||{});return!((t=this.delegate)===null||t===void 0)&&t.onSessionDescriptionHandler&&this.delegate.onSessionDescriptionHandler(l,!0),this.earlyMediaSessionDescriptionHandlers.set(n.id,l),l.setDescription(r.body,this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers).then(()=>l.getDescription(this.sessionDescriptionHandlerOptions,this.sessionDescriptionHandlerModifiers)).then(c=>{const u={contentDisposition:"session",contentType:c.contentType,content:c.body};e.prack({extraHeaders:a,body:u})}).catch(c=>{throw this.stateTransition(X.Terminated),c})}case pe.Stable:if(o&&e.prack({extraHeaders:a}),this.earlyMedia&&!this.earlyMediaDialog){this.earlyMediaDialog=n;const l=n.answer;if(!l)throw new Error("Answer is undefined.");const c={sessionDescriptionHandlerModifiers:this.sessionDescriptionHandlerModifiers,sessionDescriptionHandlerOptions:this.sessionDescriptionHandlerOptions};return this.setAnswer(l,c).catch(u=>{throw this.stateTransition(X.Terminated),u})}return Promise.resolve();case pe.Closed:return Promise.reject(new Error("Terminated."));default:throw new Error("Unknown session signaling state.")}}onRedirect(e){this.logger.log("Inviter.onRedirect"),this.state===X.Establishing||this.state===X.Terminating?this.stateTransition(X.Terminated):this.logger.error(`Redirect received while in state ${this.state}, dropping response`)}onReject(e){this.logger.log("Inviter.onReject"),this.state===X.Establishing||this.state===X.Terminating?this.stateTransition(X.Terminated):this.logger.error(`Reject received while in state ${this.state}, dropping response`)}onTrying(e){this.logger.log("Inviter.onTrying"),this.state===X.Establishing||this.logger.error(`Trying received while in state ${this.state}, dropping response`)}};var it,ct,De,cr,er;(function(e){e.Initial="Initial",e.Registered="Registered",e.Unregistered="Unregistered",e.Terminated="Terminated"})(it=it||(it={}));class ii{constructor(t,r={}){this.disposed=!1,this._contacts=[],this._retryAfter=void 0,this._state=it.Initial,this._waiting=!1,this._stateEventEmitter=new wc,this._waitingEventEmitter=new wc,this.userAgent=t;const n=t.configuration.uri.clone();if(n.user=void 0,this.options=Object.assign(Object.assign(Object.assign({},ii.defaultOptions()),{registrar:n}),ii.stripUndefinedProperties(r)),this.options.extraContactHeaderParams=(this.options.extraContactHeaderParams||[]).slice(),this.options.extraHeaders=(this.options.extraHeaders||[]).slice(),!this.options.registrar)throw new Error("Registrar undefined.");if(this.options.registrar=this.options.registrar.clone(),this.options.regId&&!this.options.instanceId?this.options.instanceId=this.userAgent.instanceId:!this.options.regId&&this.options.instanceId&&(this.options.regId=1),this.options.instanceId&&zt.parse(this.options.instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");if(this.options.regId&&this.options.regId<0)throw new Error("Invalid regId.");const i=this.options.registrar,s=this.options.params&&this.options.params.fromUri||t.userAgentCore.configuration.aor,o=this.options.params&&this.options.params.toUri||t.configuration.uri,a=this.options.params||{},l=(r.extraHeaders||[]).slice();if(this.request=t.userAgentCore.makeOutgoingRequestMessage(be.REGISTER,i,s,o,a,l,void 0),this.expires=this.options.expires||ii.defaultExpires,this.expires<0)throw new Error("Invalid expires.");if(this.refreshFrequency=this.options.refreshFrequency||ii.defaultRefreshFrequency,this.refreshFrequency<50||this.refreshFrequency>99)throw new Error("Invalid refresh frequency. The value represents a percentage of the expiration time and should be between 50 and 99.");this.logger=t.getLogger("sip.Registerer"),this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(c=>{const u=this.options[c];c==="registrar"?this.logger.log(" "+c+": "+u):this.logger.log(" "+c+": "+JSON.stringify(u))})),this.id=this.request.callId+this.request.from.parameters.tag,this.userAgent._registerers[this.id]=this}static defaultOptions(){return{expires:ii.defaultExpires,extraContactHeaderParams:[],extraHeaders:[],logConfiguration:!0,instanceId:"",params:{},regId:0,registrar:new hi("sip","anonymous","anonymous.invalid"),refreshFrequency:ii.defaultRefreshFrequency}}static stripUndefinedProperties(t){return Object.keys(t).reduce((r,n)=>(t[n]!==void 0&&(r[n]=t[n]),r),{})}get contacts(){return this._contacts.slice()}get retryAfter(){return this._retryAfter}get state(){return this._state}get stateChange(){return this._stateEventEmitter}dispose(){return this.disposed?Promise.resolve():(this.disposed=!0,this.logger.log(`Registerer ${this.id} in state ${this.state} is being disposed`),delete this.userAgent._registerers[this.id],new Promise(t=>{const r=()=>{if(!this.waiting&&this._state===it.Registered)return this.stateChange.addListener(()=>{this.terminated(),t()},{once:!0}),void this.unregister();this.terminated(),t()};this.waiting?this.waitingChange.addListener(()=>{r()},{once:!0}):r()}))}register(t={}){if(this.state===it.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new Gg("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}t.requestOptions&&(this.options=Object.assign(Object.assign({},this.options),t.requestOptions));const r=(this.options.extraHeaders||[]).slice();r.push("Contact: "+this.generateContactHeader(this.expires)),r.push("Allow: "+["ACK","CANCEL","INVITE","MESSAGE","BYE","OPTIONS","INFO","NOTIFY","REFER"].toString()),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.request.extraHeaders=r,this.waitingToggle(!0);const n=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{let s;i.message.hasHeader("expires")&&(s=Number(i.message.getHeader("expires"))),this._contacts=i.message.getHeaders("contact");let o,a=this._contacts.length;if(!a)return this.logger.error("No Contact header in response to REGISTER, dropping response."),void this.unregistered();for(;a--;){if(o=i.message.parseHeader("contact",a),!o)throw new Error("Contact undefined");if(this.userAgent.contact.pubGruu&&L2(o.uri,this.userAgent.contact.pubGruu)){s=Number(o.getParam("expires"));break}if(this.userAgent.configuration.contactName===""){if(o.uri.user===this.userAgent.contact.uri.user){s=Number(o.getParam("expires"));break}}else if(L2(o.uri,this.userAgent.contact.uri)){s=Number(o.getParam("expires"));break}o=void 0}if(o===void 0)return this.logger.error("No Contact header pointing to us, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(s===void 0)return this.logger.error("Contact pointing to us is missing expires parameter, dropping response"),this.unregistered(),void this.waitingToggle(!1);if(o.hasParam("temp-gruu")){const l=o.getParam("temp-gruu");l&&(this.userAgent.contact.tempGruu=zt.URIParse(l.replace(/"/g,"")))}if(o.hasParam("pub-gruu")){const l=o.getParam("pub-gruu");l&&(this.userAgent.contact.pubGruu=zt.URIParse(l.replace(/"/g,"")))}this.registered(s),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Redirect received. Not supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{if(i.message.statusCode===423)return i.message.hasHeader("min-expires")?(this.expires=Number(i.message.getHeader("min-expires")),this.waitingToggle(!1),void this.register()):(this.logger.error("423 response received for REGISTER without Min-Expires, dropping response"),this.unregistered(),void this.waitingToggle(!1));this.logger.warn(`Failed to register, status code ${i.message.statusCode}`);let s=NaN;if(i.message.statusCode===500||i.message.statusCode===503){const o=i.message.getHeader("retry-after");o&&(s=Number.parseInt(o,void 0))}this._retryAfter=isNaN(s)?void 0:s,this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this._retryAfter=void 0,this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(n)}unregister(t={}){if(this.state===it.Terminated)throw this.stateError(),new Error("Registerer terminated. Unable to register.");if(this.disposed&&this.state!==it.Registered)throw this.stateError(),new Error("Registerer disposed. Unable to register.");if(this.waiting){this.waitingWarning();const i=new Gg("REGISTER request already in progress, waiting for final response");return Promise.reject(i)}this._state===it.Registered||t.all||this.logger.warn("Not currently registered, but sending an unregister anyway.");const r=(t.requestOptions&&t.requestOptions.extraHeaders||[]).slice();this.request.extraHeaders=r,t.all?(r.push("Contact: *"),r.push("Expires: 0")):r.push("Contact: "+this.generateContactHeader(0)),this.request.cseq++,this.request.setHeader("cseq",this.request.cseq+" REGISTER"),this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.waitingToggle(!0);const n=this.userAgent.userAgentCore.register(this.request,{onAccept:i=>{this._contacts=i.message.getHeaders("contact"),this.unregistered(),t.requestDelegate&&t.requestDelegate.onAccept&&t.requestDelegate.onAccept(i),this.waitingToggle(!1)},onProgress:i=>{t.requestDelegate&&t.requestDelegate.onProgress&&t.requestDelegate.onProgress(i)},onRedirect:i=>{this.logger.error("Unregister redirected. Not currently supported."),this.unregistered(),t.requestDelegate&&t.requestDelegate.onRedirect&&t.requestDelegate.onRedirect(i),this.waitingToggle(!1)},onReject:i=>{this.logger.error(`Unregister rejected with status code ${i.message.statusCode}`),this.unregistered(),t.requestDelegate&&t.requestDelegate.onReject&&t.requestDelegate.onReject(i),this.waitingToggle(!1)},onTrying:i=>{t.requestDelegate&&t.requestDelegate.onTrying&&t.requestDelegate.onTrying(i)}});return Promise.resolve(n)}clearTimers(){this.registrationTimer!==void 0&&(clearTimeout(this.registrationTimer),this.registrationTimer=void 0),this.registrationExpiredTimer!==void 0&&(clearTimeout(this.registrationExpiredTimer),this.registrationExpiredTimer=void 0)}generateContactHeader(t){let r=this.userAgent.contact.toString({register:!0});return this.options.regId&&this.options.instanceId&&(r+=";reg-id="+this.options.regId,r+=';+sip.instance="<urn:uuid:'+this.options.instanceId+'>"'),this.options.extraContactHeaderParams&&this.options.extraContactHeaderParams.forEach(n=>{r+=";"+n}),r+=";expires="+t,r}registered(t){this.clearTimers(),this.registrationTimer=setTimeout(()=>{this.registrationTimer=void 0,this.register()},this.refreshFrequency/100*t*1e3),this.registrationExpiredTimer=setTimeout(()=>{this.logger.warn("Registration expired"),this.unregistered()},1e3*t),this._state!==it.Registered&&this.stateTransition(it.Registered)}unregistered(){this.clearTimers(),this._state!==it.Unregistered&&this.stateTransition(it.Unregistered)}terminated(){this.clearTimers(),this._state!==it.Terminated&&this.stateTransition(it.Terminated)}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case it.Initial:t!==it.Registered&&t!==it.Unregistered&&t!==it.Terminated&&r();break;case it.Registered:t!==it.Unregistered&&t!==it.Terminated&&r();break;case it.Unregistered:t!==it.Registered&&t!==it.Terminated&&r();break;case it.Terminated:r();break;default:throw new Error("Unrecognized state.")}this._state=t,this.logger.log(`Registration transitioned to state ${this._state}`),this._stateEventEmitter.emit(this._state),t===it.Terminated&&this.dispose()}get waiting(){return this._waiting}get waitingChange(){return this._waitingEventEmitter}waitingToggle(t){if(this._waiting===t)throw new Error(`Invalid waiting transition from ${this._waiting} to ${t}`);this._waiting=t,this.logger.log(`Waiting toggled to ${this._waiting}`),this._waitingEventEmitter.emit(this._waiting)}waitingWarning(){this.logger.warn("An attempt was made to send a REGISTER request while a prior one was still in progress. RFC 3261 requires UAs MUST NOT send a new registration until they have received a final response from the registrar for the previous one or the previous REGISTER request has timed out. Note that if the transport disconnects, you still must wait for the prior request to time out before sending a new REGISTER request or alternatively dispose of the current Registerer and create a new Registerer.")}stateError(){let t=`An attempt was made to send a REGISTER request when the Registerer ${this.state===it.Terminated?"is in 'Terminated' state":"has been disposed"}.`;t+=" The Registerer transitions to 'Terminated' when Registerer.dispose() is called.",t+=" Perhaps you called UserAgent.stop() which dipsoses of all Registerers?",this.logger.error(t)}}ii.defaultExpires=600,ii.defaultRefreshFrequency=99,function(e){e.Initial="Initial",e.NotifyWait="NotifyWait",e.Pending="Pending",e.Active="Active",e.Terminated="Terminated"}(ct=ct||(ct={})),function(e){e.Connecting="Connecting",e.Connected="Connected",e.Disconnecting="Disconnecting",e.Disconnected="Disconnected"}(De=De||(De={})),function(e){e.Started="Started",e.Stopped="Stopped"}(cr=cr||(cr={}));class Ft{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(t,r=!1){return this.onePassHasher.start().appendStr(t).end(r)}static hashAsciiStr(t,r=!1){return this.onePassHasher.start().appendAsciiStr(t).end(r)}static _hex(t){const r=Ft.hexChars,n=Ft.hexOut;let i,s,o,a;for(a=0;a<4;a+=1)for(s=8*a,i=t[a],o=0;o<8;o+=2)n[s+1+o]=r.charAt(15&i),i>>>=4,n[s+0+o]=r.charAt(15&i),i>>>=4;return n.join("")}static _md5cycle(t,r){let n=t[0],i=t[1],s=t[2],o=t[3];n+=(i&s|~i&o)+r[0]-680876936|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[1]-389564586|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[2]+606105819|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[3]-1044525330|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[4]-176418897|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[6]-1473231341|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[7]-45705983|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[8]+1770035416|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[10]-42063|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[11]-1990404162|0,i=(i<<22|i>>>10)+s|0,n+=(i&s|~i&o)+r[12]+1804603682|0,n=(n<<7|n>>>25)+i|0,o+=(n&i|~n&s)+r[13]-40341101|0,o=(o<<12|o>>>20)+n|0,s+=(o&n|~o&i)+r[14]-1502002290|0,s=(s<<17|s>>>15)+o|0,i+=(s&o|~s&n)+r[15]+1236535329|0,i=(i<<22|i>>>10)+s|0,n+=(i&o|s&~o)+r[1]-165796510|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[11]+643717713|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[0]-373897302|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[5]-701558691|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[10]+38016083|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[15]-660478335|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[4]-405537848|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[9]+568446438|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[3]-187363961|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[8]+1163531501|0,i=(i<<20|i>>>12)+s|0,n+=(i&o|s&~o)+r[13]-1444681467|0,n=(n<<5|n>>>27)+i|0,o+=(n&s|i&~s)+r[2]-51403784|0,o=(o<<9|o>>>23)+n|0,s+=(o&i|n&~i)+r[7]+1735328473|0,s=(s<<14|s>>>18)+o|0,i+=(s&n|o&~n)+r[12]-1926607734|0,i=(i<<20|i>>>12)+s|0,n+=(i^s^o)+r[5]-378558|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[11]+1839030562|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[14]-35309556|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[1]-1530992060|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[7]-155497632|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[10]-1094730640|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[13]+681279174|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[0]-358537222|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[3]-722521979|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[6]+76029189|0,i=(i<<23|i>>>9)+s|0,n+=(i^s^o)+r[9]-640364487|0,n=(n<<4|n>>>28)+i|0,o+=(n^i^s)+r[12]-421815835|0,o=(o<<11|o>>>21)+n|0,s+=(o^n^i)+r[15]+530742520|0,s=(s<<16|s>>>16)+o|0,i+=(s^o^n)+r[2]-995338651|0,i=(i<<23|i>>>9)+s|0,n+=(s^(i|~o))+r[0]-198630844|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[14]-1416354905|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[5]-57434055|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[12]+1700485571|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[10]-1051523|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[1]-2054922799|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[8]+1873313359|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[15]-30611744|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[6]-1560198380|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[13]+1309151649|0,i=(i<<21|i>>>11)+s|0,n+=(s^(i|~o))+r[4]-145523070|0,n=(n<<6|n>>>26)+i|0,o+=(i^(n|~s))+r[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,s+=(n^(o|~i))+r[2]+718787259|0,s=(s<<15|s>>>17)+o|0,i+=(o^(s|~n))+r[9]-343485551|0,i=(i<<21|i>>>11)+s|0,t[0]=n+t[0]|0,t[1]=i+t[1]|0,t[2]=s+t[2]|0,t[3]=o+t[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(Ft.stateIdentity),this}appendStr(t){const r=this._buffer8,n=this._buffer32;let i,s,o=this._bufferLength;for(s=0;s<t.length;s+=1){if(i=t.charCodeAt(s),i<128)r[o++]=i;else if(i<2048)r[o++]=192+(i>>>6),r[o++]=63&i|128;else if(i<55296||i>56319)r[o++]=224+(i>>>12),r[o++]=i>>>6&63|128,r[o++]=63&i|128;else{if(i=1024*(i-55296)+(t.charCodeAt(++s)-56320)+65536,i>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");r[o++]=240+(i>>>18),r[o++]=i>>>12&63|128,r[o++]=i>>>6&63|128,r[o++]=63&i|128}o>=64&&(this._dataLength+=64,Ft._md5cycle(this._state,n),o-=64,n[0]=n[16])}return this._bufferLength=o,this}appendAsciiStr(t){const r=this._buffer8,n=this._buffer32;let i,s=this._bufferLength,o=0;for(;;){for(i=Math.min(t.length-o,64-s);i--;)r[s++]=t.charCodeAt(o++);if(s<64)break;this._dataLength+=64,Ft._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}appendByteArray(t){const r=this._buffer8,n=this._buffer32;let i,s=this._bufferLength,o=0;for(;;){for(i=Math.min(t.length-o,64-s);i--;)r[s++]=t[o++];if(s<64)break;this._dataLength+=64,Ft._md5cycle(this._state,n),s=0}return this._bufferLength=s,this}getState(){const t=this,r=t._state;return{buffer:String.fromCharCode.apply(null,t._buffer8),buflen:t._bufferLength,length:t._dataLength,state:[r[0],r[1],r[2],r[3]]}}setState(t){const r=t.buffer,n=t.state,i=this._state;let s;for(this._dataLength=t.length,this._bufferLength=t.buflen,i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],s=0;s<r.length;s+=1)this._buffer8[s]=r.charCodeAt(s)}end(t=!1){const r=this._bufferLength,n=this._buffer8,i=this._buffer32,s=1+(r>>2);let o;if(this._dataLength+=r,n[r]=128,n[r+1]=n[r+2]=n[r+3]=0,i.set(Ft.buffer32Identity.subarray(s),s),r>55&&(Ft._md5cycle(this._state,i),i.set(Ft.buffer32Identity)),o=8*this._dataLength,o<=4294967295)i[14]=o;else{const a=o.toString(16).match(/(.*?)(.{0,8})$/);if(a===null)return;const l=parseInt(a[2],16),c=parseInt(a[1],16)||0;i[14]=l,i[15]=c}return Ft._md5cycle(this._state,i),t?this._state:Ft._hex(this._state)}}function es(e){return Ft.hashStr(e)}Ft.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),Ft.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ft.hexChars="0123456789abcdef",Ft.hexOut=[],Ft.onePassHasher=new Ft,Ft.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592"&&console.error("Md5 self test failed.");class _7{constructor(t,r,n,i){this.logger=t.getLogger("sipjs.digestauthentication"),this.username=n,this.password=i,this.ha1=r,this.nc=0,this.ncHex="00000000"}authenticate(t,r,n){if(this.algorithm=r.algorithm,this.realm=r.realm,this.nonce=r.nonce,this.opaque=r.opaque,this.stale=r.stale,this.algorithm){if(this.algorithm!=="MD5")return this.logger.warn("challenge with Digest algorithm different than 'MD5', authentication aborted"),!1}else this.algorithm="MD5";if(!this.realm)return this.logger.warn("challenge without Digest realm, authentication aborted"),!1;if(!this.nonce)return this.logger.warn("challenge without Digest nonce, authentication aborted"),!1;if(r.qop)if(r.qop.indexOf("auth")>-1)this.qop="auth";else{if(!(r.qop.indexOf("auth-int")>-1))return this.logger.warn("challenge without Digest qop different than 'auth' or 'auth-int', authentication aborted"),!1;this.qop="auth-int"}else this.qop=void 0;return this.method=t.method,this.uri=t.ruri,this.cnonce=ao(12),this.nc+=1,this.updateNcHex(),this.nc===4294967296&&(this.nc=1,this.ncHex="00000001"),this.calculateResponse(n),!0}toString(){const t=[];if(!this.response)throw new Error("response field does not exist, cannot generate Authorization header");return t.push("algorithm="+this.algorithm),t.push('username="'+this.username+'"'),t.push('realm="'+this.realm+'"'),t.push('nonce="'+this.nonce+'"'),t.push('uri="'+this.uri+'"'),t.push('response="'+this.response+'"'),this.opaque&&t.push('opaque="'+this.opaque+'"'),this.qop&&(t.push("qop="+this.qop),t.push('cnonce="'+this.cnonce+'"'),t.push("nc="+this.ncHex)),"Digest "+t.join(", ")}updateNcHex(){const t=Number(this.nc).toString(16);this.ncHex="00000000".substr(0,8-t.length)+t}calculateResponse(t){let r,n;r=this.ha1,r!==""&&r!==void 0||(r=es(this.username+":"+this.realm+":"+this.password)),this.qop==="auth"?(n=es(this.method+":"+this.uri),this.response=es(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth:"+n)):this.qop==="auth-int"?(n=es(this.method+":"+this.uri+":"+es(t||"")),this.response=es(r+":"+this.nonce+":"+this.ncHex+":"+this.cnonce+":auth-int:"+n)):this.qop===void 0&&(n=es(this.method+":"+this.uri),this.response=es(r+":"+this.nonce+":"+n))}}(function(e){e[e.error=0]="error",e[e.warn=1]="warn",e[e.log=2]="log",e[e.debug=3]="debug"})(er=er||(er={}));let O2=class{constructor(e,t,r){this.logger=e,this.category=t,this.label=r}error(e){this.genericLog(er.error,e)}warn(e){this.genericLog(er.warn,e)}log(e){this.genericLog(er.log,e)}debug(e){this.genericLog(er.debug,e)}genericLog(e,t){this.logger.genericLog(e,this.category,this.label,t)}get level(){return this.logger.level}set level(e){this.logger.level=e}};class D7{constructor(){this.builtinEnabled=!0,this._level=er.log,this.loggers={},this.logger=this.getLogger("sip:loggerfactory")}get level(){return this._level}set level(t){t>=0&&t<=3?this._level=t:t>3?this._level=3:er.hasOwnProperty(t)?this._level=t:this.logger.error("invalid 'level' parameter value: "+JSON.stringify(t))}get connector(){return this._connector}set connector(t){t?typeof t=="function"?this._connector=t:this.logger.error("invalid 'connector' parameter value: "+JSON.stringify(t)):this._connector=void 0}getLogger(t,r){if(r&&this.level===3)return new O2(this,t,r);if(this.loggers[t])return this.loggers[t];{const n=new O2(this,t);return this.loggers[t]=n,n}}genericLog(t,r,n,i){this.level>=t&&this.builtinEnabled&&this.print(t,r,n,i),this.connector&&this.connector(er[t],r,n,i)}print(t,r,n,i){if(typeof i=="string"){const s=[new Date,r];n&&s.push(n),i=s.concat(i).join(" | ")}switch(t){case er.error:console.error(i);break;case er.warn:console.warn(i);break;case er.log:console.log(i);break;case er.debug:console.debug(i)}}}var ad,G;function sT(e,t){const r=`\r
`;if(t.statusCode<100||t.statusCode>699)throw new TypeError("Invalid statusCode: "+t.statusCode);const n=t.reasonPhrase?t.reasonPhrase:Vh(t.statusCode);let i="SIP/2.0 "+t.statusCode+" "+n+r;t.statusCode>=100&&t.statusCode,t.statusCode;const s="From: "+e.getHeader("From")+r,o="Call-ID: "+e.callId+r,a="CSeq: "+e.cseq+" "+e.method+r,l=e.getHeaders("via").reduce((f,g)=>f+"Via: "+g+r,"");let c="To: "+e.getHeader("to");if(t.statusCode>100&&!e.parseHeader("to").hasParam("tag")){let f=t.toTag;f||(f=qh()),c+=";tag="+f}c+=r;let u="";t.supported&&(u="Supported: "+t.supported.join(", ")+r);let d="";t.userAgent&&(d="User-Agent: "+t.userAgent+r);let h="";return t.extraHeaders&&(h=t.extraHeaders.reduce((f,g)=>f+g.trim()+r,"")),i+=l,i+=s,i+=c,i+=a,i+=o,i+=u,i+=d,i+=h,t.body?(i+="Content-Type: "+t.body.contentType+r,i+="Content-Length: "+bc(t.body.content)+r+r,i+=t.body.content):i+=`Content-Length: 0\r
\r
`,{message:i}}(function(e){function t(n,i){let s=i,o=0,a=0;if(n.substring(s,s+2).match(/(^\r\n)/))return-2;for(;o===0;){if(a=n.indexOf(`\r
`,s),a===-1)return a;!n.substring(a+2,a+4).match(/(^\r\n)/)&&n.charAt(a+2).match(/(^\s+)/)?s=a+2:o=a}return o}function r(n,i,s,o){const a=i.indexOf(":",s),l=i.substring(s,a).trim(),c=i.substring(a+1,o).trim();let u;switch(l.toLowerCase()){case"via":case"v":n.addHeader("via",c),n.getHeaders("via").length===1?(u=n.parseHeader("Via"),u&&(n.via=u,n.viaBranch=u.branch)):u=0;break;case"from":case"f":n.setHeader("from",c),u=n.parseHeader("from"),u&&(n.from=u,n.fromTag=u.getParam("tag"));break;case"to":case"t":n.setHeader("to",c),u=n.parseHeader("to"),u&&(n.to=u,n.toTag=u.getParam("tag"));break;case"record-route":if(u=zt.parse(c,"Record_Route"),u===-1){u=void 0;break}if(!(u instanceof Array)){u=void 0;break}u.forEach(d=>{n.addHeader("record-route",c.substring(d.position,d.offset)),n.headers["Record-Route"][n.getHeaders("record-route").length-1].parsed=d.parsed});break;case"call-id":case"i":n.setHeader("call-id",c),u=n.parseHeader("call-id"),u&&(n.callId=c);break;case"contact":case"m":if(u=zt.parse(c,"Contact"),u===-1){u=void 0;break}if(!(u instanceof Array)){u=void 0;break}u.forEach(d=>{n.addHeader("contact",c.substring(d.position,d.offset)),n.headers.Contact[n.getHeaders("contact").length-1].parsed=d.parsed});break;case"content-length":case"l":n.setHeader("content-length",c),u=n.parseHeader("content-length");break;case"content-type":case"c":n.setHeader("content-type",c),u=n.parseHeader("content-type");break;case"cseq":n.setHeader("cseq",c),u=n.parseHeader("cseq"),u&&(n.cseq=u.value),n instanceof Ps&&(n.method=u.method);break;case"max-forwards":n.setHeader("max-forwards",c),u=n.parseHeader("max-forwards");break;case"www-authenticate":n.setHeader("www-authenticate",c),u=n.parseHeader("www-authenticate");break;case"proxy-authenticate":n.setHeader("proxy-authenticate",c),u=n.parseHeader("proxy-authenticate");break;case"refer-to":case"r":n.setHeader("refer-to",c),u=n.parseHeader("refer-to"),u&&(n.referTo=u);break;default:n.addHeader(l.toLowerCase(),c),u=0}return u!==void 0||{error:"error parsing header '"+l+"'"}}e.getHeader=t,e.parseHeader=r,e.parseMessage=function(n,i){let s=0,o=n.indexOf(`\r
`);if(o===-1)return void i.warn("no CRLF found, not a SIP message, discarded");const a=n.substring(0,o),l=zt.parse(a,"Request_Response");let c,u;if(l!==-1){for(l.status_code?(c=new Ps,c.statusCode=l.status_code,c.reasonPhrase=l.reason_phrase):(c=new Da,c.method=l.method,c.ruri=l.uri),c.data=n,s=o+2;;){if(o=t(n,s),o===-2){u=s+2;break}if(o===-1)return void i.error("malformed message");const d=r(c,n,s,o);if(d&&d!==!0)return void i.error(d.error);s=o+2}return c.hasHeader("content-length")?c.body=n.substr(u,Number(c.getHeader("content-length"))):c.body=n.substring(u),c}i.warn('error parsing first line of SIP message: "'+a+'"')}})(ad=ad||(ad={}));class hp extends Bo{constructor(t){super(t||"Unspecified transport error.")}}class oT{constructor(t,r,n,i,s){this._transport=t,this._user=r,this._id=n,this._state=i,this.listeners=new Array,this.logger=r.loggerFactory.getLogger(s,n),this.logger.debug(`Constructing ${this.typeToString()} with id ${this.id}.`)}dispose(){this.logger.debug(`Destroyed ${this.typeToString()} with id ${this.id}.`)}get id(){return this._id}get kind(){throw new Error("Invalid kind.")}get state(){return this._state}get transport(){return this._transport}addStateChangeListener(t,r){const n=()=>{this.removeStateChangeListener(n),t()};(r==null?void 0:r.once)===!0?this.listeners.push(n):this.listeners.push(t)}notifyStateChangeListeners(){this.listeners.slice().forEach(t=>t())}removeStateChangeListener(t){this.listeners=this.listeners.filter(r=>r!==t)}logTransportError(t,r){this.logger.error(t.message),this.logger.error(`Transport error occurred in ${this.typeToString()} with id ${this.id}.`),this.logger.error(r)}send(t){return this.transport.send(t).catch(r=>{if(r instanceof hp)throw this.onTransportError(r),r;let n;throw n=r&&typeof r.message=="string"?new hp(r.message):new hp,this.onTransportError(n),n})}setState(t){this.logger.debug(`State change to "${t}" on ${this.typeToString()} with id ${this.id}.`),this._state=t,this._user.onStateChange&&this._user.onStateChange(t),this.notifyStateChangeListeners()}typeToString(){return"UnknownType"}}class aT extends oT{constructor(t,r,n,i,s){super(r,n,t.viaBranch,i,s),this._request=t,this.user=n}get request(){return this._request}}(function(e){e.Accepted="Accepted",e.Calling="Calling",e.Completed="Completed",e.Confirmed="Confirmed",e.Proceeding="Proceeding",e.Terminated="Terminated",e.Trying="Trying"})(G=G||(G={}));class Mr extends aT{constructor(t,r,n){super(t,r,n,G.Proceeding,"sip.transaction.ist")}dispose(){this.stopProgressExtensionTimer(),this.H&&(clearTimeout(this.H),this.H=void 0),this.I&&(clearTimeout(this.I),this.I=void 0),this.L&&(clearTimeout(this.L),this.L=void 0),super.dispose()}get kind(){return"ist"}receiveRequest(t){switch(this.state){case G.Proceeding:if(t.method===be.INVITE)return void(this.lastProvisionalResponse&&this.send(this.lastProvisionalResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of provisional response.")}));break;case G.Accepted:if(t.method===be.INVITE)return;break;case G.Completed:if(t.method===be.INVITE){if(!this.lastFinalResponse)throw new Error("Last final response undefined.");return void this.send(this.lastFinalResponse).catch(n=>{this.logTransportError(n,"Failed to send retransmission of final response.")})}if(t.method===be.ACK)return void this.stateTransition(G.Confirmed);break;case G.Confirmed:case G.Terminated:if(t.method===be.INVITE||t.method===be.ACK)return;break;default:throw new Error(`Invalid state ${this.state}`)}const r=`INVITE server transaction received unexpected ${t.method} request while in state ${this.state}.`;this.logger.warn(r)}receiveResponse(t,r){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);switch(this.state){case G.Proceeding:if(t>=100&&t<=199)return this.lastProvisionalResponse=r,t>100&&this.startProgressExtensionTimer(),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 1xx response.")});if(t>=200&&t<=299)return this.lastFinalResponse=r,this.stateTransition(G.Accepted),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});if(t>=300&&t<=699)return this.lastFinalResponse=r,this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send non-2xx final response.")});break;case G.Accepted:if(t>=200&&t<=299)return void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send 2xx response.")});break;case G.Completed:case G.Confirmed:case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(n),new Error(n)}retransmitAcceptedResponse(){this.state===G.Accepted&&this.lastFinalResponse&&this.send(this.lastFinalResponse).catch(t=>{this.logTransportError(t,"Failed to send 2xx response.")})}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t)}typeToString(){return"INVITE server transaction"}stateTransition(t){const r=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Proceeding:r();break;case G.Accepted:case G.Completed:this.state!==G.Proceeding&&r();break;case G.Confirmed:this.state!==G.Completed&&r();break;case G.Terminated:this.state!==G.Accepted&&this.state!==G.Completed&&this.state!==G.Confirmed&&r();break;default:r()}this.stopProgressExtensionTimer(),t===G.Accepted&&(this.L=setTimeout(()=>this.timerL(),tr.TIMER_L)),t===G.Completed&&(this.H=setTimeout(()=>this.timerH(),tr.TIMER_H)),t===G.Confirmed&&(this.I=setTimeout(()=>this.timerI(),tr.TIMER_I)),t===G.Terminated&&this.dispose(),this.setState(t)}startProgressExtensionTimer(){this.progressExtensionTimer===void 0&&(this.progressExtensionTimer=setInterval(()=>{if(this.logger.debug(`Progress extension timer expired for INVITE server transaction ${this.id}.`),!this.lastProvisionalResponse)throw new Error("Last provisional response undefined.");this.send(this.lastProvisionalResponse).catch(t=>{this.logTransportError(t,"Failed to send retransmission of provisional response.")})},tr.PROVISIONAL_RESPONSE_INTERVAL))}stopProgressExtensionTimer(){this.progressExtensionTimer!==void 0&&(clearInterval(this.progressExtensionTimer),this.progressExtensionTimer=void 0)}timerG(){}timerH(){this.logger.debug(`Timer H expired for INVITE server transaction ${this.id}.`),this.state===G.Completed&&(this.logger.warn("ACK to negative final response was never received, terminating transaction."),this.stateTransition(G.Terminated))}timerI(){this.logger.debug(`Timer I expired for INVITE server transaction ${this.id}.`),this.stateTransition(G.Terminated)}timerL(){this.logger.debug(`Timer L expired for INVITE server transaction ${this.id}.`),this.state===G.Accepted&&this.stateTransition(G.Terminated)}}class zh extends oT{constructor(t,r,n,i,s){super(r,n,zh.makeId(t),i,s),this._request=t,this.user=n,t.setViaHeader(this.id,r.protocol)}static makeId(t){if(t.method==="CANCEL"){if(!t.branch)throw new Error("Outgoing CANCEL request without a branch.");return t.branch}return"z9hG4bK"+Math.floor(1e7*Math.random())}get request(){return this._request}onRequestTimeout(){this.user.onRequestTimeout&&this.user.onRequestTimeout()}}class tn extends zh{constructor(t,r,n){super(t,r,n,G.Trying,"sip.transaction.nict"),this.F=setTimeout(()=>this.timerF(),tr.TIMER_F),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.F&&(clearTimeout(this.F),this.F=void 0),this.K&&(clearTimeout(this.K),this.K=void 0),super.dispose()}get kind(){return"nict"}receiveResponse(t){const r=t.statusCode;if(!r||r<100||r>699)throw new Error(`Invalid status code ${r}`);switch(this.state){case G.Trying:if(r>=100&&r<=199)return this.stateTransition(G.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=699)return this.stateTransition(G.Completed),r===408?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Proceeding:if(r>=100&&r<=199&&this.user.receiveResponse)return this.user.receiveResponse(t);if(r>=200&&r<=699)return this.stateTransition(G.Completed),r===408?void this.onRequestTimeout():void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Completed:case G.Terminated:return;default:throw new Error(`Invalid state ${this.state}`)}const n=`Non-INVITE client transaction received unexpected ${r} response while in state ${this.state}.`;this.logger.warn(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"non-INVITE client transaction"}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Trying:n();break;case G.Proceeding:this.state!==G.Trying&&n();break;case G.Completed:this.state!==G.Trying&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Trying&&this.state!==G.Proceeding&&this.state!==G.Completed&&(r||n());break;default:n()}t===G.Completed&&(this.F&&(clearTimeout(this.F),this.F=void 0),this.K=setTimeout(()=>this.timerK(),tr.TIMER_K)),t===G.Terminated&&this.dispose(),this.setState(t)}timerF(){this.logger.debug(`Timer F expired for non-INVITE client transaction ${this.id}.`),this.state!==G.Trying&&this.state!==G.Proceeding||(this.onRequestTimeout(),this.stateTransition(G.Terminated))}timerK(){this.state===G.Completed&&this.stateTransition(G.Terminated)}}class Wa{constructor(t,r){this.core=t,this.dialogState=r,this.core.dialogs.set(this.id,this)}static initialDialogStateForUserAgentClient(t,r){const n=r.getHeaders("record-route").reverse(),i=r.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const s=i.uri,o=t.cseq,a=t.callId,l=t.fromTag,c=r.toTag;if(!a)throw new Error("Call id undefined.");if(!l)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");const u=t.from.uri,d=t.to.uri;if(!r.statusCode)throw new Error("Incoming response status code undefined.");return{id:a+l+c,early:r.statusCode<200,callId:a,localTag:l,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:void 0,localURI:u,remoteURI:d,remoteTarget:s,routeSet:n,secure:!1}}static initialDialogStateForUserAgentServer(t,r,n=!1){const i=t.getHeaders("record-route"),s=t.parseHeader("contact");if(!s)throw new Error("Contact undefined.");if(!(s instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const o=s.uri,a=t.cseq,l=t.callId,c=r,u=t.fromTag,d=t.from.uri;return{id:l+c+u,early:n,callId:l,localTag:c,remoteTag:u,localSequenceNumber:void 0,remoteSequenceNumber:a,localURI:t.to.uri,remoteURI:d,remoteTarget:o,routeSet:i,secure:!1}}dispose(){this.core.dialogs.delete(this.id)}get id(){return this.dialogState.id}get early(){return this.dialogState.early}get callId(){return this.dialogState.callId}get localTag(){return this.dialogState.localTag}get remoteTag(){return this.dialogState.remoteTag}get localSequenceNumber(){return this.dialogState.localSequenceNumber}get remoteSequenceNumber(){return this.dialogState.remoteSequenceNumber}get localURI(){return this.dialogState.localURI}get remoteURI(){return this.dialogState.remoteURI}get remoteTarget(){return this.dialogState.remoteTarget}get routeSet(){return this.dialogState.routeSet}get secure(){return this.dialogState.secure}get userAgentCore(){return this.core}confirm(){this.dialogState.early=!1}receiveRequest(t){if(t.method!==be.ACK){if(this.remoteSequenceNumber){if(t.cseq<=this.remoteSequenceNumber)throw new Error("Out of sequence in dialog request. Did you forget to call sequenceGuard()?");this.dialogState.remoteSequenceNumber=t.cseq}this.remoteSequenceNumber||(this.dialogState.remoteSequenceNumber=t.cseq)}}recomputeRouteSet(t){this.dialogState.routeSet=t.getHeaders("record-route").reverse()}createOutgoingRequestMessage(t,r){const n=this.remoteURI,i=this.remoteTag,s=this.localURI,o=this.localTag,a=this.callId;let l;l=r&&r.cseq?r.cseq:this.dialogState.localSequenceNumber?this.dialogState.localSequenceNumber+=1:this.dialogState.localSequenceNumber=1;const c=this.remoteTarget,u=this.routeSet,d=r&&r.extraHeaders,h=r&&r.body;return this.userAgentCore.makeOutgoingRequestMessage(t,c,s,n,{callId:a,cseq:l,fromTag:o,toTag:i,routeSet:u},d,h)}incrementLocalSequenceNumber(){if(!this.dialogState.localSequenceNumber)throw new Error("Local sequence number undefined.");this.dialogState.localSequenceNumber+=1}sequenceGuard(t){return t.method===be.ACK||!(this.remoteSequenceNumber&&t.cseq<=this.remoteSequenceNumber)||(this.core.replyStateless(t,{statusCode:500}),!1)}}class ys extends zh{constructor(t,r,n){super(t,r,n,G.Calling,"sip.transaction.ict"),this.ackRetransmissionCache=new Map,this.B=setTimeout(()=>this.timerB(),tr.TIMER_B),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send initial outgoing request.")})}dispose(){this.B&&(clearTimeout(this.B),this.B=void 0),this.D&&(clearTimeout(this.D),this.D=void 0),this.M&&(clearTimeout(this.M),this.M=void 0),super.dispose()}get kind(){return"ict"}ackResponse(t){const r=t.toTag;if(!r)throw new Error("To tag undefined.");const n="z9hG4bK"+Math.floor(1e7*Math.random());t.setViaHeader(n,this.transport.protocol),this.ackRetransmissionCache.set(r,t),this.send(t.toString()).catch(i=>{this.logTransportError(i,"Failed to send ACK to 2xx response.")})}receiveResponse(t){const r=t.statusCode;if(!r||r<100||r>699)throw new Error(`Invalid status code ${r}`);switch(this.state){case G.Calling:if(r>=100&&r<=199)return this.stateTransition(G.Proceeding),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(G.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=300&&r<=699)return this.stateTransition(G.Completed),this.ack(t),void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Proceeding:if(r>=100&&r<=199)return void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=200&&r<=299)return this.ackRetransmissionCache.set(t.toTag,void 0),this.stateTransition(G.Accepted),void(this.user.receiveResponse&&this.user.receiveResponse(t));if(r>=300&&r<=699)return this.stateTransition(G.Completed),this.ack(t),void(this.user.receiveResponse&&this.user.receiveResponse(t));break;case G.Accepted:if(r>=200&&r<=299){if(!this.ackRetransmissionCache.has(t.toTag))return this.ackRetransmissionCache.set(t.toTag,void 0),void(this.user.receiveResponse&&this.user.receiveResponse(t));const i=this.ackRetransmissionCache.get(t.toTag);return i?void this.send(i.toString()).catch(s=>{this.logTransportError(s,"Failed to send retransmission of ACK to 2xx response.")}):void 0}break;case G.Completed:if(r>=300&&r<=699)return void this.ack(t);break;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`Received unexpected ${r} response while in state ${this.state}.`;this.logger.warn(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"INVITE client transaction"}ack(t){const r=this.request.ruri,n=this.request.callId,i=this.request.cseq,s=this.request.getHeader("from"),o=t.getHeader("to"),a=this.request.getHeader("via"),l=this.request.getHeader("route");if(!s)throw new Error("From undefined.");if(!o)throw new Error("To undefined.");if(!a)throw new Error("Via undefined.");let c=`ACK ${r} SIP/2.0\r
`;l&&(c+=`Route: ${l}\r
`),c+=`Via: ${a}\r
`,c+=`To: ${o}\r
`,c+=`From: ${s}\r
`,c+=`Call-ID: ${n}\r
`,c+=`CSeq: ${i} ACK\r
`,c+=`Max-Forwards: 70\r
`,c+=`Content-Length: 0\r
\r
`,this.send(c).catch(u=>{this.logTransportError(u,"Failed to send ACK to non-2xx response.")})}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Calling:n();break;case G.Proceeding:this.state!==G.Calling&&n();break;case G.Accepted:case G.Completed:this.state!==G.Calling&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Calling&&this.state!==G.Accepted&&this.state!==G.Completed&&(r||n());break;default:n()}this.B&&(clearTimeout(this.B),this.B=void 0),G.Proceeding,t===G.Completed&&(this.D=setTimeout(()=>this.timerD(),tr.TIMER_D)),t===G.Accepted&&(this.M=setTimeout(()=>this.timerM(),tr.TIMER_M)),t===G.Terminated&&this.dispose(),this.setState(t)}timerA(){}timerB(){this.logger.debug(`Timer B expired for INVITE client transaction ${this.id}.`),this.state===G.Calling&&(this.onRequestTimeout(),this.stateTransition(G.Terminated))}timerD(){this.logger.debug(`Timer D expired for INVITE client transaction ${this.id}.`),this.state===G.Completed&&this.stateTransition(G.Terminated)}timerM(){this.logger.debug(`Timer M expired for INVITE client transaction ${this.id}.`),this.state===G.Accepted&&this.stateTransition(G.Terminated)}}class Sr{constructor(t,r,n,i){this.transactionConstructor=t,this.core=r,this.message=n,this.delegate=i,this.challenged=!1,this.stale=!1,this.logger=this.loggerFactory.getLogger("sip.user-agent-client"),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}cancel(t,r={}){if(!this.transaction)throw new Error("Transaction undefined.");if(!this.message.to)throw new Error("To undefined.");if(!this.message.from)throw new Error("From undefined.");const n=this.core.makeOutgoingRequestMessage(be.CANCEL,this.message.ruri,this.message.from.uri,this.message.to.uri,{toTag:this.message.toTag,fromTag:this.message.fromTag,callId:this.message.callId,cseq:this.message.cseq},r.extraHeaders);return n.branch=this.message.branch,this.message.headers.Route&&(n.headers.Route=this.message.headers.Route),t&&n.setHeader("Reason",t),this.transaction.state===G.Proceeding?new Sr(tn,this.core,n):this.transaction.addStateChangeListener(()=>{this.transaction&&this.transaction.state===G.Proceeding&&new Sr(tn,this.core,n)},{once:!0}),n}authenticationGuard(t,r){const n=t.statusCode;if(!n)throw new Error("Response status code undefined.");if(n!==401&&n!==407)return!0;let i,s;if(n===401?(i=t.parseHeader("www-authenticate"),s="authorization"):(i=t.parseHeader("proxy-authenticate"),s="proxy-authorization"),!i)return this.logger.warn(n+" with wrong or missing challenge, cannot authenticate"),!0;if(this.challenged&&(this.stale||i.stale!==!0))return this.logger.warn(n+" apparently in authentication loop, cannot authenticate"),!0;if(!this.credentials&&(this.credentials=this.core.configuration.authenticationFactory(),!this.credentials))return this.logger.warn("Unable to obtain credentials, cannot authenticate"),!0;if(!this.credentials.authenticate(this.message,i))return!0;this.challenged=!0,i.stale&&(this.stale=!0);let o=this.message.cseq+=1;return r&&r.localSequenceNumber&&(r.incrementLocalSequenceNumber(),o=this.message.cseq=r.localSequenceNumber),this.message.setHeader("cseq",o+" "+this.message.method),this.message.setHeader(s,this.credentials.toString()),this.init(),!1}onRequestTimeout(){this.logger.warn("User agent client request timed out. Generating internal 408 Request Timeout.");const t=new Ps;t.statusCode=408,t.reasonPhrase="Request Timeout",this.receiveResponse(t)}onTransportError(t){this.logger.error(t.message),this.logger.error("User agent client request transport error. Generating internal 503 Service Unavailable.");const r=new Ps;r.statusCode=503,r.reasonPhrase="Service Unavailable",this.receiveResponse(r)}receiveResponse(t){if(!this.authenticationGuard(t))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(r):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t});break;case/^2[0-9]{2}$/.test(r):this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t});break;case/^3[0-9]{2}$/.test(r):this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(r):this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${r}`)}}init(){const t={loggerFactory:this.loggerFactory,onRequestTimeout:()=>this.onRequestTimeout(),onStateChange:i=>{i===G.Terminated&&(this.core.userAgentClients.delete(n),r===this._transaction&&this.dispose())},onTransportError:i=>this.onTransportError(i),receiveResponse:i=>this.receiveResponse(i)},r=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=r;const n=r.id+r.request.method;this.core.userAgentClients.set(n,this)}}class P7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.BYE,n);super(tn,t.userAgentCore,i,r),t.dispose()}}class Wr extends aT{constructor(t,r,n){super(t,r,n,G.Trying,"sip.transaction.nist")}dispose(){this.J&&(clearTimeout(this.J),this.J=void 0),super.dispose()}get kind(){return"nist"}receiveRequest(t){switch(this.state){case G.Trying:break;case G.Proceeding:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of provisional response.")});break;case G.Completed:if(!this.lastResponse)throw new Error("Last response undefined.");this.send(this.lastResponse).catch(r=>{this.logTransportError(r,"Failed to send retransmission of final response.")});break;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}}receiveResponse(t,r){if(t<100||t>699)throw new Error(`Invalid status code ${t}`);if(t>100&&t<=199)throw new Error("Provisional response other than 100 not allowed.");switch(this.state){case G.Trying:if(this.lastResponse=r,t>=100&&t<200)return this.stateTransition(G.Proceeding),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send provisional response.")});if(t>=200&&t<=699)return this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case G.Proceeding:if(this.lastResponse=r,t>=200&&t<=699)return this.stateTransition(G.Completed),void this.send(r).catch(i=>{this.logTransportError(i,"Failed to send final response.")});break;case G.Completed:return;case G.Terminated:break;default:throw new Error(`Invalid state ${this.state}`)}const n=`Non-INVITE server transaction received unexpected ${t} response from TU while in state ${this.state}.`;throw this.logger.error(n),new Error(n)}onTransportError(t){this.user.onTransportError&&this.user.onTransportError(t),this.stateTransition(G.Terminated,!0)}typeToString(){return"non-INVITE server transaction"}stateTransition(t,r=!1){const n=()=>{throw new Error(`Invalid state transition from ${this.state} to ${t}`)};switch(t){case G.Trying:n();break;case G.Proceeding:this.state!==G.Trying&&n();break;case G.Completed:this.state!==G.Trying&&this.state!==G.Proceeding&&n();break;case G.Terminated:this.state!==G.Proceeding&&this.state!==G.Completed&&(r||n());break;default:n()}t===G.Completed&&(this.J=setTimeout(()=>this.timerJ(),tr.TIMER_J)),t===G.Terminated&&this.dispose(),this.setState(t)}timerJ(){this.logger.debug(`Timer J expired for NON-INVITE server transaction ${this.id}.`),this.state===G.Completed&&this.stateTransition(G.Terminated)}}class mi{constructor(t,r,n,i){this.transactionConstructor=t,this.core=r,this.message=n,this.delegate=i,this.logger=this.loggerFactory.getLogger("sip.user-agent-server"),this.toTag=n.toTag?n.toTag:qh(),this.init()}dispose(){this.transaction.dispose()}get loggerFactory(){return this.core.loggerFactory}get transaction(){if(!this._transaction)throw new Error("Transaction undefined.");return this._transaction}accept(t={statusCode:200}){if(!this.acceptable)throw new hs(`${this.message.method} not acceptable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<200||r>299)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}progress(t={statusCode:180}){if(!this.progressable)throw new hs(`${this.message.method} not progressable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<101||r>199)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}redirect(t,r={statusCode:302}){if(!this.redirectable)throw new hs(`${this.message.method} not redirectable in state ${this.transaction.state}.`);const n=r.statusCode;if(n<300||n>399)throw new TypeError(`Invalid statusCode: ${n}`);const i=new Array;return t.forEach(s=>i.push(`Contact: ${s.toString()}`)),r.extraHeaders=(r.extraHeaders||[]).concat(i),this.reply(r)}reject(t={statusCode:480}){if(!this.rejectable)throw new hs(`${this.message.method} not rejectable in state ${this.transaction.state}.`);const r=t.statusCode;if(r<400||r>699)throw new TypeError(`Invalid statusCode: ${r}`);return this.reply(t)}trying(t){if(!this.tryingable)throw new hs(`${this.message.method} not tryingable in state ${this.transaction.state}.`);return this.reply({statusCode:100})}receiveCancel(t){this.delegate&&this.delegate.onCancel&&this.delegate.onCancel(t)}get acceptable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding||this.transaction.state===G.Accepted;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get progressable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return!1;throw new Error("Unknown transaction type.")}get redirectable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get rejectable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying||this.transaction.state===G.Proceeding;throw new Error("Unknown transaction type.")}get tryingable(){if(this.transaction instanceof Mr)return this.transaction.state===G.Proceeding;if(this.transaction instanceof Wr)return this.transaction.state===G.Trying;throw new Error("Unknown transaction type.")}reply(t){t.toTag||t.statusCode===100||(t.toTag=this.toTag),t.userAgent=t.userAgent||this.core.configuration.userAgentHeaderFieldValue,t.supported=t.supported||this.core.configuration.supportedOptionTagsResponse;const r=sT(this.message,t);return this.transaction.receiveResponse(t.statusCode,r.message),r}init(){const t={loggerFactory:this.loggerFactory,onStateChange:i=>{i===G.Terminated&&(this.core.userAgentServers.delete(n),this.dispose())},onTransportError:i=>{this.logger.error(i.message),this.delegate&&this.delegate.onTransportError?this.delegate.onTransportError(i):this.logger.error("User agent server response transport error.")}},r=new this.transactionConstructor(this.message,this.core.transport,t);this._transaction=r;const n=r.id;this.core.userAgentServers.set(r.id,this)}}class B7 extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n)}}class $7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.INFO,n);super(tn,t.userAgentCore,i,r)}}class L7 extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n)}}class lT extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class cT extends mi{constructor(t,r,n){super(Wr,t,r,n)}}class O7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.NOTIFY,n);super(tn,t.userAgentCore,i,r)}}class Xd extends mi{constructor(t,r,n){const i=t.userAgentCore!==void 0?t.userAgentCore:t;super(Wr,i,r,n)}}class M7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.PRACK,n);super(tn,t.userAgentCore,i,r),t.signalingStateTransition(i)}}class U7 extends mi{constructor(t,r,n){super(Wr,t.userAgentCore,r,n),t.signalingStateTransition(r),this.dialog=t}accept(t={statusCode:200}){return t.body&&this.dialog.signalingStateTransition(t.body),super.accept(t)}}class H7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.INVITE,n);super(ys,t.userAgentCore,i,r),this.delegate=r,t.signalingStateTransition(i),t.reinviteUserAgentClient=this,this.dialog=t}receiveResponse(t){if(!this.authenticationGuard(t,this.dialog))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t});break;case/^1[0-9]{2}$/.test(r):this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:this.dialog,prack:n=>{throw new Error("Unimplemented.")}});break;case/^2[0-9]{2}$/.test(r):this.dialog.signalingStateTransition(t),this.delegate&&this.delegate.onAccept&&this.delegate.onAccept({message:t,session:this.dialog,ack:n=>this.dialog.ack(n)});break;case/^3[0-9]{2}$/.test(r):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t});break;case/^[4-6][0-9]{2}$/.test(r):this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentClient=void 0,this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t});break;default:throw new Error(`Invalid status code ${r}`)}}}class F7 extends mi{constructor(t,r,n){super(Mr,t.userAgentCore,r,n),t.reinviteUserAgentServer=this,this.dialog=t}accept(t={statusCode:200}){t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(this.dialog.routeSet.map(s=>`Record-Route: ${s}`));const r=super.accept(t),n=this.dialog,i=Object.assign(Object.assign({},r),{session:n});return t.body&&this.dialog.signalingStateTransition(t.body),this.dialog.reConfirm(),i}progress(t={statusCode:180}){const r=super.progress(t),n=this.dialog,i=Object.assign(Object.assign({},r),{session:n});return t.body&&this.dialog.signalingStateTransition(t.body),i}redirect(t,r={statusCode:302}){throw this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,new Error("Unimplemented.")}reject(t={statusCode:488}){return this.dialog.signalingStateRollback(),this.dialog.reinviteUserAgentServer=void 0,super.reject(t)}}class j7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.REFER,n);super(tn,t.userAgentCore,i,r)}}class uT extends mi{constructor(t,r,n){const i=t.userAgentCore!==void 0?t.userAgentCore:t;super(Wr,i,r,n)}}class Zd extends Wa{constructor(t,r,n,i){super(r,n),this.initialTransaction=t,this._signalingState=pe.Initial,this.ackWait=!1,this.ackProcessing=!1,this.delegate=i,t instanceof Mr&&(this.ackWait=!0),this.early||this.start2xxRetransmissionTimer(),this.signalingStateTransition(t.request),this.logger=r.loggerFactory.getLogger("sip.invite-dialog"),this.logger.log(`INVITE dialog ${this.id} constructed`)}dispose(){super.dispose(),this._signalingState=pe.Closed,this._offer=void 0,this._answer=void 0,this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.logger.log(`INVITE dialog ${this.id} destroyed`)}get sessionState(){return this.early?gn.Early:this.ackWait?gn.AckWait:this._signalingState===pe.Closed?gn.Terminated:gn.Confirmed}get signalingState(){return this._signalingState}get offer(){return this._offer}get answer(){return this._answer}confirm(){this.early&&this.start2xxRetransmissionTimer(),super.confirm()}reConfirm(){this.reinviteUserAgentServer&&this.startReInvite2xxRetransmissionTimer()}ack(t={}){let r;if(this.logger.log(`INVITE dialog ${this.id} sending ACK request`),this.reinviteUserAgentClient){if(!(this.reinviteUserAgentClient.transaction instanceof ys))throw new Error("Transaction not instance of InviteClientTransaction.");r=this.reinviteUserAgentClient.transaction,this.reinviteUserAgentClient=void 0}else{if(!(this.initialTransaction instanceof ys))throw new Error("Initial transaction not instance of InviteClientTransaction.");r=this.initialTransaction}const n=this.createOutgoingRequestMessage(be.ACK,{cseq:r.request.cseq,extraHeaders:t.extraHeaders,body:t.body});return r.ackResponse(n),this.signalingStateTransition(n),{message:n}}bye(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending BYE request`),this.initialTransaction instanceof Mr){if(this.early)throw new Error("UAS MUST NOT send a BYE on early dialogs.");if(this.ackWait&&this.initialTransaction.state!==G.Terminated)throw new Error("UAS MUST NOT send a BYE on a confirmed dialog until it has received an ACK for its 2xx response or until the server transaction times out.")}return new P7(this,t,r)}info(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending INFO request`),this.early)throw new Error("Dialog not confirmed.");return new $7(this,t,r)}invite(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending INVITE request`),this.early)throw new Error("Dialog not confirmed.");if(this.reinviteUserAgentClient)throw new Error("There is an ongoing re-INVITE client transaction.");if(this.reinviteUserAgentServer)throw new Error("There is an ongoing re-INVITE server transaction.");return new H7(this,t,r)}message(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending MESSAGE request`),this.early)throw new Error("Dialog not confirmed.");const n=this.createOutgoingRequestMessage(be.MESSAGE,r);return new lT(this.core,n,t)}notify(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending NOTIFY request`),this.early)throw new Error("Dialog not confirmed.");return new O7(this,t,r)}prack(t,r){return this.logger.log(`INVITE dialog ${this.id} sending PRACK request`),new M7(this,t,r)}refer(t,r){if(this.logger.log(`INVITE dialog ${this.id} sending REFER request`),this.early)throw new Error("Dialog not confirmed.");return new j7(this,t,r)}receiveRequest(t){if(this.logger.log(`INVITE dialog ${this.id} received ${t.method} request`),t.method!==be.ACK)if(this.sequenceGuard(t)){if(super.receiveRequest(t),t.method===be.INVITE){const r=()=>{const i=this.ackWait?"waiting for initial ACK":"processing initial ACK";this.logger.warn(`INVITE dialog ${this.id} received re-INVITE while ${i}`),this.logger.warn("RFC 5407 suggests the following to avoid this race condition...  Note: Implementation issues are outside the scope of this document, but the following tip is provided for avoiding race conditions of this type.  The caller can delay sending re-INVITE F6 for some period of time (2 seconds, perhaps), after which the caller can reasonably assume that its ACK has been received.  Implementors can decouple the actions of the user (e.g., pressing the hold button) from the actions of the protocol (the sending of re-INVITE F6), so that the UA can behave like this.  In this case, it is the implementor's choice as to how long to wait.  In most cases, such an implementation may be useful to prevent the type of race condition shown in this section. This document expresses no preference about whether or not they should wait for an ACK to be delivered.  After considering the impact on user experience, implementors should decide whether or not to wait for a while, because the user experience depends on the implementation and has no direct bearing on protocol behavior.")},n=[`Retry-After: ${Math.floor(10*Math.random())+1}`];if(this.ackProcessing)return this.core.replyStateless(t,{statusCode:500,extraHeaders:n}),void r();if(this.ackWait&&this.signalingState!==pe.Stable)return this.core.replyStateless(t,{statusCode:500,extraHeaders:n}),void r();if(this.reinviteUserAgentServer)return void this.core.replyStateless(t,{statusCode:500,extraHeaders:n});if(this.reinviteUserAgentClient)return void this.core.replyStateless(t,{statusCode:491})}if(t.method===be.INVITE){const r=t.parseHeader("contact");if(!r)throw new Error("Contact undefined.");if(!(r instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");this.dialogState.remoteTarget=r.uri}switch(t.method){case be.BYE:{const r=new B7(this,t);this.delegate&&this.delegate.onBye?this.delegate.onBye(r):r.accept(),this.dispose()}break;case be.INFO:{const r=new L7(this,t);this.delegate&&this.delegate.onInfo?this.delegate.onInfo(r):r.reject({statusCode:469,extraHeaders:["Recv-Info:"]})}break;case be.INVITE:{const r=new F7(this,t);this.signalingStateTransition(t),this.delegate&&this.delegate.onInvite?this.delegate.onInvite(r):r.reject({statusCode:488})}break;case be.MESSAGE:{const r=new cT(this.core,t);this.delegate&&this.delegate.onMessage?this.delegate.onMessage(r):r.accept()}break;case be.NOTIFY:{const r=new Xd(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(r):r.accept()}break;case be.PRACK:{const r=new U7(this,t);this.delegate&&this.delegate.onPrack?this.delegate.onPrack(r):r.accept()}break;case be.REFER:{const r=new uT(this,t);this.delegate&&this.delegate.onRefer?this.delegate.onRefer(r):r.reject()}break;default:this.logger.log(`INVITE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501})}}else this.logger.log(`INVITE dialog ${this.id} rejected out of order ${t.method} request.`);else{if(this.ackWait){if(this.initialTransaction instanceof ys)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);if(this.initialTransaction.request.cseq!==t.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);this.ackWait=!1}else{if(!this.reinviteUserAgentServer)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);if(this.reinviteUserAgentServer.transaction.request.cseq!==t.cseq)return void this.logger.warn(`INVITE dialog ${this.id} received unexpected ${t.method} request, dropping.`);this.reinviteUserAgentServer=void 0}if(this.signalingStateTransition(t),this.delegate&&this.delegate.onAck){const r=this.delegate.onAck({message:t});r instanceof Promise&&(this.ackProcessing=!0,r.then(()=>this.ackProcessing=!1).catch(()=>this.ackProcessing=!1))}}}reliableSequenceGuard(t){const r=t.statusCode;if(!r)throw new Error("Status code undefined");if(r>100&&r<200){const n=t.getHeader("require"),i=t.getHeader("rseq"),s=n&&n.includes("100rel")&&i?Number(i):void 0;if(s){if(this.rseq&&this.rseq+1!==s)return!1;this.rseq=this.rseq?this.rseq+1:s}}return!0}signalingStateRollback(){this._signalingState!==pe.HaveLocalOffer&&this.signalingState!==pe.HaveRemoteOffer||this._rollbackOffer&&this._rollbackAnswer&&(this._signalingState=pe.Stable,this._offer=this._rollbackOffer,this._answer=this._rollbackAnswer)}signalingStateTransition(t){const r=Zl(t);if(r&&r.contentDisposition==="session"){if(this._signalingState===pe.Stable&&(this._rollbackOffer=this._offer,this._rollbackAnswer=this._answer),t instanceof Da)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveRemoteOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.HaveRemoteOffer:case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof Ps)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveRemoteOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.HaveRemoteOffer:case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(t instanceof fo)switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveLocalOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:break;case pe.HaveRemoteOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}if(rT(t))switch(this._signalingState){case pe.Initial:case pe.Stable:this._signalingState=pe.HaveLocalOffer,this._offer=r,this._answer=void 0;break;case pe.HaveLocalOffer:break;case pe.HaveRemoteOffer:this._signalingState=pe.Stable,this._answer=r;break;case pe.Closed:break;default:throw new Error("Unexpected signaling state.")}}}start2xxRetransmissionTimer(){if(this.initialTransaction instanceof Mr){const t=this.initialTransaction;let r=tr.T1;const n=()=>{this.ackWait?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),r=Math.min(2*r,tr.T2),this.invite2xxTimer=setTimeout(n,r)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(n,r);const i=()=>{t.state===G.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.ackWait&&(this.delegate&&this.delegate.onAckTimeout?this.delegate.onAckTimeout():this.bye()))};t.addStateChangeListener(i)}}startReInvite2xxRetransmissionTimer(){if(this.reinviteUserAgentServer&&this.reinviteUserAgentServer.transaction instanceof Mr){const t=this.reinviteUserAgentServer.transaction;let r=tr.T1;const n=()=>{this.reinviteUserAgentServer?(this.logger.log("No ACK for 2xx response received, attempting retransmission"),t.retransmitAcceptedResponse(),r=Math.min(2*r,tr.T2),this.invite2xxTimer=setTimeout(n,r)):this.invite2xxTimer=void 0};this.invite2xxTimer=setTimeout(n,r);const i=()=>{t.state===G.Terminated&&(t.removeStateChangeListener(i),this.invite2xxTimer&&(clearTimeout(this.invite2xxTimer),this.invite2xxTimer=void 0),this.reinviteUserAgentServer)};t.addStateChangeListener(i)}}}class V7 extends Sr{constructor(t,r,n){super(ys,t,r,n),this.confirmedDialogAcks=new Map,this.confirmedDialogs=new Map,this.earlyDialogs=new Map,this.delegate=n}dispose(){this.earlyDialogs.forEach(t=>t.dispose()),this.earlyDialogs.clear(),super.dispose()}onTransportError(t){if(this.transaction.state===G.Calling)return super.onTransportError(t);this.logger.error(t.message),this.logger.error("User agent client request transport error while sending ACK.")}receiveResponse(t){if(!this.authenticationGuard(t))return;const r=t.statusCode?t.statusCode.toString():"";if(!r)throw new Error("Response status code undefined.");switch(!0){case/^100$/.test(r):return void(this.delegate&&this.delegate.onTrying&&this.delegate.onTrying({message:t}));case/^1[0-9]{2}$/.test(r):{if(!t.toTag)return void this.logger.warn("Non-100 1xx INVITE response received without a to tag, dropping.");if(!t.parseHeader("contact"))return void this.logger.error("Non-100 1xx INVITE response received without a Contact header field, dropping.");const n=Wa.initialDialogStateForUserAgentClient(this.message,t);let i=this.earlyDialogs.get(n.id);if(!i){const o=this.transaction;if(!(o instanceof ys))throw new Error("Transaction not instance of InviteClientTransaction.");i=new Zd(o,this.core,n),this.earlyDialogs.set(i.id,i)}if(!i.reliableSequenceGuard(t))return void this.logger.warn("1xx INVITE reliable response received out of order or is a retransmission, dropping.");i.signalingState!==pe.Initial&&i.signalingState!==pe.HaveLocalOffer||i.signalingStateTransition(t);const s=i;this.delegate&&this.delegate.onProgress&&this.delegate.onProgress({message:t,session:s,prack:o=>s.prack(void 0,o)})}return;case/^2[0-9]{2}$/.test(r):{if(!t.toTag)return void this.logger.error("2xx INVITE response received without a to tag, dropping.");if(!t.parseHeader("contact"))return void this.logger.error("2xx INVITE response received without a Contact header field, dropping.");const n=Wa.initialDialogStateForUserAgentClient(this.message,t);let i=this.confirmedDialogs.get(n.id);if(i){const o=this.confirmedDialogAcks.get(n.id);if(o){const a=this.transaction;if(!(a instanceof ys))throw new Error("Client transaction not instance of InviteClientTransaction.");a.ackResponse(o.message)}return}if(i=this.earlyDialogs.get(n.id),i)i.confirm(),i.recomputeRouteSet(t),this.earlyDialogs.delete(i.id),this.confirmedDialogs.set(i.id,i);else{const o=this.transaction;if(!(o instanceof ys))throw new Error("Transaction not instance of InviteClientTransaction.");i=new Zd(o,this.core,n),this.confirmedDialogs.set(i.id,i)}i.signalingState!==pe.Initial&&i.signalingState!==pe.HaveLocalOffer||i.signalingStateTransition(t);const s=i;if(this.delegate&&this.delegate.onAccept)this.delegate.onAccept({message:t,session:s,ack:o=>{const a=s.ack(o);return this.confirmedDialogAcks.set(s.id,a),a}});else{const o=s.ack();this.confirmedDialogAcks.set(s.id,o)}}return;case/^3[0-9]{2}$/.test(r):return this.earlyDialogs.forEach(n=>n.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onRedirect&&this.delegate.onRedirect({message:t}));case/^[4-6][0-9]{2}$/.test(r):return this.earlyDialogs.forEach(n=>n.dispose()),this.earlyDialogs.clear(),void(this.delegate&&this.delegate.onReject&&this.delegate.onReject({message:t}));default:throw new Error(`Invalid status code ${r}`)}}}class fp extends mi{constructor(t,r,n){super(Mr,t,r,n),this.core=t}dispose(){this.earlyDialog&&this.earlyDialog.dispose(),super.dispose()}accept(t={statusCode:200}){if(!this.acceptable)throw new hs(`${this.message.method} not acceptable in state ${this.transaction.state}.`);if(!this.confirmedDialog)if(this.earlyDialog)this.earlyDialog.confirm(),this.confirmedDialog=this.earlyDialog,this.earlyDialog=void 0;else{const l=this.transaction;if(!(l instanceof Mr))throw new Error("Transaction not instance of InviteClientTransaction.");const c=Wa.initialDialogStateForUserAgentServer(this.message,this.toTag);this.confirmedDialog=new Zd(l,this.core,c)}const r=this.message.getHeaders("record-route").map(l=>`Record-Route: ${l}`),n=`Contact: ${this.core.configuration.contact.toString()}`,i="Allow: "+vs.toString();if(!t.body){if(this.confirmedDialog.signalingState===pe.Stable)t.body=this.confirmedDialog.answer;else if(this.confirmedDialog.signalingState===pe.Initial||this.confirmedDialog.signalingState===pe.HaveRemoteOffer)throw new Error("Response must have a body.")}t.statusCode=t.statusCode||200,t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(r),t.extraHeaders.push(i),t.extraHeaders.push(n);const s=super.accept(t),o=this.confirmedDialog,a=Object.assign(Object.assign({},s),{session:o});return t.body&&this.confirmedDialog.signalingState!==pe.Stable&&this.confirmedDialog.signalingStateTransition(t.body),a}progress(t={statusCode:180}){if(!this.progressable)throw new hs(`${this.message.method} not progressable in state ${this.transaction.state}.`);if(!this.earlyDialog){const a=this.transaction;if(!(a instanceof Mr))throw new Error("Transaction not instance of InviteClientTransaction.");const l=Wa.initialDialogStateForUserAgentServer(this.message,this.toTag,!0);this.earlyDialog=new Zd(a,this.core,l)}const r=this.message.getHeaders("record-route").map(a=>`Record-Route: ${a}`),n=`Contact: ${this.core.configuration.contact}`;t.extraHeaders=t.extraHeaders||[],t.extraHeaders=t.extraHeaders.concat(r),t.extraHeaders.push(n);const i=super.progress(t),s=this.earlyDialog,o=Object.assign(Object.assign({},i),{session:s});return t.body&&this.earlyDialog.signalingState!==pe.Stable&&this.earlyDialog.signalingStateTransition(t.body),o}redirect(t,r={statusCode:302}){return super.redirect(t,r)}reject(t={statusCode:486}){return super.reject(t)}}class q7 extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class z7 extends Sr{constructor(t,r,n){super(tn,t,r,n)}}class K7 extends mi{constructor(t,r,n){super(Wr,t,r,n),this.core=t}}class G7 extends Sr{constructor(t,r,n){const i=t.createOutgoingRequestMessage(be.SUBSCRIBE,n);super(tn,t.userAgentCore,i,r),this.dialog=t}waitNotifyStop(){}receiveResponse(t){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const r=t.getHeader("Expires");if(r){const n=Number(r);this.dialog.subscriptionExpires>n&&(this.dialog.subscriptionExpires=n)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE")}t.statusCode&&t.statusCode>=400&&t.statusCode<700&&[404,405,410,416,480,481,482,483,484,485,489,501,604].includes(t.statusCode)&&this.dialog.terminate(),super.receiveResponse(t)}}class M2 extends Wa{constructor(t,r,n,i,s,o){super(i,s),this.delegate=o,this._autoRefresh=!1,this._subscriptionEvent=t,this._subscriptionExpires=r,this._subscriptionExpiresInitial=r,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this._subscriptionState=n,this.logger=i.loggerFactory.getLogger("sip.subscribe-dialog"),this.logger.log(`SUBSCRIBE dialog ${this.id} constructed`)}static initialDialogStateForSubscription(t,r){const n=r.getHeaders("record-route"),i=r.parseHeader("contact");if(!i)throw new Error("Contact undefined.");if(!(i instanceof Or))throw new Error("Contact not instance of NameAddrHeader.");const s=i.uri,o=t.cseq,a=t.callId,l=t.fromTag,c=r.fromTag;if(!a)throw new Error("Call id undefined.");if(!l)throw new Error("From tag undefined.");if(!c)throw new Error("To tag undefined.");if(!t.from)throw new Error("From undefined.");if(!t.to)throw new Error("To undefined.");return{id:a+l+c,early:!1,callId:a,localTag:l,remoteTag:c,localSequenceNumber:o,remoteSequenceNumber:void 0,localURI:t.from.uri,remoteURI:t.to.uri,remoteTarget:s,routeSet:n,secure:!1}}dispose(){super.dispose(),this.N&&(clearTimeout(this.N),this.N=void 0),this.refreshTimerClear(),this.logger.log(`SUBSCRIBE dialog ${this.id} destroyed`)}get autoRefresh(){return this._autoRefresh}set autoRefresh(t){this._autoRefresh=!0,this.refreshTimerSet()}get subscriptionEvent(){return this._subscriptionEvent}get subscriptionExpires(){const t=Math.floor(Date.now()/1e3)-this._subscriptionExpiresLastSet,r=this._subscriptionExpires-t;return Math.max(r,0)}set subscriptionExpires(t){if(t<0)throw new Error("Expires must be greater than or equal to zero.");if(this._subscriptionExpires=t,this._subscriptionExpiresLastSet=Math.floor(Date.now()/1e3),this.autoRefresh){const r=this.subscriptionRefresh;(r===void 0||r>=t)&&this.refreshTimerSet()}}get subscriptionExpiresInitial(){return this._subscriptionExpiresInitial}get subscriptionRefresh(){if(this._subscriptionRefresh===void 0||this._subscriptionRefreshLastSet===void 0)return;const t=Math.floor(Date.now()/1e3)-this._subscriptionRefreshLastSet,r=this._subscriptionRefresh-t;return Math.max(r,0)}get subscriptionState(){return this._subscriptionState}receiveRequest(t){this.logger.log(`SUBSCRIBE dialog ${this.id} received ${t.method} request`),this.sequenceGuard(t)?(super.receiveRequest(t),t.method===be.NOTIFY?this.onNotify(t):(this.logger.log(`SUBSCRIBE dialog ${this.id} received unimplemented ${t.method} request`),this.core.replyStateless(t,{statusCode:501}))):this.logger.log(`SUBSCRIBE dialog ${this.id} rejected out of order ${t.method} request.`)}refresh(){const t="Allow: "+vs.toString(),r={};return r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push(t),r.extraHeaders.push("Event: "+this.subscriptionEvent),r.extraHeaders.push("Expires: "+this.subscriptionExpiresInitial),r.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,r)}subscribe(t,r={}){var n;if(this.subscriptionState!==ct.Pending&&this.subscriptionState!==ct.Active)throw new Error(`Invalid state ${this.subscriptionState}. May only re-subscribe while in state "pending" or "active".`);this.logger.log(`SUBSCRIBE dialog ${this.id} sending SUBSCRIBE request`);const i=new G7(this,t,r);return this.N&&(clearTimeout(this.N),this.N=void 0),!((n=r.extraHeaders)===null||n===void 0)&&n.includes("Expires: 0")||(this.N=setTimeout(()=>this.timerN(),tr.TIMER_N)),i}terminate(){this.stateTransition(ct.Terminated),this.onTerminated()}unsubscribe(){const t="Allow: "+vs.toString(),r={};return r.extraHeaders=(r.extraHeaders||[]).slice(),r.extraHeaders.push(t),r.extraHeaders.push("Event: "+this.subscriptionEvent),r.extraHeaders.push("Expires: 0"),r.extraHeaders.push("Contact: "+this.core.configuration.contact.toString()),this.subscribe(void 0,r)}onNotify(t){const r=t.parseHeader("Event").event;if(!r||r!==this.subscriptionEvent)return void this.core.replyStateless(t,{statusCode:489});this.N&&(clearTimeout(this.N),this.N=void 0);const n=t.parseHeader("Subscription-State");if(!n||!n.state)return void this.core.replyStateless(t,{statusCode:489});const i=n.state,s=n.expires?Math.max(n.expires,0):void 0;switch(i){case"pending":this.stateTransition(ct.Pending,s);break;case"active":this.stateTransition(ct.Active,s);break;case"terminated":this.stateTransition(ct.Terminated,s);break;default:this.logger.warn("Unrecognized subscription state.")}const o=new Xd(this,t);this.delegate&&this.delegate.onNotify?this.delegate.onNotify(o):o.accept()}onRefresh(t){this.delegate&&this.delegate.onRefresh&&this.delegate.onRefresh(t)}onTerminated(){this.delegate&&this.delegate.onTerminated&&this.delegate.onTerminated()}refreshTimerClear(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=void 0)}refreshTimerSet(){if(this.refreshTimerClear(),this.autoRefresh&&this.subscriptionExpires>0){const t=900*this.subscriptionExpires;this._subscriptionRefresh=Math.floor(t/1e3),this._subscriptionRefreshLastSet=Math.floor(Date.now()/1e3),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this._subscriptionRefresh=void 0,this._subscriptionRefreshLastSet=void 0,this.onRefresh(this.refresh())},t)}}stateTransition(t,r){const n=()=>{this.logger.warn(`Invalid subscription state transition from ${this.subscriptionState} to ${t}`)};switch(t){case ct.Initial:case ct.NotifyWait:return void n();case ct.Pending:if(this.subscriptionState!==ct.NotifyWait&&this.subscriptionState!==ct.Pending)return void n();break;case ct.Active:case ct.Terminated:if(this.subscriptionState!==ct.NotifyWait&&this.subscriptionState!==ct.Pending&&this.subscriptionState!==ct.Active)return void n();break;default:return void n()}t===ct.Pending&&r&&(this.subscriptionExpires=r),t===ct.Active&&r&&(this.subscriptionExpires=r),t===ct.Terminated&&this.dispose(),this._subscriptionState=t}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE dialog. Timed out waiting for NOTIFY."),this.subscriptionState!==ct.Terminated&&(this.stateTransition(ct.Terminated),this.onTerminated())}}class W7 extends Sr{constructor(t,r,n){const i=r.getHeader("Event");if(!i)throw new Error("Event undefined");const s=r.getHeader("Expires");if(!s)throw new Error("Expires undefined");super(tn,t,r,n),this.delegate=n,this.subscriberId=r.callId+r.fromTag+i,this.subscriptionExpiresRequested=this.subscriptionExpires=Number(s),this.subscriptionEvent=i,this.subscriptionState=ct.NotifyWait,this.waitNotifyStart()}dispose(){super.dispose()}onNotify(t){const r=t.message.parseHeader("Event").event;if(!r||r!==this.subscriptionEvent)return this.logger.warn("Failed to parse event."),void t.reject({statusCode:489});const n=t.message.parseHeader("Subscription-State");if(!n||!n.state)return this.logger.warn("Failed to parse subscription state."),void t.reject({statusCode:489});const i=n.state;switch(i){case"pending":case"active":case"terminated":break;default:return this.logger.warn(`Invalid subscription state ${i}`),void t.reject({statusCode:489})}if(i!=="terminated"&&!t.message.parseHeader("contact"))return this.logger.warn("Failed to parse contact."),void t.reject({statusCode:489});if(this.dialog)throw new Error("Dialog already created. This implementation only supports install of single subscriptions.");switch(this.waitNotifyStop(),this.subscriptionExpires=n.expires?Math.min(this.subscriptionExpires,Math.max(n.expires,0)):this.subscriptionExpires,i){case"pending":this.subscriptionState=ct.Pending;break;case"active":this.subscriptionState=ct.Active;break;case"terminated":this.subscriptionState=ct.Terminated;break;default:throw new Error(`Unrecognized state ${i}.`)}if(this.subscriptionState!==ct.Terminated){const s=M2.initialDialogStateForSubscription(this.message,t.message);this.dialog=new M2(this.subscriptionEvent,this.subscriptionExpires,this.subscriptionState,this.core,s)}if(this.delegate&&this.delegate.onNotify){const s=t,o=this.dialog;this.delegate.onNotify({request:s,subscription:o})}else t.accept()}waitNotifyStart(){this.N||(this.core.subscribers.set(this.subscriberId,this),this.N=setTimeout(()=>this.timerN(),tr.TIMER_N))}waitNotifyStop(){this.N&&(this.core.subscribers.delete(this.subscriberId),clearTimeout(this.N),this.N=void 0)}receiveResponse(t){if(this.authenticationGuard(t)){if(t.statusCode&&t.statusCode>=200&&t.statusCode<300){const r=t.getHeader("Expires");if(r){const n=Number(r);n>this.subscriptionExpiresRequested&&this.logger.warn("Expires header in a 200-class response to SUBSCRIBE with a higher value than the one in the request"),n<this.subscriptionExpires&&(this.subscriptionExpires=n)}else this.logger.warn("Expires header missing in a 200-class response to SUBSCRIBE");this.dialog&&this.dialog.subscriptionExpires>this.subscriptionExpires&&(this.dialog.subscriptionExpires=this.subscriptionExpires)}t.statusCode&&t.statusCode>=300&&t.statusCode<700&&this.waitNotifyStop(),super.receiveResponse(t)}}timerN(){this.logger.warn("Timer N expired for SUBSCRIBE user agent client. Timed out waiting for NOTIFY."),this.waitNotifyStop(),this.delegate&&this.delegate.onNotifyTimeout&&this.delegate.onNotifyTimeout()}}class Y7 extends mi{constructor(t,r,n){super(Wr,t,r,n),this.core=t}}const U2=["application/sdp","application/dtmf-relay"];class Q7{constructor(t,r={}){this.userAgentClients=new Map,this.userAgentServers=new Map,this.configuration=t,this.delegate=r,this.dialogs=new Map,this.subscribers=new Map,this.logger=t.loggerFactory.getLogger("sip.user-agent-core")}dispose(){this.reset()}reset(){this.dialogs.forEach(t=>t.dispose()),this.dialogs.clear(),this.subscribers.forEach(t=>t.dispose()),this.subscribers.clear(),this.userAgentClients.forEach(t=>t.dispose()),this.userAgentClients.clear(),this.userAgentServers.forEach(t=>t.dispose()),this.userAgentServers.clear()}get loggerFactory(){return this.configuration.loggerFactory}get transport(){const t=this.configuration.transportAccessor();if(!t)throw new Error("Transport undefined.");return t}invite(t,r){return new V7(this,t,r)}message(t,r){return new lT(this,t,r)}publish(t,r){return new q7(this,t,r)}register(t,r){return new z7(this,t,r)}subscribe(t,r){return new W7(this,t,r)}request(t,r){return new Sr(tn,this,t,r)}makeOutgoingRequestMessage(t,r,n,i,s,o,a){const l=this.configuration.sipjsId,c=this.configuration.displayName,u=this.configuration.viaForceRport,d=this.configuration.hackViaTcp,h=this.configuration.supportedOptionTags.slice();t===be.REGISTER&&h.push("path","gruu"),t===be.INVITE&&(this.configuration.contact.pubGruu||this.configuration.contact.tempGruu)&&h.push("gruu");const f={callIdPrefix:l,forceRport:u,fromDisplayName:c,hackViaTcp:d,optionTags:h,routeSet:this.configuration.routeSet,userAgentString:this.configuration.userAgentHeaderFieldValue,viaHost:this.configuration.viaHost},g=Object.assign(Object.assign({},f),s);return new fo(t,r,n,i,g,o,a)}receiveIncomingRequestFromTransport(t){this.receiveRequestFromTransport(t)}receiveIncomingResponseFromTransport(t){this.receiveResponseFromTransport(t)}replyStateless(t,r){const n=this.configuration.userAgentHeaderFieldValue,i=this.configuration.supportedOptionTagsResponse;r=Object.assign(Object.assign({},r),{userAgent:n,supported:i});const s=sT(t,r);return this.transport.send(s.message).catch(o=>{o instanceof Error&&this.logger.error(o.message),this.logger.error(`Transport error occurred sending stateless reply to ${t.method} request.`)}),s}receiveRequestFromTransport(t){const r=t.viaBranch,n=this.userAgentServers.get(r);t.method===be.ACK&&n&&n.transaction.state===G.Accepted&&n instanceof fp?this.logger.warn(`Discarding out of dialog ACK after 2xx response sent on transaction ${r}.`):t.method!==be.CANCEL?n?n.transaction.receiveRequest(t):this.receiveRequest(t):n?(this.replyStateless(t,{statusCode:200}),n.transaction instanceof Mr&&n.transaction.state===G.Proceeding&&n instanceof fp&&n.receiveCancel(t)):this.replyStateless(t,{statusCode:481})}receiveRequest(t){if(!vs.includes(t.method)){const i="Allow: "+vs.toString();return void this.replyStateless(t,{statusCode:405,extraHeaders:[i]})}if(!t.ruri)throw new Error("Request-URI undefined.");if(t.ruri.scheme!=="sip")return void this.replyStateless(t,{statusCode:416});const r=t.ruri,n=i=>!!i&&i.user===r.user;if(!n(this.configuration.aor)&&!(n(this.configuration.contact.uri)||n(this.configuration.contact.pubGruu)||n(this.configuration.contact.tempGruu)))return this.logger.warn("Request-URI does not point to us."),void(t.method!==be.ACK&&this.replyStateless(t,{statusCode:404}));if(t.method!==be.INVITE||t.hasHeader("Contact")){if(!t.toTag){const i=t.viaBranch;if(!this.userAgentServers.has(i)&&Array.from(this.userAgentServers.values()).some(s=>s.transaction.request.fromTag===t.fromTag&&s.transaction.request.callId===t.callId&&s.transaction.request.cseq===t.cseq))return void this.replyStateless(t,{statusCode:482})}t.toTag?this.receiveInsideDialogRequest(t):this.receiveOutsideDialogRequest(t)}else this.replyStateless(t,{statusCode:400,reasonPhrase:"Missing Contact Header"})}receiveInsideDialogRequest(t){if(t.method===be.NOTIFY){const i=t.parseHeader("Event");if(!i||!i.event)return void this.replyStateless(t,{statusCode:489});const s=t.callId+t.toTag+i.event,o=this.subscribers.get(s);if(o){const a=new Xd(this,t);return void o.onNotify(a)}}const r=t.callId+t.toTag+t.fromTag,n=this.dialogs.get(r);if(n){if(t.method===be.OPTIONS){const i="Allow: "+vs.toString(),s="Accept: "+U2.toString();return void this.replyStateless(t,{statusCode:200,extraHeaders:[i,s]})}n.receiveRequest(t)}else t.method!==be.ACK&&this.replyStateless(t,{statusCode:481})}receiveOutsideDialogRequest(t){switch(t.method){case be.ACK:break;case be.BYE:this.replyStateless(t,{statusCode:481});break;case be.CANCEL:throw new Error(`Unexpected out of dialog request method ${t.method}.`);case be.INFO:this.replyStateless(t,{statusCode:405});break;case be.INVITE:{const r=new fp(this,t);this.delegate.onInvite?this.delegate.onInvite(r):r.reject()}break;case be.MESSAGE:{const r=new cT(this,t);this.delegate.onMessage?this.delegate.onMessage(r):r.accept()}break;case be.NOTIFY:{const r=new Xd(this,t);this.delegate.onNotify?this.delegate.onNotify(r):r.reject({statusCode:405})}break;case be.OPTIONS:{const r="Allow: "+vs.toString(),n="Accept: "+U2.toString();this.replyStateless(t,{statusCode:200,extraHeaders:[r,n]})}break;case be.REFER:{const r=new uT(this,t);this.delegate.onRefer?this.delegate.onRefer(r):r.reject({statusCode:405})}break;case be.REGISTER:{const r=new K7(this,t);this.delegate.onRegister?this.delegate.onRegister(r):r.reject({statusCode:405})}break;case be.SUBSCRIBE:{const r=new Y7(this,t);this.delegate.onSubscribe?this.delegate.onSubscribe(r):r.reject({statusCode:480})}break;default:throw new Error(`Unexpected out of dialog request method ${t.method}.`)}}receiveResponseFromTransport(t){if(t.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response, dropping");const r=t.viaBranch+t.method,n=this.userAgentClients.get(r);n?n.transaction.receiveResponse(t):this.logger.warn(`Discarding unmatched ${t.statusCode} response to ${t.method} ${r}.`)}}class wi{constructor(t,r,n){t.debug("SessionDescriptionHandler.constructor"),this.logger=t,this.mediaStreamFactory=r,this.sessionDescriptionHandlerConfiguration=n,this._localMediaStream=new MediaStream,this._remoteMediaStream=new MediaStream,this._peerConnection=new RTCPeerConnection(n==null?void 0:n.peerConnectionConfiguration),this.initPeerConnectionEventHandlers()}get localMediaStream(){return this._localMediaStream}get remoteMediaStream(){return this._remoteMediaStream}get dataChannel(){return this._dataChannel}get peerConnection(){return this._peerConnection}get peerConnectionDelegate(){return this._peerConnectionDelegate}set peerConnectionDelegate(t){this._peerConnectionDelegate=t}static dispatchAddTrackEvent(t,r){t.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:r}))}static dispatchRemoveTrackEvent(t,r){t.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:r}))}close(){this.logger.debug("SessionDescriptionHandler.close"),this._peerConnection!==void 0&&(this._peerConnection.getReceivers().forEach(t=>{t.track&&t.track.stop()}),this._peerConnection.getSenders().forEach(t=>{t.track&&t.track.stop()}),this._dataChannel&&this._dataChannel.close(),this._peerConnection.close(),this._peerConnection=void 0)}enableReceiverTracks(t){const r=this.peerConnection;if(!r)throw new Error("Peer connection closed.");r.getReceivers().forEach(n=>{n.track&&(n.track.enabled=t)})}enableSenderTracks(t){const r=this.peerConnection;if(!r)throw new Error("Peer connection closed.");r.getSenders().forEach(n=>{n.track&&(n.track.enabled=t)})}getDescription(t,r){var n,i;if(this.logger.debug("SessionDescriptionHandler.getDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=t==null?void 0:t.onDataChannel;const s=(n=t==null?void 0:t.offerOptions)===null||n===void 0?void 0:n.iceRestart,o=(t==null?void 0:t.iceGatheringTimeout)===void 0?(i=this.sessionDescriptionHandlerConfiguration)===null||i===void 0?void 0:i.iceGatheringTimeout:t==null?void 0:t.iceGatheringTimeout;return this.getLocalMediaStream(t).then(()=>this.updateDirection(t)).then(()=>this.createDataChannel(t)).then(()=>this.createLocalOfferOrAnswer(t)).then(a=>this.applyModifiers(a,r)).then(a=>this.setLocalSessionDescription(a)).then(()=>this.waitForIceGatheringComplete(s,o)).then(()=>this.getLocalSessionDescription()).then(a=>({body:a.sdp,contentType:"application/sdp"})).catch(a=>{throw this.logger.error("SessionDescriptionHandler.getDescription failed - "+a),a})}hasDescription(t){return this.logger.debug("SessionDescriptionHandler.hasDescription"),t==="application/sdp"}iceGatheringComplete(){this.logger.debug("SessionDescriptionHandler.iceGatheringComplete"),this.iceGatheringCompleteTimeoutId!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - clearing timeout"),clearTimeout(this.iceGatheringCompleteTimeoutId),this.iceGatheringCompleteTimeoutId=void 0),this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.iceGatheringComplete - resolving promise"),this.iceGatheringCompleteResolve&&this.iceGatheringCompleteResolve(),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0)}sendDtmf(t,r){if(this.logger.debug("SessionDescriptionHandler.sendDtmf"),this._peerConnection===void 0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - peer connection closed"),!1;const n=this._peerConnection.getSenders();if(n.length===0)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no senders"),!1;const i=n[0].dtmf;if(!i)return this.logger.error("SessionDescriptionHandler.sendDtmf failed - no DTMF sender"),!1;const s=r==null?void 0:r.duration,o=r==null?void 0:r.interToneGap;try{i.insertDTMF(t,s,o)}catch(a){return this.logger.error(a.toString()),!1}return this.logger.log("SessionDescriptionHandler.sendDtmf sent via RTP: "+t.toString()),!0}setDescription(t,r,n){if(this.logger.debug("SessionDescriptionHandler.setDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));this.onDataChannel=r==null?void 0:r.onDataChannel;const i=this._peerConnection.signalingState==="have-local-offer"?"answer":"offer";return this.getLocalMediaStream(r).then(()=>this.applyModifiers({sdp:t,type:i},n)).then(s=>this.setRemoteSessionDescription(s)).catch(s=>{throw this.logger.error("SessionDescriptionHandler.setDescription failed - "+s),s})}applyModifiers(t,r){return this.logger.debug("SessionDescriptionHandler.applyModifiers"),r&&r.length!==0?r.reduce((n,i)=>n.then(i),Promise.resolve(t)).then(n=>{if(this.logger.debug("SessionDescriptionHandler.applyModifiers - modified sdp"),!n.sdp||!n.type)throw new Error("Invalid SDP.");return{sdp:n.sdp,type:n.type}}):Promise.resolve(t)}createDataChannel(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));if((t==null?void 0:t.dataChannel)!==!0||this._dataChannel)return Promise.resolve();switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.createDataChannel - creating data channel");try{return this._dataChannel=this._peerConnection.createDataChannel((t==null?void 0:t.dataChannelLabel)||"",t==null?void 0:t.dataChannelOptions),this.onDataChannel&&this.onDataChannel(this._dataChannel),Promise.resolve()}catch(r){return Promise.reject(r)}case"have-remote-offer":return Promise.resolve();default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}createLocalOfferOrAnswer(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP offer"),this._peerConnection.createOffer(t==null?void 0:t.offerOptions);case"have-remote-offer":return this.logger.debug("SessionDescriptionHandler.createLocalOfferOrAnswer - creating SDP answer"),this._peerConnection.createAnswer(t==null?void 0:t.answerOptions);default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}}getLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.getLocalMediaStream"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));let r=Object.assign({},t==null?void 0:t.constraints);if(this.localMediaStreamConstraints){if(r.audio=r.audio||this.localMediaStreamConstraints.audio,r.video=r.video||this.localMediaStreamConstraints.video,JSON.stringify(this.localMediaStreamConstraints.audio)===JSON.stringify(r.audio)&&JSON.stringify(this.localMediaStreamConstraints.video)===JSON.stringify(r.video))return Promise.resolve()}else r.audio===void 0&&r.video===void 0&&(r={audio:!0});return this.localMediaStreamConstraints=r,this.mediaStreamFactory(r,this,t).then(n=>this.setLocalMediaStream(n))}setLocalMediaStream(t){if(this.logger.debug("SessionDescriptionHandler.setLocalMediaStream"),!this._peerConnection)throw new Error("Peer connection undefined.");const r=this._peerConnection,n=this._localMediaStream,i=[],s=l=>{const c=l.kind;if(c!=="audio"&&c!=="video")throw new Error(`Unknown new track kind ${c}.`);const u=r.getSenders().find(d=>d.track&&d.track.kind===c);u?i.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - replacing sender ${c} track`),d()}).then(()=>u.replaceTrack(l).then(()=>{const d=n.getTracks().find(h=>h.kind===c);d&&(d.stop(),n.removeTrack(d),wi.dispatchRemoveTrackEvent(n,d)),n.addTrack(l),wi.dispatchAddTrackEvent(n,l)}).catch(d=>{throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to replace sender ${c} track`),d}))):i.push(new Promise(d=>{this.logger.debug(`SessionDescriptionHandler.setLocalMediaStream - adding sender ${c} track`),d()}).then(()=>{try{r.addTrack(l,n)}catch(d){throw this.logger.error(`SessionDescriptionHandler.setLocalMediaStream - failed to add sender ${c} track`),d}n.addTrack(l),wi.dispatchAddTrackEvent(n,l)}))},o=t.getAudioTracks();o.length&&s(o[0]);const a=t.getVideoTracks();return a.length&&s(a[0]),i.reduce((l,c)=>l.then(()=>c),Promise.resolve())}getLocalSessionDescription(){if(this.logger.debug("SessionDescriptionHandler.getLocalSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const t=this._peerConnection.localDescription;return t?Promise.resolve(t):Promise.reject(new Error("Failed to get local session description"))}setLocalSessionDescription(t){return this.logger.debug("SessionDescriptionHandler.setLocalSessionDescription"),this._peerConnection===void 0?Promise.reject(new Error("Peer connection closed.")):this._peerConnection.setLocalDescription(t)}setRemoteSessionDescription(t){if(this.logger.debug("SessionDescriptionHandler.setRemoteSessionDescription"),this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));const r=t.sdp;let n;switch(this._peerConnection.signalingState){case"stable":n="offer";break;case"have-local-offer":n="answer";break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return r?this._peerConnection.setRemoteDescription({sdp:r,type:n}):(this.logger.error("SessionDescriptionHandler.setRemoteSessionDescription failed - cannot set null sdp"),Promise.reject(new Error("SDP is undefined")))}setRemoteTrack(t){this.logger.debug("SessionDescriptionHandler.setRemoteTrack");const r=this._remoteMediaStream;r.getTrackById(t.id)?this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - have remote ${t.kind} track`):t.kind==="audio"?(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),r.getAudioTracks().forEach(n=>{n.stop(),r.removeTrack(n),wi.dispatchRemoveTrackEvent(r,n)}),r.addTrack(t),wi.dispatchAddTrackEvent(r,t)):t.kind==="video"&&(this.logger.debug(`SessionDescriptionHandler.setRemoteTrack - adding remote ${t.kind} track`),r.getVideoTracks().forEach(n=>{n.stop(),r.removeTrack(n),wi.dispatchRemoveTrackEvent(r,n)}),r.addTrack(t),wi.dispatchAddTrackEvent(r,t))}updateDirection(t){if(this._peerConnection===void 0)return Promise.reject(new Error("Peer connection closed."));switch(this._peerConnection.signalingState){case"stable":this.logger.debug("SessionDescriptionHandler.updateDirection - setting offer direction");{const r=n=>{switch(n){case"inactive":case"recvonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendonly":case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";case"stopped":return"stopped";default:throw new Error("Should never happen")}};this._peerConnection.getTransceivers().forEach(n=>{if(n.direction){const i=r(n.direction);n.direction!==i&&(n.direction=i)}})}break;case"have-remote-offer":this.logger.debug("SessionDescriptionHandler.updateDirection - setting answer direction");{const r=(()=>{const i=this._peerConnection.remoteDescription;if(!i)throw new Error("Failed to read remote offer");const s=/a=sendrecv\r\n|a=sendonly\r\n|a=recvonly\r\n|a=inactive\r\n/.exec(i.sdp);if(s)switch(s[0]){case`a=inactive\r
`:return"inactive";case`a=recvonly\r
`:return"recvonly";case`a=sendonly\r
`:return"sendonly";case`a=sendrecv\r
`:return"sendrecv";default:throw new Error("Should never happen")}return"sendrecv"})(),n=(()=>{switch(r){case"inactive":return"inactive";case"recvonly":return"sendonly";case"sendonly":return t!=null&&t.hold?"inactive":"recvonly";case"sendrecv":return t!=null&&t.hold?"sendonly":"sendrecv";default:throw new Error("Should never happen")}})();this._peerConnection.getTransceivers().forEach(i=>{i.direction&&i.direction!=="stopped"&&i.direction!==n&&(i.direction=n)})}break;default:return Promise.reject(new Error("Invalid signaling state "+this._peerConnection.signalingState))}return Promise.resolve()}waitForIceGatheringComplete(t=!1,r=0){return this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete"),this._peerConnection===void 0?Promise.reject("Peer connection closed."):t||this._peerConnection.iceGatheringState!=="complete"?(this.iceGatheringCompletePromise!==void 0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - rejecting prior waiting promise"),this.iceGatheringCompleteReject&&this.iceGatheringCompleteReject(new Error("Promise superseded.")),this.iceGatheringCompletePromise=void 0,this.iceGatheringCompleteResolve=void 0,this.iceGatheringCompleteReject=void 0),this.iceGatheringCompletePromise=new Promise((n,i)=>{this.iceGatheringCompleteResolve=n,this.iceGatheringCompleteReject=i,r>0&&(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout in "+r),this.iceGatheringCompleteTimeoutId=setTimeout(()=>{this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - timeout"),this.iceGatheringComplete()},r))}),this.iceGatheringCompletePromise):(this.logger.debug("SessionDescriptionHandler.waitForIceGatheringToComplete - already complete"),Promise.resolve())}initPeerConnectionEventHandlers(){if(this.logger.debug("SessionDescriptionHandler.initPeerConnectionEventHandlers"),!this._peerConnection)throw new Error("Peer connection undefined.");const t=this._peerConnection;t.onconnectionstatechange=r=>{var n;const i=t.connectionState;this.logger.debug(`SessionDescriptionHandler.onconnectionstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onconnectionstatechange&&this._peerConnectionDelegate.onconnectionstatechange(r)},t.ondatachannel=r=>{var n;this.logger.debug("SessionDescriptionHandler.ondatachannel"),this._dataChannel=r.channel,this.onDataChannel&&this.onDataChannel(this._dataChannel),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.ondatachannel&&this._peerConnectionDelegate.ondatachannel(r)},t.onicecandidate=r=>{var n;this.logger.debug("SessionDescriptionHandler.onicecandidate"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicecandidate&&this._peerConnectionDelegate.onicecandidate(r)},t.onicecandidateerror=r=>{var n;this.logger.debug("SessionDescriptionHandler.onicecandidateerror"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicecandidateerror&&this._peerConnectionDelegate.onicecandidateerror(r)},t.oniceconnectionstatechange=r=>{var n;const i=t.iceConnectionState;this.logger.debug(`SessionDescriptionHandler.oniceconnectionstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.oniceconnectionstatechange&&this._peerConnectionDelegate.oniceconnectionstatechange(r)},t.onicegatheringstatechange=r=>{var n;const i=t.iceGatheringState;this.logger.debug(`SessionDescriptionHandler.onicegatheringstatechange ${i}`),i==="complete"&&this.iceGatheringComplete(),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onicegatheringstatechange&&this._peerConnectionDelegate.onicegatheringstatechange(r)},t.onnegotiationneeded=r=>{var n;this.logger.debug("SessionDescriptionHandler.onnegotiationneeded"),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onnegotiationneeded&&this._peerConnectionDelegate.onnegotiationneeded(r)},t.onsignalingstatechange=r=>{var n;const i=t.signalingState;this.logger.debug(`SessionDescriptionHandler.onsignalingstatechange ${i}`),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.onsignalingstatechange&&this._peerConnectionDelegate.onsignalingstatechange(r)},t.ontrack=r=>{var n;const i=r.track.kind,s=r.track.enabled?"enabled":"disabled";this.logger.debug(`SessionDescriptionHandler.ontrack ${i} ${s}`),this.setRemoteTrack(r.track),!((n=this._peerConnectionDelegate)===null||n===void 0)&&n.ontrack&&this._peerConnectionDelegate.ontrack(r)}}}function X7(e){return(t,r)=>{e===void 0&&(e=s=>s.audio||s.video?navigator.mediaDevices===void 0?Promise.reject(new Error("Media devices not available in insecure contexts.")):navigator.mediaDevices.getUserMedia.call(navigator.mediaDevices,s):Promise.resolve(new MediaStream));const n={iceGatheringTimeout:(r==null?void 0:r.iceGatheringTimeout)!==void 0?r==null?void 0:r.iceGatheringTimeout:5e3,peerConnectionConfiguration:Object.assign(Object.assign({},{bundlePolicy:"balanced",certificates:void 0,iceCandidatePoolSize:0,iceServers:[{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",rtcpMuxPolicy:"require"}),r==null?void 0:r.peerConnectionConfiguration)},i=t.userAgent.getLogger("sip.SessionDescriptionHandler");return new wi(i,e,n)}}class Kh{constructor(t,r){if(this._state=De.Disconnected,this.transitioningState=!1,this._stateEventEmitter=new wc,this.logger=t,r){const s=r,o=s==null?void 0:s.wsServers,a=s==null?void 0:s.maxReconnectionAttempts;o!==void 0&&this.logger.warn('The transport option "wsServers" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),a!==void 0&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),o&&!r.server&&(typeof o=="string"&&(r.server=o),o instanceof Array&&(r.server=o[0]))}this.configuration=Object.assign(Object.assign({},Kh.defaultOptions),r);const n=this.configuration.server,i=zt.parse(n,"absoluteURI");if(i===-1)throw this.logger.error(`Invalid WebSocket Server URL "${n}"`),new Error("Invalid WebSocket Server URL");if(!["wss","ws","udp"].includes(i.scheme))throw this.logger.error(`Invalid scheme in WebSocket Server URL "${n}"`),new Error("Invalid scheme in WebSocket Server URL");this._protocol=i.scheme.toUpperCase()}dispose(){return this.disconnect()}get protocol(){return this._protocol}get server(){return this.configuration.server}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get ws(){return this._ws}connect(){return this._connect()}disconnect(){return this._disconnect()}isConnected(){return this.state===De.Connected}send(t){return this._send(t)}_connect(){switch(this.logger.log(`Connecting ${this.server}`),this.state){case De.Connecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Connecting));if(!this.connectPromise)throw new Error("Connect promise must be defined.");return this.connectPromise;case De.Connected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Connecting));if(this.connectPromise)throw new Error("Connect promise must not be defined.");return Promise.resolve();case De.Disconnecting:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(De.Connecting)}catch(r){if(r instanceof kl)return Promise.reject(r);throw r}break;case De.Disconnected:if(this.connectPromise)throw new Error("Connect promise must not be defined.");try{this.transitionState(De.Connecting)}catch(r){if(r instanceof kl)return Promise.reject(r);throw r}break;default:throw new Error("Unknown state")}let t;try{t=new WebSocket(this.server,"sip"),t.binaryType="arraybuffer",t.addEventListener("close",r=>this.onWebSocketClose(r,t)),t.addEventListener("error",r=>this.onWebSocketError(r,t)),t.addEventListener("open",r=>this.onWebSocketOpen(r,t)),t.addEventListener("message",r=>this.onWebSocketMessage(r,t)),this._ws=t}catch(r){return this._ws=void 0,this.logger.error("WebSocket construction failed."),this.logger.error(r.toString()),new Promise((n,i)=>{this.connectResolve=n,this.connectReject=i,this.transitionState(De.Disconnected,r)})}return this.connectPromise=new Promise((r,n)=>{this.connectResolve=r,this.connectReject=n,this.connectTimeout=setTimeout(()=>{this.logger.warn("Connect timed out. Exceeded time set in configuration.connectionTimeout: "+this.configuration.connectionTimeout+"s."),t.close(1e3)},1e3*this.configuration.connectionTimeout)}),this.connectPromise}_disconnect(){switch(this.logger.log(`Disconnecting ${this.server}`),this.state){case De.Connecting:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(De.Disconnecting)}catch(r){if(r instanceof kl)return Promise.reject(r);throw r}break;case De.Connected:if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");try{this.transitionState(De.Disconnecting)}catch(r){if(r instanceof kl)return Promise.reject(r);throw r}break;case De.Disconnecting:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Disconnecting));if(!this.disconnectPromise)throw new Error("Disconnect promise must be defined.");return this.disconnectPromise;case De.Disconnected:if(this.transitioningState)return Promise.reject(this.transitionLoopDetectedError(De.Disconnecting));if(this.disconnectPromise)throw new Error("Disconnect promise must not be defined.");return Promise.resolve();default:throw new Error("Unknown state")}if(!this._ws)throw new Error("WebSocket must be defined.");const t=this._ws;return this.disconnectPromise=new Promise((r,n)=>{this.disconnectResolve=r,this.disconnectReject=n;try{t.close(1e3)}catch(i){throw this.logger.error("WebSocket close failed."),this.logger.error(i.toString()),i}}),this.disconnectPromise}_send(t){if(this.configuration.traceSip===!0&&this.logger.log(`Sending WebSocket message:

`+t+`
`),this._state!==De.Connected)return Promise.reject(new Error("Not connected."));if(!this._ws)throw new Error("WebSocket undefined.");try{this._ws.send(t)}catch(r){return r instanceof Error?Promise.reject(r):Promise.reject(new Error("WebSocket send failed."))}return Promise.resolve()}onWebSocketClose(t,r){if(r!==this._ws)return;const n=`WebSocket closed ${this.server} (code: ${t.code})`,i=this.disconnectPromise?void 0:new Error(n);i&&this.logger.warn("WebSocket closed unexpectedly"),this.logger.log(n),this._ws=void 0,this.transitionState(De.Disconnected,i)}onWebSocketError(t,r){r===this._ws&&this.logger.error("WebSocket error occurred.")}onWebSocketMessage(t,r){if(r!==this._ws)return;const n=t.data;let i;if(/^(\r\n)+$/.test(n))return this.clearKeepAliveTimeout(),void(this.configuration.traceSip===!0&&this.logger.log("Received WebSocket message with CRLF Keep Alive response"));if(n){if(typeof n!="string"){try{i=new TextDecoder().decode(new Uint8Array(n))}catch(s){return this.logger.error(s.toString()),void this.logger.error("Received WebSocket binary message failed to be converted into string, message discarded")}this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket binary message:

`+i+`
`)}else i=n,this.configuration.traceSip===!0&&this.logger.log(`Received WebSocket text message:

`+i+`
`);if(this.state===De.Connected){if(this.onMessage)try{this.onMessage(i)}catch(s){throw this.logger.error(s.toString()),this.logger.error("Exception thrown by onMessage callback"),s}}else this.logger.warn("Received message while not connected, discarding...")}else this.logger.warn("Received empty message, discarding...")}onWebSocketOpen(t,r){r===this._ws&&this._state===De.Connecting&&(this.logger.log(`WebSocket opened ${this.server}`),this.transitionState(De.Connected))}transitionLoopDetectedError(t){let r="A state transition loop has been detected.";return r+=` An attempt to transition from ${this._state} to ${t} before the prior transition completed.`,r+=" Perhaps you are synchronously calling connect() or disconnect() from a callback or state change handler?",this.logger.error(r),new kl("Loop detected.")}transitionState(t,r){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};if(this.transitioningState)throw this.transitionLoopDetectedError(t);switch(this.transitioningState=!0,this._state){case De.Connecting:t!==De.Connected&&t!==De.Disconnecting&&t!==De.Disconnected&&n();break;case De.Connected:t!==De.Disconnecting&&t!==De.Disconnected&&n();break;case De.Disconnecting:t!==De.Connecting&&t!==De.Disconnected&&n();break;case De.Disconnected:t!==De.Connecting&&n();break;default:throw new Error("Unknown state.")}const i=this._state;this._state=t;const s=this.connectResolve,o=this.connectReject;i===De.Connecting&&(this.connectPromise=void 0,this.connectResolve=void 0,this.connectReject=void 0);const a=this.disconnectResolve,l=this.disconnectReject;if(i===De.Disconnecting&&(this.disconnectPromise=void 0,this.disconnectResolve=void 0,this.disconnectReject=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.logger.log(`Transitioned from ${i} to ${this._state}`),this._stateEventEmitter.emit(this._state),t===De.Connected&&(this.startSendingKeepAlives(),this.onConnect))try{this.onConnect()}catch(c){throw this.logger.error(c.toString()),this.logger.error("Exception thrown by onConnect callback"),c}if(i===De.Connected&&(this.stopSendingKeepAlives(),this.onDisconnect))try{r?this.onDisconnect(r):this.onDisconnect()}catch(c){throw this.logger.error(c.toString()),this.logger.error("Exception thrown by onDisconnect callback"),c}if(i===De.Connecting){if(!s)throw new Error("Connect resolve undefined.");if(!o)throw new Error("Connect reject undefined.");t===De.Connected?s():o(r||new Error("Connect aborted."))}if(i===De.Disconnecting){if(!a)throw new Error("Disconnect resolve undefined.");if(!l)throw new Error("Disconnect reject undefined.");t===De.Disconnected?a():l(r||new Error("Disconnect aborted."))}this.transitioningState=!1}clearKeepAliveTimeout(){this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveDebounceTimeout=void 0}sendKeepAlive(){return this.keepAliveDebounceTimeout?Promise.resolve():(this.keepAliveDebounceTimeout=setTimeout(()=>{this.clearKeepAliveTimeout()},1e3*this.configuration.keepAliveDebounce),this.send(`\r
\r
`))}startSendingKeepAlives(){this.configuration.keepAliveInterval&&!this.keepAliveInterval&&(this.keepAliveInterval=setInterval(()=>{this.sendKeepAlive(),this.startSendingKeepAlives()},(t=>{const r=.8*t;return 1e3*(Math.random()*(t-r)+r)})(this.configuration.keepAliveInterval)))}stopSendingKeepAlives(){this.keepAliveInterval&&clearInterval(this.keepAliveInterval),this.keepAliveDebounceTimeout&&clearTimeout(this.keepAliveDebounceTimeout),this.keepAliveInterval=void 0,this.keepAliveDebounceTimeout=void 0}}Kh.defaultOptions={server:"",connectionTimeout:5,keepAliveInterval:0,keepAliveDebounce:10,traceSip:!0};class ks{constructor(t={}){if(this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this._state=cr.Stopped,this._stateEventEmitter=new wc,this.delegate=t.delegate,this.options=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ks.defaultOptions()),{sipjsId:ao(5)}),{uri:new hi("sip","anonymous."+ao(6),"anonymous.invalid")}),{viaHost:ao(12)+".invalid"}),ks.stripUndefinedProperties(t)),this.options.hackIpInContact)if(typeof this.options.hackIpInContact=="boolean"&&this.options.hackIpInContact){const i=Math.floor(Math.random()*254+1);this.options.viaHost="192.0.2."+i}else this.options.hackIpInContact&&(this.options.viaHost=this.options.hackIpInContact);switch(this.loggerFactory=new D7,this.logger=this.loggerFactory.getLogger("sip.UserAgent"),this.loggerFactory.builtinEnabled=this.options.logBuiltinEnabled,this.loggerFactory.connector=this.options.logConnector,this.options.logLevel){case"error":this.loggerFactory.level=er.error;break;case"warn":this.loggerFactory.level=er.warn;break;case"log":this.loggerFactory.level=er.log;break;case"debug":this.loggerFactory.level=er.debug}if(this.options.logConfiguration&&(this.logger.log("Configuration:"),Object.keys(this.options).forEach(r=>{const n=this.options[r];switch(r){case"uri":case"sessionDescriptionHandlerFactory":this.logger.log(" "+r+": "+n);break;case"authorizationPassword":this.logger.log(" "+r+": NOT SHOWN");break;case"transportConstructor":this.logger.log(" "+r+": "+n.name);break;default:this.logger.log(" "+r+": "+JSON.stringify(n))}})),this.options.transportOptions){const r=this.options.transportOptions,n=r.maxReconnectionAttempts,i=r.reconnectionTimeout;n!==void 0&&this.logger.warn('The transport option "maxReconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),i!==void 0&&this.logger.warn('The transport option "reconnectionTimeout" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),t.reconnectionDelay===void 0&&i!==void 0&&(this.options.reconnectionDelay=i),t.reconnectionAttempts===void 0&&n!==void 0&&(this.options.reconnectionAttempts=n)}if(t.reconnectionDelay!==void 0&&this.logger.warn('The user agent option "reconnectionDelay" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),t.reconnectionAttempts!==void 0&&this.logger.warn('The user agent option "reconnectionAttempts" as has apparently been specified and has been deprecated. It will no longer be available starting with SIP.js release 0.16.0. Please update accordingly.'),this._transport=new this.options.transportConstructor(this.getLogger("sip.Transport"),this.options.transportOptions),this.initTransportCallbacks(),this._contact=this.initContact(),this._instanceId=this.options.instanceId?this.options.instanceId:ks.newUUID(),zt.parse(this._instanceId,"uuid")===-1)throw new Error("Invalid instanceId.");this._userAgentCore=this.initCore()}static makeURI(t){return zt.URIParse(t)}static defaultOptions(){return{allowLegacyNotifications:!1,authorizationHa1:"",authorizationPassword:"",authorizationUsername:"",delegate:{},contactName:"",contactParams:{transport:"ws"},displayName:"",forceRport:!1,gracefulShutdown:!0,hackAllowUnregisteredOptionTags:!1,hackIpInContact:!1,hackViaTcp:!1,instanceId:"",instanceIdAlwaysAdded:!1,logBuiltinEnabled:!0,logConfiguration:!0,logConnector:()=>{},logLevel:"log",noAnswerTimeout:60,preloadedRouteSet:[],reconnectionAttempts:0,reconnectionDelay:4,sendInitialProvisionalResponse:!0,sessionDescriptionHandlerFactory:X7(),sessionDescriptionHandlerFactoryOptions:{},sipExtension100rel:mn.Unsupported,sipExtensionReplaces:mn.Unsupported,sipExtensionExtraSupported:[],sipjsId:"",transportConstructor:Kh,transportOptions:{},uri:new hi("sip","anonymous","anonymous.invalid"),userAgentString:"SIP.js/0.21.1",viaHost:""}}static newUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=Math.floor(16*Math.random());return(t==="x"?r:r%4+8).toString(16)})}static stripUndefinedProperties(t){return Object.keys(t).reduce((r,n)=>(t[n]!==void 0&&(r[n]=t[n]),r),{})}get configuration(){return this.options}get contact(){return this._contact}get instanceId(){return this._instanceId}get state(){return this._state}get stateChange(){return this._stateEventEmitter}get transport(){return this._transport}get userAgentCore(){return this._userAgentCore}getLogger(t,r){return this.loggerFactory.getLogger(t,r)}getLoggerFactory(){return this.loggerFactory}isConnected(){return this.transport.isConnected()}reconnect(){return this.state===cr.Stopped?Promise.reject(new Error("User agent stopped.")):Promise.resolve().then(()=>this.transport.connect())}start(){return this.state===cr.Started?(this.logger.warn("User agent already started"),Promise.resolve()):(this.logger.log(`Starting ${this.configuration.uri}`),this.transitionState(cr.Started),this.transport.connect())}async stop(){if(this.state===cr.Stopped)return this.logger.warn("User agent already stopped"),Promise.resolve();if(this.logger.log(`Stopping ${this.configuration.uri}`),!this.options.gracefulShutdown)return this.logger.log("Dispose of transport"),this.transport.dispose().catch(a=>{throw this.logger.error(a.message),a}),this.logger.log("Dispose of core"),this.userAgentCore.dispose(),this._publishers={},this._registerers={},this._sessions={},this._subscriptions={},this.transitionState(cr.Stopped),Promise.resolve();const t=Object.assign({},this._publishers),r=Object.assign({},this._registerers),n=Object.assign({},this._sessions),i=Object.assign({},this._subscriptions),s=this.transport,o=this.userAgentCore;this.logger.log("Dispose of registerers");for(const a in r)r[a]&&await r[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._registerers[a],l});this.logger.log("Dispose of sessions");for(const a in n)n[a]&&await n[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._sessions[a],l});this.logger.log("Dispose of subscriptions");for(const a in i)i[a]&&await i[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._subscriptions[a],l});this.logger.log("Dispose of publishers");for(const a in t)t[a]&&await t[a].dispose().catch(l=>{throw this.logger.error(l.message),delete this._publishers[a],l});this.logger.log("Dispose of transport"),await s.dispose().catch(a=>{throw this.logger.error(a.message),a}),this.logger.log("Dispose of core"),o.dispose(),this.transitionState(cr.Stopped)}_makeInviter(t,r){return new iT(this,t,r)}attemptReconnection(t=1){const r=this.options.reconnectionAttempts,n=this.options.reconnectionDelay;t>r?this.logger.log("Maximum reconnection attempts reached"):(this.logger.log(`Reconnection attempt ${t} of ${r} - trying`),setTimeout(()=>{this.reconnect().then(()=>{this.logger.log(`Reconnection attempt ${t} of ${r} - succeeded`)}).catch(i=>{this.logger.error(i.message),this.logger.log(`Reconnection attempt ${t} of ${r} - failed`),this.attemptReconnection(++t)})},t===1?0:1e3*n))}initContact(){const t=this.options.contactName!==""?this.options.contactName:ao(8),r=this.options.contactParams;return{pubGruu:void 0,tempGruu:void 0,uri:new hi("sip",t,this.options.viaHost,void 0,r),toString:(n={})=>{const i=n.anonymous||!1,s=n.outbound||!1,o=n.register||!1;let a="<";return a+=i?this.contact.tempGruu||`sip:anonymous@anonymous.invalid;transport=${r.transport?r.transport:"ws"}`:o?this.contact.uri:this.contact.pubGruu||this.contact.uri,s&&(a+=";ob"),a+=">",this.options.instanceIdAlwaysAdded&&(a+=';+sip.instance="<urn:uuid:'+this._instanceId+'>"'),a}}}initCore(){let t=[];t.push("outbound"),this.options.sipExtension100rel===mn.Supported&&t.push("100rel"),this.options.sipExtensionReplaces===mn.Supported&&t.push("replaces"),this.options.sipExtensionExtraSupported&&t.push(...this.options.sipExtensionExtraSupported),this.options.hackAllowUnregisteredOptionTags||(t=t.filter(i=>x7[i])),t=Array.from(new Set(t));const r=t.slice();(this.contact.pubGruu||this.contact.tempGruu)&&r.push("gruu");const n={aor:this.options.uri,contact:this.contact,displayName:this.options.displayName,loggerFactory:this.loggerFactory,hackViaTcp:this.options.hackViaTcp,routeSet:this.options.preloadedRouteSet,supportedOptionTags:t,supportedOptionTagsResponse:r,sipjsId:this.options.sipjsId,userAgentHeaderFieldValue:this.options.userAgentString,viaForceRport:this.options.forceRport,viaHost:this.options.viaHost,authenticationFactory:()=>{const i=this.options.authorizationUsername?this.options.authorizationUsername:this.options.uri.user,s=this.options.authorizationPassword?this.options.authorizationPassword:void 0,o=this.options.authorizationHa1?this.options.authorizationHa1:void 0;return new _7(this.getLoggerFactory(),o,i,s)},transportAccessor:()=>this.transport};return new Q7(n,{onInvite:i=>{var s;const o=new N7(this,i);if(i.delegate={onCancel:a=>{o._onCancel(a)},onTransportError:a=>{this.logger.error("A transport error has occurred while handling an incoming INVITE request.")}},i.trying(),this.options.sipExtensionReplaces!==mn.Unsupported){const a=i.message.parseHeader("replaces");if(a){const l=a.call_id;if(typeof l!="string")throw new Error("Type of call id is not string");const c=a.replaces_to_tag;if(typeof c!="string")throw new Error("Type of to tag is not string");const u=a.replaces_from_tag;if(typeof u!="string")throw new Error("type of from tag is not string");const d=l+c+u,h=this.userAgentCore.dialogs.get(d);if(!h)return void o.reject({statusCode:481});if(!h.early&&a.early_only===!0)return void o.reject({statusCode:486});const f=this._sessions[l+u]||this._sessions[l+c]||void 0;if(!f)throw new Error("Session does not exist.");o._replacee=f}}if(!((s=this.delegate)===null||s===void 0)&&s.onInvite)return o.autoSendAnInitialProvisionalResponse?void o.progress().then(()=>{var a;if(((a=this.delegate)===null||a===void 0?void 0:a.onInvite)===void 0)throw new Error("onInvite undefined.");this.delegate.onInvite(o)}):void this.delegate.onInvite(o);o.reject({statusCode:486})},onMessage:i=>{if(this.delegate&&this.delegate.onMessage){const s=new nT(i);this.delegate.onMessage(s)}else i.accept()},onNotify:i=>{if(this.delegate&&this.delegate.onNotify){const s=new Wg(i);this.delegate.onNotify(s)}else this.options.allowLegacyNotifications?i.accept():i.reject({statusCode:481})},onRefer:i=>{this.logger.warn("Received an out of dialog REFER request"),this.delegate&&this.delegate.onReferRequest?this.delegate.onReferRequest(i):i.reject({statusCode:405})},onRegister:i=>{this.logger.warn("Received an out of dialog REGISTER request"),this.delegate&&this.delegate.onRegisterRequest?this.delegate.onRegisterRequest(i):i.reject({statusCode:405})},onSubscribe:i=>{this.logger.warn("Received an out of dialog SUBSCRIBE request"),this.delegate&&this.delegate.onSubscribeRequest?this.delegate.onSubscribeRequest(i):i.reject({statusCode:405})}})}initTransportCallbacks(){this.transport.onConnect=()=>this.onTransportConnect(),this.transport.onDisconnect=t=>this.onTransportDisconnect(t),this.transport.onMessage=t=>this.onTransportMessage(t)}onTransportConnect(){this.state!==cr.Stopped&&this.delegate&&this.delegate.onConnect&&this.delegate.onConnect()}onTransportDisconnect(t){this.state!==cr.Stopped&&(this.delegate&&this.delegate.onDisconnect&&this.delegate.onDisconnect(t),t&&this.options.reconnectionAttempts>0&&this.attemptReconnection())}onTransportMessage(t){const r=ad.parseMessage(t,this.getLogger("sip.Parser"));if(!r)return void this.logger.warn("Failed to parse incoming message. Dropping.");if(this.state===cr.Stopped&&r instanceof Da)return void this.logger.warn(`Received ${r.method} request while stopped. Dropping.`);const n=()=>{const i=["from","to","call_id","cseq","via"];for(const s of i)if(!r.hasHeader(s))return this.logger.warn(`Missing mandatory header field : ${s}.`),!1;return!0};if(r instanceof Da){if(!n())return void this.logger.warn("Request missing mandatory header field. Dropping.");if(!r.toTag&&r.callId.substr(0,5)===this.options.sipjsId)return void this.userAgentCore.replyStateless(r,{statusCode:482});const i=bc(r.body),s=r.getHeader("content-length");if(s&&i<Number(s))return void this.userAgentCore.replyStateless(r,{statusCode:400})}if(r instanceof Ps){if(!n())return void this.logger.warn("Response missing mandatory header field. Dropping.");if(r.getHeaders("via").length>1)return void this.logger.warn("More than one Via header field present in the response. Dropping.");if(r.via.host!==this.options.viaHost||r.via.port!==void 0)return void this.logger.warn("Via sent-by in the response does not match UA Via host value. Dropping.");const i=bc(r.body),s=r.getHeader("content-length");if(s&&i<Number(s))return void this.logger.warn("Message body length is lower than the value in Content-Length header field. Dropping.")}if(r instanceof Da)this.userAgentCore.receiveIncomingRequestFromTransport(r);else{if(!(r instanceof Ps))throw new Error("Invalid message type.");this.userAgentCore.receiveIncomingResponseFromTransport(r)}}transitionState(t,r){const n=()=>{throw new Error(`Invalid state transition from ${this._state} to ${t}`)};switch(this._state){case cr.Started:t!==cr.Stopped&&n();break;case cr.Stopped:t!==cr.Started&&n();break;default:throw new Error("Unknown state.")}this.logger.log(`Transitioned from ${this._state} to ${t}`),this._state=t,this._stateEventEmitter.emit(this._state)}}var ci,Pt,H2,F2;function Yg(e,t){if(e)return Object.getOwnPropertyDescriptor(e,t)||Yg(Object.getPrototypeOf(e),t)}function zc(e,t,r){const n=r.filter(i=>Yg(t,i)===void 0);if(n.length>0)throw new Error(`Implementation is not complete, missing properties: ${n.join(", ")}`);return Object.freeze(r.reduce((i,s)=>{const o=Yg(t,s);return"value"in o?(typeof o.value=="function"?i[s]=o.value.bind(t):i[s]=o.value,i):Object.defineProperty(i,s,{get:o.get.bind(t)})},e))}function dT(){return new(window.AudioContext||window.webkitAudioContext)}function pp(e,t,r){return e<t?t:e>r?r:e}(function(e){e.CONNECTING="connecting",e.CONNECTED="connected",e.DYING="dying",e.RECOVERING="recovering",e.DISCONNECTING="disconnecting",e.DISCONNECTED="disconnected"})(ci||(ci={})),function(e){e.TRYING="trying",e.RINGING="ringing",e.ACTIVE="active",e.ON_HOLD="on_hold",e.TERMINATED="terminated"}(Pt||(Pt={})),function(e){e.AVAILABLE="available",e.TRYING="trying",e.PROCEEDING="proceeding",e.EARLY="early",e.RINGING="ringing",e.CONFIRMED="confirmed",e.BUSY="busy",e.TERMINATED="terminated"}(H2||(H2={})),function(e){e[e.ONCE=0]="ONCE",e[e.BURST=1]="BURST"}(F2||(F2={}));const Z7="Audio"in window&&"setSinkId"in new window.Audio,Ml=navigator.userAgent.toLowerCase();Ml.indexOf("safari")!==-1&&Ml.indexOf("chrome"),Ml.indexOf("firefox")!==-1&&Ml.indexOf("chrome");Ml.indexOf("chrome");class Pa{static getLevelIdx(t){const r=Pa.levels[t];return r===void 0?0:r}constructor(t,r){this.level="info",this.level=t,r&&(this.connector=r)}error(t,r){this.log("error",t,r)}warn(t,r){this.log("warn",t,r)}info(t,r){this.log("info",t,r)}debug(t,r){this.log("debug",t,r)}verbose(t,r){this.log("verbose",t,r)}log(t,r,n){const i=Pa.getLevelIdx(t),s=Pa.getLevelIdx(this.level);this.connector&&i>=s&&this.connector({level:t,message:r,context:n})}}Pa.levels={error:4,warn:3,info:2,verbose:1,debug:0};const Jl=new Pa("info"),j2=new class extends ot{constructor(){super(...arguments),this.allDevices=[],this.timer=void 0,this.hadPermission=!1}init(){this.update(),navigator.mediaDevices.ondevicechange=()=>{this.update()}}get devices(){return this.allDevices}get inputs(){return this.allDevices.filter(e=>e.kind==="audioinput")}get outputs(){return this.allDevices.filter(e=>e.kind==="audiooutput")}checkPermission(){return lt(this,void 0,void 0,function*(){const e=yield navigator.mediaDevices.enumerateDevices();return!(!e.length||!e[0].label)})}requestPermission(){return lt(this,void 0,void 0,function*(){if(this.requestPermissionPromise)return this.requestPermissionPromise;try{const{state:e}=yield navigator.permissions.query({name:"microphone"});if(e==="granted")return}catch(e){console.error("permissions query mic not supported in firefox, doing fallback",e)}return this.requestPermissionPromise=new Promise((e,t)=>lt(this,void 0,void 0,function*(){try{const r=yield navigator.mediaDevices.getUserMedia({audio:!0,video:!1});this.hadPermission||(this.timer&&window.clearTimeout(this.timer),yield this.update()),this.closeStream(r),e()}catch(r){t(r)}finally{delete this.requestPermissionPromise}})),this.requestPermissionPromise})}openInputStream(e){Jl.debug(`Requesting input stream with: audioProcessing=${e.audioProcessing}`,"media");const t=function(n){const i=n.audioProcessing?{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,googAudioMirroring:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googEchoCancellation:!0,googHighpassFilter:!0,googNoiseSuppression:!0,googTypingNoiseDetection:!0}:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,googAudioMirroring:!1,googAutoGainControl:!1,googAutoGainControl2:!1,googEchoCancellation:!1,googHighpassFilter:!1,googNoiseSuppression:!1,googTypingNoiseDetection:!1},s={audio:i,video:!1};return n.id&&(s.audio.deviceId=n.id),Jl.debug(`Using input constraints: ${JSON.stringify(s)}`,"media"),s}(e),r=navigator.mediaDevices.getUserMedia(t);return r.then(n=>{n.getTracks().forEach(i=>{Jl.debug(`Media stream track has settings: ${JSON.stringify(i.getSettings())}`,"media")})}),r}closeStream(e){e.getTracks().forEach(t=>t.stop())}enumerateDevices(){return lt(this,void 0,void 0,function*(){var e;const t=yield(e=navigator.mediaDevices)===null||e===void 0?void 0:e.enumerateDevices();if(t.length&&t[0].label)return t})}update(){return lt(this,void 0,void 0,function*(){const e=yield this.enumerateDevices(),t=e!==void 0;t?(this.hadPermission||this.emit("permissionGranted"),this.updateDevices(e)):this.hadPermission&&(this.emit("permissionRevoked"),this.allDevices=[],this.emit("devicesChanged")),this.hadPermission=t})}updateDevices(e){const t=e.map(o=>{if(o.label)return o.kind==="audioinput"?{id:o.deviceId,name:o.label,kind:"audioinput"}:o.kind==="audiooutput"?{id:o.deviceId,name:o.label,kind:"audiooutput"}:void 0}).filter(o=>o!==void 0),r=new Set(t.map(o=>o==null?void 0:o.id)),n=new Set(this.allDevices.map(o=>o.id));var i,s;s=n,(i=r).size===s.size&&[...i].every(s.has.bind(s))||(this.allDevices=t,this.emit("devicesChanged"))}};class J7{constructor(t){this._increment=0,this.options=t,this._audioContext=dT(),this._stream=t.stream,this._muted=t.muted||!1}mute(t){this._muted=t}play(){var t,r,n,i;return this._beepAudioNode=new OscillatorNode(this._audioContext),this._beepAudioNode.type=((t=this.options)===null||t===void 0?void 0:t.type)||"sine",this._audioNode=this._beepAudioNode.connect(this._audioContext.createMediaStreamDestination()),(r=this._beepAudioNode)===null||r===void 0||r.frequency.setValueAtTime(((n=this.options)===null||n===void 0?void 0:n.frequency)||450,this._audioContext.currentTime+this._increment),this._increment+=1.5,(i=this._beepAudioNode)===null||i===void 0||i.frequency.setValueAtTime(0,this._audioContext.currentTime+this._increment),this.loop(),this._beepAudioNode.start(),this._audioNode.stream.getAudioTracks().forEach(s=>lt(this,void 0,void 0,function*(){s.enabled=!this._muted,this._track=s,this._stream.addTrack(s),this._stream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:s}))})),this}start(){var t;(t=this._beepAudioNode)===null||t===void 0||t.start()}stop(){var t,r;(t=this._beepAudioNode)===null||t===void 0||t.disconnect(),(r=this._beepAudioNode)===null||r===void 0||r.stop()}removeTrack(t){return lt(this,void 0,void 0,function*(){return new Promise(r=>{this._stream.getAudioTracks().forEach(n=>{n.id===t.id&&(this._stream.removeTrack(n),this._stream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:n})))}),r()})})}setSinkId(t){t=t==="default"?"":t,"setSinkId"in AudioContext.prototype?this._audioContext.setSinkId(t||""):"sinkId"in AudioContext.prototype&&(this._audioContext.sinkId=t||"")}init(){var t;(t=this._beepAudioNode)===null||t===void 0||t.start()}loop(t=1500){this._timer=setTimeout(()=>{var r,n,i;this._increment+=t/1e3,(r=this._beepAudioNode)===null||r===void 0||r.frequency.setValueAtTime(((n=this.options)===null||n===void 0?void 0:n.frequency)||450,this._audioContext.currentTime+this._increment),this._increment+=t/1e3,(i=this._beepAudioNode)===null||i===void 0||i.frequency.setValueAtTime(0,this._audioContext.currentTime+this._increment),this._increment+=t/1e3,this.loop()},t)}dispose(){var t;this._timer&&clearInterval(this._timer),this._track&&this.removeTrack(this._track),this.stop(),(t=this._source)===null||t===void 0||t.disconnect(),this._track=void 0}}class eD extends ot{constructor(t,r){super(),this.session=t.session,this.isIncoming=t.isIncoming,this._localStream=new MediaStream,this._remoteStream=new MediaStream,this.media={input:Object.assign({},r.input),output:Object.assign({},r.output)},this.audioOutput=new Audio,this.audioOutput.volume=this.media.output.volume,this.audioOutput.muted=this.media.output.muted,this.audioContext=dT(),this._toneHelper=new J7({stream:this._remoteStream,muted:this.media.output.muted}),this._remoteStream.addEventListener("addtrack",i=>{this.audioOutput.srcObject===null&&(this.audioOutput.srcObject=this._remoteStream,this.audioOutput.play())}),t.on("terminated",()=>{this.cleanupMedia(),this.stopOutput(),this.stopInput(),this._toneHelper.dispose()}),t.once("progress",i=>{i.statusCode===180?this._toneHelper.play():i.statusCode===183&&(this.audioOutput.srcObject===null&&t.earlyMedia||this.audioOutput.srcObject===null&&t.remoteStream.active)&&(this.audioOutput.srcObject=t.remoteStream,this.audioOutput.play())}),t.on("accepted",()=>{this._toneHelper.dispose()}),t.on("trackAdd",i=>{i.remoteStream&&i.remoteStream.getAudioTracks().forEach(s=>{this._remoteStream.getAudioTracks().forEach(o=>{this._remoteStream.removeTrack(o),this._remoteStream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:o}))}),this._remoteStream.addTrack(s),this._remoteStream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:s}))}),i.localStream&&this.setInput(this.media.input)});const n=this;this.input={get id(){return n.media.input.id},set id(i){n.setInputDevice(i)},get audioProcessing(){return n.media.input.audioProcessing},set audioProcessing(i){n.setInputAudioProcessing(i)},get volume(){return n.media.input.volume},set volume(i){n.setInputVolume(i)},get muted(){return n.media.input.muted},set muted(i){n.setInputMuted(i)}},this.output={get id(){return n.media.output.id},get audio(){return n.audioOutput},set audio(i){i&&(n.audioOutput=i)},set id(i){n.setOutputDevice(i)},get volume(){return n.media.output.volume},set volume(i){n.setOutputVolume(i)},get muted(){return n.media.output.muted},set muted(i){n.setOutputMuted(i)}}}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}cleanupMedia(){const t=this.session.sessionDescriptionHandler;t==null||t.localMediaStream.getTracks().forEach(r=>{r.stop()})}setInput(t){return lt(this,void 0,void 0,function*(){t===void 0&&(t=this.media.input);const r=t.muted||this.media.input.muted,n=yield j2.openInputStream(t);this.stopInput(),this.inputStream=n;const i=this.audioContext.createMediaStreamSource(n),s=this.audioContext.createGain();t.volume!==void 0?(s.gain.value=t.volume,this.emit("inputVolume",t.volume)):s.gain.value=this.media.input.volume,i.connect(s);const o=this.audioContext.createMediaStreamDestination();s.connect(o);const a=this.session.sessionDescriptionHandler,l=a==null?void 0:a.peerConnection;l&&l.getSenders().forEach((c,u)=>{if(c.track&&c.track.kind==="audio"){const d=o.stream.getAudioTracks().find(h=>h.kind==="audio");d&&(r&&(d.enabled=!1),c.replaceTrack(d).then(()=>{this._localStream.getAudioTracks().forEach(h=>{h&&(h.stop(),this._localStream.removeTrack(h),this._localStream.dispatchEvent(new MediaStreamTrackEvent("removetrack",{track:h})))}),this._localStream.addTrack(d),this._localStream.dispatchEvent(new MediaStreamTrackEvent("addtrack",{track:d}))}))}}),this.inputNode=s,this.sourceNode=i,this.media.input=Object.assign(Object.assign({},this.media.input),t)})}stopInput(){var t;if(this.inputStream){j2.closeStream(this.inputStream);try{(t=this.inputNode)===null||t===void 0||t.disconnect()}catch(r){if(!r||r.name!=="InvalidAccessError")throw r;Jl.debug("cannot disconnect input audio node as the input audio node is already disconnected","media")}}}setOutput(t){return lt(this,void 0,void 0,function*(){t===void 0&&(t=this.media.output),t.volume!==void 0?(this.audioOutput.volume=pp(t.volume,0,1),this.emit("outputVolume",this.audioOutput.volume)):this.audioOutput.volume=this.media.output.volume,t.muted!==void 0?(this.audioOutput.muted=t.muted,this.emit("outputMuted",t.muted)):this.audioOutput.muted=this.media.output.muted,t.id&&(Z7?yield this.audioOutput.setSinkId(t.id):console.warn("cannot set output device: setSinkId is not supported","session-media")),this.media.output=Object.assign(Object.assign({},this.media.output),t)})}stopOutput(){this.audioOutput&&this.audioOutput.srcObject instanceof MediaStream&&this.audioOutput.srcObject.getAudioTracks().forEach(t=>{this.audioOutput.srcObject.removeTrack(t)})}dispose(){this.stopInput(),this.stopOutput(),this._toneHelper.dispose()}setOutputDevice(t){this.setOutput(Object.assign({},this.media.output,{id:t}))}freeze(){return zc({},this,["input","output","on","once","setOutput","setInput","removeListener","removeAllListeners","localStream","remoteStream"])}setOutputVolume(t){this.audioOutput&&(this.audioOutput.volume=pp(t,0,1)),this.media.output.volume=pp(t,0,1),this.emit("outputVolume",this.media.output.volume)}setInputDevice(t){this.setInput(Object.assign({},this.media.input,{id:t}))}setInputAudioProcessing(t){Jl.debug(`setting audioProcessing to: ${t}`,"media"),this.setInput(Object.assign({},this.media.input,{audioProcessing:t}))}setInputVolume(t){this.inputNode&&(this.inputNode.gain.value=t),this.media.input.volume=t,this.emit("inputVolume",t)}setInputMuted(t){this.session.sessionDescriptionHandler.enableSenderTracks(!t),this.media.input.muted=t,this.emit("inputMuted",t)}setOutputMuted(t){this.session.sessionDescriptionHandler.enableReceiverTracks(!t),this._remoteStream.getAudioTracks().forEach(r=>{r.enabled=!t}),this._toneHelper.mute(t),this.media.output.muted=t,this.emit("outputMuted",t)}}const tD={480:"temporarily_unavailable",484:"address_incomplete",486:"busy",487:"request_terminated"};class hT extends ot{constructor({session:t,media:r,isIncoming:n,earlyMedia:i=!1}){super(),this.status=Pt.TRYING,this.holdState=!1,this.isMute=!1,this.duration=0,this.setupMedia=(s,{enableSender:o=!1,enableReceiver:a=!0})=>{s.remoteMediaStream&&a&&this.emit("trackAdd",{remoteStream:s.remoteMediaStream}),s.localMediaStream.active&&o&&this.emit("trackAdd",{localStream:s.localMediaStream})},this.session=t,this._media=new eD(this,r),this.isIncoming=n||!1,this.id=t.request.callId,this.remoteIdentity=this.extractRemoteIdentity(),this.isMute=!1,this._earlyMedia=i,this._media.on("inputMuted",s=>{this.emit("mute",s,"input")}),this._media.on("outputMuted",s=>{this.emit("mute",s,"output")}),this.session.stateChange.addListener(s=>lt(this,void 0,void 0,function*(){switch(s){case X.Establishing:!n&&this._earlyMedia&&this.setupMedia(this.session.sessionDescriptionHandler,{enableReceiver:!0});break;case X.Established:this.setupMedia(this.session.sessionDescriptionHandler,{enableSender:!0,enableReceiver:!0}),this.status=Pt.ACTIVE,this.emit("established"),this.emit("statusUpdate",{id:this.id,status:this.status}),this.interval=setInterval(()=>{this.emit("duration",++this.duration)},1e3);break;case X.Terminated:this.emit("terminated",{id:this.id}),this.status=Pt.TERMINATED,this.emit("statusUpdate",{id:this.id,status:this.status}),this.duration=0,this.interval&&clearInterval(this.interval),this.session.dispose(),this._media.dispose()}}))}get autoAnswer(){const t=this.session.request.headers["Call-Info"];return!(!t||!t[0])&&t[0].raw.includes("answer-after=0")}dispose(){this.session.dispose(),this._media.dispose()}get media(){return this._media.freeze()}get phoneNumber(){return this.isIncoming?this.remoteIdentity.phoneNumber:this.session.request.to.uri.user||""}accept(){throw new Error("Should be implemented in superclass")}reject(t){throw new Error("Should be implemented in superclass")}accepted(){throw new Error("Should be implemented in superclass")}cancel(){throw new Error("Should be implemented in superclass")}terminate(){return this.bye()}terminated(){return new Promise(t=>{this.session.stateChange.addListener(r=>{r===X.Terminated&&t(this.cancelled?this.cancelled.reason:void 0)})})}makeInviteOptions({onAccept:t,onReject:r,onProgress:n,onTrying:i}){return{requestDelegate:{onAccept:()=>{this.remoteIdentity=this.extractRemoteIdentity(),this.emit("remoteIdentityUpdate",this,this.remoteIdentity),this.emit("accepted"),t({accepted:!0})},onReject:({message:s})=>{r({accepted:!1,rejectCode:s.statusCode,rejectCause:s.statusCode?tD[s.statusCode]:void 0,rejectPhrase:s.reasonPhrase})},onProgress:({message:s})=>{this.emit("progress",s),this.status=Pt.RINGING,this.emit("statusUpdate",{id:this.id,status:this.status}),n()},onTrying:()=>{i()}}}}extractRemoteIdentity(){let t=this.session.remoteIdentity.uri.user||"",r="";return this.session.assertedIdentity&&(t=this.session.assertedIdentity.uri.user||"",r=this.session.assertedIdentity.displayName||""),{phoneNumber:t,displayName:r}}hold(){return this.setHoldState(!0)}unhold(){return this.setHoldState(!1)}reinvite(){return lt(this,void 0,void 0,function*(){const t={requestDelegate:{onAccept:()=>{},onReject:()=>{}}};this.session.sessionDescriptionHandlerOptionsReInvite={dataChannel:!0};try{return yield this.session.invite(t),!0}catch{return!1}})}setHoldState(t){return lt(this,void 0,void 0,function*(){const r={hold:t},n={requestDelegate:{onAccept:()=>{this.status=t?Pt.ON_HOLD:Pt.ACTIVE,this.emit("statusUpdate",{id:this.id,status:this.status})},onReject:()=>{this.status=Pt.ACTIVE,this.emit("statusUpdate",{id:this.id,status:this.status})}}};this.session.sessionDescriptionHandlerOptionsReInvite=r;try{return yield this.session.invite(n),!0}catch{return!1}})}mute(){if(this.status===Pt.ACTIVE||this.status===Pt.ON_HOLD){const t=this.session.sessionDescriptionHandler.peerConnection;t&&t.getSenders().forEach(r=>{r.track&&(r.track.enabled=!1)}),this.isMute=!0,this.emit("mute",!0,"input")}}get localStream(){var t;const r=(t=this.session)===null||t===void 0?void 0:t.sessionDescriptionHandler;return r==null?void 0:r.localMediaStream}get remoteStream(){const t=this.session.sessionDescriptionHandler;return t==null?void 0:t.remoteMediaStream}get earlyMedia(){return this._earlyMedia}unmute(){if(this.status===Pt.ACTIVE||this.status===Pt.ON_HOLD){const t=this.session.sessionDescriptionHandler.peerConnection;t&&t.getSenders().forEach(r=>{r.track&&(r.track.enabled=!0)}),this.isMute=!1,this.emit("mute",!1,"input")}}blindTransfer(t){return lt(this,void 0,void 0,function*(){const r=ks.makeURI(t);return r?this.transfer(r).then(n=>(n&&this.bye(),Promise.resolve(n))):Promise.resolve(!1)})}attendedTransfer(t){return lt(this,void 0,void 0,function*(){return this.transfer(t.session).then(r=>(r&&this.bye(),Promise.resolve(r)))})}transfer(t){return lt(this,void 0,void 0,function*(){return function(r,n){const{milliseconds:i,fallback:s,message:o,customTimers:a={setTimeout,clearTimeout}}=n;let l;const c=new Promise((u,d)=>{if(typeof i!="number"||Math.sign(i)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${i}\``);if(n.signal){const{signal:f}=n;f.aborted&&d($2(f)),f.addEventListener("abort",()=>{d($2(f))})}if(i===Number.POSITIVE_INFINITY)return void r.then(u,d);const h=new v7;l=a.setTimeout.call(void 0,()=>{if(s)try{u(s())}catch(f){d(f)}else typeof r.cancel=="function"&&r.cancel(),o===!1?u():o instanceof Error?d(o):(h.message=o??`Promise timed out after ${i} milliseconds`,d(h))},i),(async()=>{try{u(await r)}catch(f){d(f)}})()}).finally(()=>{c.clear()});return c.clear=()=>{a.clearTimeout.call(void 0,l),l=void 0},c}(this.isTransferredPromise(t),{milliseconds:2e4,fallback:()=>Promise.resolve(!0)})})}isTransferredPromise(t){return lt(this,void 0,void 0,function*(){return new Promise(r=>{this.session.refer(t).then(n=>{n.delegate={onAccept:()=>{r(!0)},onReject:()=>{r(!1)}}})})})}rebuildSessionDescriptionHandler(){this.session._sessionDescriptionHandler=void 0,this.session.setupSessionDescriptionHandler()}bye(){return this.session.bye()}dtmf(t,r){var n;return((n=this.session.sessionDescriptionHandler)===null||n===void 0?void 0:n.sendDtmf(t,r))||!1}freeze(){return zc({},this,["holdState","id","isIncoming","phoneNumber","remoteIdentity","mute","unmute","autoAnswer","status","accept","accepted","attendedTransfer","blindTransfer","bye","dtmf","freeze","hold","cancel","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","cancel","tried","localStream","remoteStream"])}}class rD extends hT{constructor(t){super(t),this.session=t.session,this.triedPromise=new Promise(r=>{this.progressedPromise=new Promise(n=>{this.acceptedPromise=new Promise((i,s)=>{this.inviteOptions=this.makeInviteOptions({onAccept:i,onReject:i,onProgress:n,onTrying:r})})})})}progressed(){return this.progressedPromise}tried(){return this.triedPromise}accepted(){return this.acceptedPromise}invite(t){return lt(this,void 0,void 0,function*(){return this.session.invite(Object.assign(Object.assign({},t),this.inviteOptions)).then(r=>r)})}accept(){return lt(this,void 0,void 0,function*(){throw new Error("Cannot accept an outgoing call.")})}reject(){return lt(this,void 0,void 0,function*(){throw new Error("Cannot reject an outgoing call.")})}cancel(t){return this.session.cancel(t)}freeze(){return zc({},this,["holdState","id","media","isIncoming","status","phoneNumber","remoteIdentity","accept","accepted","mute","unmute","attendedTransfer","blindTransfer","cancel","bye","dtmf","freeze","hold","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","localStream","remoteStream"])}}class nD extends hT{constructor(t){super(t),this.session=t.session,this.status=Pt.RINGING,this.emit("statusUpdate",{id:this.id,status:this.status})}accept(){return lt(this,void 0,void 0,function*(){return this.session.accept().then(()=>{this.session.delegate={onInvite:()=>{}}})})}reject(t){return lt(this,void 0,void 0,function*(){return this.session.reject(t)})}tried(){return lt(this,void 0,void 0,function*(){throw new Error("Not applicable for incoming calls.")})}cancel(){return lt(this,void 0,void 0,function*(){throw new Error("Cannot cancel an incoming call.")})}freeze(){return zc({},this,["holdState","id","isIncoming","media","status","phoneNumber","remoteIdentity","autoAnswer","accept","mute","unmute","accepted","attendedTransfer","blindTransfer","bye","dtmf","freeze","hold","reject","terminate","terminated","unhold","on","once","removeAllListeners","removeListener","localStream","remoteStream"])}}class iD extends ot{constructor(t){super(),this.sessions={},this.connected=!1,this.reconnectionAttempts=100,this.reconnectionDelay=4,this.attemptingReconnection=!1,this.shouldBeConnected=!0,this._clientUrl="https://sdk-api.optimaccs.com",this.attemptReconnection=(r=1)=>{this.shouldBeConnected&&(this.attemptingReconnection||r>this.reconnectionAttempts||(this.attemptingReconnection=!0,setTimeout(()=>{var n;this.shouldBeConnected?(n=this.uaFactory)===null||n===void 0||n.reconnect().then(()=>{console.log("reconnect attempt"),this.attemptingReconnection=!1}).catch(i=>{this.attemptingReconnection=!1,this.attemptReconnection(++r)}):this.attemptingReconnection=!1},r===1?0:1e3*this.reconnectionDelay)))},this.options=t,this.defaultMedia=t.media||{input:{id:void 0,audioProcessing:!0,muted:!1,volume:1},output:{id:void 0,muted:!1,volume:1}}}get account(){var t,r,n;return{name:(t=this.uaFactory)===null||t===void 0?void 0:t.configuration.displayName,user:(r=this.uaFactory)===null||r===void 0?void 0:r.configuration.authorizationUsername,uri:(n=this.uaFactory)===null||n===void 0?void 0:n.configuration.uri}}withToken(t){return lt(this,void 0,void 0,function*(){try{const r=yield fetch(`${this._clientUrl}/api/extension`,{method:"GET",headers:{Authorization:`Bearer ${t.token}`,Accept:"application/json"}});if(r.ok){const n=(yield r.json()).data;return Promise.resolve(n)}return Promise.reject("Failed to get token")}catch(r){return Promise.reject(r)}})}setupListener(){if(this.uaFactory){const t=this;this.uaFactory.delegate={onConnect(){var r;(r=t.registererFactory)===null||r===void 0||r.register()},onDisconnect(r){var n;try{(n=t.registererFactory)===null||n===void 0||n.unregister()}catch{}r&&t.attemptReconnection()},onRegister(r){},onInvite(r){const n=new nD({session:r,isIncoming:!0,media:t.defaultMedia});t.addSession(n),n.on("terminated",({id:i})=>{n.id===i&&t.removeSession(n)}),t.emit("invite",n.freeze())}},this.uaFactory.transport.stateChange.addListener(r=>{switch(r){case De.Connecting:this.emit("status",ci.CONNECTING);break;case De.Disconnected:this.emit("status",ci.DISCONNECTED);break;case De.Disconnecting:this.emit("status",ci.DISCONNECTING)}})}}withCredential(t){var r,n;const i=new ks({uri:ks.makeURI(t.account.uri),authorizationUsername:t.account.user,authorizationPassword:t.account.password,sipExtension100rel:mn.Supported,transportOptions:{server:((r=t.transport)===null||r===void 0?void 0:r.wsServers)||"wss://demo-voip.optimaccs.com:8089/ws"},displayName:t.account.name,logBuiltinEnabled:!1,forceRport:!0,userAgentString:t.userAgentString,sessionDescriptionHandlerFactoryOptions:{iceGatheringTimeout:500,peerConnectionConfiguration:{iceServers:((n=t.transport)===null||n===void 0?void 0:n.iceServers)||[{urls:"stun:stun.l.google.com:19302"}]}}});return this.reconnectionAttempts=t.reconnectionAttempts||this.reconnectionAttempts,this.reconnectionDelay=t.reconnectionDelay||this.reconnectionDelay,{uaFactory:i,registererFactory:new ii(i)}}isConnected(){return this.connected}init(){return lt(this,void 0,void 0,function*(){const t=this.options;return new Promise((r,n)=>{switch(t.type){case"credential":{const{uaFactory:i,registererFactory:s}=this.withCredential(t);this.uaFactory=i,this.registererFactory=s,this.setupListener(),r()}break;case"token":this.withToken(t).then(i=>{const s=JSON.parse(Yo.util.decode64(i.password||"")),o=Yo.md.md5.create().update(i.number).digest().toHex(),a=Yo.cipher.createDecipher("AES-CBC",o),l=Yo.util.decode64(s.value);a.start({iv:Yo.util.decode64(s.iv)}),a.update(Yo.util.createBuffer(l)),a.finish();const{uaFactory:c,registererFactory:u}=this.withCredential({type:"credential",account:{name:i.number,uri:i.uri,password:a.output.data,user:i.number},transport:{wsServers:i.ws}});this.uaFactory=c,this.registererFactory=u,this.setupListener(),r()}).catch(n)}})})}connect(){return lt(this,void 0,void 0,function*(){var t;return(t=this.uaFactory)===null||t===void 0||t.start(),new Promise((r,n)=>{var i;(i=this.registererFactory)===null||i===void 0||i.stateChange.addListener(s=>{switch(s){case it.Initial:break;case it.Terminated:this.emit("status",ci.DYING);break;case it.Registered:this.connected=!0,this.emit("status",ci.CONNECTED),r(!0);break;case it.Unregistered:this.connected=!1,n()}})})})}reconfigure(t){return lt(this,void 0,void 0,function*(){yield this.disconnect(),this.defaultMedia=t.media||{input:{id:void 0,audioProcessing:!0,muted:!1,volume:1},output:{id:void 0,muted:!1,volume:1}},this.options=t,yield this.init().then(()=>{this.connect()})})}disconnect(){return this.clearSessions(),new Promise(t=>lt(this,void 0,void 0,function*(){var r;yield(r=this.uaFactory)===null||r===void 0?void 0:r.stop(),t()}))}close(){return this.clearSessions(),new Promise(t=>lt(this,void 0,void 0,function*(){var r;yield(r=this.uaFactory)===null||r===void 0?void 0:r.stop(),t()}))}getSession(t){const r=this.sessions[t];return r?r.freeze():null}addSession(t){this.sessions[t.id]=t,this.emit("sessionAdded",{id:t.id})}removeSession(t){t.dispose(),this.sessions[t.id],delete this.sessions[t.id],this.emit("sessionRemoved",{id:t.id})}getSessions(){return Object.values(this.sessions).map(t=>t.freeze())}clearSessions(){Object.values(this.sessions).forEach(t=>{this.removeSession(t)})}attendedTransfer(t,r){const n=this.sessions[t.id];if(!n)return Promise.reject("Session A not found");const i=this.sessions[r.id];return i?n.attendedTransfer(i):Promise.reject("Session B not found")}invite(t,r){return lt(this,void 0,void 0,function*(){const n=ks.makeURI(t);if(!n)throw new Error("invalid uri");if(!this.isConnected())throw new Error("current status is disconnected. cannot invite");if(!this.uaFactory)throw new Error("Invalid user agent instance");const i=Object.assign({earlyMedia:!0},r),s=new iT(this.uaFactory,n,i),o=new rD({session:s,isIncoming:!1,media:this.defaultMedia,earlyMedia:i.earlyMedia});return o.invite(r).then(()=>{this.addSession(o)}),o.on("terminated",()=>{this.removeSession(o)}),o.freeze()})}}const sD=function(e){return zc(this,new iD(e),["attendedTransfer","connect","defaultMedia","disconnect","getSession","getSessions","invite","isConnected","on","init","once","reconfigure","removeAllListeners","removeListener","account"])},fT=S.createContext({instance:()=>Promise.resolve()}),oD=({children:e})=>{const[t,r]=S.useState(),n=s=>{const o=new sD(s);return r(o),Promise.resolve(o)},i=s=>Hk.openConfirmModal({title:"New Incoming Call",children:te.jsxs(te.Fragment,{children:["New Incoming call from ",s.remoteIdentity.phoneNumber]}),labels:{confirm:"Accept",cancel:"Reject"},onCancel:()=>s.reject(),onConfirm:()=>s.accept()});return S.useEffect(()=>{const s=o=>{i(o)};return t&&t.on("invite",s),()=>{t==null||t.removeListener("invite",s)}},[t]),te.jsx(fT.Provider,{value:{instance:n,client:t},children:e})},Kc=()=>A.useContext(fT),pT=()=>{const{client:e}=Kc(),[t,r]=S.useState({isConnected:!1,state:ci.DISCONNECTED});return S.useEffect(()=>{const n=i=>{switch(i){case ci.CONNECTED:r({isConnected:!0,state:i});break;default:r({isConnected:!1,state:i});break}};return e&&e.on("status",n),()=>{e&&e.removeListener("status",n)}},[e]),t},aD=()=>{const e=Cb({initialValues:{type:"token",token:"",user:"",name:"",password:"",uri:"",ws:""}}),{instance:t,client:r}=Kc(),{isConnected:n}=pT();return te.jsx(ye,{maw:340,mx:"auto",children:te.jsxs("form",{onSubmit:e.onSubmit(i=>{t({type:i.type,token:i.token,account:{user:i.user,uri:i.uri,name:i.name,password:i.password},transport:{wsServers:i.ws},media:{input:{id:void 0,volume:.8,audioProcessing:!0,muted:!1},output:{id:void 0,volume:.5,muted:!1}}}).then(s=>{s&&s.init().then(()=>{s.connect()}).catch(()=>{Ao.show({color:"red",title:"Failed to register",message:"Invalid token or credential"})})})}),children:[te.jsx(Ec,{label:"Auth type",data:[{label:"Token",value:"token"},{label:"Credential",value:"credential"}],...e.getInputProps("type")}),e.values.type==="token"?te.jsx(Ti,{label:"Token",placeholder:"Your token",...e.getInputProps("token")}):te.jsxs(te.Fragment,{children:[te.jsx(Ti,{label:"Ws server",placeholder:"wss://your-sip-provider.tld:8089/ws",...e.getInputProps("ws")}),te.jsx(Ti,{label:"Uri",placeholder:"sip:201002@your-sip-provider.tld",...e.getInputProps("uri")}),te.jsx(Ti,{label:"Name",placeholder:"example: 201002",...e.getInputProps("name")}),te.jsx(Ti,{label:"User",placeholder:"example: 201002",...e.getInputProps("user")}),te.jsx(L0,{autoComplete:"new-password",label:"Password",...e.getInputProps("password")})]}),te.jsxs($i,{children:[te.jsx(Li,{type:"submit",mt:"md",disabled:n,children:"Connect"}),te.jsx(Li,{disabled:!n,variant:"default",mt:"md",onClick:()=>r==null?void 0:r.disconnect(),children:"Disconnect"})]})]})})},lD=()=>{const{isConnected:e,state:t}=pT();return te.jsx(Hc,{color:e?"green":"gray",children:t})};var gT={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(G2,function(){var r=1e3,n=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",f="year",g="date",v="Invalid Date",E=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(q){var L=["th","st","nd","rd"],F=q%100;return"["+q+(L[(F-20)%10]||L[F]||L[0])+"]"}},C=function(q,L,F){var M=String(q);return!M||M.length>=L?q:""+Array(L+1-M.length).join(F)+q},b={s:C,z:function(q){var L=-q.utcOffset(),F=Math.abs(L),M=Math.floor(F/60),$=F%60;return(L<=0?"+":"-")+C(M,2,"0")+":"+C($,2,"0")},m:function q(L,F){if(L.date()<F.date())return-q(F,L);var M=12*(F.year()-L.year())+(F.month()-L.month()),$=L.clone().add(M,d),z=F-$<0,W=L.clone().add(M+(z?-1:1),d);return+(-(M+(F-$)/(z?$-W:W-$))||0)},a:function(q){return q<0?Math.ceil(q)||0:Math.floor(q)},p:function(q){return{M:d,y:f,w:u,d:c,D:g,h:l,m:a,s:o,ms:s,Q:h}[q]||String(q||"").toLowerCase().replace(/s$/,"")},u:function(q){return q===void 0}},x="en",m={};m[x]=y;var k="$isDayjsObject",N=function(q){return q instanceof B||!(!q||!q[k])},H=function q(L,F,M){var $;if(!L)return x;if(typeof L=="string"){var z=L.toLowerCase();m[z]&&($=z),F&&(m[z]=F,$=z);var W=L.split("-");if(!$&&W.length>1)return q(W[0])}else{var ie=L.name;m[ie]=L,$=ie}return!M&&$&&(x=$),$||!M&&x},R=function(q,L){if(N(q))return q.clone();var F=typeof L=="object"?L:{};return F.date=q,F.args=arguments,new B(F)},P=b;P.l=H,P.i=N,P.w=function(q,L){return R(q,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var B=function(){function q(F){this.$L=H(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[k]=!0}var L=q.prototype;return L.parse=function(F){this.$d=function(M){var $=M.date,z=M.utc;if($===null)return new Date(NaN);if(P.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var W=$.match(E);if(W){var ie=W[2]-1||0,ae=(W[7]||"0").substring(0,3);return z?new Date(Date.UTC(W[1],ie,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)):new Date(W[1],ie,W[3]||1,W[4]||0,W[5]||0,W[6]||0,ae)}}return new Date($)}(F),this.init()},L.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},L.$utils=function(){return P},L.isValid=function(){return this.$d.toString()!==v},L.isSame=function(F,M){var $=R(F);return this.startOf(M)<=$&&$<=this.endOf(M)},L.isAfter=function(F,M){return R(F)<this.startOf(M)},L.isBefore=function(F,M){return this.endOf(M)<R(F)},L.$g=function(F,M,$){return P.u(F)?this[M]:this.set($,F)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(F,M){var $=this,z=!!P.u(M)||M,W=P.p(F),ie=function(Ue,Le){var ke=P.w($.$u?Date.UTC($.$y,Le,Ue):new Date($.$y,Le,Ue),$);return z?ke:ke.endOf(c)},ae=function(Ue,Le){return P.w($.toDate()[Ue].apply($.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(Le)),$)},Ee=this.$W,Ce=this.$M,Ie=this.$D,Ae="set"+(this.$u?"UTC":"");switch(W){case f:return z?ie(1,0):ie(31,11);case d:return z?ie(1,Ce):ie(0,Ce+1);case u:var Re=this.$locale().weekStart||0,Fe=(Ee<Re?Ee+7:Ee)-Re;return ie(z?Ie-Fe:Ie+(6-Fe),Ce);case c:case g:return ae(Ae+"Hours",0);case l:return ae(Ae+"Minutes",1);case a:return ae(Ae+"Seconds",2);case o:return ae(Ae+"Milliseconds",3);default:return this.clone()}},L.endOf=function(F){return this.startOf(F,!1)},L.$set=function(F,M){var $,z=P.p(F),W="set"+(this.$u?"UTC":""),ie=($={},$[c]=W+"Date",$[g]=W+"Date",$[d]=W+"Month",$[f]=W+"FullYear",$[l]=W+"Hours",$[a]=W+"Minutes",$[o]=W+"Seconds",$[s]=W+"Milliseconds",$)[z],ae=z===c?this.$D+(M-this.$W):M;if(z===d||z===f){var Ee=this.clone().set(g,1);Ee.$d[ie](ae),Ee.init(),this.$d=Ee.set(g,Math.min(this.$D,Ee.daysInMonth())).$d}else ie&&this.$d[ie](ae);return this.init(),this},L.set=function(F,M){return this.clone().$set(F,M)},L.get=function(F){return this[P.p(F)]()},L.add=function(F,M){var $,z=this;F=Number(F);var W=P.p(M),ie=function(Ce){var Ie=R(z);return P.w(Ie.date(Ie.date()+Math.round(Ce*F)),z)};if(W===d)return this.set(d,this.$M+F);if(W===f)return this.set(f,this.$y+F);if(W===c)return ie(1);if(W===u)return ie(7);var ae=($={},$[a]=n,$[l]=i,$[o]=r,$)[W]||1,Ee=this.$d.getTime()+F*ae;return P.w(Ee,this)},L.subtract=function(F,M){return this.add(-1*F,M)},L.format=function(F){var M=this,$=this.$locale();if(!this.isValid())return $.invalidDate||v;var z=F||"YYYY-MM-DDTHH:mm:ssZ",W=P.z(this),ie=this.$H,ae=this.$m,Ee=this.$M,Ce=$.weekdays,Ie=$.months,Ae=$.meridiem,Re=function(Le,ke,Y,de){return Le&&(Le[ke]||Le(M,z))||Y[ke].slice(0,de)},Fe=function(Le){return P.s(ie%12||12,Le,"0")},Ue=Ae||function(Le,ke,Y){var de=Le<12?"AM":"PM";return Y?de.toLowerCase():de};return z.replace(p,function(Le,ke){return ke||function(Y){switch(Y){case"YY":return String(M.$y).slice(-2);case"YYYY":return P.s(M.$y,4,"0");case"M":return Ee+1;case"MM":return P.s(Ee+1,2,"0");case"MMM":return Re($.monthsShort,Ee,Ie,3);case"MMMM":return Re(Ie,Ee);case"D":return M.$D;case"DD":return P.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return Re($.weekdaysMin,M.$W,Ce,2);case"ddd":return Re($.weekdaysShort,M.$W,Ce,3);case"dddd":return Ce[M.$W];case"H":return String(ie);case"HH":return P.s(ie,2,"0");case"h":return Fe(1);case"hh":return Fe(2);case"a":return Ue(ie,ae,!0);case"A":return Ue(ie,ae,!1);case"m":return String(ae);case"mm":return P.s(ae,2,"0");case"s":return String(M.$s);case"ss":return P.s(M.$s,2,"0");case"SSS":return P.s(M.$ms,3,"0");case"Z":return W}return null}(Le)||W.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(F,M,$){var z,W=this,ie=P.p(M),ae=R(F),Ee=(ae.utcOffset()-this.utcOffset())*n,Ce=this-ae,Ie=function(){return P.m(W,ae)};switch(ie){case f:z=Ie()/12;break;case d:z=Ie();break;case h:z=Ie()/3;break;case u:z=(Ce-Ee)/6048e5;break;case c:z=(Ce-Ee)/864e5;break;case l:z=Ce/i;break;case a:z=Ce/n;break;case o:z=Ce/r;break;default:z=Ce}return $?z:P.a(z)},L.daysInMonth=function(){return this.endOf(d).$D},L.$locale=function(){return m[this.$L]},L.locale=function(F,M){if(!F)return this.$L;var $=this.clone(),z=H(F,M,!0);return z&&($.$L=z),$},L.clone=function(){return P.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},q}(),_=B.prototype;return R.prototype=_,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",f],["$D",g]].forEach(function(q){_[q[1]]=function(L){return this.$g(L,q[0],q[1])}}),R.extend=function(q,L){return q.$i||(q(L,B,R),q.$i=!0),R},R.locale=H,R.isDayjs=N,R.unix=function(q){return R(1e3*q)},R.en=m[x],R.Ls=m,R.p={},R})})(gT);var cD=gT.exports;const mT=Ic(cD);var vT={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(G2,function(){var r,n,i=1e3,s=6e4,o=36e5,a=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=31536e6,u=2628e6,d=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:c,months:u,days:a,hours:o,minutes:s,seconds:i,milliseconds:1,weeks:6048e5},f=function(m){return m instanceof b},g=function(m,k,N){return new b(m,N,k.$l)},v=function(m){return n.p(m)+"s"},E=function(m){return m<0},p=function(m){return E(m)?Math.ceil(m):Math.floor(m)},y=function(m){return Math.abs(m)},C=function(m,k){return m?E(m)?{negative:!0,format:""+y(m)+k}:{negative:!1,format:""+m+k}:{negative:!1,format:""}},b=function(){function m(N,H,R){var P=this;if(this.$d={},this.$l=R,N===void 0&&(this.$ms=0,this.parseFromMilliseconds()),H)return g(N*h[v(H)],this);if(typeof N=="number")return this.$ms=N,this.parseFromMilliseconds(),this;if(typeof N=="object")return Object.keys(N).forEach(function(q){P.$d[v(q)]=N[q]}),this.calMilliseconds(),this;if(typeof N=="string"){var B=N.match(d);if(B){var _=B.slice(2).map(function(q){return q!=null?Number(q):0});return this.$d.years=_[0],this.$d.months=_[1],this.$d.weeks=_[2],this.$d.days=_[3],this.$d.hours=_[4],this.$d.minutes=_[5],this.$d.seconds=_[6],this.calMilliseconds(),this}}return this}var k=m.prototype;return k.calMilliseconds=function(){var N=this;this.$ms=Object.keys(this.$d).reduce(function(H,R){return H+(N.$d[R]||0)*h[R]},0)},k.parseFromMilliseconds=function(){var N=this.$ms;this.$d.years=p(N/c),N%=c,this.$d.months=p(N/u),N%=u,this.$d.days=p(N/a),N%=a,this.$d.hours=p(N/o),N%=o,this.$d.minutes=p(N/s),N%=s,this.$d.seconds=p(N/i),N%=i,this.$d.milliseconds=N},k.toISOString=function(){var N=C(this.$d.years,"Y"),H=C(this.$d.months,"M"),R=+this.$d.days||0;this.$d.weeks&&(R+=7*this.$d.weeks);var P=C(R,"D"),B=C(this.$d.hours,"H"),_=C(this.$d.minutes,"M"),q=this.$d.seconds||0;this.$d.milliseconds&&(q+=this.$d.milliseconds/1e3,q=Math.round(1e3*q)/1e3);var L=C(q,"S"),F=N.negative||H.negative||P.negative||B.negative||_.negative||L.negative,M=B.format||_.format||L.format?"T":"",$=(F?"-":"")+"P"+N.format+H.format+P.format+M+B.format+_.format+L.format;return $==="P"||$==="-P"?"P0D":$},k.toJSON=function(){return this.toISOString()},k.format=function(N){var H=N||"YYYY-MM-DDTHH:mm:ss",R={Y:this.$d.years,YY:n.s(this.$d.years,2,"0"),YYYY:n.s(this.$d.years,4,"0"),M:this.$d.months,MM:n.s(this.$d.months,2,"0"),D:this.$d.days,DD:n.s(this.$d.days,2,"0"),H:this.$d.hours,HH:n.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:n.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:n.s(this.$d.seconds,2,"0"),SSS:n.s(this.$d.milliseconds,3,"0")};return H.replace(l,function(P,B){return B||String(R[P])})},k.as=function(N){return this.$ms/h[v(N)]},k.get=function(N){var H=this.$ms,R=v(N);return R==="milliseconds"?H%=1e3:H=R==="weeks"?p(H/h[R]):this.$d[R],H||0},k.add=function(N,H,R){var P;return P=H?N*h[v(H)]:f(N)?N.$ms:g(N,this).$ms,g(this.$ms+P*(R?-1:1),this)},k.subtract=function(N,H){return this.add(N,H,!0)},k.locale=function(N){var H=this.clone();return H.$l=N,H},k.clone=function(){return g(this.$ms,this)},k.humanize=function(N){return r().add(this.$ms,"ms").locale(this.$l).fromNow(!N)},k.valueOf=function(){return this.asMilliseconds()},k.milliseconds=function(){return this.get("milliseconds")},k.asMilliseconds=function(){return this.as("milliseconds")},k.seconds=function(){return this.get("seconds")},k.asSeconds=function(){return this.as("seconds")},k.minutes=function(){return this.get("minutes")},k.asMinutes=function(){return this.as("minutes")},k.hours=function(){return this.get("hours")},k.asHours=function(){return this.as("hours")},k.days=function(){return this.get("days")},k.asDays=function(){return this.as("days")},k.weeks=function(){return this.get("weeks")},k.asWeeks=function(){return this.as("weeks")},k.months=function(){return this.get("months")},k.asMonths=function(){return this.as("months")},k.years=function(){return this.get("years")},k.asYears=function(){return this.as("years")},m}(),x=function(m,k,N){return m.add(k.years()*N,"y").add(k.months()*N,"M").add(k.days()*N,"d").add(k.hours()*N,"h").add(k.minutes()*N,"m").add(k.seconds()*N,"s").add(k.milliseconds()*N,"ms")};return function(m,k,N){r=N,n=N().$utils(),N.duration=function(P,B){var _=N.locale();return g(P,{$l:_},B)},N.isDuration=f;var H=k.prototype.add,R=k.prototype.subtract;k.prototype.add=function(P,B){return f(P)?x(this,P,1):H.bind(this)(P,B)},k.prototype.subtract=function(P,B){return f(P)?x(this,P,-1):R.bind(this)(P,B)}}})})(vT);var uD=vT.exports;const dD=Ic(uD);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hD={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=(e,t,r,n)=>{const i=S.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:l,children:c,...u},d)=>S.createElement("svg",{ref:d,...hD[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...u},[...n.map(([h,f])=>S.createElement(h,f)),...Array.isArray(c)?c:[c]]));return i.displayName=`${r}`,i};/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fD=zi("outline","dialpad","IconDialpad",[["path",{d:"M4 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-0"}],["path",{d:"M18 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-1"}],["path",{d:"M11 3h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-2"}],["path",{d:"M4 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-3"}],["path",{d:"M18 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-4"}],["path",{d:"M11 10h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-5"}],["path",{d:"M11 17h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-2a1 1 0 0 1 1 -1z",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pD=zi("outline","microphone-off","IconMicrophoneOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M9 5a3 3 0 0 1 6 0v5a3 3 0 0 1 -.13 .874m-2 2a3 3 0 0 1 -3.87 -2.872v-1",key:"svg-1"}],["path",{d:"M5 10a7 7 0 0 0 10.846 5.85m2 -2a6.967 6.967 0 0 0 1.152 -3.85",key:"svg-2"}],["path",{d:"M8 21l8 0",key:"svg-3"}],["path",{d:"M12 17l0 4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yT=zi("outline","microphone","IconMicrophone",[["path",{d:"M9 2m0 3a3 3 0 0 1 3 -3h0a3 3 0 0 1 3 3v5a3 3 0 0 1 -3 3h0a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M5 10a7 7 0 0 0 14 0",key:"svg-1"}],["path",{d:"M8 21l8 0",key:"svg-2"}],["path",{d:"M12 17l0 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gD=zi("outline","phone-call","IconPhoneCall",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M15 7a2 2 0 0 1 2 2",key:"svg-1"}],["path",{d:"M15 3a6 6 0 0 1 6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mD=zi("outline","phone-pause","IconPhonePause",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M20 3l0 4",key:"svg-1"}],["path",{d:"M16 3l0 4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vD=zi("outline","phone-x","IconPhoneX",[["path",{d:"M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M16 4l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yD=zi("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ED=zi("outline","volume-off","IconVolumeOff",[["path",{d:"M15 8a5 5 0 0 1 1.912 4.934m-1.377 2.602a5 5 0 0 1 -.535 .464",key:"svg-0"}],["path",{d:"M17.7 5a9 9 0 0 1 2.362 11.086m-1.676 2.299a9 9 0 0 1 -.686 .615",key:"svg-1"}],["path",{d:"M9.069 5.054l.431 -.554a.8 .8 0 0 1 1.5 .5v2m0 4v8a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l1.294 -1.664",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.1.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ET=zi("outline","volume","IconVolume",[["path",{d:"M15 8a5 5 0 0 1 0 8",key:"svg-0"}],["path",{d:"M17.7 5a9 9 0 0 1 0 14",key:"svg-1"}],["path",{d:"M6 15h-2a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h2l3.5 -4.5a.8 .8 0 0 1 1.5 .5v14a.8 .8 0 0 1 -1.5 .5l-3.5 -4.5",key:"svg-2"}]]);const CD=()=>{const{client:e}=Kc(),[t,r]=S.useState([]);return S.useEffect(()=>{const n=()=>{if(e){const s=e.getSessions();s.forEach(o=>{var a;o.on("statusUpdate",()=>r(e.getSessions())),o.on("mute",()=>r(e.getSessions())),(a=o.localStream)==null||a.addEventListener("addtrack",()=>r(e.getSessions()))}),r(s)}},i=()=>{e&&r(e.getSessions())};return e&&(e.on("sessionAdded",n),e.on("sessionRemoved",i)),()=>{e&&(e.removeListener("sessionAdded",n),e.removeListener("sessionRemoved",i))}},[e]),t},SD=e=>{const[t,r]=S.useState(0);return S.useEffect(()=>{const n=i=>{r(i)};return e.on("duration",n),()=>{e.removeListener("duration",n)}},[]),t},wD=e=>{const[t,r]=S.useState(e.media.input.muted),[n,i]=S.useState(e.media.output.muted),[s,o]=S.useState(e.media.output.volume),[a,l]=S.useState(e.media.input.volume);return S.useEffect(()=>(e.media.on("outputMuted",i),e.media.on("inputMuted",r),e.media.on("outputVolume",o),e.media.on("inputVolume",l),()=>{e.media.removeListener("inputMuted",r),e.media.removeListener("outputMuted",i),e.media.removeListener("outputVolume",o),e.media.removeListener("inputVolume",l)}),[]),{output:{muted:n,volume:s},input:{muted:t,volume:a}}};function bD(){const[e,t]=S.useState([]);return S.useEffect(()=>{var n;const r=()=>{var i;return(i=navigator.mediaDevices)==null?void 0:i.enumerateDevices().then(s=>t(s))};return(n=navigator.mediaDevices)==null||n.addEventListener("devicechange",r),r(),()=>{var i;(i=navigator.mediaDevices)==null||i.removeEventListener("devicechange",r)}},[]),{audioInputDevices:e.filter(r=>r.kind==="audioinput"),videoInputDevices:e.filter(r=>r.kind==="videoinput"),audioOutputDevices:e.filter(r=>r.kind==="audiooutput")}}class TD{constructor(t,r,n){Us(this,"audio",null);Us(this,"canvas",null);Us(this,"canvasContext",null);Us(this,"analyser",null);Us(this,"animationFrame",0);Us(this,"color","#efefef");this.animationFrame=0,this.audio=t,n&&(this.color=n),this.canvas=r,this.canvas&&(this.canvasContext=this.canvas.getContext("2d"))}init(){const t=new(window.AudioContext||window.webkitAudioContext);this.analyser=t.createAnalyser(),this.analyser.fftSize=512,this.analyser.minDecibels=-90,this.analyser.maxDecibels=-10,this.analyser.smoothingTimeConstant=.85,this.audio&&t.createMediaStreamSource(this.audio).connect(this.analyser)}play(){this.analyser||this.init(),this.animate()}pause(){cancelAnimationFrame(this.animationFrame)}animate(){this.animationFrame=requestAnimationFrame(()=>this.animate()),this.onFrame()}onFrame(){if(this.analyser&&this.canvasContext&&this.canvas){const t=new Uint8Array(this.analyser.frequencyBinCount),r=this.canvasContext.createLinearGradient(0,0,0,this.canvas.height||64);r.addColorStop(0,this.color),r.addColorStop(1,this.color),this.analyser.getByteFrequencyData(t),this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height);const n=this.canvas.width/t.length*10;let i=0,s=0;const o=2;for(let a=0;a<t.length;a++)this.canvasContext.fillStyle=r,i=t[a]/(this.canvas.height-20),this.canvasContext.beginPath(),this.canvasContext.roundRect(s,this.canvas.height/2,n,i,[0,0,3,3]),this.canvasContext.fill(),this.canvasContext.fillRect(s,this.canvas.height/2,n,1),this.canvasContext.beginPath(),this.canvasContext.roundRect(s,this.canvas.height/2-i,n,i,[3,3,0,0]),this.canvasContext.fill(),s+=n+o}}}const V2=({mediaStream:e,type:t})=>{const r=A.useRef(null),[n,i]=A.useState(),o=qn().colors.gray[4];return S.useEffect(()=>{const a=()=>{if(e&&r.current){const c=new TD(e,r.current,o);i(c),c.play()}},l=()=>{e&&i(c=>{c==null||c.pause()})};return e&&(e.addEventListener("addtrack",a),e.addEventListener("removetrack",l)),()=>{e==null||e.removeEventListener("addtrack",a),e==null||e.removeEventListener("removetrack",l)}},[e]),S.useEffect(()=>()=>{n==null||n.pause()},[n]),te.jsxs($i,{gap:5,children:[t==="local"?te.jsx(yT,{size:16,color:o}):te.jsx(ET,{size:16,color:o}),te.jsx("canvas",{ref:r,width:50,height:35})]})};mT.extend(dD);const ID=({session:e})=>{const t=SD(e);return te.jsx(te.Fragment,{children:mT.duration(t*1e3).format("mm:ss")})},RD=({session:e})=>{const t=Cb({initialValues:{dtmf:""}});return te.jsxs($i,{children:[te.jsx(Ti,{size:"xs",placeholder:"send dtmf example: 1",...t.getInputProps("dtmf")}),te.jsx(Li,{size:"xs",onClick:()=>{e.dtmf(t.values.dtmf)},children:"Send"})]})},q2=({session:e,media:t="output"})=>{const{output:{muted:r,volume:n},input:{muted:i,volume:s}}=wD(e);return te.jsxs(ye,{children:[te.jsx(O0,{min:0,max:1,step:.025,label:o=>`${o*100} %`,value:t==="output"?n:s,onChange:o=>{t==="output"?e.media.output.volume=o:t==="input"&&(e.media.input.volume=o)}}),te.jsx(kh,{size:"xs",mt:"xs",checked:t==="input"?i:r,label:t==="input"?"Mute mic":"Mute speaker",onChange:o=>{t==="input"&&(e.media.input.muted=o.currentTarget.checked),t==="output"&&(e.media.output.muted=o.currentTarget.checked)}})]})},AD=({session:e})=>{const t=bD();return te.jsxs(ye,{children:[te.jsx(Ec,{label:"Input device",size:"xs",onChange:async r=>{e.media.input.id=r||void 0},value:e.media.input.id,data:t.audioInputDevices.map(r=>({label:r.label,value:r.deviceId}))}),te.jsx(Ec,{label:"Output device",size:"xs",onChange:r=>{e.media.output.id=r||""},value:e.media.output.id,data:t.audioOutputDevices.map(r=>({label:r.label,value:r.deviceId}))})]})},kD=()=>{const e=CD();return te.jsx(ut.ScrollContainer,{minWidth:500,children:te.jsxs(ut,{verticalSpacing:"sm",children:[te.jsx(ut.Thead,{children:te.jsxs(ut.Tr,{children:[te.jsx(ut.Th,{children:"Phone Number"}),te.jsx(ut.Th,{children:"Source"}),te.jsx(ut.Th,{children:"Status"}),te.jsx(ut.Th,{children:"Visual"}),te.jsx(ut.Th,{children:"Duration"}),te.jsx(ut.Th,{children:"Action"})]})}),te.jsx(ut.Tbody,{children:e.map(t=>te.jsxs(ut.Tr,{children:[te.jsx(ut.Td,{children:t.remoteIdentity.phoneNumber}),te.jsx(ut.Td,{children:t.isIncoming?"Incoming":"Outgoing"}),te.jsx(ut.Td,{children:te.jsx(Hc,{color:"gray",variant:"light",children:t.status})}),te.jsx(ut.Td,{children:te.jsxs($i,{children:[te.jsx(V2,{mediaStream:t.media.localStream,type:"local"}),te.jsx(V2,{mediaStream:t.media.remoteStream,type:"remote"})]})}),te.jsx(ut.Td,{children:te.jsx(ID,{session:t})}),te.jsxs(ut.Td,{children:[te.jsxs(Ht,{width:350,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ti,{variant:"outline",radius:"lg",children:te.jsx(yD,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(AD,{session:t})})]})," ",te.jsxs(Ht,{width:300,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ti,{variant:"outline",radius:"lg",children:te.jsx(fD,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(RD,{session:t})})]})," ",te.jsxs(Ht,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ti,{variant:"outline",radius:"lg",children:t.media.output.muted?te.jsx(ED,{size:15}):te.jsx(ET,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(q2,{session:t,media:"output"})})]})," ",te.jsxs(Ht,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[te.jsx(Ht.Target,{children:te.jsx(ti,{color:"blue",radius:"lg",variant:"outline",disabled:t.status===Pt.RINGING,children:t.media.input.muted?te.jsx(pD,{size:15}):te.jsx(yT,{size:15})})}),te.jsx(Ht.Dropdown,{children:te.jsx(q2,{session:t,media:"input"})})]})," ",te.jsx(ti,{color:"blue",radius:"lg",variant:"outline",disabled:t.status===Pt.RINGING,onClick:()=>t.status!==Pt.ON_HOLD?t.hold():t.unhold(),children:t.status===Pt.ON_HOLD?te.jsx(gD,{size:15}):te.jsx(mD,{size:15})})," ",te.jsx(ti,{size:"lg",color:"red",radius:"lg",onClick:()=>{t.status===Pt.RINGING&&!t.isIncoming?t.cancel():t.status===Pt.ACTIVE||t.status===Pt.ON_HOLD?t.bye():t.isIncoming&&t.status===Pt.RINGING&&t.reject()},children:te.jsx(vD,{size:15})})]})]},t.id))})]})})},xD=()=>{const{client:e}=Kc(),[t,r]=S.useState();return S.useEffect(()=>{const n=i=>{switch(i){case ci.CONNECTED:r(e==null?void 0:e.account);break;default:r(void 0);break}};return e&&e.on("status",n),()=>{e&&e.removeListener("status",n)}},[e]),t};function z2(){const{client:e}=Kc(),t=xD(),r=S.useRef(null);return te.jsxs(D0,{mt:"lg",size:"lg",children:[te.jsx(Hd,{order:4,children:"Example demo sdk"}),te.jsxs(ka,{mt:"md",children:[te.jsx(ka.Col,{span:3,children:te.jsx(aD,{})}),te.jsxs(ka.Col,{span:9,children:[te.jsxs($i,{children:[te.jsx(Ud,{children:"Status"}),te.jsx(lD,{}),te.jsx(Ud,{children:"Account: "}),te.jsx(Hc,{color:"gray",children:(t==null?void 0:t.user)||"No user connected"})]}),te.jsxs($i,{mt:"md",children:[te.jsx(Ti,{ref:r,placeholder:"sip:number@domain.com"}),te.jsx(Li,{onClick:()=>{r.current&&(e==null||e.invite(r.current.value,{earlyMedia:!0}).then(()=>{}))},children:"Dial"})]}),te.jsx(Hd,{order:4,mt:"md",mb:"md",children:"Sessions"}),te.jsx(kD,{})]})]})]})}const ND=Xx([{path:"/",element:te.jsx(z2,{})},{path:"/webphone-sdk-demo",element:te.jsx(z2,{})}]);function _D(){return te.jsx(oN,{router:ND})}const DD={};function PD(){return te.jsx(oD,{children:te.jsxs(DS,{theme:DD,children:[te.jsx(Vi,{}),te.jsx(Vk,{children:te.jsx(_D,{})})]})})}gp.createRoot(document.getElementById("root")).render(te.jsx(PD,{}));
